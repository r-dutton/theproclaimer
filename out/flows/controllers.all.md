[web] GET /api/v2/reports/{id:guid}/details  (Sample.ReportsApi.Controllers.ReportsController.GetDetails)  [L10–L15]

[web] POST /api/reports  (Sample.Web.Controllers.ReportsController.CreateDetailedReport)  [L56–L76]
  └─ maps_to CreateDetailedReportCommand (var command) [L70]
    └─ converts_to Report [L14]
    └─ handled_by Sample.App.Handlers.CreateDetailedReportHandler.Handle [L27–L32]
      └─ calls ReportRepository.CreateDetailedAsync [L29]
        └─ maps_to Report [L22]
          └─ automapper.registration ReportProfile (CreateDetailedReportCommand->Report) [L14]
          └─ converts_to ReportDto [L20]
          └─ converts_to ReportSummaryDto [L23]
        └─ writes_to Report [L31]
          └─ reads_from Reports
          └─ writes_to Reports [L31]
      └─ maps_to ReportDto [L32]
      └─ uses_cache MemoryCache.Remove [write] (key=report:{*}) [L44]
      └─ uses_options ReportRetentionOptions (Retention) [L68]
      └─ uses_service IReportPublisher (AddScoped) [L33]
      └─ uses_service IReportRepository (AddScoped) [L34]
      └─ uses_service IReportAuditRepository (AddScoped) [L35]
      └─ publishes ReportPublisher [L30]
      └─ publishes_notification ReportGeneratedNotification [L31]
        └─ handled_by Sample.App.Notifications.ReportGeneratedHandler.Handle [L18–L22]
          └─ uses_service IReportAuditRepository (AddScoped) [L35]
          └─ calls ReportAuditRepository.RecordAsync [L20]
            └─ maps_to ReportAudit [L22]
              └─ automapper.registration ReportProfile (ReportGeneratedNotification->ReportAudit) [L26]
            └─ writes_to ReportAudit [L25]
              └─ writes_to ReportAudits [L25]
  └─ casts_to CreateDetailedReportDto (var specialized) [L59] [as]
    └─ converts_to CreateDetailedReportCommand [L12]
  └─ uses_client ReportsClient [L72]
    └─ calls GetDetails (GET /api/v2/reports/{*}/details, base=https://localhost:6001, config=Downstream:Reports:BaseUrl, target=ReportsApi) [L30]
    └─ calls MapGet (GET /api/reports/{*}, base=https://localhost:6001, config=Downstream:Reports:BaseUrl, target=ReportsApi) [L17]
    └─ calls MapPost (POST /api/reports/search, base=https://localhost:6001, config=Downstream:Reports:BaseUrl, target=ReportsApi) [L22]
  └─ uses_validator ReportDtoValidator (ReportDto) [L74]

[web] GET /api/reports/{id:guid}  (Sample.Web.Controllers.ReportsController.GetReport)  [L29–L35]
  └─ maps_to GetReportQuery [L32]
    └─ handled_by Sample.App.Handlers.GetReportHandler.Handle [L43–L78]
      └─ uses_cache MemoryCache.GetOrCreateAsync [read_write] (key=report:{*}) [L50]
      └─ uses_options ReportRetentionOptions (Retention) [L45]
      └─ maps_to ReportDto [L59]
      └─ uses_service IReportPublisher (AddScoped) [L33]
      └─ uses_service ReportsDbContext (AddDbContext) [L30]
      └─ publishes ReportPublisher [L65]
  └─ uses_validator ReportDtoValidator (ReportDto) [L33]

[web] GET /api/reports/{id:guid}/summary  (Sample.Web.Controllers.ReportsController.GetReportSummary)  [L37–L47]
  └─ uses_client ReportsClient [L40]
    └─ calls GetDetails (GET /api/v2/reports/{*}/details, base=https://localhost:6001, config=Downstream:Reports:BaseUrl, target=ReportsApi) [L30]
    └─ calls MapGet (GET /api/reports/{*}, base=https://localhost:6001, config=Downstream:Reports:BaseUrl, target=ReportsApi) [L17]
    └─ calls MapPost (POST /api/reports/search, base=https://localhost:6001, config=Downstream:Reports:BaseUrl, target=ReportsApi) [L22]

[web] GET /api/reports/tenant/{tenantId}  (Sample.Web.Controllers.ReportsController.SearchTenantReports)  [L49–L54]
  └─ uses_client ReportsClient [L52]
    └─ calls GetDetails (GET /api/v2/reports/{*}/details, base=https://localhost:6001, config=Downstream:Reports:BaseUrl, target=ReportsApi) [L30]
    └─ calls MapGet (GET /api/reports/{*}, base=https://localhost:6001, config=Downstream:Reports:BaseUrl, target=ReportsApi) [L17]
    └─ calls MapPost (POST /api/reports/search, base=https://localhost:6001, config=Downstream:Reports:BaseUrl, target=ReportsApi) [L22]
