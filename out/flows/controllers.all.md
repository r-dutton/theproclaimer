[web] POST /api/accounting/assets/assets/bulk  (Cirrus.Api.Controllers.Accounting.Assets.AssetController.BulkCreate)  [L117–L125] status=201 [auth=user]
  └─ sends_request CreateBulkAssetsCommand [L122]
    └─ handled_by Cirrus.ApplicationService.Accounting.Commands.Assets.CreateBulkAssetsCommandHandler.Handle [L34–L73]
      └─ uses_service IControlledRepository<Asset>
        └─ method Add [L61]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<AssetGroup>
        └─ method WriteQuery [L50]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L53]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)
  └─ sends_request CanIAccessFileQuery [L120]
    └─ handled_by Cirrus.ApplicationService.Firm.Queries.CanIAccessFileQueryHandler.Handle [L43–L101]
      └─ uses_service IRequestInfoService (AddScoped)
        └─ method IsValidServiceAccountRequest [L66]
          └─ implementation IRequestInfoService.IsValidServiceAccountRequest [L20-L20]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L90]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)
      └─ uses_service ITenantService (AddScoped)
        └─ method GetCurrentTenant [L68]
          └─ implementation ITenantService.GetCurrentTenant [L14-L14]
          └─ ... (no implementation details available)
      └─ uses_service IUserService (InstancePerLifetimeScope)
        └─ method GetUserId [L68]
          └─ implementation IUserService.GetUserId [L18-L18]
          └─ ... (no implementation details available)
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L79]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L71]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L68]

[web] PUT /api/accounting/assets/assets/calculate  (Cirrus.Api.Controllers.Accounting.Assets.AssetController.Calculate)  [L130–L144] status=200 [auth=user]
  └─ maps_to AssetDto [L143]
  └─ calls AssetGroupRepository.ReadQuery [L133]
  └─ calls AssetRepository.WriteQuery [L139]
  └─ write Asset [L139]
    └─ reads_from Assets
  └─ query AssetGroup [L133]
    └─ reads_from AssetGroups
  └─ uses_service IControlledRepository<Asset>
    └─ method WriteQuery [L139]
      └─ ... (no implementation details available)
  └─ uses_service IControlledRepository<AssetGroup>
    └─ method ReadQuery [L133]
      └─ ... (no implementation details available)
  └─ uses_service IMapper
    └─ method Map [L143]
      └─ ... (no implementation details available)
  └─ sends_request GetAssetsSettingsQuery [L135]
    └─ handled_by Cirrus.ApplicationService.Accounting.Queries.GetAssetsSettingsQueryHandler.Handle [L25–L45]
      └─ uses_service IControlledRepository<DepreciationYear>
        └─ method ReadQuery [L37]
          └─ ... (no implementation details available)
  └─ sends_request CanIAccessFileQuery [L134]
    └─ handled_by Cirrus.ApplicationService.Firm.Queries.CanIAccessFileQueryHandler.Handle [L43–L101]
      └─ uses_service IRequestInfoService (AddScoped)
        └─ method IsValidServiceAccountRequest [L66]
          └─ implementation IRequestInfoService.IsValidServiceAccountRequest [L20-L20]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L90]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)
      └─ uses_service ITenantService (AddScoped)
        └─ method GetCurrentTenant [L68]
          └─ implementation ITenantService.GetCurrentTenant [L14-L14]
          └─ ... (no implementation details available)
      └─ uses_service IUserService (InstancePerLifetimeScope)
        └─ method GetUserId [L68]
          └─ implementation IUserService.GetUserId [L18-L18]
          └─ ... (no implementation details available)
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L79]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L71]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L68]

[web] POST /api/accounting/assets/assets/  (Cirrus.Api.Controllers.Accounting.Assets.AssetController.Create)  [L98–L111] status=201 [auth=user]
  └─ calls AssetGroupRepository.WriteQuery [L102]
  └─ calls AssetRepository.Add [L108]
  └─ insert Asset [L108]
    └─ reads_from Assets
  └─ write AssetGroup [L102]
    └─ reads_from AssetGroups
  └─ uses_service IControlledRepository<Asset>
    └─ method Add [L108]
      └─ ... (no implementation details available)
  └─ uses_service IControlledRepository<AssetGroup>
    └─ method WriteQuery [L102]
      └─ ... (no implementation details available)
  └─ sends_request GetAssetsSettingsQuery [L105]
    └─ handled_by Cirrus.ApplicationService.Accounting.Queries.GetAssetsSettingsQueryHandler.Handle [L25–L45]
      └─ uses_service IControlledRepository<DepreciationYear>
        └─ method ReadQuery [L37]
          └─ ... (no implementation details available)
  └─ sends_request CanIAccessFileQuery [L103]
    └─ handled_by Cirrus.ApplicationService.Firm.Queries.CanIAccessFileQueryHandler.Handle [L43–L101]
      └─ uses_service IRequestInfoService (AddScoped)
        └─ method IsValidServiceAccountRequest [L66]
          └─ implementation IRequestInfoService.IsValidServiceAccountRequest [L20-L20]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L90]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)
      └─ uses_service ITenantService (AddScoped)
        └─ method GetCurrentTenant [L68]
          └─ implementation ITenantService.GetCurrentTenant [L14-L14]
          └─ ... (no implementation details available)
      └─ uses_service IUserService (InstancePerLifetimeScope)
        └─ method GetUserId [L68]
          └─ implementation IUserService.GetUserId [L18-L18]
          └─ ... (no implementation details available)
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L79]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L71]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L68]

[web] DELETE /api/accounting/assets/assets/  (Cirrus.Api.Controllers.Accounting.Assets.AssetController.Delete)  [L188–L222] status=200 [auth=user]
  └─ calls AssetRepository.WriteQuery [L191]
  └─ write Asset [L191]
    └─ reads_from Assets
  └─ uses_service IControlledRepository<Asset>
    └─ method WriteQuery [L191]
      └─ ... (no implementation details available)
  └─ sends_request GetAssetsSettingsQuery [L203]
    └─ handled_by Cirrus.ApplicationService.Accounting.Queries.GetAssetsSettingsQueryHandler.Handle [L25–L45]
      └─ uses_service IControlledRepository<DepreciationYear>
        └─ method ReadQuery [L37]
          └─ ... (no implementation details available)
  └─ sends_request CanIAccessFileQuery [L204]
    └─ handled_by Cirrus.ApplicationService.Firm.Queries.CanIAccessFileQueryHandler.Handle [L43–L101]
      └─ uses_service IRequestInfoService (AddScoped)
        └─ method IsValidServiceAccountRequest [L66]
          └─ implementation IRequestInfoService.IsValidServiceAccountRequest [L20-L20]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L90]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)
      └─ uses_service ITenantService (AddScoped)
        └─ method GetCurrentTenant [L68]
          └─ implementation ITenantService.GetCurrentTenant [L14-L14]
          └─ ... (no implementation details available)
      └─ uses_service IUserService (InstancePerLifetimeScope)
        └─ method GetUserId [L68]
          └─ implementation IUserService.GetUserId [L18-L18]
          └─ ... (no implementation details available)
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L79]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L71]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L68]

[web] GET /api/accounting/assets/assets/  (Cirrus.Api.Controllers.Accounting.Assets.AssetController.Get)  [L60–L92] status=200 [auth=user]
  └─ calls AssetRepository.ReadQuery [L71]
  └─ calls DepreciationRecordRepository.ReadQuery [L78]
  └─ query Asset [L71]
    └─ reads_from Assets
  └─ query DepreciationRecord [L78]
    └─ reads_from DepreciationRecords
  └─ uses_service IControlledRepository<Asset>
    └─ method ReadQuery [L71]
      └─ ... (no implementation details available)
  └─ uses_service IControlledRepository<DepreciationRecord>
    └─ method ReadQuery [L78]
      └─ ... (no implementation details available)
  └─ sends_request CanIAccessFileQuery [L69]
    └─ handled_by Cirrus.ApplicationService.Firm.Queries.CanIAccessFileQueryHandler.Handle [L43–L101]
      └─ uses_service IRequestInfoService (AddScoped)
        └─ method IsValidServiceAccountRequest [L66]
          └─ implementation IRequestInfoService.IsValidServiceAccountRequest [L20-L20]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L90]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)
      └─ uses_service ITenantService (AddScoped)
        └─ method GetCurrentTenant [L68]
          └─ implementation ITenantService.GetCurrentTenant [L14-L14]
          └─ ... (no implementation details available)
      └─ uses_service IUserService (InstancePerLifetimeScope)
        └─ method GetUserId [L68]
          └─ implementation IUserService.GetUserId [L18-L18]
          └─ ... (no implementation details available)
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L79]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L71]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L68]

[web] PUT /api/accounting/assets/assets/move  (Cirrus.Api.Controllers.Accounting.Assets.AssetController.Update)  [L165–L170] status=200 [auth=user]
  └─ sends_request MoveAssetsToNewAssetGroupCommand [L168]
    └─ handled_by Cirrus.ApplicationService.Accounting.Commands.Assets.MoveAssetsToNewAssetGroupCommandHandler.Handle [L26–L71]
      └─ uses_service IControlledRepository<Asset>
        └─ method OptimisedWriteQuery [L48]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<AssetGroup>
        └─ method ReadQuery [L64]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L61]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)

[web] PUT /api/accounting/assets/dispose/  (Cirrus.Api.Controllers.Accounting.Assets.AssetDisposalController.BulkDispose)  [L46–L53] status=200 [auth=user]
  └─ sends_request BulkDisposalCommand [L51]
    └─ handled_by Cirrus.ApplicationService.Accounting.Commands.Assets.BulkDisposalCommandHandler.Handle [L38–L150]
      └─ uses_service IControlledRepository<Asset>
        └─ method ReadQuery [L68]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<DepreciationRecord>
        └─ method ReadQuery [L109]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L93]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)
  └─ sends_request CanIAccessFileQuery [L50]
    └─ handled_by Cirrus.ApplicationService.Firm.Queries.CanIAccessFileQueryHandler.Handle [L43–L101]
      └─ uses_service IRequestInfoService (AddScoped)
        └─ method IsValidServiceAccountRequest [L66]
          └─ implementation IRequestInfoService.IsValidServiceAccountRequest [L20-L20]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L90]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)
      └─ uses_service ITenantService (AddScoped)
        └─ method GetCurrentTenant [L68]
          └─ implementation ITenantService.GetCurrentTenant [L14-L14]
          └─ ... (no implementation details available)
      └─ uses_service IUserService (InstancePerLifetimeScope)
        └─ method GetUserId [L68]
          └─ implementation IUserService.GetUserId [L18-L18]
          └─ ... (no implementation details available)
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L79]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L71]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L68]

[web] PUT /api/accounting/assets/dispose/simulate  (Cirrus.Api.Controllers.Accounting.Assets.AssetDisposalController.GetDisposalValues)  [L31–L41] status=200 [auth=user]
  └─ sends_request BulkDisposalCommand [L40]
    └─ handled_by Cirrus.ApplicationService.Accounting.Commands.Assets.BulkDisposalCommandHandler.Handle [L38–L150]
      └─ uses_service IControlledRepository<Asset>
        └─ method ReadQuery [L68]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<DepreciationRecord>
        └─ method ReadQuery [L109]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L93]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)
  └─ sends_request CanIAccessFileQuery [L39]
    └─ handled_by Cirrus.ApplicationService.Firm.Queries.CanIAccessFileQueryHandler.Handle [L43–L101]
      └─ uses_service IRequestInfoService (AddScoped)
        └─ method IsValidServiceAccountRequest [L66]
          └─ implementation IRequestInfoService.IsValidServiceAccountRequest [L20-L20]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L90]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)
      └─ uses_service ITenantService (AddScoped)
        └─ method GetCurrentTenant [L68]
          └─ implementation ITenantService.GetCurrentTenant [L14-L14]
          └─ ... (no implementation details available)
      └─ uses_service IUserService (InstancePerLifetimeScope)
        └─ method GetUserId [L68]
          └─ implementation IUserService.GetUserId [L18-L18]
          └─ ... (no implementation details available)
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L79]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L71]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L68]

[web] POST /api/accounting/assets/asset-groups/  (Cirrus.Api.Controllers.Accounting.Assets.AssetGroupController.Create)  [L68–L82] status=201 [auth=user]
  └─ calls AssetGroupRepository.Add [L79]
  └─ calls AssetGroupRepository.WriteQuery [L73]
  └─ insert AssetGroup [L79]
    └─ reads_from AssetGroups
  └─ write AssetGroup [L73]
    └─ reads_from AssetGroups
  └─ uses_service IControlledRepository<AssetGroup>
    └─ method WriteQuery [L73]
      └─ ... (no implementation details available)
  └─ sends_request CanIAccessFileQuery [L72]
    └─ handled_by Cirrus.ApplicationService.Firm.Queries.CanIAccessFileQueryHandler.Handle [L43–L101]
      └─ uses_service IRequestInfoService (AddScoped)
        └─ method IsValidServiceAccountRequest [L66]
          └─ implementation IRequestInfoService.IsValidServiceAccountRequest [L20-L20]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L90]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)
      └─ uses_service ITenantService (AddScoped)
        └─ method GetCurrentTenant [L68]
          └─ implementation ITenantService.GetCurrentTenant [L14-L14]
          └─ ... (no implementation details available)
      └─ uses_service IUserService (InstancePerLifetimeScope)
        └─ method GetUserId [L68]
          └─ implementation IUserService.GetUserId [L18-L18]
          └─ ... (no implementation details available)
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L79]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L71]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L68]

[web] DELETE /api/accounting/assets/asset-groups/{id}  (Cirrus.Api.Controllers.Accounting.Assets.AssetGroupController.Delete)  [L141–L150] status=200 [auth=user]
  └─ calls AssetGroupRepository.Remove [L147]
  └─ calls AssetGroupRepository.WriteQuery [L144]
  └─ delete AssetGroup [L147]
    └─ reads_from AssetGroups
  └─ write AssetGroup [L144]
    └─ reads_from AssetGroups
  └─ uses_service IControlledRepository<AssetGroup>
    └─ method WriteQuery [L144]
      └─ ... (no implementation details available)
  └─ sends_request CanIAccessFileQuery [L145]
    └─ handled_by Cirrus.ApplicationService.Firm.Queries.CanIAccessFileQueryHandler.Handle [L43–L101]
      └─ uses_service IRequestInfoService (AddScoped)
        └─ method IsValidServiceAccountRequest [L66]
          └─ implementation IRequestInfoService.IsValidServiceAccountRequest [L20-L20]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L90]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)
      └─ uses_service ITenantService (AddScoped)
        └─ method GetCurrentTenant [L68]
          └─ implementation ITenantService.GetCurrentTenant [L14-L14]
          └─ ... (no implementation details available)
      └─ uses_service IUserService (InstancePerLifetimeScope)
        └─ method GetUserId [L68]
          └─ implementation IUserService.GetUserId [L18-L18]
          └─ ... (no implementation details available)
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L79]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L71]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L68]

[web] GET /api/accounting/assets/asset-groups/{id}  (Cirrus.Api.Controllers.Accounting.Assets.AssetGroupController.Get)  [L41–L47] status=200 [auth=user]
  └─ maps_to AssetGroupDto [L44]
    └─ automapper.registration CirrusMappingProfile (AssetGroup->AssetGroupDto) [L874]
  └─ calls AssetGroupRepository.ReadQuery [L44]
  └─ query AssetGroup [L44]
    └─ reads_from AssetGroups
  └─ uses_service IControlledRepository<AssetGroup>
    └─ method ReadQuery [L44]
      └─ ... (no implementation details available)

[web] GET /api/accounting/assets/asset-groups/  (Cirrus.Api.Controllers.Accounting.Assets.AssetGroupController.GetAll)  [L53–L62] status=200 [auth=user]
  └─ maps_to AssetGroupDto [L57]
    └─ automapper.registration CirrusMappingProfile (AssetGroup->AssetGroupDto) [L874]
  └─ calls AssetGroupRepository.ReadQuery [L57]
  └─ query AssetGroup [L57]
    └─ reads_from AssetGroups
  └─ uses_service IControlledRepository<AssetGroup>
    └─ method ReadQuery [L57]
      └─ ... (no implementation details available)
  └─ sends_request CanIAccessFileQuery [L56]
    └─ handled_by Cirrus.ApplicationService.Firm.Queries.CanIAccessFileQueryHandler.Handle [L43–L101]
      └─ uses_service IRequestInfoService (AddScoped)
        └─ method IsValidServiceAccountRequest [L66]
          └─ implementation IRequestInfoService.IsValidServiceAccountRequest [L20-L20]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L90]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)
      └─ uses_service ITenantService (AddScoped)
        └─ method GetCurrentTenant [L68]
          └─ implementation ITenantService.GetCurrentTenant [L14-L14]
          └─ ... (no implementation details available)
      └─ uses_service IUserService (InstancePerLifetimeScope)
        └─ method GetUserId [L68]
          └─ implementation IUserService.GetUserId [L18-L18]
          └─ ... (no implementation details available)
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L79]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L71]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L68]

[web] GET /api/accounting/assets/asset-groups  (Cirrus.Api.Controllers.Accounting.Assets.AssetGroupController.MapSourceAccounts)  [L152–L172] status=200 [auth=user]
  └─ sends_request MapSourceAccountsCommand [L170]
    └─ handled_by Cirrus.ApplicationService.Accounting.Commands.MapSourceAccountsCommandHandler.Handle [L52–L259]
      └─ calls SourceAccountsCachedRepository.AddTrackedRange [L92]
      └─ calls SourceAccountsCachedRepository.InDatabaseOnly [L80]
      └─ calls SourceAccountsCachedRepository.InMemoryOnly [L72]
      └─ uses_service IControlledRepository<Source>
        └─ method WriteQuery [L151]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L123]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)

[web] PUT /api/accounting/assets/asset-groups/{id}/reorder  (Cirrus.Api.Controllers.Accounting.Assets.AssetGroupController.Reorder)  [L120–L136] status=200 [auth=user]
  └─ calls AssetGroupRepository.WriteQuery [L128]
  └─ calls AssetGroupRepository.ReadQuery [L123]
  └─ query AssetGroup [L123]
    └─ reads_from AssetGroups
  └─ write AssetGroup [L128]
    └─ reads_from AssetGroups
  └─ uses_service IControlledRepository<AssetGroup>
    └─ method ReadQuery [L123]
      └─ ... (no implementation details available)
  └─ sends_request CanIAccessFileQuery [L127]
    └─ handled_by Cirrus.ApplicationService.Firm.Queries.CanIAccessFileQueryHandler.Handle [L43–L101]
      └─ uses_service IRequestInfoService (AddScoped)
        └─ method IsValidServiceAccountRequest [L66]
          └─ implementation IRequestInfoService.IsValidServiceAccountRequest [L20-L20]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L90]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)
      └─ uses_service ITenantService (AddScoped)
        └─ method GetCurrentTenant [L68]
          └─ implementation ITenantService.GetCurrentTenant [L14-L14]
          └─ ... (no implementation details available)
      └─ uses_service IUserService (InstancePerLifetimeScope)
        └─ method GetUserId [L68]
          └─ implementation IUserService.GetUserId [L18-L18]
          └─ ... (no implementation details available)
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L79]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L71]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L68]

[web] PUT /api/accounting/assets/asset-groups/{id}  (Cirrus.Api.Controllers.Accounting.Assets.AssetGroupController.Update)  [L87–L111] status=200 [auth=user]
  └─ calls AssetGroupRepository.WriteQuery [L91]
  └─ write AssetGroup [L91]
    └─ reads_from AssetGroups
  └─ uses_service IControlledRepository<AssetGroup>
    └─ method WriteQuery [L91]
      └─ ... (no implementation details available)
  └─ sends_request MapSourceAccountsCommand [L106]
    └─ handled_by Cirrus.ApplicationService.Accounting.Commands.MapSourceAccountsCommandHandler.Handle [L52–L259]
      └─ calls SourceAccountsCachedRepository.AddTrackedRange [L92]
      └─ calls SourceAccountsCachedRepository.InDatabaseOnly [L80]
      └─ calls SourceAccountsCachedRepository.InMemoryOnly [L72]
      └─ uses_service IControlledRepository<Source>
        └─ method WriteQuery [L151]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L123]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)
  └─ sends_request CanIAccessFileQuery [L92]
    └─ handled_by Cirrus.ApplicationService.Firm.Queries.CanIAccessFileQueryHandler.Handle [L43–L101]
      └─ uses_service IRequestInfoService (AddScoped)
        └─ method IsValidServiceAccountRequest [L66]
          └─ implementation IRequestInfoService.IsValidServiceAccountRequest [L20-L20]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L90]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)
      └─ uses_service ITenantService (AddScoped)
        └─ method GetCurrentTenant [L68]
          └─ implementation ITenantService.GetCurrentTenant [L14-L14]
          └─ ... (no implementation details available)
      └─ uses_service IUserService (InstancePerLifetimeScope)
        └─ method GetUserId [L68]
          └─ implementation IUserService.GetUserId [L18-L18]
          └─ ... (no implementation details available)
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L79]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L71]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L68]

[web] POST /api/accounting/assets/import/prepare  (Cirrus.Api.Controllers.Accounting.Assets.AssetImportController.Import)  [L35–L40] status=201 [auth=user]
  └─ sends_request ImportAssetsFromExcelPrepareCommand [L38]

[web] GET /api/accounting/assets/pooling/manage  (Cirrus.Api.Controllers.Accounting.Assets.AssetPoolingController.GetPoolManageDetails)  [L29–L40] status=200 [auth=user]
  └─ sends_request CanIAccessFileQuery [L32]
    └─ handled_by Cirrus.ApplicationService.Firm.Queries.CanIAccessFileQueryHandler.Handle [L43–L101]
      └─ uses_service IRequestInfoService (AddScoped)
        └─ method IsValidServiceAccountRequest [L66]
          └─ implementation IRequestInfoService.IsValidServiceAccountRequest [L20-L20]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L90]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)
      └─ uses_service ITenantService (AddScoped)
        └─ method GetCurrentTenant [L68]
          └─ implementation ITenantService.GetCurrentTenant [L14-L14]
          └─ ... (no implementation details available)
      └─ uses_service IUserService (InstancePerLifetimeScope)
        └─ method GetUserId [L68]
          └─ implementation IUserService.GetUserId [L18-L18]
          └─ ... (no implementation details available)
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L79]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L71]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L68]

[web] PUT /api/accounting/assets/pooling/write-off  (Cirrus.Api.Controllers.Accounting.Assets.AssetPoolingController.SetPoolBalance)  [L45–L51] status=200 [auth=user]
  └─ sends_request WriteOffPoolBalanceCommand [L49]
    └─ handled_by Cirrus.ApplicationService.Accounting.Commands.Assets.WriteOffPoolBalanceCommandHandler.Handle [L34–L88]
      └─ uses_service IControlledRepository<Asset>
        └─ method OptimisedWriteQuery [L58]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<DepreciationRecord>
        └─ method WriteQuery [L75]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L73]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)
  └─ sends_request CanIAccessFileQuery [L48]
    └─ handled_by Cirrus.ApplicationService.Firm.Queries.CanIAccessFileQueryHandler.Handle [L43–L101]
      └─ uses_service IRequestInfoService (AddScoped)
        └─ method IsValidServiceAccountRequest [L66]
          └─ implementation IRequestInfoService.IsValidServiceAccountRequest [L20-L20]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L90]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)
      └─ uses_service ITenantService (AddScoped)
        └─ method GetCurrentTenant [L68]
          └─ implementation ITenantService.GetCurrentTenant [L14-L14]
          └─ ... (no implementation details available)
      └─ uses_service IUserService (InstancePerLifetimeScope)
        └─ method GetUserId [L68]
          └─ implementation IUserService.GetUserId [L18-L18]
          └─ ... (no implementation details available)
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L79]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L71]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L68]

[web] PUT /api/accounting/assets/pooling/allocate-to-pool  (Cirrus.Api.Controllers.Accounting.Assets.AssetPoolingController.Update)  [L56–L61] status=200 [auth=user]
  └─ sends_request AllocateAssetsToPoolCommand [L59]
    └─ handled_by Cirrus.ApplicationService.Accounting.Commands.Assets.AllocateAssetsToPoolCommandHandler.Handle [L29–L89]
      └─ uses_service IControlledRepository<Asset>
        └─ method OptimisedWriteQuery [L52]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<DepreciationRecord>
        └─ method WriteQuery [L78]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L72]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)

[web] GET /api/accounting/assets/reports/pool  (Cirrus.Api.Controllers.Accounting.Assets.AssetReportController.GetDetailReport)  [L153–L166] status=200 [auth=user]
  └─ sends_request CanIAccessFileQuery [L156]
    └─ handled_by Cirrus.ApplicationService.Firm.Queries.CanIAccessFileQueryHandler.Handle [L43–L101]
      └─ uses_service IRequestInfoService (AddScoped)
        └─ method IsValidServiceAccountRequest [L66]
          └─ implementation IRequestInfoService.IsValidServiceAccountRequest [L20-L20]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L90]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)
      └─ uses_service ITenantService (AddScoped)
        └─ method GetCurrentTenant [L68]
          └─ implementation ITenantService.GetCurrentTenant [L14-L14]
          └─ ... (no implementation details available)
      └─ uses_service IUserService (InstancePerLifetimeScope)
        └─ method GetUserId [L68]
          └─ implementation IUserService.GetUserId [L18-L18]
          └─ ... (no implementation details available)
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L79]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L71]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L68]

[web] GET /api/accounting/assets/reports/pool/download  (Cirrus.Api.Controllers.Accounting.Assets.AssetReportController.GetDetailReportExcel)  [L171–L177] status=200 [auth=user]
  └─ sends_request GetExportAssetReportQuery [L175]
    └─ handled_by Cirrus.ApplicationService.Accounting.Queries.Assets.GetExportAssetReportQueryHandler.Handle [L69–L147]
      └─ uses_service IControlledRepository<DepreciationYear>
        └─ method ReadQuery [L100]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<ReportPageType>
        └─ method ReadQuery [L99]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L89]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)

[web] GET /api/accounting/assets/reports/full-summary/fixed-assets-workpaper-report  (Cirrus.Api.Controllers.Accounting.Assets.AssetReportController.GetFixedAssetsWorkpaperReport)  [L70–L75] status=200 [auth=user]

[web] GET /api/accounting/assets/reports/full-summary  (Cirrus.Api.Controllers.Accounting.Assets.AssetReportController.GetFullSummaryReport)  [L52–L64] status=200 [auth=user]
  └─ sends_request CanIAccessFileQuery [L55]
    └─ handled_by Cirrus.ApplicationService.Firm.Queries.CanIAccessFileQueryHandler.Handle [L43–L101]
      └─ uses_service IRequestInfoService (AddScoped)
        └─ method IsValidServiceAccountRequest [L66]
          └─ implementation IRequestInfoService.IsValidServiceAccountRequest [L20-L20]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L90]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)
      └─ uses_service ITenantService (AddScoped)
        └─ method GetCurrentTenant [L68]
          └─ implementation ITenantService.GetCurrentTenant [L14-L14]
          └─ ... (no implementation details available)
      └─ uses_service IUserService (InstancePerLifetimeScope)
        └─ method GetUserId [L68]
          └─ implementation IUserService.GetUserId [L18-L18]
          └─ ... (no implementation details available)
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L79]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L71]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L68]

[web] GET /api/accounting/assets/reports/full-summary/download  (Cirrus.Api.Controllers.Accounting.Assets.AssetReportController.GetFullSummaryReportExcel)  [L80–L86] status=200 [auth=user]
  └─ sends_request GetExportAssetReportQuery [L84]
    └─ handled_by Cirrus.ApplicationService.Accounting.Queries.Assets.GetExportAssetReportQueryHandler.Handle [L69–L147]
      └─ uses_service IControlledRepository<DepreciationYear>
        └─ method ReadQuery [L100]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<ReportPageType>
        └─ method ReadQuery [L99]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L89]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)

[web] GET /api/accounting/assets/reports/monthly  (Cirrus.Api.Controllers.Accounting.Assets.AssetReportController.GetMonthlyDepreciationReport)  [L123–L137] status=200 [auth=user]
  └─ sends_request CanIAccessFileQuery [L126]
    └─ handled_by Cirrus.ApplicationService.Firm.Queries.CanIAccessFileQueryHandler.Handle [L43–L101]
      └─ uses_service IRequestInfoService (AddScoped)
        └─ method IsValidServiceAccountRequest [L66]
          └─ implementation IRequestInfoService.IsValidServiceAccountRequest [L20-L20]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L90]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)
      └─ uses_service ITenantService (AddScoped)
        └─ method GetCurrentTenant [L68]
          └─ implementation ITenantService.GetCurrentTenant [L14-L14]
          └─ ... (no implementation details available)
      └─ uses_service IUserService (InstancePerLifetimeScope)
        └─ method GetUserId [L68]
          └─ implementation IUserService.GetUserId [L18-L18]
          └─ ... (no implementation details available)
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L79]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L71]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L68]
  └─ sends_request GetMonthlyDepreciationQuery [L128]
    └─ handled_by Cirrus.ApplicationService.Accounting.Queries.Assets.GetMonthlyDepreciationQueryHandler.Handle [L19–L183]
      └─ uses_service GetDepreciationDetailForMonthlyQuery
        └─ method Execute [L37]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<DepreciationYear>
        └─ method ReadQuery [L38]
          └─ ... (no implementation details available)

[web] GET /api/accounting/assets/reports/monthly/download  (Cirrus.Api.Controllers.Accounting.Assets.AssetReportController.GetMonthlyDepreciationReportExcel)  [L142–L148] status=200 [auth=user]
  └─ sends_request GetExportAssetReportQuery [L146]
    └─ handled_by Cirrus.ApplicationService.Accounting.Queries.Assets.GetExportAssetReportQueryHandler.Handle [L69–L147]
      └─ uses_service IControlledRepository<DepreciationYear>
        └─ method ReadQuery [L100]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<ReportPageType>
        └─ method ReadQuery [L99]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L89]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)

[web] GET /api/accounting/assets/reports/tax-return/non-sbe  (Cirrus.Api.Controllers.Accounting.Assets.AssetReportController.GetTaxReturnReportNonSbe)  [L198–L209] status=200 [auth=user]
  └─ sends_request CanIAccessFileQuery [L201]
    └─ handled_by Cirrus.ApplicationService.Firm.Queries.CanIAccessFileQueryHandler.Handle [L43–L101]
      └─ uses_service IRequestInfoService (AddScoped)
        └─ method IsValidServiceAccountRequest [L66]
          └─ implementation IRequestInfoService.IsValidServiceAccountRequest [L20-L20]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L90]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)
      └─ uses_service ITenantService (AddScoped)
        └─ method GetCurrentTenant [L68]
          └─ implementation ITenantService.GetCurrentTenant [L14-L14]
          └─ ... (no implementation details available)
      └─ uses_service IUserService (InstancePerLifetimeScope)
        └─ method GetUserId [L68]
          └─ implementation IUserService.GetUserId [L18-L18]
          └─ ... (no implementation details available)
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L79]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L71]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L68]

[web] GET /api/accounting/assets/reports/tax-return/sbe  (Cirrus.Api.Controllers.Accounting.Assets.AssetReportController.GetTaxReturnReportSbe)  [L182–L193] status=200 [auth=user]
  └─ sends_request CanIAccessFileQuery [L185]
    └─ handled_by Cirrus.ApplicationService.Firm.Queries.CanIAccessFileQueryHandler.Handle [L43–L101]
      └─ uses_service IRequestInfoService (AddScoped)
        └─ method IsValidServiceAccountRequest [L66]
          └─ implementation IRequestInfoService.IsValidServiceAccountRequest [L20-L20]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L90]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)
      └─ uses_service ITenantService (AddScoped)
        └─ method GetCurrentTenant [L68]
          └─ implementation ITenantService.GetCurrentTenant [L14-L14]
          └─ ... (no implementation details available)
      └─ uses_service IUserService (InstancePerLifetimeScope)
        └─ method GetUserId [L68]
          └─ implementation IUserService.GetUserId [L18-L18]
          └─ ... (no implementation details available)
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L79]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L71]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L68]

[web] GET /api/accounting/assets/assets/{id}/split-info  (Cirrus.Api.Controllers.Accounting.Assets.AssetSplitController.GetSplitInfo)  [L39–L45] status=200 [auth=Authentication.UserPolicy]
  └─ maps_to AssetSplitInfoDto [L42]
    └─ automapper.registration CirrusMappingProfile (Asset->AssetSplitInfoDto) [L896]
  └─ calls AssetRepository.ReadQuery [L42]
  └─ query Asset [L42]
    └─ reads_from Assets
  └─ uses_service IControlledRepository<Asset>
    └─ method ReadQuery [L42]
      └─ ... (no implementation details available)

[web] POST /api/accounting/assets/assets/{id}/split  (Cirrus.Api.Controllers.Accounting.Assets.AssetSplitController.Split)  [L51–L55] status=201 [auth=Authentication.UserPolicy]
  └─ sends_request SplitAssetCommand [L54]
    └─ handled_by Cirrus.ApplicationService.Accounting.Commands.Assets.SplitAssetCommandHandler.Handle [L39–L376]
      └─ maps_to AssetModel [L230]
        └─ automapper.registration CirrusMappingProfile (Asset->AssetModel) [L879]
        └─ automapper.registration MigrationMappingProfile (Asset->AssetModel) [L223]
      └─ maps_to DepreciationRecordModel [L260]
      └─ maps_to DepreciationRecordModel [L244]
      └─ uses_service IControlledRepository<Asset>
        └─ method WriteQuery [L59]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<AssetGroup>
        └─ method WriteQuery [L60]
          └─ ... (no implementation details available)
      └─ uses_service IMapper
        └─ method Map [L230]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L62]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)

[web] PUT /api/accounting/assets/assets/{id}/unsplit  (Cirrus.Api.Controllers.Accounting.Assets.AssetSplitController.Unsplit)  [L61–L74] status=200 [auth=Authentication.UserPolicy]
  └─ calls AssetRepository.WriteQuery [L64]
  └─ write Asset [L64]
    └─ reads_from Assets
  └─ uses_service IControlledRepository<Asset>
    └─ method WriteQuery [L64]
      └─ ... (no implementation details available)
  └─ sends_request GetAssetsSettingsQuery [L71]
    └─ handled_by Cirrus.ApplicationService.Accounting.Queries.GetAssetsSettingsQueryHandler.Handle [L25–L45]
      └─ uses_service IControlledRepository<DepreciationYear>
        └─ method ReadQuery [L37]
          └─ ... (no implementation details available)
  └─ sends_request CanIAccessFileQuery [L70]
    └─ handled_by Cirrus.ApplicationService.Firm.Queries.CanIAccessFileQueryHandler.Handle [L43–L101]
      └─ uses_service IRequestInfoService (AddScoped)
        └─ method IsValidServiceAccountRequest [L66]
          └─ implementation IRequestInfoService.IsValidServiceAccountRequest [L20-L20]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L90]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)
      └─ uses_service ITenantService (AddScoped)
        └─ method GetCurrentTenant [L68]
          └─ implementation ITenantService.GetCurrentTenant [L14-L14]
          └─ ... (no implementation details available)
      └─ uses_service IUserService (InstancePerLifetimeScope)
        └─ method GetUserId [L68]
          └─ implementation IUserService.GetUserId [L18-L18]
          └─ ... (no implementation details available)
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L79]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L71]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L68]

[web] POST /api/accounting/assets/depreciation-years/  (Cirrus.Api.Controllers.Accounting.Assets.DepreciationYearController.Create)  [L72–L87] status=201 [auth=user]
  └─ calls DepreciationYearRepository.Add [L84]
  └─ calls DepreciationYearRepository.ReadQuery [L77]
  └─ insert DepreciationYear [L84]
    └─ reads_from DepreciationYears
  └─ query DepreciationYear [L77]
    └─ reads_from DepreciationYears
  └─ uses_service IControlledRepository<DepreciationYear>
    └─ method ReadQuery [L77]
      └─ ... (no implementation details available)
  └─ sends_request CanIAccessFileQuery [L75]
    └─ handled_by Cirrus.ApplicationService.Firm.Queries.CanIAccessFileQueryHandler.Handle [L43–L101]
      └─ uses_service IRequestInfoService (AddScoped)
        └─ method IsValidServiceAccountRequest [L66]
          └─ implementation IRequestInfoService.IsValidServiceAccountRequest [L20-L20]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L90]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)
      └─ uses_service ITenantService (AddScoped)
        └─ method GetCurrentTenant [L68]
          └─ implementation ITenantService.GetCurrentTenant [L14-L14]
          └─ ... (no implementation details available)
      └─ uses_service IUserService (InstancePerLifetimeScope)
        └─ method GetUserId [L68]
          └─ implementation IUserService.GetUserId [L18-L18]
          └─ ... (no implementation details available)
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L79]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L71]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L68]

[web] DELETE /api/accounting/assets/depreciation-years/{id}  (Cirrus.Api.Controllers.Accounting.Assets.DepreciationYearController.Delete)  [L107–L126] status=200 [auth=user]
  └─ calls DepreciationYearRepository.Remove [L123]
  └─ calls DepreciationYearRepository.ReadQuery [L116]
  └─ calls DepreciationYearRepository.WriteQuery [L110]
  └─ delete DepreciationYear [L123]
    └─ reads_from DepreciationYears
  └─ query DepreciationYear [L116]
    └─ reads_from DepreciationYears
  └─ write DepreciationYear [L110]
    └─ reads_from DepreciationYears
  └─ uses_service IControlledRepository<DepreciationYear>
    └─ method WriteQuery [L110]
      └─ ... (no implementation details available)
  └─ sends_request CanIAccessFileQuery [L114]
    └─ handled_by Cirrus.ApplicationService.Firm.Queries.CanIAccessFileQueryHandler.Handle [L43–L101]
      └─ uses_service IRequestInfoService (AddScoped)
        └─ method IsValidServiceAccountRequest [L66]
          └─ implementation IRequestInfoService.IsValidServiceAccountRequest [L20-L20]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L90]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)
      └─ uses_service ITenantService (AddScoped)
        └─ method GetCurrentTenant [L68]
          └─ implementation ITenantService.GetCurrentTenant [L14-L14]
          └─ ... (no implementation details available)
      └─ uses_service IUserService (InstancePerLifetimeScope)
        └─ method GetUserId [L68]
          └─ implementation IUserService.GetUserId [L18-L18]
          └─ ... (no implementation details available)
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L79]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L71]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L68]

[web] GET /api/accounting/assets/depreciation-years/{id}  (Cirrus.Api.Controllers.Accounting.Assets.DepreciationYearController.Get)  [L42–L48] status=200 [auth=user]
  └─ maps_to DepreciationYearDto [L45]
    └─ automapper.registration CirrusMappingProfile (DepreciationYear->DepreciationYearDto) [L871]
  └─ calls DepreciationYearRepository.ReadQuery [L45]
  └─ query DepreciationYear [L45]
    └─ reads_from DepreciationYears
  └─ uses_service IControlledRepository<DepreciationYear>
    └─ method ReadQuery [L45]
      └─ ... (no implementation details available)

[web] GET /api/accounting/assets/depreciation-years/  (Cirrus.Api.Controllers.Accounting.Assets.DepreciationYearController.GetAll)  [L54–L66] status=200 [auth=user]
  └─ maps_to DepreciationYearDto [L61]
    └─ automapper.registration CirrusMappingProfile (DepreciationYear->DepreciationYearDto) [L871]
  └─ calls DepreciationYearRepository.ReadQuery [L61]
  └─ query DepreciationYear [L61]
    └─ reads_from DepreciationYears
  └─ uses_service IControlledRepository<DepreciationYear>
    └─ method ReadQuery [L61]
      └─ ... (no implementation details available)
  └─ sends_request CanIAccessFileQuery [L60]
    └─ handled_by Cirrus.ApplicationService.Firm.Queries.CanIAccessFileQueryHandler.Handle [L43–L101]
      └─ uses_service IRequestInfoService (AddScoped)
        └─ method IsValidServiceAccountRequest [L66]
          └─ implementation IRequestInfoService.IsValidServiceAccountRequest [L20-L20]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L90]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)
      └─ uses_service ITenantService (AddScoped)
        └─ method GetCurrentTenant [L68]
          └─ implementation ITenantService.GetCurrentTenant [L14-L14]
          └─ ... (no implementation details available)
      └─ uses_service IUserService (InstancePerLifetimeScope)
        └─ method GetUserId [L68]
          └─ implementation IUserService.GetUserId [L18-L18]
          └─ ... (no implementation details available)
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L79]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L71]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L68]

[web] PUT /api/accounting/assets/depreciation-years/{id}  (Cirrus.Api.Controllers.Accounting.Assets.DepreciationYearController.Update)  [L92–L102] status=200 [auth=user]
  └─ calls DepreciationYearRepository.WriteQuery [L95]
  └─ write DepreciationYear [L95]
    └─ reads_from DepreciationYears
  └─ uses_service IControlledRepository<DepreciationYear>
    └─ method WriteQuery [L95]
      └─ ... (no implementation details available)

[web] DELETE /api/accounting/connections/{type}/disconnect  (Cirrus.Api.Controllers.Accounting.ConnectionsController.Disconnect)  [L69–L85] status=200 [auth=user]
  └─ uses_service ApiService (SingleInstance)
    └─ method GetFeatures [L72]
      └─ implementation Cirrus.ApplicationService.Accounting.Services.ApiService.GetFeatures [L14-L75]

[web] GET /api/accounting/connections/{type}/accountingFiles  (Cirrus.Api.Controllers.Accounting.ConnectionsController.GetAccountingFiles)  [L54–L58] status=200 [auth=user]
  └─ uses_service ApiService (SingleInstance)
    └─ method GetApiMethods [L57]
      └─ implementation Cirrus.ApplicationService.Accounting.Services.ApiService.GetApiMethods [L14-L75]

[web] GET /api/accounting/connections/{type}/authorisation-url  (Cirrus.Api.Controllers.Accounting.ConnectionsController.GetAuthorisationUrl)  [L37–L42] status=200 [auth=user]
  └─ uses_service ApiService (SingleInstance)
    └─ method GetApiMethods [L40]
      └─ implementation Cirrus.ApplicationService.Accounting.Services.ApiService.GetApiMethods [L14-L75]

[web] GET /api/accounting/connections/connection-summary  (Cirrus.Api.Controllers.Accounting.ConnectionsController.GetConnectionSummary)  [L31–L35] status=200 [auth=user]

[web] POST /api/accounting/connections/{type}/processCallback  (Cirrus.Api.Controllers.Accounting.ConnectionsController.ProcessCallback)  [L47–L52] status=201 [auth=user]
  └─ uses_service ApiService (SingleInstance)
    └─ method GetApiMethods [L50]
      └─ implementation Cirrus.ApplicationService.Accounting.Services.ApiService.GetApiMethods [L14-L75]

[web] POST /api/accounting/connections/{type}/test  (Cirrus.Api.Controllers.Accounting.ConnectionsController.TestConnection)  [L60–L64] status=201 [auth=user]
  └─ uses_service ApiService (SingleInstance)
    └─ method GetApiMethods [L63]
      └─ implementation Cirrus.ApplicationService.Accounting.Services.ApiService.GetApiMethods [L14-L75]

[web] POST /api/accounting/datasets/  (Cirrus.Api.Controllers.Accounting.DatasetsController.Create)  [L118–L127] status=201 [auth=user]
  └─ calls DatasetRepository.Add [L125]
  └─ insert Dataset [L125]
  └─ uses_service IControlledRepository<Dataset>
    └─ method Add [L125]
      └─ ... (no implementation details available)
  └─ sends_request CanIAccessFileQuery [L121]
    └─ handled_by Cirrus.ApplicationService.Firm.Queries.CanIAccessFileQueryHandler.Handle [L43–L101]
      └─ uses_service IRequestInfoService (AddScoped)
        └─ method IsValidServiceAccountRequest [L66]
          └─ implementation IRequestInfoService.IsValidServiceAccountRequest [L20-L20]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L90]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)
      └─ uses_service ITenantService (AddScoped)
        └─ method GetCurrentTenant [L68]
          └─ implementation ITenantService.GetCurrentTenant [L14-L14]
          └─ ... (no implementation details available)
      └─ uses_service IUserService (InstancePerLifetimeScope)
        └─ method GetUserId [L68]
          └─ implementation IUserService.GetUserId [L18-L18]
          └─ ... (no implementation details available)
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L79]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L71]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L68]

[web] DELETE /api/accounting/datasets/{id:Guid}  (Cirrus.Api.Controllers.Accounting.DatasetsController.Delete)  [L231–L239] status=200 [auth=user]
  └─ calls DatasetRepository.Remove [L237]
  └─ calls DatasetRepository.WriteQuery [L234]
  └─ delete Dataset [L237]
  └─ write Dataset [L234]
  └─ uses_service IControlledRepository<Dataset>
    └─ method WriteQuery [L234]
      └─ ... (no implementation details available)
  └─ sends_request CanIAccessDatasetQuery [L235]
    └─ handled_by Cirrus.ApplicationService.Accounting.Queries.CanIAccessDatasetQueryHandler.Handle [L58–L140]
      └─ uses_service IControlledRepository<Dataset>
        └─ method ReadQuery [L127]
          └─ ... (no implementation details available)
      └─ uses_service IRequestInfoService (AddScoped)
        └─ method IsValidServiceAccountRequest [L101]
          └─ implementation IRequestInfoService.IsValidServiceAccountRequest [L20-L20]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L129]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)
      └─ uses_service ITenantService (AddScoped)
        └─ method GetCurrentTenant [L88]
          └─ implementation ITenantService.GetCurrentTenant [L14-L14]
          └─ ... (no implementation details available)
      └─ uses_service IUserService (InstancePerLifetimeScope)
        └─ method GetUserId [L103]
          └─ implementation IUserService.GetUserId [L18-L18]
          └─ ... (no implementation details available)
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L116]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L106]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L103]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L90]
      └─ uses_cache IDistributedCache.CreateDatasetLockKey [write] [L88]

[web] GET /api/accounting/datasets/{id}/preview-rollover-journal  (Cirrus.Api.Controllers.Accounting.DatasetsController.DraftRollover)  [L196–L202] status=200 [auth=user]
  └─ calls DatasetRepository.ReadQuery [L199]
  └─ query Dataset [L199]
  └─ uses_service IControlledRepository<Dataset>
    └─ method ReadQuery [L199]
      └─ ... (no implementation details available)
  └─ sends_request DraftRolledOverOpeningBalances [L201]
  └─ sends_request CanIAccessDatasetQuery [L200]
    └─ handled_by Cirrus.ApplicationService.Accounting.Queries.CanIAccessDatasetQueryHandler.Handle [L58–L140]
      └─ uses_service IControlledRepository<Dataset>
        └─ method ReadQuery [L127]
          └─ ... (no implementation details available)
      └─ uses_service IRequestInfoService (AddScoped)
        └─ method IsValidServiceAccountRequest [L101]
          └─ implementation IRequestInfoService.IsValidServiceAccountRequest [L20-L20]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L129]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)
      └─ uses_service ITenantService (AddScoped)
        └─ method GetCurrentTenant [L88]
          └─ implementation ITenantService.GetCurrentTenant [L14-L14]
          └─ ... (no implementation details available)
      └─ uses_service IUserService (InstancePerLifetimeScope)
        └─ method GetUserId [L103]
          └─ implementation IUserService.GetUserId [L18-L18]
          └─ ... (no implementation details available)
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L116]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L106]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L103]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L90]
      └─ uses_cache IDistributedCache.CreateDatasetLockKey [write] [L88]

[web] GET /api/accounting/datasets/{id}  (Cirrus.Api.Controllers.Accounting.DatasetsController.Get)  [L51–L58] status=200 [auth=user]
  └─ maps_to DatasetDto [L55]
    └─ automapper.registration CirrusMappingProfile (Dataset->DatasetDto) [L202]
    └─ automapper.registration ExternalApiMappingProfile (Dataset->DatasetDto) [L64]
  └─ calls DatasetRepository.ReadQuery [L55]
  └─ query Dataset [L55]
  └─ uses_service IControlledRepository<Dataset>
    └─ method ReadQuery [L55]
      └─ ... (no implementation details available)
  └─ sends_request CanIAccessDatasetQuery [L54]
    └─ handled_by Cirrus.ApplicationService.Accounting.Queries.CanIAccessDatasetQueryHandler.Handle [L58–L140]
      └─ uses_service IControlledRepository<Dataset>
        └─ method ReadQuery [L127]
          └─ ... (no implementation details available)
      └─ uses_service IRequestInfoService (AddScoped)
        └─ method IsValidServiceAccountRequest [L101]
          └─ implementation IRequestInfoService.IsValidServiceAccountRequest [L20-L20]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L129]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)
      └─ uses_service ITenantService (AddScoped)
        └─ method GetCurrentTenant [L88]
          └─ implementation ITenantService.GetCurrentTenant [L14-L14]
          └─ ... (no implementation details available)
      └─ uses_service IUserService (InstancePerLifetimeScope)
        └─ method GetUserId [L103]
          └─ implementation IUserService.GetUserId [L18-L18]
          └─ ... (no implementation details available)
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L116]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L106]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L103]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L90]
      └─ uses_cache IDistributedCache.CreateDatasetLockKey [write] [L88]

[web] GET /api/accounting/datasets/{id}/api-features  (Cirrus.Api.Controllers.Accounting.DatasetsController.GetApiFeatures)  [L76–L84] status=200 [auth=user]
  └─ calls DatasetRepository.ReadQuery [L80]
  └─ query Dataset [L80]
  └─ uses_service ApiService (SingleInstance)
    └─ method GetFeatures [L83]
      └─ implementation Cirrus.ApplicationService.Accounting.Services.ApiService.GetFeatures [L14-L75]
  └─ uses_service IControlledRepository<Dataset>
    └─ method ReadQuery [L80]
      └─ ... (no implementation details available)
  └─ sends_request CanIAccessDatasetQuery [L79]
    └─ handled_by Cirrus.ApplicationService.Accounting.Queries.CanIAccessDatasetQueryHandler.Handle [L58–L140]
      └─ uses_service IControlledRepository<Dataset>
        └─ method ReadQuery [L127]
          └─ ... (no implementation details available)
      └─ uses_service IRequestInfoService (AddScoped)
        └─ method IsValidServiceAccountRequest [L101]
          └─ implementation IRequestInfoService.IsValidServiceAccountRequest [L20-L20]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L129]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)
      └─ uses_service ITenantService (AddScoped)
        └─ method GetCurrentTenant [L88]
          └─ implementation ITenantService.GetCurrentTenant [L14-L14]
          └─ ... (no implementation details available)
      └─ uses_service IUserService (InstancePerLifetimeScope)
        └─ method GetUserId [L103]
          └─ implementation IUserService.GetUserId [L18-L18]
          └─ ... (no implementation details available)
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L116]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L106]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L103]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L90]
      └─ uses_cache IDistributedCache.CreateDatasetLockKey [write] [L88]

[web] POST /api/accounting/datasets/{id}/excel-worksheets  (Cirrus.Api.Controllers.Accounting.DatasetsController.GetExcelWorksheets)  [L164–L172] status=201 [auth=user]
  └─ sends_request GetExcelWorksheetNamesCommand [L169]
    └─ handled_by Cirrus.ApplicationService.Accounting.Commands.GetExcelWorksheetNamesCommandHandler.Handle [L21–L55]
  └─ sends_request CanIAccessDatasetQuery [L167]
    └─ handled_by Cirrus.ApplicationService.Accounting.Queries.CanIAccessDatasetQueryHandler.Handle [L58–L140]
      └─ uses_service IControlledRepository<Dataset>
        └─ method ReadQuery [L127]
          └─ ... (no implementation details available)
      └─ uses_service IRequestInfoService (AddScoped)
        └─ method IsValidServiceAccountRequest [L101]
          └─ implementation IRequestInfoService.IsValidServiceAccountRequest [L20-L20]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L129]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)
      └─ uses_service ITenantService (AddScoped)
        └─ method GetCurrentTenant [L88]
          └─ implementation ITenantService.GetCurrentTenant [L14-L14]
          └─ ... (no implementation details available)
      └─ uses_service IUserService (InstancePerLifetimeScope)
        └─ method GetUserId [L103]
          └─ implementation IUserService.GetUserId [L18-L18]
          └─ ... (no implementation details available)
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L116]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L106]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L103]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L90]
      └─ uses_cache IDistributedCache.CreateDatasetLockKey [write] [L88]

[web] GET /api/accounting/datasets/forfile/{fileId:Guid}  (Cirrus.Api.Controllers.Accounting.DatasetsController.GetForFile)  [L90–L112] status=200 [auth=user]
  └─ maps_to DatasetLightDto [L100]
    └─ automapper.registration CirrusMappingProfile (Dataset->DatasetLightDto) [L204]
  └─ calls DatasetRepository.ReadQuery [L100]
  └─ query Dataset [L100]
  └─ uses_service IControlledRepository<Dataset>
    └─ method ReadQuery [L100]
      └─ ... (no implementation details available)
  └─ sends_request CanIAccessFileQuery [L99]
    └─ handled_by Cirrus.ApplicationService.Firm.Queries.CanIAccessFileQueryHandler.Handle [L43–L101]
      └─ uses_service IRequestInfoService (AddScoped)
        └─ method IsValidServiceAccountRequest [L66]
          └─ implementation IRequestInfoService.IsValidServiceAccountRequest [L20-L20]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L90]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)
      └─ uses_service ITenantService (AddScoped)
        └─ method GetCurrentTenant [L68]
          └─ implementation ITenantService.GetCurrentTenant [L14-L14]
          └─ ... (no implementation details available)
      └─ uses_service IUserService (InstancePerLifetimeScope)
        └─ method GetUserId [L68]
          └─ implementation IUserService.GetUserId [L18-L18]
          └─ ... (no implementation details available)
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L79]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L71]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L68]

[web] GET /api/accounting/datasets/{id}/light  (Cirrus.Api.Controllers.Accounting.DatasetsController.GetLight)  [L64–L71] status=200 [auth=user]
  └─ maps_to DatasetLightDto [L68]
    └─ automapper.registration CirrusMappingProfile (Dataset->DatasetLightDto) [L204]
  └─ calls DatasetRepository.ReadQuery [L68]
  └─ query Dataset [L68]
  └─ uses_service IControlledRepository<Dataset>
    └─ method ReadQuery [L68]
      └─ ... (no implementation details available)
  └─ sends_request CanIAccessDatasetQuery [L67]
    └─ handled_by Cirrus.ApplicationService.Accounting.Queries.CanIAccessDatasetQueryHandler.Handle [L58–L140]
      └─ uses_service IControlledRepository<Dataset>
        └─ method ReadQuery [L127]
          └─ ... (no implementation details available)
      └─ uses_service IRequestInfoService (AddScoped)
        └─ method IsValidServiceAccountRequest [L101]
          └─ implementation IRequestInfoService.IsValidServiceAccountRequest [L20-L20]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L129]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)
      └─ uses_service ITenantService (AddScoped)
        └─ method GetCurrentTenant [L88]
          └─ implementation ITenantService.GetCurrentTenant [L14-L14]
          └─ ... (no implementation details available)
      └─ uses_service IUserService (InstancePerLifetimeScope)
        └─ method GetUserId [L103]
          └─ implementation IUserService.GetUserId [L18-L18]
          └─ ... (no implementation details available)
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L116]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L106]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L103]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L90]
      └─ uses_cache IDistributedCache.CreateDatasetLockKey [write] [L88]

[web] POST /api/accounting/datasets/{id}/import  (Cirrus.Api.Controllers.Accounting.DatasetsController.Import)  [L132–L137] status=201 [auth=user]

[web] POST /api/accounting/datasets/{id}/excel-import  (Cirrus.Api.Controllers.Accounting.DatasetsController.ImportFromExcelFile)  [L142–L159] status=201 [auth=user]
  └─ calls DatasetRepository.WriteQuery [L150]
  └─ write Dataset [L150]
  └─ uses_service IControlledRepository<Dataset>
    └─ method WriteQuery [L150]
      └─ ... (no implementation details available)
  └─ sends_request CanIAccessDatasetQuery [L154]
    └─ handled_by Cirrus.ApplicationService.Accounting.Queries.CanIAccessDatasetQueryHandler.Handle [L58–L140]
      └─ uses_service IControlledRepository<Dataset>
        └─ method ReadQuery [L127]
          └─ ... (no implementation details available)
      └─ uses_service IRequestInfoService (AddScoped)
        └─ method IsValidServiceAccountRequest [L101]
          └─ implementation IRequestInfoService.IsValidServiceAccountRequest [L20-L20]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L129]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)
      └─ uses_service ITenantService (AddScoped)
        └─ method GetCurrentTenant [L88]
          └─ implementation ITenantService.GetCurrentTenant [L14-L14]
          └─ ... (no implementation details available)
      └─ uses_service IUserService (InstancePerLifetimeScope)
        └─ method GetUserId [L103]
          └─ implementation IUserService.GetUserId [L18-L18]
          └─ ... (no implementation details available)
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L116]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L106]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L103]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L90]
      └─ uses_cache IDistributedCache.CreateDatasetLockKey [write] [L88]

[web] PUT /api/accounting/datasets/lock-state  (Cirrus.Api.Controllers.Accounting.DatasetsController.LockOrUnlock)  [L220–L226] status=200 [auth=user]
  └─ sends_request BulkUpdateDatasetsLockStateCommand [L223]
    └─ handled_by Cirrus.ApplicationService.Accounting.Commands.UpdateLockStateOfDatasetsCommandHandler.Handle [L26–L69]
      └─ uses_service IControlledRepository<Dataset>
        └─ method WriteQuery [L46]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L53]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)

[web] PUT /api/accounting/datasets/{id}/refresh-opening-balance-rollover  (Cirrus.Api.Controllers.Accounting.DatasetsController.RefreshOpeningBalanceRollover)  [L177–L191] status=200 [auth=user]
  └─ calls DatasetRepository.WriteQuery [L183]
  └─ write Dataset [L183]
  └─ uses_service IControlledRepository<Dataset>
    └─ method WriteQuery [L183]
      └─ ... (no implementation details available)
  └─ sends_request RefreshRolledOverOpeningBalances [L189]
    └─ handled_by Cirrus.ApplicationService.Accounting.Commands.RefreshRolledOverOpeningBalancesHandler.Handle [L52–L253]
      └─ calls JournalRepository.Remove [L250]
      └─ calls JournalRepository.WriteQueryWithArchived [L242]
      └─ calls JournalRepository.Add [L235]
      └─ calls JournalRepository.WriteQuery [L224]
      └─ calls JournalRepository.WriteQuery [L213]
      └─ uses_service GetTrialBalanceForDatesQuery
        └─ method ExecuteForRollover [L134]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<Account>
        └─ method ReadQuery [L138]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<Dataset>
        └─ method ReadQuery [L118]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L92]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)
  └─ sends_request CanIAccessDatasetQuery [L184]
    └─ handled_by Cirrus.ApplicationService.Accounting.Queries.CanIAccessDatasetQueryHandler.Handle [L58–L140]
      └─ uses_service IControlledRepository<Dataset>
        └─ method ReadQuery [L127]
          └─ ... (no implementation details available)
      └─ uses_service IRequestInfoService (AddScoped)
        └─ method IsValidServiceAccountRequest [L101]
          └─ implementation IRequestInfoService.IsValidServiceAccountRequest [L20-L20]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L129]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)
      └─ uses_service ITenantService (AddScoped)
        └─ method GetCurrentTenant [L88]
          └─ implementation ITenantService.GetCurrentTenant [L14-L14]
          └─ ... (no implementation details available)
      └─ uses_service IUserService (InstancePerLifetimeScope)
        └─ method GetUserId [L103]
          └─ implementation IUserService.GetUserId [L18-L18]
          └─ ... (no implementation details available)
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L116]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L106]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L103]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L90]
      └─ uses_cache IDistributedCache.CreateDatasetLockKey [write] [L88]

[web] PUT /api/accounting/datasets/{id:Guid}  (Cirrus.Api.Controllers.Accounting.DatasetsController.Update)  [L207–L215] status=200 [auth=user]
  └─ calls DatasetRepository.WriteQuery [L211]
  └─ write Dataset [L211]
  └─ uses_service IControlledRepository<Dataset>
    └─ method WriteQuery [L211]
      └─ ... (no implementation details available)
  └─ sends_request CanIAccessDatasetQuery [L212]
    └─ handled_by Cirrus.ApplicationService.Accounting.Queries.CanIAccessDatasetQueryHandler.Handle [L58–L140]
      └─ uses_service IControlledRepository<Dataset>
        └─ method ReadQuery [L127]
          └─ ... (no implementation details available)
      └─ uses_service IRequestInfoService (AddScoped)
        └─ method IsValidServiceAccountRequest [L101]
          └─ implementation IRequestInfoService.IsValidServiceAccountRequest [L20-L20]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L129]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)
      └─ uses_service ITenantService (AddScoped)
        └─ method GetCurrentTenant [L88]
          └─ implementation ITenantService.GetCurrentTenant [L14-L14]
          └─ ... (no implementation details available)
      └─ uses_service IUserService (InstancePerLifetimeScope)
        └─ method GetUserId [L103]
          └─ implementation IUserService.GetUserId [L18-L18]
          └─ ... (no implementation details available)
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L116]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L106]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L103]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L90]
      └─ uses_cache IDistributedCache.CreateDatasetLockKey [write] [L88]

[web] POST /api/accounting/desktop-migrate/import  (Cirrus.Api.Controllers.Accounting.DesktopMigrationController.Import)  [L31–L37] status=201 [auth=user]
  └─ sends_request DesktopMigrationCommand [L35]
    └─ handled_by Cirrus.Utilities.DesktopMigration.Commands.DesktopMigrationCommandHandler.Handle [L24–L80]
      └─ uses_service AccountMigrator (InstancePerLifetimeScope)
        └─ method BuildAccounts [L72]
          └─ ... (no implementation details available)
      └─ uses_service AssetModuleMigrator (InstancePerLifetimeScope)
        └─ method BuildAssets [L76]
          └─ ... (no implementation details available)
      └─ uses_service StorageService
        └─ method GetStream [L64]
          └─ implementation Cirrus.Services.Features.Storage.StorageService.GetStream [L19-L283]
      └─ uses_service DesktopMigrationService (InstancePerLifetimeScope)
        └─ method InitialiseMigration [L57]
          └─ implementation Cirrus.Utilities.DesktopMigration.DesktopMigrationService.InitialiseMigration [L9-L19]
      └─ uses_service DesktopSQLiteFileService (InstancePerLifetimeScope)
        └─ method InitialiseAsync [L65]
          └─ implementation Cirrus.Utilities.DesktopMigration.DesktopSQLiteFileService.InitialiseAsync [L8-L56]
      └─ uses_service DatasetMigrator (InstancePerLifetimeScope)
        └─ method BuildDatasets [L71]
          └─ ... (no implementation details available)
      └─ uses_service EntityRelationshipBuilder (InstancePerLifetimeScope)
        └─ method ImplementMaps [L68]
          └─ ... (no implementation details available)
      └─ uses_service FileMigrator (InstancePerLifetimeScope)
        └─ method BuildFile [L69]
          └─ ... (no implementation details available)
      └─ uses_service JournalMigrator (InstancePerLifetimeScope)
        └─ method BuildJournals [L75]
          └─ ... (no implementation details available)
      └─ uses_service MatchingRuleMigrator (InstancePerLifetimeScope)
        └─ method BuildMatchingRules [L74]
          └─ ... (no implementation details available)
      └─ uses_service SourceAccountMigrator (InstancePerLifetimeScope)
        └─ method BuildSourceAccounts [L73]
          └─ ... (no implementation details available)
      └─ uses_service SourceMigrator (InstancePerLifetimeScope)
        └─ method BuildSources [L70]
          └─ ... (no implementation details available)
      └─ uses_storage StorageService.GetStream [L64]

[web] POST /api/accounting/desktop-migrate/prepare  (Cirrus.Api.Controllers.Accounting.DesktopMigrationController.Prepare)  [L23–L29] status=201 [auth=user]
  └─ sends_request PrepareDesktopMigrationCommand [L27]
    └─ handled_by Cirrus.Utilities.DesktopMigration.Commands.PrepareDesktopMigrationCommandHandler.Handle [L33–L117]
      └─ uses_service StorageService
        └─ method GetStream [L60]
          └─ implementation Cirrus.Services.Features.Storage.StorageService.GetStream [L19-L283]
      └─ uses_service DesktopSQLiteFileService (InstancePerLifetimeScope)
        └─ method InitialiseAsync [L61]
          └─ implementation Cirrus.Utilities.DesktopMigration.DesktopSQLiteFileService.InitialiseAsync [L8-L56]
      └─ uses_service EntityRelationshipBuilder (InstancePerLifetimeScope)
        └─ method PrepareMap [L66]
          └─ ... (no implementation details available)
      └─ uses_service GetAllDivisionsQuery
        └─ method Execute [L62]
          └─ ... (no implementation details available)
      └─ uses_service GetAllSourcesQuery
        └─ method Execute [L86]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<SourceType>
        └─ method ReadQuery [L88]
          └─ ... (no implementation details available)
      └─ uses_storage StorageService.GetStream [L60]

[web] PUT /api/accounting/files/{id:Guid}/add-entity/{entityId:Guid}  (Cirrus.Api.Controllers.Accounting.FilesController.AddEntity)  [L270–L277] status=200 [auth=user]
  └─ calls FileRepository.WriteQuery [L273]
  └─ write File [L273]
    └─ reads_from Files
  └─ uses_service IControlledRepository<File>
    └─ method WriteQuery [L273]
      └─ ... (no implementation details available)
  └─ sends_request CanIAccessFileQuery [L274]
    └─ handled_by Cirrus.ApplicationService.Firm.Queries.CanIAccessFileQueryHandler.Handle [L43–L101]
      └─ uses_service IRequestInfoService (AddScoped)
        └─ method IsValidServiceAccountRequest [L66]
          └─ implementation IRequestInfoService.IsValidServiceAccountRequest [L20-L20]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L90]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)
      └─ uses_service ITenantService (AddScoped)
        └─ method GetCurrentTenant [L68]
          └─ implementation ITenantService.GetCurrentTenant [L14-L14]
          └─ ... (no implementation details available)
      └─ uses_service IUserService (InstancePerLifetimeScope)
        └─ method GetUserId [L68]
          └─ implementation IUserService.GetUserId [L18-L18]
          └─ ... (no implementation details available)
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L79]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L71]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L68]

[web] PUT /api/accounting/files/{id:Guid}/revert-to-rule-set/{matchingRuleSetId:guid}  (Cirrus.Api.Controllers.Accounting.FilesController.AssignRuleSetToFile)  [L249–L255] status=200 [auth=user]
  └─ calls FileRepository.WriteQuery [L252]
  └─ write File [L252]
    └─ reads_from Files
  └─ uses_service IControlledRepository<File>
    └─ method WriteQuery [L252]
      └─ ... (no implementation details available)
  └─ sends_request CanIAccessFileQuery [L253]
    └─ handled_by Cirrus.ApplicationService.Firm.Queries.CanIAccessFileQueryHandler.Handle [L43–L101]
      └─ uses_service IRequestInfoService (AddScoped)
        └─ method IsValidServiceAccountRequest [L66]
          └─ implementation IRequestInfoService.IsValidServiceAccountRequest [L20-L20]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L90]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)
      └─ uses_service ITenantService (AddScoped)
        └─ method GetCurrentTenant [L68]
          └─ implementation ITenantService.GetCurrentTenant [L14-L14]
          └─ ... (no implementation details available)
      └─ uses_service IUserService (InstancePerLifetimeScope)
        └─ method GetUserId [L68]
          └─ implementation IUserService.GetUserId [L18-L18]
          └─ ... (no implementation details available)
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L79]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L71]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L68]

[web] POST /api/accounting/files/  (Cirrus.Api.Controllers.Accounting.FilesController.Create)  [L200–L210] status=201 [auth=user]
  └─ calls FileRepository.Add [L208]
  └─ calls EntityRepository.WriteQuery [L205]
  └─ insert File [L208]
    └─ reads_from Files
  └─ write Entity [L205]
  └─ uses_service IControlledRepository<Entity>
    └─ method WriteQuery [L205]
      └─ ... (no implementation details available)
  └─ uses_service IControlledRepository<File>
    └─ method Add [L208]
      └─ ... (no implementation details available)
  └─ sends_request GetDefaultStandardChartIdQuery [L203]
    └─ handled_by Cirrus.ApplicationService.Accounting.Queries.GetDefaultStandardChartIdQueryHandler.Handle [L24–L48]
      └─ uses_service IControlledRepository<StandardChart>
        └─ method ReadQuery [L36]
          └─ ... (no implementation details available)

[web] PUT /api/accounting/files/{id:Guid}/customise-rule-set  (Cirrus.Api.Controllers.Accounting.FilesController.CustomiseMatchingRuleSet)  [L238–L244] status=200 [auth=user]
  └─ calls FileRepository.WriteQuery [L241]
  └─ write File [L241]
    └─ reads_from Files
  └─ uses_service IControlledRepository<File>
    └─ method WriteQuery [L241]
      └─ ... (no implementation details available)
  └─ sends_request CanIAccessFileQuery [L242]
    └─ handled_by Cirrus.ApplicationService.Firm.Queries.CanIAccessFileQueryHandler.Handle [L43–L101]
      └─ uses_service IRequestInfoService (AddScoped)
        └─ method IsValidServiceAccountRequest [L66]
          └─ implementation IRequestInfoService.IsValidServiceAccountRequest [L20-L20]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L90]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)
      └─ uses_service ITenantService (AddScoped)
        └─ method GetCurrentTenant [L68]
          └─ implementation ITenantService.GetCurrentTenant [L14-L14]
          └─ ... (no implementation details available)
      └─ uses_service IUserService (InstancePerLifetimeScope)
        └─ method GetUserId [L68]
          └─ implementation IUserService.GetUserId [L18-L18]
          └─ ... (no implementation details available)
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L79]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L71]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L68]

[web] DELETE /api/accounting/files/{id:Guid}  (Cirrus.Api.Controllers.Accounting.FilesController.Delete)  [L318–L332] status=200 [auth=user]
  └─ calls FileRepository.Remove [L323]
  └─ calls FileRepository.WriteQuery [L321]
  └─ delete File [L323]
    └─ reads_from Files
  └─ write File [L321]
    └─ reads_from Files
  └─ uses_service IControlledRepository<File>
    └─ method WriteQuery [L321]
      └─ ... (no implementation details available)
  └─ sends_request CanIAccessFileQuery [L322]
    └─ handled_by Cirrus.ApplicationService.Firm.Queries.CanIAccessFileQueryHandler.Handle [L43–L101]
      └─ uses_service IRequestInfoService (AddScoped)
        └─ method IsValidServiceAccountRequest [L66]
          └─ implementation IRequestInfoService.IsValidServiceAccountRequest [L20-L20]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L90]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)
      └─ uses_service ITenantService (AddScoped)
        └─ method GetCurrentTenant [L68]
          └─ implementation ITenantService.GetCurrentTenant [L14-L14]
          └─ ... (no implementation details available)
      └─ uses_service IUserService (InstancePerLifetimeScope)
        └─ method GetUserId [L68]
          └─ implementation IUserService.GetUserId [L18-L18]
          └─ ... (no implementation details available)
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L79]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L71]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L68]

[web] GET /api/accounting/files/{id}  (Cirrus.Api.Controllers.Accounting.FilesController.Get)  [L90–L94] status=200 [auth=user]
  └─ sends_request GetFileQuery [L93]
    └─ handled_by Cirrus.ApplicationService.Firm.Queries.GetFileQueryHandler.Handle [L25–L49]
      └─ maps_to FileDto [L46]
        └─ automapper.registration CirrusMappingProfile (File->FileDto) [L199]
        └─ automapper.registration ExternalApiMappingProfile (File->FileDto) [L39]
      └─ uses_service IControlledRepository<File>
        └─ method ReadQuery [L44]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L40]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)

[web] GET /api/accounting/files/for-client/{clientId}  (Cirrus.Api.Controllers.Accounting.FilesController.GetForClient)  [L103–L128] status=200 [auth=user]
  └─ maps_to FileLightDto [L122]
    └─ automapper.registration CirrusMappingProfile (File->FileLightDto) [L192]
  └─ calls FileRepository.ReadQuery [L122]
  └─ calls ClientRepository.ReadQuery [L112]
  └─ query File [L122]
    └─ reads_from Files
  └─ query Client [L112]
  └─ uses_service IControlledRepository<Client>
    └─ method ReadQuery [L112]
      └─ ... (no implementation details available)
  └─ uses_service IControlledRepository<File>
    └─ method ReadQuery [L122]
      └─ ... (no implementation details available)

[web] GET /api/accounting/files/for-entity/{entityId}  (Cirrus.Api.Controllers.Accounting.FilesController.GetForEntity)  [L137–L158] status=200 [auth=user]
  └─ maps_to FileLightDto [L153]
    └─ automapper.registration CirrusMappingProfile (File->FileLightDto) [L192]
  └─ calls FileRepository.ReadQuery [L153]
  └─ calls EntityRepository.ReadQuery [L145]
  └─ query File [L153]
    └─ reads_from Files
  └─ query Entity [L145]
  └─ uses_service IControlledRepository<Entity>
    └─ method ReadQuery [L145]
      └─ ... (no implementation details available)
  └─ uses_service IControlledRepository<File>
    └─ method ReadQuery [L153]
      └─ ... (no implementation details available)
  └─ sends_request CanIAccessEntityQuery [L152]
    └─ handled_by Cirrus.ApplicationService.Firm.Queries.CanIAccessEntityQueryHandler.Handle [L41–L99]
      └─ uses_service TenantService
        └─ method GetCurrentTenant [L72]
          └─ implementation Cirrus.Central.Tenants.TenantService.GetCurrentTenant [L26-L139]
          └─ implementation Cirrus.Central.Tenants.TenantService.GetCurrentTenant [L26-L139]
      └─ uses_service IControlledRepository<Entity>
        └─ method ReadQuery [L81]
          └─ ... (no implementation details available)
      └─ uses_service IRequestInfoService (AddScoped)
        └─ method IsValidServiceAccountRequest [L67]
          └─ implementation IRequestInfoService.IsValidServiceAccountRequest [L20-L20]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L83]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)
      └─ uses_service IUserService (InstancePerLifetimeScope)
        └─ method GetUserId [L72]
          └─ implementation IUserService.GetUserId [L18-L18]
          └─ ... (no implementation details available)
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L92]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L74]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L72]

[web] GET /api/accounting/files/summary  (Cirrus.Api.Controllers.Accounting.FilesController.GetSummaries)  [L167–L180] status=200 [auth=user]
  └─ maps_to FileUltraLightDto [L170]
    └─ automapper.registration CirrusMappingProfile (File->FileUltraLightDto) [L194]
  └─ calls FileRepository.ReadQuery [L170]
  └─ query File [L170]
    └─ reads_from Files
  └─ uses_service IControlledRepository<File>
    └─ method ReadQuery [L170]
      └─ ... (no implementation details available)
  └─ sends_request CanIAccessFileQuery [L177]
    └─ handled_by Cirrus.ApplicationService.Firm.Queries.CanIAccessFileQueryHandler.Handle [L43–L101]
      └─ uses_service IRequestInfoService (AddScoped)
        └─ method IsValidServiceAccountRequest [L66]
          └─ implementation IRequestInfoService.IsValidServiceAccountRequest [L20-L20]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L90]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)
      └─ uses_service ITenantService (AddScoped)
        └─ method GetCurrentTenant [L68]
          └─ implementation ITenantService.GetCurrentTenant [L14-L14]
          └─ ... (no implementation details available)
      └─ uses_service IUserService (InstancePerLifetimeScope)
        └─ method GetUserId [L68]
          └─ implementation IUserService.GetUserId [L18-L18]
          └─ ... (no implementation details available)
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L79]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L71]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L68]

[web] PUT /api/accounting/files/{id:Guid}/move  (Cirrus.Api.Controllers.Accounting.FilesController.Move)  [L260–L265] status=200 [auth=user]
  └─ calls FileRepository.WriteQuery [L263]
  └─ write File [L263]
    └─ reads_from Files
  └─ uses_service IControlledRepository<File>
    └─ method WriteQuery [L263]
      └─ ... (no implementation details available)
  └─ sends_request MoveFileCommand [L264]
    └─ handled_by Cirrus.ApplicationService.Accounting.Commands.MoveFileCommandHandler.Handle [L36–L118]
      └─ uses_service IControlledRepository<File>
        └─ method ReadQuery [L53]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L54]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)
      └─ uses_service IUserService (InstancePerLifetimeScope)
        └─ method GetUserId [L57]
          └─ implementation IUserService.GetUserId [L18-L18]
          └─ ... (no implementation details available)

[web] PUT /api/accounting/files/{id:Guid}/remove-entity/{entityId:Guid}  (Cirrus.Api.Controllers.Accounting.FilesController.RemoveEntity)  [L282–L289] status=200 [auth=user]
  └─ calls FileRepository.WriteQuery [L285]
  └─ write File [L285]
    └─ reads_from Files
  └─ uses_service IControlledRepository<File>
    └─ method WriteQuery [L285]
      └─ ... (no implementation details available)
  └─ sends_request CanIAccessFileQuery [L286]
    └─ handled_by Cirrus.ApplicationService.Firm.Queries.CanIAccessFileQueryHandler.Handle [L43–L101]
      └─ uses_service IRequestInfoService (AddScoped)
        └─ method IsValidServiceAccountRequest [L66]
          └─ implementation IRequestInfoService.IsValidServiceAccountRequest [L20-L20]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L90]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)
      └─ uses_service ITenantService (AddScoped)
        └─ method GetCurrentTenant [L68]
          └─ implementation ITenantService.GetCurrentTenant [L14-L14]
          └─ ... (no implementation details available)
      └─ uses_service IUserService (InstancePerLifetimeScope)
        └─ method GetUserId [L68]
          └─ implementation IUserService.GetUserId [L18-L18]
          └─ ... (no implementation details available)
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L79]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L71]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L68]

[web] PUT /api/accounting/files/{id:Guid}/reorder-entity/{entityId:Guid}  (Cirrus.Api.Controllers.Accounting.FilesController.ReorderEntity)  [L294–L301] status=200 [auth=user]
  └─ calls FileRepository.WriteQuery [L297]
  └─ write File [L297]
    └─ reads_from Files
  └─ uses_service IControlledRepository<File>
    └─ method WriteQuery [L297]
      └─ ... (no implementation details available)
  └─ sends_request CanIAccessFileQuery [L298]
    └─ handled_by Cirrus.ApplicationService.Firm.Queries.CanIAccessFileQueryHandler.Handle [L43–L101]
      └─ uses_service IRequestInfoService (AddScoped)
        └─ method IsValidServiceAccountRequest [L66]
          └─ implementation IRequestInfoService.IsValidServiceAccountRequest [L20-L20]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L90]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)
      └─ uses_service ITenantService (AddScoped)
        └─ method GetCurrentTenant [L68]
          └─ implementation ITenantService.GetCurrentTenant [L14-L14]
          └─ ... (no implementation details available)
      └─ uses_service IUserService (InstancePerLifetimeScope)
        └─ method GetUserId [L68]
          └─ implementation IUserService.GetUserId [L18-L18]
          └─ ... (no implementation details available)
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L79]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L71]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L68]

[web] PUT /api/accounting/files/restore-file/{id:Guid}  (Cirrus.Api.Controllers.Accounting.FilesController.RestoreFile)  [L334–L346] status=200 [auth=user]
  └─ sends_request CanIAccessFileQuery [L341]
    └─ handled_by Cirrus.ApplicationService.Firm.Queries.CanIAccessFileQueryHandler.Handle [L43–L101]
      └─ uses_service IRequestInfoService (AddScoped)
        └─ method IsValidServiceAccountRequest [L66]
          └─ implementation IRequestInfoService.IsValidServiceAccountRequest [L20-L20]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L90]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)
      └─ uses_service ITenantService (AddScoped)
        └─ method GetCurrentTenant [L68]
          └─ implementation ITenantService.GetCurrentTenant [L14-L14]
          └─ ... (no implementation details available)
      └─ uses_service IUserService (InstancePerLifetimeScope)
        └─ method GetUserId [L68]
          └─ implementation IUserService.GetUserId [L18-L18]
          └─ ... (no implementation details available)
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L79]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L71]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L68]

[web] GET /api/accounting/files/  (Cirrus.Api.Controllers.Accounting.FilesController.Search)  [L55–L81] status=200 [auth=user]
  └─ sends_request FindFilesQuery [L69]
    └─ handled_by Cirrus.ApplicationService.Firm.Queries.FindFilesQueryHandler.Handle [L58–L195]
      └─ maps_to UserLightDto [L181]
      └─ uses_service IControlledRepository<Dataset>
        └─ method ReadQuery [L172]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<File>
        └─ method ReadQuery [L91]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<User>
        └─ method ReadQuery [L125]
          └─ ... (no implementation details available)
      └─ uses_service IFirmSettingsService (AddScoped)
        └─ method GetCurrentSettings [L122]
          └─ implementation Cirrus.ApplicationService.Firm.FirmSettingsService.GetCurrentSettings [L15-L112]
      └─ uses_service IMapper
        └─ method Map [L181]
          └─ ... (no implementation details available)
      └─ uses_service IUserService (InstancePerLifetimeScope)
        └─ method GetUserId [L87]
          └─ implementation IUserService.GetUserId [L18-L18]
          └─ ... (no implementation details available)

[web] PUT /api/accounting/files/{id:Guid}/set-primary-entity/{entityId:Guid}  (Cirrus.Api.Controllers.Accounting.FilesController.SetPrimaryEntity)  [L306–L313] status=200 [auth=user]
  └─ calls FileRepository.WriteQuery [L309]
  └─ write File [L309]
    └─ reads_from Files
  └─ uses_service IControlledRepository<File>
    └─ method WriteQuery [L309]
      └─ ... (no implementation details available)
  └─ sends_request CanIAccessFileQuery [L310]
    └─ handled_by Cirrus.ApplicationService.Firm.Queries.CanIAccessFileQueryHandler.Handle [L43–L101]
      └─ uses_service IRequestInfoService (AddScoped)
        └─ method IsValidServiceAccountRequest [L66]
          └─ implementation IRequestInfoService.IsValidServiceAccountRequest [L20-L20]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L90]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)
      └─ uses_service ITenantService (AddScoped)
        └─ method GetCurrentTenant [L68]
          └─ implementation ITenantService.GetCurrentTenant [L14-L14]
          └─ ... (no implementation details available)
      └─ uses_service IUserService (InstancePerLifetimeScope)
        └─ method GetUserId [L68]
          └─ implementation IUserService.GetUserId [L18-L18]
          └─ ... (no implementation details available)
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L79]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L71]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L68]

[web] PUT /api/accounting/files/{id:Guid}  (Cirrus.Api.Controllers.Accounting.FilesController.Update)  [L215–L222] status=200 [auth=user]
  └─ calls FileRepository.WriteQuery [L218]
  └─ write File [L218]
    └─ reads_from Files
  └─ uses_service IControlledRepository<File>
    └─ method WriteQuery [L218]
      └─ ... (no implementation details available)
  └─ sends_request CanIAccessFileQuery [L219]
    └─ handled_by Cirrus.ApplicationService.Firm.Queries.CanIAccessFileQueryHandler.Handle [L43–L101]
      └─ uses_service IRequestInfoService (AddScoped)
        └─ method IsValidServiceAccountRequest [L66]
          └─ implementation IRequestInfoService.IsValidServiceAccountRequest [L20-L20]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L90]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)
      └─ uses_service ITenantService (AddScoped)
        └─ method GetCurrentTenant [L68]
          └─ implementation ITenantService.GetCurrentTenant [L14-L14]
          └─ ... (no implementation details available)
      └─ uses_service IUserService (InstancePerLifetimeScope)
        └─ method GetUserId [L68]
          └─ implementation IUserService.GetUserId [L18-L18]
          └─ ... (no implementation details available)
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L79]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L71]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L68]

[web] PUT /api/accounting/files/{id:Guid}/standard-chart-set  (Cirrus.Api.Controllers.Accounting.FilesController.UpdateStandardChartSet)  [L227–L233] status=200 [auth=user]
  └─ calls FileRepository.WriteQuery [L230]
  └─ write File [L230]
    └─ reads_from Files
  └─ uses_service IControlledRepository<File>
    └─ method WriteQuery [L230]
      └─ ... (no implementation details available)
  └─ sends_request CanIAccessFileQuery [L231]
    └─ handled_by Cirrus.ApplicationService.Firm.Queries.CanIAccessFileQueryHandler.Handle [L43–L101]
      └─ uses_service IRequestInfoService (AddScoped)
        └─ method IsValidServiceAccountRequest [L66]
          └─ implementation IRequestInfoService.IsValidServiceAccountRequest [L20-L20]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L90]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)
      └─ uses_service ITenantService (AddScoped)
        └─ method GetCurrentTenant [L68]
          └─ implementation ITenantService.GetCurrentTenant [L14-L14]
          └─ ... (no implementation details available)
      └─ uses_service IUserService (InstancePerLifetimeScope)
        └─ method GetUserId [L68]
          └─ implementation IUserService.GetUserId [L18-L18]
          └─ ... (no implementation details available)
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L79]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L71]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L68]

[web] PUT /api/accounting/ledger/accounts/bulk-child-update  (Cirrus.Api.Controllers.Accounting.Ledger.AccountsController.BulkChildUpdate)  [L302–L350] status=200 [auth=user]
  └─ calls AccountRepository.ReadQuery [L320]
  └─ calls AccountRepository.WriteQuery [L305]
  └─ query Account [L320]
  └─ write Account [L305]
  └─ uses_service IControlledRepository<Account>
    └─ method WriteQuery [L305]
      └─ ... (no implementation details available)

[web] PUT /api/accounting/ledger/accounts/merge/bulk  (Cirrus.Api.Controllers.Accounting.Ledger.AccountsController.BulkMerge)  [L504–L510] status=200 [auth=user]
  └─ sends_request BulkMergeAccountsCommand [L508]
    └─ handled_by Cirrus.ApplicationService.Accounting.Commands.Ledger.BulkMergeAccountsCommandHandler.Handle [L33–L111]
      └─ uses_service ILogger
        └─ method LogWarning [L87]
          └─ ... (no implementation details available)
      └─ logs ILogger [Warning] [L87]
  └─ sends_request CanIAccessFileQuery [L507]
    └─ handled_by Cirrus.ApplicationService.Firm.Queries.CanIAccessFileQueryHandler.Handle [L43–L101]
      └─ uses_service IRequestInfoService (AddScoped)
        └─ method IsValidServiceAccountRequest [L66]
          └─ implementation IRequestInfoService.IsValidServiceAccountRequest [L20-L20]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L90]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)
      └─ uses_service ITenantService (AddScoped)
        └─ method GetCurrentTenant [L68]
          └─ implementation ITenantService.GetCurrentTenant [L14-L14]
          └─ ... (no implementation details available)
      └─ uses_service IUserService (InstancePerLifetimeScope)
        └─ method GetUserId [L68]
          └─ implementation IUserService.GetUserId [L18-L18]
          └─ ... (no implementation details available)
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L79]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L71]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L68]

[web] POST /api/accounting/ledger/accounts/header  (Cirrus.Api.Controllers.Accounting.Ledger.AccountsController.Create)  [L273–L282] status=201 [auth=user]
  └─ calls AccountRepository.Add [L280]
  └─ calls AccountRepository.WriteQuery [L276]
  └─ insert Account [L280]
  └─ write Account [L276]
  └─ uses_service IControlledRepository<Account>
    └─ method WriteQuery [L276]
      └─ ... (no implementation details available)

[web] PUT /api/accounting/ledger/accounts/{id:Guid}/decline-all-standards  (Cirrus.Api.Controllers.Accounting.Ledger.AccountsController.DeclineAllStandardAccounts)  [L548–L557] status=200 [auth=user]
  └─ calls AccountRepository.WriteQuery [L551]
  └─ write Account [L551]
  └─ uses_service IControlledRepository<Account>
    └─ method WriteQuery [L551]
      └─ ... (no implementation details available)
  └─ sends_request CanIAccessFileQuery [L555]
    └─ handled_by Cirrus.ApplicationService.Firm.Queries.CanIAccessFileQueryHandler.Handle [L43–L101]
      └─ uses_service IRequestInfoService (AddScoped)
        └─ method IsValidServiceAccountRequest [L66]
          └─ implementation IRequestInfoService.IsValidServiceAccountRequest [L20-L20]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L90]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)
      └─ uses_service ITenantService (AddScoped)
        └─ method GetCurrentTenant [L68]
          └─ implementation ITenantService.GetCurrentTenant [L14-L14]
          └─ ... (no implementation details available)
      └─ uses_service IUserService (InstancePerLifetimeScope)
        └─ method GetUserId [L68]
          └─ implementation IUserService.GetUserId [L18-L18]
          └─ ... (no implementation details available)
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L79]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L71]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L68]

[web] DELETE /api/accounting/ledger/accounts/header/{id:Guid}  (Cirrus.Api.Controllers.Accounting.Ledger.AccountsController.Delete)  [L483–L488] status=200 [auth=user]
  └─ sends_request DeleteHeaderCommand [L486]
    └─ handled_by Cirrus.ApplicationService.Accounting.Commands.DeleteHeaderCommandHandler.Handle [L28–L58]
      └─ uses_service IControlledRepository<Account>
        └─ method ReadQuery [L42]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L50]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)

[web] GET /api/accounting/ledger/accounts/{id}  (Cirrus.Api.Controllers.Accounting.Ledger.AccountsController.Get)  [L68–L74] status=200 [auth=user]
  └─ maps_to AccountDto [L71]
    └─ automapper.registration CirrusMappingProfile (Account->AccountDto) [L327]
  └─ calls AccountRepository.ReadQuery [L71]
  └─ query Account [L71]
  └─ uses_service IControlledRepository<Account>
    └─ method ReadQuery [L71]
      └─ ... (no implementation details available)

[web] GET /api/accounting/ledger/accounts/{fileId:Guid}/hierarchy  (Cirrus.Api.Controllers.Accounting.Ledger.AccountsController.GetAccountHierarchy)  [L162–L187] status=200 [auth=user]
  └─ calls FileRepository.ReadQuery [L167]
  └─ query File [L167]
    └─ reads_from Files
  └─ uses_service IControlledRepository<File>
    └─ method ReadQuery [L167]
      └─ ... (no implementation details available)
  └─ sends_request CanIAccessFileQuery [L165]
    └─ handled_by Cirrus.ApplicationService.Firm.Queries.CanIAccessFileQueryHandler.Handle [L43–L101]
      └─ uses_service IRequestInfoService (AddScoped)
        └─ method IsValidServiceAccountRequest [L66]
          └─ implementation IRequestInfoService.IsValidServiceAccountRequest [L20-L20]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L90]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)
      └─ uses_service ITenantService (AddScoped)
        └─ method GetCurrentTenant [L68]
          └─ implementation ITenantService.GetCurrentTenant [L14-L14]
          └─ ... (no implementation details available)
      └─ uses_service IUserService (InstancePerLifetimeScope)
        └─ method GetUserId [L68]
          └─ implementation IUserService.GetUserId [L18-L18]
          └─ ... (no implementation details available)
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L79]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L71]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L68]

[web] GET /api/accounting/ledger/accounts/{fileId:Guid}/workpapers-info  (Cirrus.Api.Controllers.Accounting.Ledger.AccountsController.GetAccountsForWorkpapers)  [L189–L195] status=200 [auth=user]
  └─ sends_request GetAccountsForWorkpapersQuery [L193]
    └─ handled_by Cirrus.ApplicationService.Accounting.Queries.GetAccountsForWorkpapersQueryHandler.Handle [L25–L74]
      └─ maps_to AccountInfoForWorkpapersDto [L40]
        └─ automapper.registration CirrusMappingProfile (Account->AccountInfoForWorkpapersDto) [L354]
      └─ uses_service IControlledRepository<Account>
        └─ method ReadQuery [L40]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<SourceAccount>
        └─ method ReadQuery [L59]
          └─ ... (no implementation details available)
      └─ uses_service IMapper
        └─ method ConfigurationProvider [L42]
          └─ ... (no implementation details available)
  └─ sends_request CanIAccessFileQuery [L192]
    └─ handled_by Cirrus.ApplicationService.Firm.Queries.CanIAccessFileQueryHandler.Handle [L43–L101]
      └─ uses_service IRequestInfoService (AddScoped)
        └─ method IsValidServiceAccountRequest [L66]
          └─ implementation IRequestInfoService.IsValidServiceAccountRequest [L20-L20]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L90]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)
      └─ uses_service ITenantService (AddScoped)
        └─ method GetCurrentTenant [L68]
          └─ implementation ITenantService.GetCurrentTenant [L14-L14]
          └─ ... (no implementation details available)
      └─ uses_service IUserService (InstancePerLifetimeScope)
        └─ method GetUserId [L68]
          └─ implementation IUserService.GetUserId [L18-L18]
          └─ ... (no implementation details available)
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L79]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L71]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L68]

[web] GET /api/accounting/ledger/accounts/child-accounts  (Cirrus.Api.Controllers.Accounting.Ledger.AccountsController.GetAllChildAccounts)  [L90–L101] status=200 [auth=user]
  └─ maps_to AccountLightDto [L95]
    └─ automapper.registration CirrusMappingProfile (Account->AccountLightDto) [L313]
  └─ calls AccountRepository.ReadQuery [L95]
  └─ query Account [L95]
  └─ uses_service IControlledRepository<Account>
    └─ method ReadQuery [L95]
      └─ ... (no implementation details available)
  └─ sends_request CanIAccessFileQuery [L94]
    └─ handled_by Cirrus.ApplicationService.Firm.Queries.CanIAccessFileQueryHandler.Handle [L43–L101]
      └─ uses_service IRequestInfoService (AddScoped)
        └─ method IsValidServiceAccountRequest [L66]
          └─ implementation IRequestInfoService.IsValidServiceAccountRequest [L20-L20]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L90]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)
      └─ uses_service ITenantService (AddScoped)
        └─ method GetCurrentTenant [L68]
          └─ implementation ITenantService.GetCurrentTenant [L14-L14]
          └─ ... (no implementation details available)
      └─ uses_service IUserService (InstancePerLifetimeScope)
        └─ method GetUserId [L68]
          └─ implementation IUserService.GetUserId [L18-L18]
          └─ ... (no implementation details available)
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L79]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L71]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L68]

[web] GET /api/accounting/ledger/accounts/child/{id}  (Cirrus.Api.Controllers.Accounting.Ledger.AccountsController.GetChildAccount)  [L80–L84] status=200 [auth=user]
  └─ sends_request GetChildAccountQuery [L83]

[web] GET /api/accounting/ledger/accounts/header/{id}  (Cirrus.Api.Controllers.Accounting.Ledger.AccountsController.GetHeaderAccount)  [L127–L131] status=200 [auth=user]
  └─ sends_request GetHeaderAccountQuery [L130]
    └─ handled_by Cirrus.ApplicationService.Accounting.Queries.GetAccountQueryHandler.Handle [L37–L82]
      └─ maps_to ChildAccountDto [L66]
      └─ maps_to HeaderAccountDto [L55]
      └─ uses_service IControlledRepository<Account>
        └─ method ReadQuery [L55]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L77]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)

[web] POST /api/accounting/ledger/accounts/header-matches/siblings  (Cirrus.Api.Controllers.Accounting.Ledger.AccountsController.GetHeaderMatchSiblings)  [L263–L267] status=201 [auth=user]
  └─ sends_request GetHeaderMatchSiblingsQuery [L266]
    └─ handled_by Cirrus.ApplicationService.Accounting.Queries.Ledger.GetHeaderMatchSiblingsQueryHandler.Handle [L33–L122]
      └─ maps_to AccountLightWithMappingDto [L94]
        └─ automapper.registration CirrusMappingProfile (Account->AccountLightWithMappingDto) [L323]
      └─ uses_service IControlledRepository<Account>
        └─ method ReadQuery [L73]
          └─ ... (no implementation details available)
      └─ uses_service IMapper
        └─ method ConfigurationProvider [L99]
          └─ ... (no implementation details available)

[web] GET /api/accounting/ledger/accounts/source-accounts  (Cirrus.Api.Controllers.Accounting.Ledger.AccountsController.GetLinkedSourceAccounts)  [L107–L121] status=200 [auth=user]
  └─ maps_to SourceAccountMappingDto [L115]
    └─ automapper.registration CirrusMappingProfile (SourceAccount->SourceAccountMappingDto) [L274]
    └─ automapper.registration WorkpapersMappingProfile (SourceAccount->SourceAccountMappingDto) [L613]
  └─ calls SourceAccountRepository.ReadQuery [L115]
  └─ query SourceAccount [L115]
    └─ reads_from SourceAccounts
  └─ uses_service IControlledRepository<SourceAccount>
    └─ method ReadQuery [L115]
      └─ ... (no implementation details available)
  └─ sends_request CanIAccessFileQuery [L114]
    └─ handled_by Cirrus.ApplicationService.Firm.Queries.CanIAccessFileQueryHandler.Handle [L43–L101]
      └─ uses_service IRequestInfoService (AddScoped)
        └─ method IsValidServiceAccountRequest [L66]
          └─ implementation IRequestInfoService.IsValidServiceAccountRequest [L20-L20]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L90]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)
      └─ uses_service ITenantService (AddScoped)
        └─ method GetCurrentTenant [L68]
          └─ implementation ITenantService.GetCurrentTenant [L14-L14]
          └─ ... (no implementation details available)
      └─ uses_service IUserService (InstancePerLifetimeScope)
        └─ method GetUserId [L68]
          └─ implementation IUserService.GetUserId [L18-L18]
          └─ ... (no implementation details available)
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L79]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L71]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L68]

[web] POST /api/accounting/ledger/accounts/header-matches/hydrate  (Cirrus.Api.Controllers.Accounting.Ledger.AccountsController.HydrateHeaderMaatches)  [L253–L257] status=201 [auth=user]
  └─ sends_request GetHeaderMatchQuery [L256]
    └─ handled_by Cirrus.ApplicationService.Accounting.Queries.Ledger.GetHeaderMatchQueryHandler.Handle [L24–L108]
      └─ maps_to AccountUltraLightDto [L100]
        └─ automapper.registration CirrusMappingProfile (Account->AccountUltraLightDto) [L312]
      └─ maps_to MasterAccountDto [L58]
        └─ automapper.registration CirrusMappingProfile (MasterAccount->MasterAccountDto) [L301]
        └─ automapper.registration WorkpapersMappingProfile (MasterAccount->MasterAccountDto) [L703]
      └─ maps_to StandardAccountUltraLightDto [L74]
        └─ automapper.registration CirrusMappingProfile (StandardAccount->StandardAccountUltraLightDto) [L446]
      └─ uses_service IControlledRepository<Account>
        └─ method ReadQuery [L100]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<MasterAccount>
        └─ method ReadQuery [L58]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<StandardAccount>
        └─ method ReadQuery [L74]
          └─ ... (no implementation details available)
      └─ uses_service IMapper
        └─ method ConfigurationProvider [L60]
          └─ ... (no implementation details available)

[web] PUT /api/accounting/ledger/accounts/{id:Guid}/link-standard  (Cirrus.Api.Controllers.Accounting.Ledger.AccountsController.LinkStandardAccount)  [L525–L529] status=200 [auth=user]
  └─ sends_request LinkToStandardAccountCommand [L528]
    └─ handled_by Cirrus.ApplicationService.Accounting.Commands.Ledger.LinkToStandardAccountCommandHandler.Handle [L45–L183]
      └─ uses_service IControlledRepository<Account>
        └─ method WriteQuery [L65]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<SourceAccount>
        └─ method ReadQuery [L101]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<StandardAccount>
        └─ method ReadQuery [L69]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L63]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)

[web] PUT /api/accounting/ledger/accounts/mark-consolidated/{id:Guid}  (Cirrus.Api.Controllers.Accounting.Ledger.AccountsController.MarkAccountConsolidated)  [L377–L384] status=200 [auth=user]
  └─ calls AccountRepository.WriteQuery [L380]
  └─ write Account [L380]
  └─ uses_service IControlledRepository<Account>
    └─ method WriteQuery [L380]
      └─ ... (no implementation details available)

[web] PUT /api/accounting/ledger/accounts/move  (Cirrus.Api.Controllers.Accounting.Ledger.AccountsController.Move)  [L493–L499] status=200 [auth=user]
  └─ sends_request CanIAccessFileQuery [L496]
    └─ handled_by Cirrus.ApplicationService.Firm.Queries.CanIAccessFileQueryHandler.Handle [L43–L101]
      └─ uses_service IRequestInfoService (AddScoped)
        └─ method IsValidServiceAccountRequest [L66]
          └─ implementation IRequestInfoService.IsValidServiceAccountRequest [L20-L20]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L90]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)
      └─ uses_service ITenantService (AddScoped)
        └─ method GetCurrentTenant [L68]
          └─ implementation ITenantService.GetCurrentTenant [L14-L14]
          └─ ... (no implementation details available)
      └─ uses_service IUserService (InstancePerLifetimeScope)
        └─ method GetUserId [L68]
          └─ implementation IUserService.GetUserId [L18-L18]
          └─ ... (no implementation details available)
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L79]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L71]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L68]

[web] GET /api/accounting/ledger/accounts/{fileId:Guid}/hierarchy/refresh  (Cirrus.Api.Controllers.Accounting.Ledger.AccountsController.RefreshAccountHierarchy)  [L212–L247] status=200 [auth=user]
  └─ calls FileRepository.ReadQuery [L218]
  └─ calls AccountRepository.ReadQuery [L224]
  └─ query File [L218]
    └─ reads_from Files
  └─ query Account [L224]
  └─ uses_service IControlledRepository<Account>
    └─ method ReadQuery [L224]
      └─ ... (no implementation details available)
  └─ uses_service IControlledRepository<File>
    └─ method ReadQuery [L218]
      └─ ... (no implementation details available)
  └─ sends_request CanIAccessFileQuery [L215]
    └─ handled_by Cirrus.ApplicationService.Firm.Queries.CanIAccessFileQueryHandler.Handle [L43–L101]
      └─ uses_service IRequestInfoService (AddScoped)
        └─ method IsValidServiceAccountRequest [L66]
          └─ implementation IRequestInfoService.IsValidServiceAccountRequest [L20-L20]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L90]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)
      └─ uses_service ITenantService (AddScoped)
        └─ method GetCurrentTenant [L68]
          └─ implementation ITenantService.GetCurrentTenant [L14-L14]
          └─ ... (no implementation details available)
      └─ uses_service IUserService (InstancePerLifetimeScope)
        └─ method GetUserId [L68]
          └─ implementation IUserService.GetUserId [L18-L18]
          └─ ... (no implementation details available)
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L79]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L71]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L68]

[web] PUT /api/accounting/ledger/accounts/header/{id:Guid}/reorder  (Cirrus.Api.Controllers.Accounting.Ledger.AccountsController.Reorder)  [L515–L520] status=200 [auth=user]

[web] GET /api/accounting/ledger/accounts/search/master  (Cirrus.Api.Controllers.Accounting.Ledger.AccountsController.Search)  [L148–L152] status=200 [auth=user]

[web] PUT /api/accounting/ledger/accounts/{id:Guid}/unlink-standard  (Cirrus.Api.Controllers.Accounting.Ledger.AccountsController.UnlinkStandardAccount)  [L534–L543] status=200 [auth=user]
  └─ calls AccountRepository.WriteQuery [L537]
  └─ write Account [L537]
  └─ uses_service IControlledRepository<Account>
    └─ method WriteQuery [L537]
      └─ ... (no implementation details available)
  └─ sends_request CanIAccessFileQuery [L541]
    └─ handled_by Cirrus.ApplicationService.Firm.Queries.CanIAccessFileQueryHandler.Handle [L43–L101]
      └─ uses_service IRequestInfoService (AddScoped)
        └─ method IsValidServiceAccountRequest [L66]
          └─ implementation IRequestInfoService.IsValidServiceAccountRequest [L20-L20]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L90]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)
      └─ uses_service ITenantService (AddScoped)
        └─ method GetCurrentTenant [L68]
          └─ implementation ITenantService.GetCurrentTenant [L14-L14]
          └─ ... (no implementation details available)
      └─ uses_service IUserService (InstancePerLifetimeScope)
        └─ method GetUserId [L68]
          └─ implementation IUserService.GetUserId [L18-L18]
          └─ ... (no implementation details available)
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L79]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L71]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L68]

[web] PUT /api/accounting/ledger/accounts/header/{id:Guid}  (Cirrus.Api.Controllers.Accounting.Ledger.AccountsController.Update)  [L355–L371] status=200 [auth=user]
  └─ calls AccountRepository.WriteQuery [L358]
  └─ write Account [L358]
  └─ uses_service IControlledRepository<Account>
    └─ method WriteQuery [L358]
      └─ ... (no implementation details available)

[web] PUT /api/accounting/ledger/accounts/cashflow-category/{id:guid}  (Cirrus.Api.Controllers.Accounting.Ledger.AccountsController.UpdateCashflowCategory)  [L448–L454] status=200 [auth=user]
  └─ calls AccountRepository.WriteQuery [L451]
  └─ write Account [L451]
  └─ uses_service IControlledRepository<Account>
    └─ method WriteQuery [L451]
      └─ ... (no implementation details available)

[web] PUT /api/accounting/ledger/accounts/division/{id:guid}  (Cirrus.Api.Controllers.Accounting.Ledger.AccountsController.UpdateDivision)  [L405–L411] status=200 [auth=user]
  └─ calls AccountRepository.WriteQuery [L408]
  └─ write Account [L408]
  └─ uses_service IControlledRepository<Account>
    └─ method WriteQuery [L408]
      └─ ... (no implementation details available)

[web] PUT /api/accounting/ledger/accounts/movement-category/{id:guid}  (Cirrus.Api.Controllers.Accounting.Ledger.AccountsController.UpdateMovementCategory)  [L460–L466] status=200 [auth=user]
  └─ calls AccountRepository.WriteQuery [L463]
  └─ write Account [L463]
  └─ uses_service IControlledRepository<Account>
    └─ method WriteQuery [L463]
      └─ ... (no implementation details available)

[web] PUT /api/accounting/ledger/accounts/movement-title/{id:guid}  (Cirrus.Api.Controllers.Accounting.Ledger.AccountsController.UpdateMovementTitle)  [L472–L478] status=200 [auth=user]
  └─ calls AccountRepository.WriteQuery [L475]
  └─ write Account [L475]
  └─ uses_service IControlledRepository<Account>
    └─ method WriteQuery [L475]
      └─ ... (no implementation details available)

[web] PUT /api/accounting/ledger/accounts/primary-production/{id:guid}  (Cirrus.Api.Controllers.Accounting.Ledger.AccountsController.UpdatePrimaryProductionCostType)  [L417–L425] status=200 [auth=user]
  └─ calls AccountRepository.WriteQuery [L423]
  └─ write Account [L423]
  └─ uses_service IControlledRepository<Account>
    └─ method WriteQuery [L423]
      └─ ... (no implementation details available)

[web] PUT /api/accounting/ledger/accounts/tax-properties/{id:guid}  (Cirrus.Api.Controllers.Accounting.Ledger.AccountsController.UpdateTaxData)  [L431–L442] status=200 [auth=user]
  └─ calls AccountRepository.WriteQuery [L439]
  └─ write Account [L439]
  └─ uses_service IControlledRepository<Account>
    └─ method WriteQuery [L439]
      └─ ... (no implementation details available)

[web] PUT /api/accounting/ledger/accounts/trading-account/{id:guid}  (Cirrus.Api.Controllers.Accounting.Ledger.AccountsController.UpdateTradingAccount)  [L391–L399] status=200 [auth=user]
  └─ calls AccountRepository.WriteQuery [L394]
  └─ write Account [L394]
  └─ uses_service IControlledRepository<Account>
    └─ method WriteQuery [L394]
      └─ ... (no implementation details available)

[web] GET /api/accounting/ledger/accounttypes/{id}  (Cirrus.Api.Controllers.Accounting.Ledger.AccountTypesController.Get)  [L41–L47] status=200 [auth=user]
  └─ maps_to AccountTypeLightDto [L44]
    └─ automapper.registration CirrusMappingProfile (AccountType->AccountTypeLightDto) [L246]
    └─ automapper.registration WorkpapersMappingProfile (AccountType->AccountTypeLightDto) [L707]
  └─ calls AccountTypeRepository.ReadQuery [L44]
  └─ query AccountType [L44]
    └─ reads_from AccountTypes
  └─ uses_service IControlledRepository<AccountType>
    └─ method ReadQuery [L44]
      └─ ... (no implementation details available)

[web] GET /api/accounting/ledger/accounttypes/workpaper-sections  (Cirrus.Api.Controllers.Accounting.Ledger.AccountTypesController.GetWithWorkpaperSections)  [L63–L69] status=200 [auth=user]
  └─ maps_to AccountTypeWithWorkpaperSectionDto [L66]
    └─ automapper.registration CirrusMappingProfile (AccountType->AccountTypeWithWorkpaperSectionDto) [L252]
  └─ calls AccountTypeRepository.ReadQuery [L66]
  └─ query AccountType [L66]
    └─ reads_from AccountTypes
  └─ uses_service IControlledRepository<AccountType>
    └─ method ReadQuery [L66]
      └─ ... (no implementation details available)

[web] GET /api/accounting/ledger/accounttypes/search  (Cirrus.Api.Controllers.Accounting.Ledger.AccountTypesController.Search)  [L53–L57] status=200 [auth=user]

[web] PUT /api/accounting/ledger/auto-journals/process/account-rollover  (Cirrus.Api.Controllers.Accounting.Ledger.AutoJournals.AutoJournalsController.ProcessAccountRollover)  [L48–L53] status=200 [auth=user]
  └─ sends_request ProcessAccountRolloverJournalCommand [L51]
    └─ handled_by Cirrus.ApplicationService.Accounting.Commands.Ledger.AutoJournals.ProcessAccountRolloverJournalCommandHandler.Handle [L40–L224]
      └─ uses_service GetTrialBalanceForDatesQuery
        └─ method ExecuteForRollover [L130]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<Dataset>
        └─ method ReadQuery [L68]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<Journal>
        └─ method Remove [L114]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<SourceAccount>
        └─ method ReadQuery [L150]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L70]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)

[web] PUT /api/accounting/ledger/auto-journals/process/depreciation  (Cirrus.Api.Controllers.Accounting.Ledger.AutoJournals.AutoJournalsController.ProcessDepreciation)  [L58–L84] status=200 [auth=user]
  └─ calls DepreciationYearRepository.ReadQuery [L67]
  └─ query DepreciationYear [L67]
    └─ reads_from DepreciationYears
  └─ uses_service IControlledRepository<DepreciationYear>
    └─ method ReadQuery [L67]
      └─ ... (no implementation details available)
  └─ sends_request ProcessDepreciationJournalCommand [L80]
    └─ handled_by Cirrus.ApplicationService.Accounting.Commands.Ledger.AutoJournals.ProcessDepreciationJournalCommandHandler.Handle [L71–L627]
      └─ maps_to DatasetLightDto [L193]
        └─ automapper.registration CirrusMappingProfile (Dataset->DatasetLightDto) [L204]
      └─ maps_to DatasetLightDto [L120]
        └─ automapper.registration CirrusMappingProfile (Dataset->DatasetLightDto) [L204]
      └─ uses_service GetDepreciationByAssetGroupQuery
        └─ method Execute [L292]
          └─ ... (no implementation details available)
      └─ uses_service GetMonthlyDisposalsByAssetGroupQuery
        └─ method Execute [L310]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<AssetGroup>
        └─ method ReadQuery [L262]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<Dataset>
        └─ method ReadQuery [L104]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<DepreciationYear>
        └─ method ReadQuery [L114]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<Journal>
        └─ method Remove [L184]
          └─ ... (no implementation details available)
      └─ uses_service IMapper
        └─ method Map [L120]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L105]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)

[web] PUT /api/accounting/ledger/auto-journals/process/distribution  (Cirrus.Api.Controllers.Accounting.Ledger.AutoJournals.AutoJournalsController.ProcessDistribution)  [L37–L42] status=200 [auth=user]
  └─ sends_request ProcessDistributionJournalCommand [L40]
    └─ handled_by Cirrus.ApplicationService.Accounting.Commands.Ledger.AutoJournals.ProcessDistributionJournalCommandHandler.Handle [L37–L233]
      └─ uses_service GetNetProfitForDatesQuery
        └─ method Execute [L112]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<Dataset>
        └─ method ReadQuery [L57]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<Distribution>
        └─ method WriteQuery [L104]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<Journal>
        └─ method Remove [L91]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L58]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)

[web] DELETE /api/accounting/ledger/auto-journals/distributions/{datasetId:Guid}  (Cirrus.Api.Controllers.Accounting.Ledger.AutoJournals.DistributionController.Delete)  [L108–L120] status=200 [auth=user]
  └─ calls DistributionRepository.Remove [L119]
  └─ calls DistributionRepository.WriteQuery [L113]
  └─ delete Distribution [L119]
    └─ reads_from Distributions
  └─ write Distribution [L113]
    └─ reads_from Distributions
  └─ uses_service IControlledRepository<Distribution>
    └─ method WriteQuery [L113]
      └─ ... (no implementation details available)
  └─ sends_request CanIAccessDatasetQuery [L111]
    └─ handled_by Cirrus.ApplicationService.Accounting.Queries.CanIAccessDatasetQueryHandler.Handle [L58–L140]
      └─ uses_service IControlledRepository<Dataset>
        └─ method ReadQuery [L127]
          └─ ... (no implementation details available)
      └─ uses_service IRequestInfoService (AddScoped)
        └─ method IsValidServiceAccountRequest [L101]
          └─ implementation IRequestInfoService.IsValidServiceAccountRequest [L20-L20]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L129]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)
      └─ uses_service ITenantService (AddScoped)
        └─ method GetCurrentTenant [L88]
          └─ implementation ITenantService.GetCurrentTenant [L14-L14]
          └─ ... (no implementation details available)
      └─ uses_service IUserService (InstancePerLifetimeScope)
        └─ method GetUserId [L103]
          └─ implementation IUserService.GetUserId [L18-L18]
          └─ ... (no implementation details available)
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L116]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L106]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L103]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L90]
      └─ uses_cache IDistributedCache.CreateDatasetLockKey [write] [L88]

[web] GET /api/accounting/ledger/auto-journals/distributions/{datasetId:Guid}  (Cirrus.Api.Controllers.Accounting.Ledger.AutoJournals.DistributionController.Get)  [L47–L59] status=200 [auth=user]
  └─ maps_to DistributionDto [L52]
    └─ automapper.registration CirrusMappingProfile (Distribution->DistributionDto) [L498]
  └─ calls DistributionRepository.ReadQuery [L52]
  └─ query Distribution [L52]
    └─ reads_from Distributions
  └─ uses_service IControlledRepository<Distribution>
    └─ method ReadQuery [L52]
      └─ ... (no implementation details available)
  └─ sends_request CanIAccessDatasetQuery [L50]
    └─ handled_by Cirrus.ApplicationService.Accounting.Queries.CanIAccessDatasetQueryHandler.Handle [L58–L140]
      └─ uses_service IControlledRepository<Dataset>
        └─ method ReadQuery [L127]
          └─ ... (no implementation details available)
      └─ uses_service IRequestInfoService (AddScoped)
        └─ method IsValidServiceAccountRequest [L101]
          └─ implementation IRequestInfoService.IsValidServiceAccountRequest [L20-L20]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L129]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)
      └─ uses_service ITenantService (AddScoped)
        └─ method GetCurrentTenant [L88]
          └─ implementation ITenantService.GetCurrentTenant [L14-L14]
          └─ ... (no implementation details available)
      └─ uses_service IUserService (InstancePerLifetimeScope)
        └─ method GetUserId [L103]
          └─ implementation IUserService.GetUserId [L18-L18]
          └─ ... (no implementation details available)
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L116]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L106]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L103]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L90]
      └─ uses_cache IDistributedCache.CreateDatasetLockKey [write] [L88]

[web] GET /api/accounting/ledger/auto-journals/distributions/{datasetId:Guid}/profit  (Cirrus.Api.Controllers.Accounting.Ledger.AutoJournals.DistributionController.GetProfit)  [L65–L72] status=200 [auth=user]
  └─ calls DatasetRepository.ReadQuery [L68]
  └─ query Dataset [L68]
  └─ uses_service IControlledRepository<Dataset>
    └─ method ReadQuery [L68]
      └─ ... (no implementation details available)
  └─ sends_request CanIAccessDatasetQuery [L69]
    └─ handled_by Cirrus.ApplicationService.Accounting.Queries.CanIAccessDatasetQueryHandler.Handle [L58–L140]
      └─ uses_service IControlledRepository<Dataset>
        └─ method ReadQuery [L127]
          └─ ... (no implementation details available)
      └─ uses_service IRequestInfoService (AddScoped)
        └─ method IsValidServiceAccountRequest [L101]
          └─ implementation IRequestInfoService.IsValidServiceAccountRequest [L20-L20]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L129]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)
      └─ uses_service ITenantService (AddScoped)
        └─ method GetCurrentTenant [L88]
          └─ implementation ITenantService.GetCurrentTenant [L14-L14]
          └─ ... (no implementation details available)
      └─ uses_service IUserService (InstancePerLifetimeScope)
        └─ method GetUserId [L103]
          └─ implementation IUserService.GetUserId [L18-L18]
          └─ ... (no implementation details available)
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L116]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L106]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L103]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L90]
      └─ uses_cache IDistributedCache.CreateDatasetLockKey [write] [L88]

[web] PUT /api/accounting/ledger/auto-journals/distributions/{datasetId:Guid}  (Cirrus.Api.Controllers.Accounting.Ledger.AutoJournals.DistributionController.Save)  [L77–L103] status=200 [auth=user]
  └─ calls DatasetRepository.WriteQuery [L80]
  └─ calls DistributionRepository.Add [L96]
  └─ calls DistributionRepository.WriteQuery [L89]
  └─ insert Distribution [L96]
    └─ reads_from Distributions
  └─ write Distribution [L89]
    └─ reads_from Distributions
  └─ write Dataset [L80]
  └─ uses_service IControlledRepository<Dataset>
    └─ method WriteQuery [L80]
      └─ ... (no implementation details available)
  └─ uses_service IControlledRepository<Distribution>
    └─ method WriteQuery [L89]
      └─ ... (no implementation details available)
  └─ sends_request MapSourceAccountsCommand [L87]
    └─ handled_by Cirrus.ApplicationService.Accounting.Commands.MapSourceAccountsCommandHandler.Handle [L52–L259]
      └─ calls SourceAccountsCachedRepository.AddTrackedRange [L92]
      └─ calls SourceAccountsCachedRepository.InDatabaseOnly [L80]
      └─ calls SourceAccountsCachedRepository.InMemoryOnly [L72]
      └─ uses_service IControlledRepository<Source>
        └─ method WriteQuery [L151]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L123]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)
  └─ sends_request CanIAccessDatasetQuery [L81]
    └─ handled_by Cirrus.ApplicationService.Accounting.Queries.CanIAccessDatasetQueryHandler.Handle [L58–L140]
      └─ uses_service IControlledRepository<Dataset>
        └─ method ReadQuery [L127]
          └─ ... (no implementation details available)
      └─ uses_service IRequestInfoService (AddScoped)
        └─ method IsValidServiceAccountRequest [L101]
          └─ implementation IRequestInfoService.IsValidServiceAccountRequest [L20-L20]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L129]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)
      └─ uses_service ITenantService (AddScoped)
        └─ method GetCurrentTenant [L88]
          └─ implementation ITenantService.GetCurrentTenant [L14-L14]
          └─ ... (no implementation details available)
      └─ uses_service IUserService (InstancePerLifetimeScope)
        └─ method GetUserId [L103]
          └─ implementation IUserService.GetUserId [L18-L18]
          └─ ... (no implementation details available)
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L116]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L106]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L103]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L90]
      └─ uses_cache IDistributedCache.CreateDatasetLockKey [write] [L88]

[web] DELETE /api/accounting/ledger/auto-journals/primary-production/{datasetId}/{tradingAccountId}  (Cirrus.Api.Controllers.Accounting.Ledger.AutoJournals.PrimaryProductionController.Delete)  [L119–L129] status=200 [auth=user]
  └─ calls PrimaryProductionConfigRepository.Remove [L128]
  └─ calls PrimaryProductionConfigRepository.WriteQuery [L124]
  └─ delete PrimaryProductionConfig [L128]
    └─ reads_from PrimaryProductionConfigs
  └─ write PrimaryProductionConfig [L124]
    └─ reads_from PrimaryProductionConfigs
  └─ uses_service IControlledRepository<PrimaryProductionConfig>
    └─ method WriteQuery [L124]
      └─ ... (no implementation details available)
  └─ sends_request CanIAccessDatasetQuery [L122]
    └─ handled_by Cirrus.ApplicationService.Accounting.Queries.CanIAccessDatasetQueryHandler.Handle [L58–L140]
      └─ uses_service IControlledRepository<Dataset>
        └─ method ReadQuery [L127]
          └─ ... (no implementation details available)
      └─ uses_service IRequestInfoService (AddScoped)
        └─ method IsValidServiceAccountRequest [L101]
          └─ implementation IRequestInfoService.IsValidServiceAccountRequest [L20-L20]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L129]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)
      └─ uses_service ITenantService (AddScoped)
        └─ method GetCurrentTenant [L88]
          └─ implementation ITenantService.GetCurrentTenant [L14-L14]
          └─ ... (no implementation details available)
      └─ uses_service IUserService (InstancePerLifetimeScope)
        └─ method GetUserId [L103]
          └─ implementation IUserService.GetUserId [L18-L18]
          └─ ... (no implementation details available)
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L116]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L106]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L103]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L90]
      └─ uses_cache IDistributedCache.CreateDatasetLockKey [write] [L88]

[web] GET /api/accounting/ledger/auto-journals/primary-production/{datasetId}/{tradingAccountId}  (Cirrus.Api.Controllers.Accounting.Ledger.AutoJournals.PrimaryProductionController.Get)  [L47–L51] status=200 [auth=user]
  └─ sends_request GetPrimaryProductionDtoQuery [L50]
    └─ handled_by Cirrus.ApplicationService.Accounting.Queries.Ledger.GetPrimaryProductionInfoQueryHandler.Handle [L34–L79]
      └─ maps_to PrimaryProductionConfigDto [L62]
        └─ automapper.registration CirrusMappingProfile (PrimaryProductionConfig->PrimaryProductionConfigDto) [L501]
      └─ uses_service IControlledRepository<Dataset>
        └─ method ReadQuery [L51]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<PrimaryProductionConfig>
        └─ method ReadQuery [L62]
          └─ ... (no implementation details available)
      └─ uses_service IMapper
        └─ method ConfigurationProvider [L66]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L56]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)

[web] GET /api/accounting/ledger/auto-journals/primary-production/{datasetId}/{tradingAccountId}/account-balance/{sourceAccountId}  (Cirrus.Api.Controllers.Accounting.Ledger.AutoJournals.PrimaryProductionController.GetAccountBalance)  [L57–L62] status=200 [auth=user]
  └─ sends_request GetPrimaryProductionRowsDtoQuery [L60]
    └─ handled_by Cirrus.ApplicationService.Accounting.Queries.Ledger.GetPrimaryProductionRowsDtoQueryHandler.Handle [L47–L147]
      └─ maps_to PrimaryProductionConfigDto [L137]
        └─ automapper.registration CirrusMappingProfile (PrimaryProductionConfig->PrimaryProductionConfigDto) [L501]
      └─ maps_to SourceAccountForPrimaryProductionDto [L79]
        └─ automapper.registration CirrusMappingProfile (SourceAccount->SourceAccountForPrimaryProductionDto) [L276]
        └─ converts_to SourceAccountInJournalModel [L280]
      └─ uses_service GetTrialBalanceForDatesQuery
        └─ method Execute [L88]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<Dataset>
        └─ method ReadQuery [L126]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<PrimaryProductionConfig>
        └─ method ReadQuery [L137]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<SourceAccount>
        └─ method ReadQuery [L79]
          └─ ... (no implementation details available)
      └─ uses_service IMapper
        └─ method ConfigurationProvider [L83]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L131]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)

[web] GET /api/accounting/ledger/auto-journals/primary-production/{datasetId}/{tradingAccountId}/source-accounts  (Cirrus.Api.Controllers.Accounting.Ledger.AutoJournals.PrimaryProductionController.GetEligibleSourceAccounts)  [L69–L89] status=200 [auth=user]
  └─ maps_to SourceAccountLightDto [L80]
    └─ automapper.registration CirrusMappingProfile (SourceAccount->SourceAccountLightDto) [L262]
    └─ automapper.registration WorkpapersMappingProfile (SourceAccount->SourceAccountLightDto) [L617]
    └─ converts_to SourceAccountInJournalModel [L269]
    └─ converts_to LinkedSourceAccount [L72]
    └─ converts_to MappingSourceAccountModel [L830]
  └─ calls DatasetRepository.ReadQuery [L73]
  └─ calls SourceAccountRepository.ReadQuery [L80]
  └─ query SourceAccount [L80]
    └─ reads_from SourceAccounts
  └─ query Dataset [L73]
  └─ uses_service IControlledRepository<Dataset>
    └─ method ReadQuery [L73]
      └─ ... (no implementation details available)
  └─ uses_service IControlledRepository<SourceAccount>
    └─ method ReadQuery [L80]
      └─ ... (no implementation details available)
  └─ sends_request CanIAccessDatasetQuery [L72]
    └─ handled_by Cirrus.ApplicationService.Accounting.Queries.CanIAccessDatasetQueryHandler.Handle [L58–L140]
      └─ uses_service IControlledRepository<Dataset>
        └─ method ReadQuery [L127]
          └─ ... (no implementation details available)
      └─ uses_service IRequestInfoService (AddScoped)
        └─ method IsValidServiceAccountRequest [L101]
          └─ implementation IRequestInfoService.IsValidServiceAccountRequest [L20-L20]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L129]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)
      └─ uses_service ITenantService (AddScoped)
        └─ method GetCurrentTenant [L88]
          └─ implementation ITenantService.GetCurrentTenant [L14-L14]
          └─ ... (no implementation details available)
      └─ uses_service IUserService (InstancePerLifetimeScope)
        └─ method GetUserId [L103]
          └─ implementation IUserService.GetUserId [L18-L18]
          └─ ... (no implementation details available)
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L116]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L106]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L103]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L90]
      └─ uses_cache IDistributedCache.CreateDatasetLockKey [write] [L88]

[web] PUT /api/accounting/ledger/auto-journals/primary-production/{datasetId}/{tradingAccountId}/post-journal  (Cirrus.Api.Controllers.Accounting.Ledger.AutoJournals.PrimaryProductionController.Save)  [L107–L113] status=200 [auth=user]
  └─ sends_request ProcessPrimaryProductionJournalCommand [L110]
    └─ handled_by Cirrus.ApplicationService.Accounting.Commands.Ledger.AutoJournals.ProcessPrimaryProductionJournalCommandHandler.Handle [L46–L446]
      └─ maps_to SourceAccountInJournalModel [L326]
        └─ converts_to SourceAccountLightDto [L265]
      └─ maps_to SourceAccountInJournalModel [L309]
        └─ converts_to SourceAccountLightDto [L265]
      └─ maps_to SourceAccountInJournalModel [L270]
        └─ converts_to SourceAccountLightDto [L265]
      └─ maps_to SourceAccountInJournalModel [L251]
        └─ converts_to SourceAccountLightDto [L265]
      └─ uses_service IControlledRepository<Dataset>
        └─ method ReadQuery [L68]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<Journal>
        └─ method Remove [L97]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<PrimaryProductionConfig>
        └─ method WriteQuery [L159]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<TradingAccount>
        └─ method ReadQuery [L73]
          └─ ... (no implementation details available)
      └─ uses_service IMapper
        └─ method Map [L251]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L71]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)

[web] POST /api/accounting/ledger/cashflow/categories/{id}/copy  (Cirrus.Api.Controllers.Accounting.Ledger.Cashflow.CashflowCategoriesController.CopyCategory)  [L86–L102] status=201 [auth=Authentication.UserPolicy]
  └─ calls CashflowCategoryRepository.Add [L101]
  └─ calls CashflowCategoryRepository.WriteQuery [L89]
  └─ insert CashflowCategory [L101]
    └─ reads_from CashflowCategories
  └─ write CashflowCategory [L89]
    └─ reads_from CashflowCategories
  └─ uses_service IControlledRepository<CashflowCategory>
    └─ method WriteQuery [L89]
      └─ ... (no implementation details available)
  └─ uses_service IReadRepository (InstancePerLifetimeScope)
    └─ method Table [L95]
      └─ ... (no implementation details available)
  └─ sends_request CanIAccessFileQuery [L93]
    └─ handled_by Cirrus.ApplicationService.Firm.Queries.CanIAccessFileQueryHandler.Handle [L43–L101]
      └─ uses_service IRequestInfoService (AddScoped)
        └─ method IsValidServiceAccountRequest [L66]
          └─ implementation IRequestInfoService.IsValidServiceAccountRequest [L20-L20]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L90]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)
      └─ uses_service ITenantService (AddScoped)
        └─ method GetCurrentTenant [L68]
          └─ implementation ITenantService.GetCurrentTenant [L14-L14]
          └─ ... (no implementation details available)
      └─ uses_service IUserService (InstancePerLifetimeScope)
        └─ method GetUserId [L68]
          └─ implementation IUserService.GetUserId [L18-L18]
          └─ ... (no implementation details available)
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L79]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L71]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L68]

[web] DELETE /api/accounting/ledger/cashflow/categories/{id}  (Cirrus.Api.Controllers.Accounting.Ledger.Cashflow.CashflowCategoriesController.Delete)  [L134–L140] status=200 [auth=Authentication.UserPolicy]
  └─ calls CashflowCategoryRepository.Remove [L139]
  └─ calls CashflowCategoryRepository.WriteQuery [L137]
  └─ delete CashflowCategory [L139]
    └─ reads_from CashflowCategories
  └─ write CashflowCategory [L137]
    └─ reads_from CashflowCategories
  └─ uses_service IControlledRepository<CashflowCategory>
    └─ method WriteQuery [L137]
      └─ ... (no implementation details available)
  └─ sends_request CanIAccessFileQuery [L138]
    └─ handled_by Cirrus.ApplicationService.Firm.Queries.CanIAccessFileQueryHandler.Handle [L43–L101]
      └─ uses_service IRequestInfoService (AddScoped)
        └─ method IsValidServiceAccountRequest [L66]
          └─ implementation IRequestInfoService.IsValidServiceAccountRequest [L20-L20]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L90]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)
      └─ uses_service ITenantService (AddScoped)
        └─ method GetCurrentTenant [L68]
          └─ implementation ITenantService.GetCurrentTenant [L14-L14]
          └─ ... (no implementation details available)
      └─ uses_service IUserService (InstancePerLifetimeScope)
        └─ method GetUserId [L68]
          └─ implementation IUserService.GetUserId [L18-L18]
          └─ ... (no implementation details available)
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L79]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L71]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L68]

[web] GET /api/accounting/ledger/cashflow/categories/  (Cirrus.Api.Controllers.Accounting.Ledger.Cashflow.CashflowCategoriesController.GetCategories)  [L57–L84] status=200 [auth=Authentication.UserPolicy]
  └─ maps_to CashflowCategoryLightDto [L79]
    └─ automapper.registration CirrusMappingProfile (CashflowCategory->CashflowCategoryLightDto) [L466]
  └─ maps_to CashflowCategoryLightDto [L70]
  └─ calls CashflowCategoryRepository.ReadQuery [L79]
  └─ query CashflowCategory [L79]
    └─ reads_from CashflowCategories
  └─ uses_service IControlledRepository<CashflowCategory>
    └─ method ReadQuery [L79]
      └─ ... (no implementation details available)
  └─ uses_service IReadRepository (InstancePerLifetimeScope)
    └─ method Table [L70]
      └─ ... (no implementation details available)
  └─ sends_request CanIAccessFileQuery [L66]
    └─ handled_by Cirrus.ApplicationService.Firm.Queries.CanIAccessFileQueryHandler.Handle [L43–L101]
      └─ uses_service IRequestInfoService (AddScoped)
        └─ method IsValidServiceAccountRequest [L66]
          └─ implementation IRequestInfoService.IsValidServiceAccountRequest [L20-L20]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L90]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)
      └─ uses_service ITenantService (AddScoped)
        └─ method GetCurrentTenant [L68]
          └─ implementation ITenantService.GetCurrentTenant [L14-L14]
          └─ ... (no implementation details available)
      └─ uses_service IUserService (InstancePerLifetimeScope)
        └─ method GetUserId [L68]
          └─ implementation IUserService.GetUserId [L18-L18]
          └─ ... (no implementation details available)
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L79]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L71]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L68]

[web] GET /api/accounting/ledger/cashflow/categories/{id}  (Cirrus.Api.Controllers.Accounting.Ledger.Cashflow.CashflowCategoriesController.GetCategory)  [L46–L55] status=200 [auth=Authentication.UserPolicy]
  └─ maps_to CashflowCategoryDto [L54]
  └─ maps_to CashflowCategoryDto [L49]
    └─ automapper.registration CirrusMappingProfile (CashflowCategory->CashflowCategoryDto) [L468]
  └─ calls CashflowCategoryRepository.ReadQuery [L49]
  └─ query CashflowCategory [L49]
    └─ reads_from CashflowCategories
  └─ uses_service IControlledRepository<CashflowCategory>
    └─ method ReadQuery [L49]
      └─ ... (no implementation details available)
  └─ uses_service IMapper
    └─ method Map [L54]
      └─ ... (no implementation details available)
  └─ sends_request CanIAccessFileQuery [L52]
    └─ handled_by Cirrus.ApplicationService.Firm.Queries.CanIAccessFileQueryHandler.Handle [L43–L101]
      └─ uses_service IRequestInfoService (AddScoped)
        └─ method IsValidServiceAccountRequest [L66]
          └─ implementation IRequestInfoService.IsValidServiceAccountRequest [L20-L20]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L90]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)
      └─ uses_service ITenantService (AddScoped)
        └─ method GetCurrentTenant [L68]
          └─ implementation ITenantService.GetCurrentTenant [L14-L14]
          └─ ... (no implementation details available)
      └─ uses_service IUserService (InstancePerLifetimeScope)
        └─ method GetUserId [L68]
          └─ implementation IUserService.GetUserId [L18-L18]
          └─ ... (no implementation details available)
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L79]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L71]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L68]

[web] PUT /api/accounting/ledger/cashflow/categories/{id}/reorder  (Cirrus.Api.Controllers.Accounting.Ledger.Cashflow.CashflowCategoriesController.Reorder)  [L117–L132] status=200 [auth=Authentication.UserPolicy]
  └─ calls CashflowCategoryRepository.WriteQuery [L120]
  └─ write CashflowCategory [L120]
    └─ reads_from CashflowCategories
  └─ uses_service IControlledRepository<CashflowCategory>
    └─ method WriteQuery [L120]
      └─ ... (no implementation details available)
  └─ uses_service IReadRepository (InstancePerLifetimeScope)
    └─ method Table [L125]
      └─ ... (no implementation details available)
  └─ sends_request CanIAccessFileQuery [L123]
    └─ handled_by Cirrus.ApplicationService.Firm.Queries.CanIAccessFileQueryHandler.Handle [L43–L101]
      └─ uses_service IRequestInfoService (AddScoped)
        └─ method IsValidServiceAccountRequest [L66]
          └─ implementation IRequestInfoService.IsValidServiceAccountRequest [L20-L20]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L90]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)
      └─ uses_service ITenantService (AddScoped)
        └─ method GetCurrentTenant [L68]
          └─ implementation ITenantService.GetCurrentTenant [L14-L14]
          └─ ... (no implementation details available)
      └─ uses_service IUserService (InstancePerLifetimeScope)
        └─ method GetUserId [L68]
          └─ implementation IUserService.GetUserId [L18-L18]
          └─ ... (no implementation details available)
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L79]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L71]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L68]

[web] PUT /api/accounting/ledger/cashflow/categories/{id}  (Cirrus.Api.Controllers.Accounting.Ledger.Cashflow.CashflowCategoriesController.Update)  [L104–L115] status=200 [auth=Authentication.UserPolicy]
  └─ calls CashflowCategoryRepository.WriteQuery [L107]
  └─ calls CashflowLineRepository.WriteQuery [L109]
  └─ write CashflowCategory [L107]
    └─ reads_from CashflowCategories
  └─ write CashflowLine [L109]
    └─ reads_from CashflowLines
  └─ uses_service IControlledRepository<CashflowCategory>
    └─ method WriteQuery [L107]
      └─ ... (no implementation details available)
  └─ uses_service IControlledRepository<CashflowLine>
    └─ method WriteQuery [L109]
      └─ ... (no implementation details available)
  └─ sends_request CanIAccessFileQuery [L108]
    └─ handled_by Cirrus.ApplicationService.Firm.Queries.CanIAccessFileQueryHandler.Handle [L43–L101]
      └─ uses_service IRequestInfoService (AddScoped)
        └─ method IsValidServiceAccountRequest [L66]
          └─ implementation IRequestInfoService.IsValidServiceAccountRequest [L20-L20]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L90]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)
      └─ uses_service ITenantService (AddScoped)
        └─ method GetCurrentTenant [L68]
          └─ implementation ITenantService.GetCurrentTenant [L14-L14]
          └─ ... (no implementation details available)
      └─ uses_service IUserService (InstancePerLifetimeScope)
        └─ method GetUserId [L68]
          └─ implementation IUserService.GetUserId [L18-L18]
          └─ ... (no implementation details available)
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L79]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L71]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L68]

[web] GET /api/accounting/ledger/cashflow/audit-report  (Cirrus.Api.Controllers.Accounting.Ledger.Cashflow.CashflowController.GetCashflowAuditReport)  [L29–L40] status=200 [auth=Authentication.UserPolicy]
  └─ sends_request GetCashflowAuditQuery [L38]
    └─ handled_by Cirrus.ApplicationService.Accounting.Queries.GetCashflowAuditQueryHandler.Handle [L87–L305]
      └─ uses_service GetAccountsQuery
        └─ method Execute [L247]
          └─ implementation Cirrus.Connections.DataGet.Queries.GetAccountsQuery.Execute [L9-L23]
            └─ handled_by Cirrus.Connections.DataGet.Queries.GetAccountsQueryHandler.Handle [L25–L59]
              └─ uses_client DataGetClient [L40]
                └─ calls GetAccounts (GET /api/accounting-file/{fileId}/accounts?apiType={*}&password={*}&username={*}, method=GetAccountsAsync, target=DataGet.Api, query=apiType={*}&password={*}&username={*}) [L65]
                  └─ target_service DataGet.Api
                    └─ [web] GET /api/accounting-file/{fileId}/accounts  (DataGet.Api.Controllers.Connections.AccountingFileController.GetAccounts)  [L44–L52] status=200 [auth=Authentication.MachineToMachinePolicy]
                      └─ sends_request GetAccountsQuery [L48]
                        └─ handled_by Cirrus.Connections.DataGet.Queries.GetAccountsQueryHandler.Handle [L25–L59]
              └─ uses_service DatagetFileIdService
                └─ method GetFileIdFromSource [L38]
                  └─ implementation Cirrus.Connections.DataGet.Services.DatagetFileIdService.GetFileIdFromSource [L14-L37]
              └─ uses_service DataGetClient
                └─ method GetAccountsAsync [L40]
                  └─ implementation Cirrus.Connections.DataGet.Client.DataGetClient.GetAccountsAsync [L15-L302]
                    └─ calls GetAccounts [L106]
      └─ uses_service GetAccountTypesQuery
        └─ method Execute [L244]
          └─ ... (no implementation details available)
      └─ uses_service GetCashflowCategoriesQuery
        └─ method Execute [L225]
          └─ ... (no implementation details available)
      └─ uses_service GetCashflowJournalLinesQuery
        └─ method Execute [L236]
          └─ ... (no implementation details available)
      └─ uses_service GetCashflowLinesQuery
        └─ method Execute [L226]
          └─ ... (no implementation details available)
      └─ uses_service GetCashflowReconciliationLinesQuery
        └─ method Execute [L233]
          └─ ... (no implementation details available)
      └─ uses_service GetTrialBalanceForDatesQuery
        └─ method Execute [L250]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<Dataset>
        └─ method ReadQuery [L213]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L122]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)

[web] POST /api/accounting/ledger/cashflow/journals/  (Cirrus.Api.Controllers.Accounting.Ledger.Cashflow.CashflowJournalController.Create)  [L81–L86] status=201 [auth=Authentication.UserPolicy]
  └─ sends_request CreateCashflowJournalCommand [L84]
    └─ handled_by Cirrus.ApplicationService.Accounting.Commands.CreateUpdateCashflowJournalCommandHandler.Handle [L57–L147]
      └─ uses_service GetCashflowLinesQuery
        └─ method Execute [L113]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<CashflowJournal>
        └─ method Add [L86]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<Dataset>
        └─ method WriteQuery [L80]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<File>
        └─ method ReadQuery [L140]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L81]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)

[web] DELETE /api/accounting/ledger/cashflow/journals/{id:Guid}  (Cirrus.Api.Controllers.Accounting.Ledger.Cashflow.CashflowJournalController.Delete)  [L101–L107] status=200 [auth=Authentication.UserPolicy]
  └─ calls CashflowJournalRepository.Remove [L105]
  └─ calls CashflowJournalRepository.WriteQuery [L104]
  └─ delete CashflowJournal [L105]
    └─ reads_from CashflowJournals
  └─ write CashflowJournal [L104]
    └─ reads_from CashflowJournals
  └─ uses_service IControlledRepository<CashflowJournal>
    └─ method WriteQuery [L104]
      └─ ... (no implementation details available)

[web] GET /api/accounting/ledger/cashflow/journals/{id}  (Cirrus.Api.Controllers.Accounting.Ledger.Cashflow.CashflowJournalController.Get)  [L40–L49] status=200 [auth=Authentication.UserPolicy]
  └─ maps_to CashflowJournalDto [L43]
    └─ automapper.registration CirrusMappingProfile (CashflowJournal->CashflowJournalDto) [L508]
  └─ calls CashflowJournalRepository.ReadQuery [L43]
  └─ query CashflowJournal [L43]
    └─ reads_from CashflowJournals
  └─ uses_service IControlledRepository<CashflowJournal>
    └─ method ReadQuery [L43]
      └─ ... (no implementation details available)
  └─ sends_request CanIAccessDatasetQuery [L46]
    └─ handled_by Cirrus.ApplicationService.Accounting.Queries.CanIAccessDatasetQueryHandler.Handle [L58–L140]
      └─ uses_service IControlledRepository<Dataset>
        └─ method ReadQuery [L127]
          └─ ... (no implementation details available)
      └─ uses_service IRequestInfoService (AddScoped)
        └─ method IsValidServiceAccountRequest [L101]
          └─ implementation IRequestInfoService.IsValidServiceAccountRequest [L20-L20]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L129]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)
      └─ uses_service ITenantService (AddScoped)
        └─ method GetCurrentTenant [L88]
          └─ implementation ITenantService.GetCurrentTenant [L14-L14]
          └─ ... (no implementation details available)
      └─ uses_service IUserService (InstancePerLifetimeScope)
        └─ method GetUserId [L103]
          └─ implementation IUserService.GetUserId [L18-L18]
          └─ ... (no implementation details available)
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L116]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L106]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L103]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L90]
      └─ uses_cache IDistributedCache.CreateDatasetLockKey [write] [L88]

[web] GET /api/accounting/ledger/cashflow/journals/  (Cirrus.Api.Controllers.Accounting.Ledger.Cashflow.CashflowJournalController.GetAllForDataset)  [L55–L65] status=200 [auth=Authentication.UserPolicy]
  └─ maps_to CashflowJournalLightDto [L59]
    └─ automapper.registration CirrusMappingProfile (CashflowJournal->CashflowJournalLightDto) [L509]
  └─ calls CashflowJournalRepository.ReadQuery [L59]
  └─ query CashflowJournal [L59]
    └─ reads_from CashflowJournals
  └─ uses_service IControlledRepository<CashflowJournal>
    └─ method ReadQuery [L59]
      └─ ... (no implementation details available)
  └─ sends_request CanIAccessDatasetQuery [L58]
    └─ handled_by Cirrus.ApplicationService.Accounting.Queries.CanIAccessDatasetQueryHandler.Handle [L58–L140]
      └─ uses_service IControlledRepository<Dataset>
        └─ method ReadQuery [L127]
          └─ ... (no implementation details available)
      └─ uses_service IRequestInfoService (AddScoped)
        └─ method IsValidServiceAccountRequest [L101]
          └─ implementation IRequestInfoService.IsValidServiceAccountRequest [L20-L20]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L129]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)
      └─ uses_service ITenantService (AddScoped)
        └─ method GetCurrentTenant [L88]
          └─ implementation ITenantService.GetCurrentTenant [L14-L14]
          └─ ... (no implementation details available)
      └─ uses_service IUserService (InstancePerLifetimeScope)
        └─ method GetUserId [L103]
          └─ implementation IUserService.GetUserId [L18-L18]
          └─ ... (no implementation details available)
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L116]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L106]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L103]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L90]
      └─ uses_cache IDistributedCache.CreateDatasetLockKey [write] [L88]

[web] GET /api/accounting/ledger/cashflow/journals/package  (Cirrus.Api.Controllers.Accounting.Ledger.Cashflow.CashflowJournalController.GetPackage)  [L71–L75] status=200 [auth=Authentication.UserPolicy]
  └─ sends_request GetCashflowJournalPackageQuery [L74]
    └─ handled_by Cirrus.ApplicationService.Accounting.Queries.GetCashflowJournalPackageQueryHandler.Handle [L46–L118]
      └─ uses_service GetCashflowLinesQuery
        └─ method Execute [L82]
          └─ ... (no implementation details available)
      └─ uses_service GetCashflowReconciliationLinesQuery
        └─ method Execute [L87]
          └─ ... (no implementation details available)
      └─ uses_service GetCashflowSimpleLinesQuery
        └─ method Execute [L92]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<CashflowJournal>
        └─ method ReadQuery [L99]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<Dataset>
        └─ method ReadQuery [L69]
          └─ ... (no implementation details available)

[web] PUT /api/accounting/ledger/cashflow/journals/{id:Guid}  (Cirrus.Api.Controllers.Accounting.Ledger.Cashflow.CashflowJournalController.Update)  [L91–L96] status=200 [auth=Authentication.UserPolicy]
  └─ sends_request UpdateCashflowJournalCommand [L94]

[web] POST /api/accounting/ledger/cashflow/lines/  (Cirrus.Api.Controllers.Accounting.Ledger.Cashflow.CashflowLinesController.Create)  [L65–L77] status=201 [auth=Authentication.UserPolicy]
  └─ calls CashflowLineRepository.Add [L76]
  └─ insert CashflowLine [L76]
    └─ reads_from CashflowLines
  └─ uses_service IControlledRepository<CashflowLine>
    └─ method Add [L76]
      └─ ... (no implementation details available)
  └─ uses_service IReadRepository (InstancePerLifetimeScope)
    └─ method Table [L70]
      └─ ... (no implementation details available)
  └─ sends_request CanIAccessFileQuery [L68]
    └─ handled_by Cirrus.ApplicationService.Firm.Queries.CanIAccessFileQueryHandler.Handle [L43–L101]
      └─ uses_service IRequestInfoService (AddScoped)
        └─ method IsValidServiceAccountRequest [L66]
          └─ implementation IRequestInfoService.IsValidServiceAccountRequest [L20-L20]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L90]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)
      └─ uses_service ITenantService (AddScoped)
        └─ method GetCurrentTenant [L68]
          └─ implementation ITenantService.GetCurrentTenant [L14-L14]
          └─ ... (no implementation details available)
      └─ uses_service IUserService (InstancePerLifetimeScope)
        └─ method GetUserId [L68]
          └─ implementation IUserService.GetUserId [L18-L18]
          └─ ... (no implementation details available)
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L79]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L71]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L68]

[web] DELETE /api/accounting/ledger/cashflow/lines/{id}  (Cirrus.Api.Controllers.Accounting.Ledger.Cashflow.CashflowLinesController.Delete)  [L116–L122] status=200 [auth=Authentication.UserPolicy]
  └─ calls CashflowLineRepository.Remove [L121]
  └─ calls CashflowLineRepository.WriteQuery [L119]
  └─ delete CashflowLine [L121]
    └─ reads_from CashflowLines
  └─ write CashflowLine [L119]
    └─ reads_from CashflowLines
  └─ uses_service IControlledRepository<CashflowLine>
    └─ method WriteQuery [L119]
      └─ ... (no implementation details available)
  └─ sends_request CanIAccessFileQuery [L120]
    └─ handled_by Cirrus.ApplicationService.Firm.Queries.CanIAccessFileQueryHandler.Handle [L43–L101]
      └─ uses_service IRequestInfoService (AddScoped)
        └─ method IsValidServiceAccountRequest [L66]
          └─ implementation IRequestInfoService.IsValidServiceAccountRequest [L20-L20]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L90]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)
      └─ uses_service ITenantService (AddScoped)
        └─ method GetCurrentTenant [L68]
          └─ implementation ITenantService.GetCurrentTenant [L14-L14]
          └─ ... (no implementation details available)
      └─ uses_service IUserService (InstancePerLifetimeScope)
        └─ method GetUserId [L68]
          └─ implementation IUserService.GetUserId [L18-L18]
          └─ ... (no implementation details available)
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L79]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L71]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L68]

[web] GET /api/accounting/ledger/cashflow/lines/{id}  (Cirrus.Api.Controllers.Accounting.Ledger.Cashflow.CashflowLinesController.GetLine)  [L42–L51] status=200 [auth=Authentication.UserPolicy]
  └─ maps_to CashflowLineDto [L50]
  └─ maps_to CashflowLineDto [L45]
    └─ automapper.registration CirrusMappingProfile (CashflowLine->CashflowLineDto) [L470]
  └─ calls CashflowLineRepository.ReadQuery [L45]
  └─ query CashflowLine [L45]
    └─ reads_from CashflowLines
  └─ uses_service IControlledRepository<CashflowLine>
    └─ method ReadQuery [L45]
      └─ ... (no implementation details available)
  └─ uses_service IMapper
    └─ method Map [L50]
      └─ ... (no implementation details available)
  └─ sends_request CanIAccessFileQuery [L48]
    └─ handled_by Cirrus.ApplicationService.Firm.Queries.CanIAccessFileQueryHandler.Handle [L43–L101]
      └─ uses_service IRequestInfoService (AddScoped)
        └─ method IsValidServiceAccountRequest [L66]
          └─ implementation IRequestInfoService.IsValidServiceAccountRequest [L20-L20]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L90]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)
      └─ uses_service ITenantService (AddScoped)
        └─ method GetCurrentTenant [L68]
          └─ implementation ITenantService.GetCurrentTenant [L14-L14]
          └─ ... (no implementation details available)
      └─ uses_service IUserService (InstancePerLifetimeScope)
        └─ method GetUserId [L68]
          └─ implementation IUserService.GetUserId [L18-L18]
          └─ ... (no implementation details available)
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L79]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L71]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L68]

[web] GET /api/accounting/ledger/cashflow/lines/  (Cirrus.Api.Controllers.Accounting.Ledger.Cashflow.CashflowLinesController.GetLines)  [L53–L63] status=200 [auth=Authentication.UserPolicy]
  └─ maps_to CashflowLineDto [L58]
    └─ automapper.registration CirrusMappingProfile (CashflowLine->CashflowLineDto) [L470]
  └─ calls CashflowLineRepository.ReadQuery [L58]
  └─ query CashflowLine [L58]
    └─ reads_from CashflowLines
  └─ uses_service IControlledRepository<CashflowLine>
    └─ method ReadQuery [L58]
      └─ ... (no implementation details available)
  └─ sends_request CanIAccessFileQuery [L56]
    └─ handled_by Cirrus.ApplicationService.Firm.Queries.CanIAccessFileQueryHandler.Handle [L43–L101]
      └─ uses_service IRequestInfoService (AddScoped)
        └─ method IsValidServiceAccountRequest [L66]
          └─ implementation IRequestInfoService.IsValidServiceAccountRequest [L20-L20]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L90]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)
      └─ uses_service ITenantService (AddScoped)
        └─ method GetCurrentTenant [L68]
          └─ implementation ITenantService.GetCurrentTenant [L14-L14]
          └─ ... (no implementation details available)
      └─ uses_service IUserService (InstancePerLifetimeScope)
        └─ method GetUserId [L68]
          └─ implementation IUserService.GetUserId [L18-L18]
          └─ ... (no implementation details available)
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L79]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L71]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L68]

[web] PUT /api/accounting/ledger/cashflow/lines/{id}/reorder  (Cirrus.Api.Controllers.Accounting.Ledger.Cashflow.CashflowLinesController.Reorder)  [L87–L114] status=200 [auth=Authentication.UserPolicy]
  └─ calls CashflowLineRepository.ReadQuery [L102]
  └─ calls CashflowLineRepository.WriteQuery [L90]
  └─ query CashflowLine [L102]
    └─ reads_from CashflowLines
  └─ write CashflowLine [L90]
    └─ reads_from CashflowLines
  └─ uses_service IControlledRepository<CashflowLine>
    └─ method WriteQuery [L90]
      └─ ... (no implementation details available)
  └─ uses_service IReadRepository (InstancePerLifetimeScope)
    └─ method Table [L95]
      └─ ... (no implementation details available)
  └─ sends_request CanIAccessFileQuery [L93]
    └─ handled_by Cirrus.ApplicationService.Firm.Queries.CanIAccessFileQueryHandler.Handle [L43–L101]
      └─ uses_service IRequestInfoService (AddScoped)
        └─ method IsValidServiceAccountRequest [L66]
          └─ implementation IRequestInfoService.IsValidServiceAccountRequest [L20-L20]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L90]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)
      └─ uses_service ITenantService (AddScoped)
        └─ method GetCurrentTenant [L68]
          └─ implementation ITenantService.GetCurrentTenant [L14-L14]
          └─ ... (no implementation details available)
      └─ uses_service IUserService (InstancePerLifetimeScope)
        └─ method GetUserId [L68]
          └─ implementation IUserService.GetUserId [L18-L18]
          └─ ... (no implementation details available)
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L79]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L71]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L68]

[web] PUT /api/accounting/ledger/cashflow/lines/{id}  (Cirrus.Api.Controllers.Accounting.Ledger.Cashflow.CashflowLinesController.Update)  [L79–L85] status=200 [auth=Authentication.UserPolicy]
  └─ calls CashflowLineRepository.WriteQuery [L82]
  └─ write CashflowLine [L82]
    └─ reads_from CashflowLines
  └─ uses_service IControlledRepository<CashflowLine>
    └─ method WriteQuery [L82]
      └─ ... (no implementation details available)
  └─ sends_request CanIAccessFileQuery [L83]
    └─ handled_by Cirrus.ApplicationService.Firm.Queries.CanIAccessFileQueryHandler.Handle [L43–L101]
      └─ uses_service IRequestInfoService (AddScoped)
        └─ method IsValidServiceAccountRequest [L66]
          └─ implementation IRequestInfoService.IsValidServiceAccountRequest [L20-L20]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L90]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)
      └─ uses_service ITenantService (AddScoped)
        └─ method GetCurrentTenant [L68]
          └─ implementation ITenantService.GetCurrentTenant [L14-L14]
          └─ ... (no implementation details available)
      └─ uses_service IUserService (InstancePerLifetimeScope)
        └─ method GetUserId [L68]
          └─ implementation IUserService.GetUserId [L18-L18]
          └─ ... (no implementation details available)
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L79]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L71]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L68]

[web] POST /api/accounting/ledger/cashflow/reconciliation-lines/  (Cirrus.Api.Controllers.Accounting.Ledger.Cashflow.CashflowReconciliationLinesController.Create)  [L65–L77] status=201 [auth=Authentication.UserPolicy]
  └─ calls CashflowReconciliationLineRepository.Add [L76]
  └─ insert CashflowReconciliationLine [L76]
    └─ reads_from CashflowReconciliationLines
  └─ uses_service IControlledRepository<CashflowReconciliationLine>
    └─ method Add [L76]
      └─ ... (no implementation details available)
  └─ uses_service IReadRepository (InstancePerLifetimeScope)
    └─ method Table [L70]
      └─ ... (no implementation details available)
  └─ sends_request CanIAccessFileQuery [L68]
    └─ handled_by Cirrus.ApplicationService.Firm.Queries.CanIAccessFileQueryHandler.Handle [L43–L101]
      └─ uses_service IRequestInfoService (AddScoped)
        └─ method IsValidServiceAccountRequest [L66]
          └─ implementation IRequestInfoService.IsValidServiceAccountRequest [L20-L20]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L90]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)
      └─ uses_service ITenantService (AddScoped)
        └─ method GetCurrentTenant [L68]
          └─ implementation ITenantService.GetCurrentTenant [L14-L14]
          └─ ... (no implementation details available)
      └─ uses_service IUserService (InstancePerLifetimeScope)
        └─ method GetUserId [L68]
          └─ implementation IUserService.GetUserId [L18-L18]
          └─ ... (no implementation details available)
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L79]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L71]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L68]

[web] DELETE /api/accounting/ledger/cashflow/reconciliation-lines/{id}  (Cirrus.Api.Controllers.Accounting.Ledger.Cashflow.CashflowReconciliationLinesController.Delete)  [L112–L118] status=200 [auth=Authentication.UserPolicy]
  └─ calls CashflowReconciliationLineRepository.Remove [L117]
  └─ calls CashflowReconciliationLineRepository.WriteQuery [L115]
  └─ delete CashflowReconciliationLine [L117]
    └─ reads_from CashflowReconciliationLines
  └─ write CashflowReconciliationLine [L115]
    └─ reads_from CashflowReconciliationLines
  └─ uses_service IControlledRepository<CashflowReconciliationLine>
    └─ method WriteQuery [L115]
      └─ ... (no implementation details available)
  └─ sends_request CanIAccessFileQuery [L116]
    └─ handled_by Cirrus.ApplicationService.Firm.Queries.CanIAccessFileQueryHandler.Handle [L43–L101]
      └─ uses_service IRequestInfoService (AddScoped)
        └─ method IsValidServiceAccountRequest [L66]
          └─ implementation IRequestInfoService.IsValidServiceAccountRequest [L20-L20]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L90]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)
      └─ uses_service ITenantService (AddScoped)
        └─ method GetCurrentTenant [L68]
          └─ implementation ITenantService.GetCurrentTenant [L14-L14]
          └─ ... (no implementation details available)
      └─ uses_service IUserService (InstancePerLifetimeScope)
        └─ method GetUserId [L68]
          └─ implementation IUserService.GetUserId [L18-L18]
          └─ ... (no implementation details available)
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L79]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L71]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L68]

[web] GET /api/accounting/ledger/cashflow/reconciliation-lines/{id}  (Cirrus.Api.Controllers.Accounting.Ledger.Cashflow.CashflowReconciliationLinesController.GetLine)  [L42–L51] status=200 [auth=Authentication.UserPolicy]
  └─ maps_to CashflowReconciliationLineDto [L50]
  └─ maps_to CashflowReconciliationLineDto [L45]
    └─ automapper.registration CirrusMappingProfile (CashflowReconciliationLine->CashflowReconciliationLineDto) [L472]
  └─ calls CashflowReconciliationLineRepository.ReadQuery [L45]
  └─ query CashflowReconciliationLine [L45]
    └─ reads_from CashflowReconciliationLines
  └─ uses_service IControlledRepository<CashflowReconciliationLine>
    └─ method ReadQuery [L45]
      └─ ... (no implementation details available)
  └─ uses_service IMapper
    └─ method Map [L50]
      └─ ... (no implementation details available)
  └─ sends_request CanIAccessFileQuery [L48]
    └─ handled_by Cirrus.ApplicationService.Firm.Queries.CanIAccessFileQueryHandler.Handle [L43–L101]
      └─ uses_service IRequestInfoService (AddScoped)
        └─ method IsValidServiceAccountRequest [L66]
          └─ implementation IRequestInfoService.IsValidServiceAccountRequest [L20-L20]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L90]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)
      └─ uses_service ITenantService (AddScoped)
        └─ method GetCurrentTenant [L68]
          └─ implementation ITenantService.GetCurrentTenant [L14-L14]
          └─ ... (no implementation details available)
      └─ uses_service IUserService (InstancePerLifetimeScope)
        └─ method GetUserId [L68]
          └─ implementation IUserService.GetUserId [L18-L18]
          └─ ... (no implementation details available)
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L79]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L71]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L68]

[web] GET /api/accounting/ledger/cashflow/reconciliation-lines/  (Cirrus.Api.Controllers.Accounting.Ledger.Cashflow.CashflowReconciliationLinesController.GetLines)  [L53–L63] status=200 [auth=Authentication.UserPolicy]
  └─ maps_to CashflowReconciliationLineDto [L58]
    └─ automapper.registration CirrusMappingProfile (CashflowReconciliationLine->CashflowReconciliationLineDto) [L472]
  └─ calls CashflowReconciliationLineRepository.ReadQuery [L58]
  └─ query CashflowReconciliationLine [L58]
    └─ reads_from CashflowReconciliationLines
  └─ uses_service IControlledRepository<CashflowReconciliationLine>
    └─ method ReadQuery [L58]
      └─ ... (no implementation details available)
  └─ sends_request CanIAccessFileQuery [L56]
    └─ handled_by Cirrus.ApplicationService.Firm.Queries.CanIAccessFileQueryHandler.Handle [L43–L101]
      └─ uses_service IRequestInfoService (AddScoped)
        └─ method IsValidServiceAccountRequest [L66]
          └─ implementation IRequestInfoService.IsValidServiceAccountRequest [L20-L20]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L90]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)
      └─ uses_service ITenantService (AddScoped)
        └─ method GetCurrentTenant [L68]
          └─ implementation ITenantService.GetCurrentTenant [L14-L14]
          └─ ... (no implementation details available)
      └─ uses_service IUserService (InstancePerLifetimeScope)
        └─ method GetUserId [L68]
          └─ implementation IUserService.GetUserId [L18-L18]
          └─ ... (no implementation details available)
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L79]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L71]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L68]

[web] PUT /api/accounting/ledger/cashflow/reconciliation-lines/{id}/reorder  (Cirrus.Api.Controllers.Accounting.Ledger.Cashflow.CashflowReconciliationLinesController.Reorder)  [L87–L110] status=200 [auth=Authentication.UserPolicy]
  └─ calls CashflowReconciliationLineRepository.ReadQuery [L102]
  └─ calls CashflowReconciliationLineRepository.WriteQuery [L90]
  └─ query CashflowReconciliationLine [L102]
    └─ reads_from CashflowReconciliationLines
  └─ write CashflowReconciliationLine [L90]
    └─ reads_from CashflowReconciliationLines
  └─ uses_service IControlledRepository<CashflowReconciliationLine>
    └─ method WriteQuery [L90]
      └─ ... (no implementation details available)
  └─ uses_service IReadRepository (InstancePerLifetimeScope)
    └─ method Table [L95]
      └─ ... (no implementation details available)
  └─ sends_request CanIAccessFileQuery [L93]
    └─ handled_by Cirrus.ApplicationService.Firm.Queries.CanIAccessFileQueryHandler.Handle [L43–L101]
      └─ uses_service IRequestInfoService (AddScoped)
        └─ method IsValidServiceAccountRequest [L66]
          └─ implementation IRequestInfoService.IsValidServiceAccountRequest [L20-L20]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L90]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)
      └─ uses_service ITenantService (AddScoped)
        └─ method GetCurrentTenant [L68]
          └─ implementation ITenantService.GetCurrentTenant [L14-L14]
          └─ ... (no implementation details available)
      └─ uses_service IUserService (InstancePerLifetimeScope)
        └─ method GetUserId [L68]
          └─ implementation IUserService.GetUserId [L18-L18]
          └─ ... (no implementation details available)
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L79]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L71]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L68]

[web] PUT /api/accounting/ledger/cashflow/reconciliation-lines/{id}  (Cirrus.Api.Controllers.Accounting.Ledger.Cashflow.CashflowReconciliationLinesController.Update)  [L79–L85] status=200 [auth=Authentication.UserPolicy]
  └─ calls CashflowReconciliationLineRepository.WriteQuery [L82]
  └─ write CashflowReconciliationLine [L82]
    └─ reads_from CashflowReconciliationLines
  └─ uses_service IControlledRepository<CashflowReconciliationLine>
    └─ method WriteQuery [L82]
      └─ ... (no implementation details available)
  └─ sends_request CanIAccessFileQuery [L83]
    └─ handled_by Cirrus.ApplicationService.Firm.Queries.CanIAccessFileQueryHandler.Handle [L43–L101]
      └─ uses_service IRequestInfoService (AddScoped)
        └─ method IsValidServiceAccountRequest [L66]
          └─ implementation IRequestInfoService.IsValidServiceAccountRequest [L20-L20]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L90]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)
      └─ uses_service ITenantService (AddScoped)
        └─ method GetCurrentTenant [L68]
          └─ implementation ITenantService.GetCurrentTenant [L14-L14]
          └─ ... (no implementation details available)
      └─ uses_service IUserService (InstancePerLifetimeScope)
        └─ method GetUserId [L68]
          └─ implementation IUserService.GetUserId [L18-L18]
          └─ ... (no implementation details available)
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L79]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L71]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L68]

[web] PUT /api/accounting/ledger/chart-editor/move  (Cirrus.Api.Controllers.Accounting.Ledger.ChartEditorController.Move)  [L27–L32] status=200 [auth=Authentication.AdminPolicy]

[web] PUT /api/accounting/ledger/chart-editor/reorder  (Cirrus.Api.Controllers.Accounting.Ledger.ChartEditorController.Reorder)  [L37–L42] status=200 [auth=Authentication.AdminPolicy]

[web] PUT /api/accounting/ledger/classifications/parse-account-numbers/{system}  (Cirrus.Api.Controllers.Accounting.Ledger.ClassificationsController.ParseAccountNumbers)  [L27–L31] status=200 [auth=user]

[web] GET /api/accounting/ledger/import-runs/{id:int}  (Cirrus.Api.Controllers.Accounting.Ledger.ImportRunController.Get)  [L50–L62] status=200 [auth=user]
  └─ maps_to JournalLightDto [L58]
  └─ maps_to ImportRunDto [L53]
    └─ automapper.registration CirrusMappingProfile (ImportRun->ImportRunDto) [L517]
    └─ automapper.registration WorkpapersMappingProfile (ImportRun->ImportRunDto) [L817]
  └─ calls ImportRunRepository.ReadQuery [L53]
  └─ query ImportRun [L53]
    └─ reads_from ImportRuns
  └─ uses_service IControlledRepository<ImportRun>
    └─ method ReadQuery [L53]
      └─ ... (no implementation details available)
  └─ uses_service IMapper
    └─ method Map [L58]
      └─ ... (no implementation details available)
  └─ sends_request CanIAccessDatasetQuery [L55]
    └─ handled_by Cirrus.ApplicationService.Accounting.Queries.CanIAccessDatasetQueryHandler.Handle [L58–L140]
      └─ uses_service IControlledRepository<Dataset>
        └─ method ReadQuery [L127]
          └─ ... (no implementation details available)
      └─ uses_service IRequestInfoService (AddScoped)
        └─ method IsValidServiceAccountRequest [L101]
          └─ implementation IRequestInfoService.IsValidServiceAccountRequest [L20-L20]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L129]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)
      └─ uses_service ITenantService (AddScoped)
        └─ method GetCurrentTenant [L88]
          └─ implementation ITenantService.GetCurrentTenant [L14-L14]
          └─ ... (no implementation details available)
      └─ uses_service IUserService (InstancePerLifetimeScope)
        └─ method GetUserId [L103]
          └─ implementation IUserService.GetUserId [L18-L18]
          └─ ... (no implementation details available)
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L116]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L106]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L103]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L90]
      └─ uses_cache IDistributedCache.CreateDatasetLockKey [write] [L88]

[web] GET /api/accounting/ledger/import-runs/compare  (Cirrus.Api.Controllers.Accounting.Ledger.ImportRunController.GetComparison)  [L95–L99] status=200 [auth=user]

[web] GET /api/accounting/ledger/import-runs/for-dataset  (Cirrus.Api.Controllers.Accounting.Ledger.ImportRunController.GetForDataset)  [L68–L88] status=200 [auth=user]
  └─ maps_to UserUltraLightDto [L80]
    └─ automapper.registration DataverseMappingProfile (User->UserUltraLightDto) [L86]
    └─ automapper.registration WorkpapersMappingProfile (User->UserUltraLightDto) [L96]
    └─ automapper.registration CirrusMappingProfile (User->UserUltraLightDto) [L103]
  └─ maps_to ImportRunLightDto [L73]
    └─ automapper.registration CirrusMappingProfile (ImportRun->ImportRunLightDto) [L513]
    └─ automapper.registration WorkpapersMappingProfile (ImportRun->ImportRunLightDto) [L816]
  └─ calls UserRepository.ReadQuery [L80]
  └─ calls ImportRunRepository.ReadQuery [L73]
  └─ query ImportRun [L73]
    └─ reads_from ImportRuns
  └─ query User [L80]
  └─ uses_service IControlledRepository<ImportRun>
    └─ method ReadQuery [L73]
      └─ ... (no implementation details available)
  └─ uses_service IControlledRepository<User>
    └─ method ReadQuery [L80]
      └─ ... (no implementation details available)
  └─ sends_request CanIAccessDatasetQuery [L71]
    └─ handled_by Cirrus.ApplicationService.Accounting.Queries.CanIAccessDatasetQueryHandler.Handle [L58–L140]
      └─ uses_service IControlledRepository<Dataset>
        └─ method ReadQuery [L127]
          └─ ... (no implementation details available)
      └─ uses_service IRequestInfoService (AddScoped)
        └─ method IsValidServiceAccountRequest [L101]
          └─ implementation IRequestInfoService.IsValidServiceAccountRequest [L20-L20]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L129]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)
      └─ uses_service ITenantService (AddScoped)
        └─ method GetCurrentTenant [L88]
          └─ implementation ITenantService.GetCurrentTenant [L14-L14]
          └─ ... (no implementation details available)
      └─ uses_service IUserService (InstancePerLifetimeScope)
        └─ method GetUserId [L103]
          └─ implementation IUserService.GetUserId [L18-L18]
          └─ ... (no implementation details available)
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L116]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L106]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L103]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L90]
      └─ uses_cache IDistributedCache.CreateDatasetLockKey [write] [L88]

[web] PUT /api/accounting/ledger/import-runs/reinstate  (Cirrus.Api.Controllers.Accounting.Ledger.ImportRunController.Reinstate)  [L105–L126] status=200 [auth=user]
  └─ calls ImportRunRepository.WriteQuery [L108]
  └─ write ImportRun [L108]
    └─ reads_from ImportRuns
  └─ uses_service IControlledRepository<ImportRun>
    └─ method WriteQuery [L108]
      └─ ... (no implementation details available)
  └─ sends_request CanIAccessDatasetQuery [L120]
    └─ handled_by Cirrus.ApplicationService.Accounting.Queries.CanIAccessDatasetQueryHandler.Handle [L58–L140]
      └─ uses_service IControlledRepository<Dataset>
        └─ method ReadQuery [L127]
          └─ ... (no implementation details available)
      └─ uses_service IRequestInfoService (AddScoped)
        └─ method IsValidServiceAccountRequest [L101]
          └─ implementation IRequestInfoService.IsValidServiceAccountRequest [L20-L20]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L129]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)
      └─ uses_service ITenantService (AddScoped)
        └─ method GetCurrentTenant [L88]
          └─ implementation ITenantService.GetCurrentTenant [L14-L14]
          └─ ... (no implementation details available)
      └─ uses_service IUserService (InstancePerLifetimeScope)
        └─ method GetUserId [L103]
          └─ implementation IUserService.GetUserId [L18-L18]
          └─ ... (no implementation details available)
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L116]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L106]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L103]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L90]
      └─ uses_cache IDistributedCache.CreateDatasetLockKey [write] [L88]

[web] POST /api/accounting/ledger/journals/balancing-journal/{datasetId}  (Cirrus.Api.Controllers.Accounting.Ledger.JournalController.Create)  [L187–L193] status=201 [auth=user]
  └─ sends_request CanIAccessDatasetQuery [L190]
    └─ handled_by Cirrus.ApplicationService.Accounting.Queries.CanIAccessDatasetQueryHandler.Handle [L58–L140]
      └─ uses_service IControlledRepository<Dataset>
        └─ method ReadQuery [L127]
          └─ ... (no implementation details available)
      └─ uses_service IRequestInfoService (AddScoped)
        └─ method IsValidServiceAccountRequest [L101]
          └─ implementation IRequestInfoService.IsValidServiceAccountRequest [L20-L20]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L129]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)
      └─ uses_service ITenantService (AddScoped)
        └─ method GetCurrentTenant [L88]
          └─ implementation ITenantService.GetCurrentTenant [L14-L14]
          └─ ... (no implementation details available)
      └─ uses_service IUserService (InstancePerLifetimeScope)
        └─ method GetUserId [L103]
          └─ implementation IUserService.GetUserId [L18-L18]
          └─ ... (no implementation details available)
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L116]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L106]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L103]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L90]
      └─ uses_cache IDistributedCache.CreateDatasetLockKey [write] [L88]

[web] DELETE /api/accounting/ledger/journals/{id:Guid}  (Cirrus.Api.Controllers.Accounting.Ledger.JournalController.Delete)  [L238–L244] status=200 [auth=user]
  └─ calls JournalRepository.WriteQuery [L241]
  └─ write Journal [L241]
  └─ uses_service IControlledRepository<Journal>
    └─ method WriteQuery [L241]
      └─ ... (no implementation details available)

[web] DELETE /api/accounting/ledger/journals  (Cirrus.Api.Controllers.Accounting.Ledger.JournalController.DeleteJournals)  [L249–L261] status=200 [auth=user]
  └─ calls JournalRepository.WriteQuery [L253]
  └─ write Journal [L253]
  └─ uses_service IControlledRepository<Journal>
    └─ method WriteQuery [L253]
      └─ ... (no implementation details available)

[web] GET /api/accounting/ledger/journals/{id}  (Cirrus.Api.Controllers.Accounting.Ledger.JournalController.Get)  [L48–L55] status=200 [auth=user]
  └─ maps_to JournalDto [L51]
  └─ sends_request CanIAccessDatasetQuery [L53]
    └─ handled_by Cirrus.ApplicationService.Accounting.Queries.CanIAccessDatasetQueryHandler.Handle [L58–L140]
      └─ uses_service IControlledRepository<Dataset>
        └─ method ReadQuery [L127]
          └─ ... (no implementation details available)
      └─ uses_service IRequestInfoService (AddScoped)
        └─ method IsValidServiceAccountRequest [L101]
          └─ implementation IRequestInfoService.IsValidServiceAccountRequest [L20-L20]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L129]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)
      └─ uses_service ITenantService (AddScoped)
        └─ method GetCurrentTenant [L88]
          └─ implementation ITenantService.GetCurrentTenant [L14-L14]
          └─ ... (no implementation details available)
      └─ uses_service IUserService (InstancePerLifetimeScope)
        └─ method GetUserId [L103]
          └─ implementation IUserService.GetUserId [L18-L18]
          └─ ... (no implementation details available)
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L116]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L106]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L103]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L90]
      └─ uses_cache IDistributedCache.CreateDatasetLockKey [write] [L88]

[web] GET /api/accounting/ledger/journals/for-dataset/{datasetId}/report/Excel  (Cirrus.Api.Controllers.Accounting.Ledger.JournalController.GetExcelJournalReport)  [L129–L134] status=200 [auth=user]
  └─ sends_request GetJournalReportForExcelQuery [L132]
    └─ handled_by Cirrus.ApplicationService.Accounting.Queries.GetJournalReportForExcelQueryHandler.Handle [L59–L253]
      └─ uses_service IControlledRepository<Dataset>
        └─ method ReadQuery [L79]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L76]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)

[web] GET /api/accounting/ledger/journals/for-dataset/{datasetId:Guid}  (Cirrus.Api.Controllers.Accounting.Ledger.JournalController.GetForDataset)  [L80–L103] status=200 [auth=user]
  └─ maps_to JournalLightDto [L92]
  └─ calls JournalRepository.ReadQuery [L90]
  └─ query Journal [L90]
  └─ uses_service IControlledRepository<Journal>
    └─ method ReadQuery [L90]
      └─ ... (no implementation details available)
  └─ sends_request CanIAccessDatasetQuery [L86]
    └─ handled_by Cirrus.ApplicationService.Accounting.Queries.CanIAccessDatasetQueryHandler.Handle [L58–L140]
      └─ uses_service IControlledRepository<Dataset>
        └─ method ReadQuery [L127]
          └─ ... (no implementation details available)
      └─ uses_service IRequestInfoService (AddScoped)
        └─ method IsValidServiceAccountRequest [L101]
          └─ implementation IRequestInfoService.IsValidServiceAccountRequest [L20-L20]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L129]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)
      └─ uses_service ITenantService (AddScoped)
        └─ method GetCurrentTenant [L88]
          └─ implementation ITenantService.GetCurrentTenant [L14-L14]
          └─ ... (no implementation details available)
      └─ uses_service IUserService (InstancePerLifetimeScope)
        └─ method GetUserId [L103]
          └─ implementation IUserService.GetUserId [L18-L18]
          └─ ... (no implementation details available)
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L116]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L106]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L103]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L90]
      └─ uses_cache IDistributedCache.CreateDatasetLockKey [write] [L88]

[web] GET /api/accounting/ledger/journals/for-worksheet/{linkedWorksheetId:guid}  (Cirrus.Api.Controllers.Accounting.Ledger.JournalController.GetForWorksheet)  [L139–L150] status=200 [auth=user]
  └─ maps_to JournalDto [L142]
  └─ sends_request CanIAccessDatasetQuery [L148]
    └─ handled_by Cirrus.ApplicationService.Accounting.Queries.CanIAccessDatasetQueryHandler.Handle [L58–L140]
      └─ uses_service IControlledRepository<Dataset>
        └─ method ReadQuery [L127]
          └─ ... (no implementation details available)
      └─ uses_service IRequestInfoService (AddScoped)
        └─ method IsValidServiceAccountRequest [L101]
          └─ implementation IRequestInfoService.IsValidServiceAccountRequest [L20-L20]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L129]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)
      └─ uses_service ITenantService (AddScoped)
        └─ method GetCurrentTenant [L88]
          └─ implementation ITenantService.GetCurrentTenant [L14-L14]
          └─ ... (no implementation details available)
      └─ uses_service IUserService (InstancePerLifetimeScope)
        └─ method GetUserId [L103]
          └─ implementation IUserService.GetUserId [L18-L18]
          └─ ... (no implementation details available)
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L116]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L106]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L103]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L90]
      └─ uses_cache IDistributedCache.CreateDatasetLockKey [write] [L88]

[web] GET /api/accounting/ledger/journals/for-dataset/{datasetId}/report  (Cirrus.Api.Controllers.Accounting.Ledger.JournalController.GetJournalReport)  [L109–L113] status=200 [auth=user]

[web] GET /api/accounting/ledger/journals  (Cirrus.Api.Controllers.Accounting.Ledger.JournalController.GetJournals)  [L61–L74] status=200 [auth=user]
  └─ maps_to JournalDto [L67]
  └─ sends_request CanIAccessDatasetQuery [L65]
    └─ handled_by Cirrus.ApplicationService.Accounting.Queries.CanIAccessDatasetQueryHandler.Handle [L58–L140]
      └─ uses_service IControlledRepository<Dataset>
        └─ method ReadQuery [L127]
          └─ ... (no implementation details available)
      └─ uses_service IRequestInfoService (AddScoped)
        └─ method IsValidServiceAccountRequest [L101]
          └─ implementation IRequestInfoService.IsValidServiceAccountRequest [L20-L20]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L129]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)
      └─ uses_service ITenantService (AddScoped)
        └─ method GetCurrentTenant [L88]
          └─ implementation ITenantService.GetCurrentTenant [L14-L14]
          └─ ... (no implementation details available)
      └─ uses_service IUserService (InstancePerLifetimeScope)
        └─ method GetUserId [L103]
          └─ implementation IUserService.GetUserId [L18-L18]
          └─ ... (no implementation details available)
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L116]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L106]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L103]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L90]
      └─ uses_cache IDistributedCache.CreateDatasetLockKey [write] [L88]

[web] GET /api/accounting/ledger/journals/package  (Cirrus.Api.Controllers.Accounting.Ledger.JournalController.GetPackage)  [L156–L160] status=200 [auth=user]

[web] GET /api/accounting/ledger/journals/for-dataset/{datasetId:guid}/report/profit-reconciliation  (Cirrus.Api.Controllers.Accounting.Ledger.JournalController.GetProfitReconciliationReport)  [L119–L123] status=200 [auth=user]

[web] PUT /api/accounting/ledger/journals/unarchive/{id:Guid}  (Cirrus.Api.Controllers.Accounting.Ledger.JournalController.Unarchive)  [L227–L233] status=200 [auth=user]

[web] DELETE /api/accounting/ledger/journals/balancing-journal/{journalId}  (Cirrus.Api.Controllers.Accounting.Ledger.JournalController.UndoBalancingJournal)  [L198–L203] status=200 [auth=user]

[web] PUT /api/accounting/ledger/journals/{id:Guid}  (Cirrus.Api.Controllers.Accounting.Ledger.JournalController.Update)  [L217–L222] status=200 [auth=user]

[web] POST /api/accounting/ledger/reports/basic-report  (Cirrus.Api.Controllers.Accounting.Ledger.LedgerReportController.GetFormattedTrialBalance)  [L37–L41] status=201 [auth=user]
  └─ sends_request GetBasicReportQuery [L40]
    └─ handled_by Cirrus.ApplicationService.Accounting.Queries.Reports.GetBasicReportQueryHandler.Handle [L58–L159]
      └─ uses_service IControlledRepository<Dataset>
        └─ method ReadQuery [L81]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<Entity>
        └─ method ReadQuery [L87]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L79]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)

[web] GET /api/accounting/ledger/reports/{datasetId}/accounts  (Cirrus.Api.Controllers.Accounting.Ledger.LedgerReportController.GetLedgerForAccounts)  [L101–L122] status=200 [auth=user]
  └─ sends_request CanIAccessDatasetQuery [L119]
    └─ handled_by Cirrus.ApplicationService.Accounting.Queries.CanIAccessDatasetQueryHandler.Handle [L58–L140]
      └─ uses_service IControlledRepository<Dataset>
        └─ method ReadQuery [L127]
          └─ ... (no implementation details available)
      └─ uses_service IRequestInfoService (AddScoped)
        └─ method IsValidServiceAccountRequest [L101]
          └─ implementation IRequestInfoService.IsValidServiceAccountRequest [L20-L20]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L129]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)
      └─ uses_service ITenantService (AddScoped)
        └─ method GetCurrentTenant [L88]
          └─ implementation ITenantService.GetCurrentTenant [L14-L14]
          └─ ... (no implementation details available)
      └─ uses_service IUserService (InstancePerLifetimeScope)
        └─ method GetUserId [L103]
          └─ implementation IUserService.GetUserId [L18-L18]
          └─ ... (no implementation details available)
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L116]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L106]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L103]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L90]
      └─ uses_cache IDistributedCache.CreateDatasetLockKey [write] [L88]
  └─ sends_request GetGeneralLedgerByAccountQuery [L120]
    └─ handled_by Cirrus.ApplicationService.Accounting.Queries.GetGeneralLedgerByAccountQueryHandler.Handle [L56–L240]
      └─ maps_to AccountWithTransactionsDto [L82]
        └─ automapper.registration CirrusReportMappingProfile (Account->AccountWithTransactionsDto) [L133]
      └─ maps_to SourceAccountMappingDto [L193]
      └─ maps_to SourceLightDto [L176]
      └─ uses_service ApiService (SingleInstance)
        └─ method GetFeatures [L181]
          └─ implementation Cirrus.ApplicationService.Accounting.Services.ApiService.GetFeatures [L14-L75]
      └─ uses_service GetGeneralLedgerForDatesQuery
        └─ method Execute [L89]
          └─ ... (no implementation details available)
      └─ uses_service GetTrialBalanceForDatesQuery
        └─ method Execute [L144]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<Account>
        └─ method ReadQuery [L82]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<Dataset>
        └─ method ReadQuery [L129]
          └─ ... (no implementation details available)
      └─ uses_service IMapper
        └─ method ConfigurationProvider [L87]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L201]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)

[web] GET /api/accounting/ledger/reports/{datasetId}/sourceaccounts  (Cirrus.Api.Controllers.Accounting.Ledger.LedgerReportController.GetLedgerForSourceAccounts)  [L76–L95] status=200 [auth=user]
  └─ sends_request CanIAccessDatasetQuery [L92]
    └─ handled_by Cirrus.ApplicationService.Accounting.Queries.CanIAccessDatasetQueryHandler.Handle [L58–L140]
      └─ uses_service IControlledRepository<Dataset>
        └─ method ReadQuery [L127]
          └─ ... (no implementation details available)
      └─ uses_service IRequestInfoService (AddScoped)
        └─ method IsValidServiceAccountRequest [L101]
          └─ implementation IRequestInfoService.IsValidServiceAccountRequest [L20-L20]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L129]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)
      └─ uses_service ITenantService (AddScoped)
        └─ method GetCurrentTenant [L88]
          └─ implementation ITenantService.GetCurrentTenant [L14-L14]
          └─ ... (no implementation details available)
      └─ uses_service IUserService (InstancePerLifetimeScope)
        └─ method GetUserId [L103]
          └─ implementation IUserService.GetUserId [L18-L18]
          └─ ... (no implementation details available)
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L116]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L106]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L103]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L90]
      └─ uses_cache IDistributedCache.CreateDatasetLockKey [write] [L88]

[web] GET /api/accounting/ledger/reports/{datasetId}/trialbalance  (Cirrus.Api.Controllers.Accounting.Ledger.LedgerReportController.GetTrialBalance)  [L47–L70] status=200 [auth=user]
  └─ sends_request CanIAccessDatasetQuery [L52]
    └─ handled_by Cirrus.ApplicationService.Accounting.Queries.CanIAccessDatasetQueryHandler.Handle [L58–L140]
      └─ uses_service IControlledRepository<Dataset>
        └─ method ReadQuery [L127]
          └─ ... (no implementation details available)
      └─ uses_service IRequestInfoService (AddScoped)
        └─ method IsValidServiceAccountRequest [L101]
          └─ implementation IRequestInfoService.IsValidServiceAccountRequest [L20-L20]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L129]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)
      └─ uses_service ITenantService (AddScoped)
        └─ method GetCurrentTenant [L88]
          └─ implementation ITenantService.GetCurrentTenant [L14-L14]
          └─ ... (no implementation details available)
      └─ uses_service IUserService (InstancePerLifetimeScope)
        └─ method GetUserId [L103]
          └─ implementation IUserService.GetUserId [L18-L18]
          └─ ... (no implementation details available)
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L116]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L106]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L103]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L90]
      └─ uses_cache IDistributedCache.CreateDatasetLockKey [write] [L88]

[web] GET /api/accounting/ledger/master-accounts/{id:int}  (Cirrus.Api.Controllers.Accounting.Ledger.MasterAccountController.GetHeader)  [L31–L37] status=200 [auth=Authentication.UserPolicy]
  └─ maps_to MasterAccountEditingDto [L34]
    └─ automapper.registration CirrusMappingProfile (MasterAccount->MasterAccountEditingDto) [L302]
  └─ calls MasterAccountRepository.ReadQuery [L34]
  └─ query MasterAccount [L34]
    └─ reads_from MasterAccounts
  └─ uses_service IControlledRepository<MasterAccount>
    └─ method ReadQuery [L34]
      └─ ... (no implementation details available)

[web] PUT /api/accounting/ledger/master-accounts/{id:int}  (Cirrus.Api.Controllers.Accounting.Ledger.MasterAccountController.PutHeader)  [L42–L47] status=200 [auth=Authentication.UserPolicy,Authentication.AdminPolicy]
  └─ calls MasterAccountRepository.WriteQuery [L45]
  └─ write MasterAccount [L45]
    └─ reads_from MasterAccounts
  └─ uses_service IControlledRepository<MasterAccount>
    └─ method WriteQuery [L45]
      └─ ... (no implementation details available)

[web] POST /api/accounting/ledger/source-accounts/bulk  (Cirrus.Api.Controllers.Accounting.Ledger.SourceAccountsController.BulkCreate)  [L145–L152] status=201 [auth=user]
  └─ calls SourceRepository.WriteQuery [L148]
  └─ write Source [L148]
  └─ uses_service IControlledRepository<Source>
    └─ method WriteQuery [L148]
      └─ ... (no implementation details available)
  └─ sends_request MapSourceAccountsCommand [L150]
    └─ handled_by Cirrus.ApplicationService.Accounting.Commands.MapSourceAccountsCommandHandler.Handle [L52–L259]
      └─ calls SourceAccountsCachedRepository.AddTrackedRange [L92]
      └─ calls SourceAccountsCachedRepository.InDatabaseOnly [L80]
      └─ calls SourceAccountsCachedRepository.InMemoryOnly [L72]
      └─ uses_service IControlledRepository<Source>
        └─ method WriteQuery [L151]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L123]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)
  └─ sends_request CanIAccessFileQuery [L149]
    └─ handled_by Cirrus.ApplicationService.Firm.Queries.CanIAccessFileQueryHandler.Handle [L43–L101]
      └─ uses_service IRequestInfoService (AddScoped)
        └─ method IsValidServiceAccountRequest [L66]
          └─ implementation IRequestInfoService.IsValidServiceAccountRequest [L20-L20]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L90]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)
      └─ uses_service ITenantService (AddScoped)
        └─ method GetCurrentTenant [L68]
          └─ implementation ITenantService.GetCurrentTenant [L14-L14]
          └─ ... (no implementation details available)
      └─ uses_service IUserService (InstancePerLifetimeScope)
        └─ method GetUserId [L68]
          └─ implementation IUserService.GetUserId [L18-L18]
          └─ ... (no implementation details available)
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L79]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L71]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L68]

[web] POST /api/accounting/ledger/source-accounts/  (Cirrus.Api.Controllers.Accounting.Ledger.SourceAccountsController.Create)  [L154–L161] status=201 [auth=user]
  └─ calls SourceRepository.WriteQuery [L157]
  └─ write Source [L157]
  └─ uses_service IControlledRepository<Source>
    └─ method WriteQuery [L157]
      └─ ... (no implementation details available)
  └─ sends_request CreateSourceAccountsCommand [L159]
    └─ handled_by Cirrus.ApplicationService.Accounting.Commands.CreateSourceAccountsCommandHandler.Handle [L52–L355]
      └─ calls SourceAccountsCachedRepository.ReadQuery [L338]
      └─ calls SourceAccountsCachedRepository.Add [L316]
      └─ calls SourceAccountsCachedRepository.Add [L255]
      └─ calls SourceAccountsCachedRepository.ReadQuery [L224]
      └─ calls SourceAccountsCachedRepository.Add [L198]
      └─ calls SourceAccountsCachedRepository.Add [L117]
      └─ uses_service IControlledRepository<Account>
        └─ method ReadQuery [L105]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<Dataset>
        └─ method WriteQuery [L84]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<StandardAccount>
        └─ method WriteQuery [L160]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L158]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)
  └─ sends_request CanIAccessFileQuery [L158]
    └─ handled_by Cirrus.ApplicationService.Firm.Queries.CanIAccessFileQueryHandler.Handle [L43–L101]
      └─ uses_service IRequestInfoService (AddScoped)
        └─ method IsValidServiceAccountRequest [L66]
          └─ implementation IRequestInfoService.IsValidServiceAccountRequest [L20-L20]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L90]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)
      └─ uses_service ITenantService (AddScoped)
        └─ method GetCurrentTenant [L68]
          └─ implementation ITenantService.GetCurrentTenant [L14-L14]
          └─ ... (no implementation details available)
      └─ uses_service IUserService (InstancePerLifetimeScope)
        └─ method GetUserId [L68]
          └─ implementation IUserService.GetUserId [L18-L18]
          └─ ... (no implementation details available)
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L79]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L71]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L68]

[web] GET /api/accounting/ledger/source-accounts/{id}  (Cirrus.Api.Controllers.Accounting.Ledger.SourceAccountsController.Get)  [L52–L57] status=200 [auth=user]
  └─ maps_to SourceAccountDto [L55]
    └─ automapper.registration WorkpapersMappingProfile (SourceAccount->SourceAccountDto) [L625]
    └─ automapper.registration CirrusMappingProfile (SourceAccount->SourceAccountDto) [L256]
    └─ automapper.registration ExternalApiMappingProfile (SourceAccount->SourceAccountDto) [L105]
  └─ calls SourceAccountRepository.ReadQuery [L55]
  └─ query SourceAccount [L55]
    └─ reads_from SourceAccounts
  └─ uses_service IControlledRepository<SourceAccount>
    └─ method ReadQuery [L55]
      └─ ... (no implementation details available)

[web] GET /api/accounting/ledger/source-accounts/  (Cirrus.Api.Controllers.Accounting.Ledger.SourceAccountsController.GetAllForDataset)  [L63–L84] status=200 [auth=user]
  └─ calls DatasetRepository.ReadQuery [L71]
  └─ query Dataset [L71]
  └─ uses_service IControlledRepository<Dataset>
    └─ method ReadQuery [L71]
      └─ ... (no implementation details available)
  └─ sends_request CanIAccessDatasetQuery [L70]
    └─ handled_by Cirrus.ApplicationService.Accounting.Queries.CanIAccessDatasetQueryHandler.Handle [L58–L140]
      └─ uses_service IControlledRepository<Dataset>
        └─ method ReadQuery [L127]
          └─ ... (no implementation details available)
      └─ uses_service IRequestInfoService (AddScoped)
        └─ method IsValidServiceAccountRequest [L101]
          └─ implementation IRequestInfoService.IsValidServiceAccountRequest [L20-L20]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L129]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)
      └─ uses_service ITenantService (AddScoped)
        └─ method GetCurrentTenant [L88]
          └─ implementation ITenantService.GetCurrentTenant [L14-L14]
          └─ ... (no implementation details available)
      └─ uses_service IUserService (InstancePerLifetimeScope)
        └─ method GetUserId [L103]
          └─ implementation IUserService.GetUserId [L18-L18]
          └─ ... (no implementation details available)
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L116]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L106]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L103]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L90]
      └─ uses_cache IDistributedCache.CreateDatasetLockKey [write] [L88]
  └─ sends_request GetSourceAccountsWithCachedQuery [L80]
    └─ handled_by Cirrus.ApplicationService.Accounting.Queries.GetSourceAccountsWithCachedQueryHandler.Handle [L34–L96]
      └─ maps_to SourceAccountWithCachedDto [L53]
        └─ automapper.registration CirrusMappingProfile (SourceAccount->SourceAccountWithCachedDto) [L289]
      └─ maps_to SourceAccountWithCachedDto [L84]
      └─ uses_service IControlledRepository<CachedSourceAccount>
        └─ method ReadQuery [L68]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<SourceAccount>
        └─ method ReadQuery [L53]
          └─ ... (no implementation details available)
      └─ uses_service IMapper
        └─ method ConfigurationProvider [L58]
          └─ ... (no implementation details available)

[web] GET /api/accounting/ledger/source-accounts/for-source/{sourceId}  (Cirrus.Api.Controllers.Accounting.Ledger.SourceAccountsController.GetAllForSource)  [L111–L133] status=200 [auth=user]
  └─ calls SourceRepository.ReadQuery [L119]
  └─ query Source [L119]
  └─ uses_service IControlledRepository<Source>
    └─ method ReadQuery [L119]
      └─ ... (no implementation details available)
  └─ sends_request GetSourceAccountsWithCachedQuery [L127]
    └─ handled_by Cirrus.ApplicationService.Accounting.Queries.GetSourceAccountsWithCachedQueryHandler.Handle [L34–L96]
      └─ maps_to SourceAccountWithCachedDto [L53]
        └─ automapper.registration CirrusMappingProfile (SourceAccount->SourceAccountWithCachedDto) [L289]
      └─ maps_to SourceAccountWithCachedDto [L84]
      └─ uses_service IControlledRepository<CachedSourceAccount>
        └─ method ReadQuery [L68]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<SourceAccount>
        └─ method ReadQuery [L53]
          └─ ... (no implementation details available)
      └─ uses_service IMapper
        └─ method ConfigurationProvider [L58]
          └─ ... (no implementation details available)
  └─ sends_request CanIAccessFileQuery [L123]
    └─ handled_by Cirrus.ApplicationService.Firm.Queries.CanIAccessFileQueryHandler.Handle [L43–L101]
      └─ uses_service IRequestInfoService (AddScoped)
        └─ method IsValidServiceAccountRequest [L66]
          └─ implementation IRequestInfoService.IsValidServiceAccountRequest [L20-L20]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L90]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)
      └─ uses_service ITenantService (AddScoped)
        └─ method GetCurrentTenant [L68]
          └─ implementation ITenantService.GetCurrentTenant [L14-L14]
          └─ ... (no implementation details available)
      └─ uses_service IUserService (InstancePerLifetimeScope)
        └─ method GetUserId [L68]
          └─ implementation IUserService.GetUserId [L18-L18]
          └─ ... (no implementation details available)
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L79]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L71]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L68]

[web] GET /api/accounting/ledger/source-accounts/for-source/{sourceId}/from-api  (Cirrus.Api.Controllers.Accounting.Ledger.SourceAccountsController.GetAllForSourceFromApi)  [L139–L143] status=200 [auth=user]
  └─ sends_request GetAccountsFromApiQuery [L142]
    └─ handled_by Cirrus.ApplicationService.Accounting.Queries.ImportFromApiCommandHandler.Handle [L34–L61]
      └─ uses_service ApiService (SingleInstance)
        └─ method GetApiMethods [L56]
          └─ implementation Cirrus.ApplicationService.Accounting.Services.ApiService.GetApiMethods [L14-L75]
      └─ uses_service IControlledRepository<Source>
        └─ method ReadQuery [L51]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L54]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)

[web] GET /api/accounting/ledger/source-accounts/mappings  (Cirrus.Api.Controllers.Accounting.Ledger.SourceAccountsController.GetSourceAccountMappings)  [L90–L105] status=200 [auth=user]
  └─ calls DatasetRepository.ReadQuery [L98]
  └─ query Dataset [L98]
  └─ uses_service IControlledRepository<Dataset>
    └─ method ReadQuery [L98]
      └─ ... (no implementation details available)
  └─ sends_request CanIAccessDatasetQuery [L97]
    └─ handled_by Cirrus.ApplicationService.Accounting.Queries.CanIAccessDatasetQueryHandler.Handle [L58–L140]
      └─ uses_service IControlledRepository<Dataset>
        └─ method ReadQuery [L127]
          └─ ... (no implementation details available)
      └─ uses_service IRequestInfoService (AddScoped)
        └─ method IsValidServiceAccountRequest [L101]
          └─ implementation IRequestInfoService.IsValidServiceAccountRequest [L20-L20]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L129]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)
      └─ uses_service ITenantService (AddScoped)
        └─ method GetCurrentTenant [L88]
          └─ implementation ITenantService.GetCurrentTenant [L14-L14]
          └─ ... (no implementation details available)
      └─ uses_service IUserService (InstancePerLifetimeScope)
        └─ method GetUserId [L103]
          └─ implementation IUserService.GetUserId [L18-L18]
          └─ ... (no implementation details available)
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L116]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L106]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L103]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L90]
      └─ uses_cache IDistributedCache.CreateDatasetLockKey [write] [L88]

[web] DELETE /api/accounting/ledger/source-accounts/purge-unused  (Cirrus.Api.Controllers.Accounting.Ledger.SourceAccountsController.PurgeUnused)  [L233–L238] status=200 [auth=user]

[web] PUT /api/accounting/ledger/source-accounts/{id:guid}/reset-source-system-id  (Cirrus.Api.Controllers.Accounting.Ledger.SourceAccountsController.ResetSourceSystemId)  [L208–L215] status=200 [auth=user]
  └─ calls SourceAccountRepository.WriteQuery [L211]
  └─ write SourceAccount [L211]
    └─ reads_from SourceAccounts
  └─ uses_service IControlledRepository<SourceAccount>
    └─ method WriteQuery [L211]
      └─ ... (no implementation details available)
  └─ sends_request CanIAccessFileQuery [L212]
    └─ handled_by Cirrus.ApplicationService.Firm.Queries.CanIAccessFileQueryHandler.Handle [L43–L101]
      └─ uses_service IRequestInfoService (AddScoped)
        └─ method IsValidServiceAccountRequest [L66]
          └─ implementation IRequestInfoService.IsValidServiceAccountRequest [L20-L20]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L90]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)
      └─ uses_service ITenantService (AddScoped)
        └─ method GetCurrentTenant [L68]
          └─ implementation ITenantService.GetCurrentTenant [L14-L14]
          └─ ... (no implementation details available)
      └─ uses_service IUserService (InstancePerLifetimeScope)
        └─ method GetUserId [L68]
          └─ implementation IUserService.GetUserId [L18-L18]
          └─ ... (no implementation details available)
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L79]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L71]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L68]

[web] PUT /api/accounting/ledger/source-accounts/{id:guid}/sync  (Cirrus.Api.Controllers.Accounting.Ledger.SourceAccountsController.SyncAccount)  [L223–L228] status=200 [auth=user]
  └─ sends_request SyncSourceAccountCommand [L226]
    └─ handled_by Cirrus.ApplicationService.Accounting.Commands.SyncSourceAccountCommandHandler.Handle [L21–L50]
      └─ uses_service ApiService (SingleInstance)
        └─ method GetApiMethods [L44]
          └─ implementation Cirrus.ApplicationService.Accounting.Services.ApiService.GetApiMethods [L14-L75]
      └─ uses_service IControlledRepository<SourceAccount>
        └─ method WriteQuery [L32]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L46]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)

[web] PUT /api/accounting/ledger/source-accounts/unlink  (Cirrus.Api.Controllers.Accounting.Ledger.SourceAccountsController.Unlink)  [L201–L206] status=200 [auth=user]
  └─ sends_request UnlinkSourceAccountCommand [L204]
    └─ handled_by Cirrus.ApplicationService.Accounting.Commands.UnlinkSourceAccountCommandHandler.Handle [L30–L72]
      └─ uses_service IControlledRepository<Account>
        └─ method WriteQuery [L50]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<SourceAccount>
        └─ method WriteQuery [L46]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L56]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)

[web] PUT /api/accounting/ledger/source-accounts/{id:Guid}  (Cirrus.Api.Controllers.Accounting.Ledger.SourceAccountsController.Update)  [L163–L170] status=200 [auth=user]
  └─ calls SourceAccountRepository.WriteQuery [L166]
  └─ write SourceAccount [L166]
    └─ reads_from SourceAccounts
  └─ uses_service IControlledRepository<SourceAccount>
    └─ method WriteQuery [L166]
      └─ ... (no implementation details available)
  └─ sends_request CanIAccessFileQuery [L167]
    └─ handled_by Cirrus.ApplicationService.Firm.Queries.CanIAccessFileQueryHandler.Handle [L43–L101]
      └─ uses_service IRequestInfoService (AddScoped)
        └─ method IsValidServiceAccountRequest [L66]
          └─ implementation IRequestInfoService.IsValidServiceAccountRequest [L20-L20]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L90]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)
      └─ uses_service ITenantService (AddScoped)
        └─ method GetCurrentTenant [L68]
          └─ implementation ITenantService.GetCurrentTenant [L14-L14]
          └─ ... (no implementation details available)
      └─ uses_service IUserService (InstancePerLifetimeScope)
        └─ method GetUserId [L68]
          └─ implementation IUserService.GetUserId [L18-L18]
          └─ ... (no implementation details available)
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L79]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L71]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L68]

[web] PUT /api/accounting/ledger/source-accounts/division/{id:guid}  (Cirrus.Api.Controllers.Accounting.Ledger.SourceAccountsController.UpdateDivision)  [L187–L194] status=200 [auth=user]
  └─ calls SourceAccountRepository.WriteQuery [L190]
  └─ write SourceAccount [L190]
    └─ reads_from SourceAccounts
  └─ uses_service IControlledRepository<SourceAccount>
    └─ method WriteQuery [L190]
      └─ ... (no implementation details available)
  └─ sends_request CanIAccessFileQuery [L191]
    └─ handled_by Cirrus.ApplicationService.Firm.Queries.CanIAccessFileQueryHandler.Handle [L43–L101]
      └─ uses_service IRequestInfoService (AddScoped)
        └─ method IsValidServiceAccountRequest [L66]
          └─ implementation IRequestInfoService.IsValidServiceAccountRequest [L20-L20]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L90]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)
      └─ uses_service ITenantService (AddScoped)
        └─ method GetCurrentTenant [L68]
          └─ implementation ITenantService.GetCurrentTenant [L14-L14]
          └─ ... (no implementation details available)
      └─ uses_service IUserService (InstancePerLifetimeScope)
        └─ method GetUserId [L68]
          └─ implementation IUserService.GetUserId [L18-L18]
          └─ ... (no implementation details available)
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L79]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L71]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L68]

[web] PUT /api/accounting/ledger/source-accounts/trading-account/{id:guid}  (Cirrus.Api.Controllers.Accounting.Ledger.SourceAccountsController.UpdateTradingAccount)  [L175–L182] status=200 [auth=user]
  └─ calls SourceAccountRepository.WriteQuery [L178]
  └─ write SourceAccount [L178]
    └─ reads_from SourceAccounts
  └─ uses_service IControlledRepository<SourceAccount>
    └─ method WriteQuery [L178]
      └─ ... (no implementation details available)
  └─ sends_request CanIAccessFileQuery [L179]
    └─ handled_by Cirrus.ApplicationService.Firm.Queries.CanIAccessFileQueryHandler.Handle [L43–L101]
      └─ uses_service IRequestInfoService (AddScoped)
        └─ method IsValidServiceAccountRequest [L66]
          └─ implementation IRequestInfoService.IsValidServiceAccountRequest [L20-L20]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L90]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)
      └─ uses_service ITenantService (AddScoped)
        └─ method GetCurrentTenant [L68]
          └─ implementation ITenantService.GetCurrentTenant [L14-L14]
          └─ ... (no implementation details available)
      └─ uses_service IUserService (InstancePerLifetimeScope)
        └─ method GetUserId [L68]
          └─ implementation IUserService.GetUserId [L18-L18]
          └─ ... (no implementation details available)
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L79]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L71]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L68]

[web] DELETE /api/accounting/ledger/standard-accounts/{id:Guid}  (Cirrus.Api.Controllers.Accounting.Ledger.StandardAccountController.Delete)  [L194–L199] status=200 [auth=Authentication.UserPolicy,Authentication.AdminPolicy]
  └─ calls StandardAccountRepository.Remove [L198]
  └─ calls StandardAccountRepository.WriteQuery [L197]
  └─ delete StandardAccount [L198]
    └─ reads_from StandardAccounts
  └─ write StandardAccount [L197]
    └─ reads_from StandardAccounts
  └─ uses_service IControlledRepository<StandardAccount>
    └─ method WriteQuery [L197]
      └─ ... (no implementation details available)

[web] GET /api/accounting/ledger/standard-accounts/recommendations  (Cirrus.Api.Controllers.Accounting.Ledger.StandardAccountController.GetAllForFile)  [L70–L91] status=200 [auth=Authentication.UserPolicy]
  └─ maps_to StandardAccountRecommendationDto [L80]
    └─ automapper.registration CirrusMappingProfile (StandardAccount->StandardAccountRecommendationDto) [L444]
  └─ calls StandardAccountRepository.ReadQuery [L80]
  └─ query StandardAccount [L80]
    └─ reads_from StandardAccounts
  └─ uses_service IControlledRepository<StandardAccount>
    └─ method ReadQuery [L80]
      └─ ... (no implementation details available)

[web] GET /api/accounting/ledger/standard-accounts/  (Cirrus.Api.Controllers.Accounting.Ledger.StandardAccountController.GetAllForStandardChart)  [L43–L65] status=200 [auth=Authentication.UserPolicy]
  └─ maps_to StandardAccountLightDto [L54]
    └─ automapper.registration CirrusMappingProfile (StandardAccount->StandardAccountLightDto) [L445]
    └─ automapper.registration WorkpapersMappingProfile (StandardAccount->StandardAccountLightDto) [L690]
  └─ calls StandardAccountRepository.ReadQuery [L54]
  └─ query StandardAccount [L54]
    └─ reads_from StandardAccounts
  └─ uses_service IControlledRepository<StandardAccount>
    └─ method ReadQuery [L54]
      └─ ... (no implementation details available)
  └─ sends_request GetDefaultStandardChartIdQuery [L52]
    └─ handled_by Cirrus.ApplicationService.Accounting.Queries.GetDefaultStandardChartIdQueryHandler.Handle [L24–L48]
      └─ uses_service IControlledRepository<StandardChart>
        └─ method ReadQuery [L36]
          └─ ... (no implementation details available)

[web] GET /api/accounting/ledger/standard-accounts/child/{id:Guid}  (Cirrus.Api.Controllers.Accounting.Ledger.StandardAccountController.GetChild)  [L96–L103] status=200 [auth=Authentication.UserPolicy]
  └─ maps_to StandardChildDto [L99]
  └─ calls StandardAccountRepository.ReadQuery [L99]
  └─ query StandardAccount [L99]
    └─ reads_from StandardAccounts
  └─ uses_service IControlledRepository<StandardAccount>
    └─ method ReadQuery [L99]
      └─ ... (no implementation details available)

[web] GET /api/accounting/ledger/standard-accounts/header/{id:Guid}  (Cirrus.Api.Controllers.Accounting.Ledger.StandardAccountController.GetHeader)  [L134–L141] status=200 [auth=Authentication.UserPolicy]
  └─ maps_to StandardHeaderDto [L137]
  └─ calls StandardAccountRepository.ReadQuery [L137]
  └─ query StandardAccount [L137]
    └─ reads_from StandardAccounts
  └─ uses_service IControlledRepository<StandardAccount>
    └─ method ReadQuery [L137]
      └─ ... (no implementation details available)

[web] POST /api/accounting/ledger/standard-accounts/header/accept-recommendation  (Cirrus.Api.Controllers.Accounting.Ledger.StandardAccountController.ImplementRecommendedHeader)  [L184–L189] status=201 [auth=Authentication.UserPolicy]
  └─ sends_request CreateHeaderFromStandardHeaderCommand [L187]
    └─ handled_by Cirrus.ApplicationService.Accounting.Commands.Ledger.CreateHeaderFromStandardHeaderCommandHandler.Handle [L48–L113]
      └─ uses_service IControlledRepository<Account>
        └─ method WriteQuery [L68]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<File>
        └─ method ReadQuery [L74]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<StandardAccount>
        └─ method ReadQuery [L79]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L72]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)

[web] POST /api/accounting/ledger/standard-accounts/child  (Cirrus.Api.Controllers.Accounting.Ledger.StandardAccountController.PostChild)  [L108–L118] status=201 [auth=Authentication.UserPolicy,Authentication.AdminPolicy]
  └─ calls StandardAccountRepository.Add [L116]
  └─ insert StandardAccount [L116]
    └─ reads_from StandardAccounts
  └─ uses_service IControlledRepository<StandardAccount>
    └─ method Add [L116]
      └─ ... (no implementation details available)
  └─ sends_request GetStandardAccountManagerQuery [L112]
    └─ handled_by Cirrus.ApplicationService.Accounting.Queries.GetStandardAccountManagerQueryHandler.Handle [L54–L184]
      └─ maps_to MasterAccountForStandardChartDto [L179]
        └─ automapper.registration CirrusMappingProfile (MasterAccount->MasterAccountForStandardChartDto) [L306]
      └─ uses_service IControlledRepository<MasterAccount>
        └─ method WriteQuery [L98]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<StandardAccount>
        └─ method WriteQuery [L83]
          └─ ... (no implementation details available)
      └─ uses_service ILogger
        └─ method LogWarning [L142]
          └─ ... (no implementation details available)
      └─ uses_service IMapper
        └─ method ConfigurationProvider [L181]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L105]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)
      └─ logs ILogger [Warning] [L142]

[web] POST /api/accounting/ledger/standard-accounts/header  (Cirrus.Api.Controllers.Accounting.Ledger.StandardAccountController.PostHeader)  [L146–L163] status=201 [auth=Authentication.UserPolicy,Authentication.AdminPolicy]
  └─ calls StandardAccountRepository.Add [L161]
  └─ insert StandardAccount [L161]
    └─ reads_from StandardAccounts
  └─ uses_service IControlledRepository<StandardAccount>
    └─ method Add [L161]
      └─ ... (no implementation details available)
  └─ sends_request CheckForExistingLeadScheduleInStandardAccountHierarchyQuery [L151]
    └─ handled_by Cirrus.ApplicationService.Accounting.Queries.CheckForExistingLeadScheduleInHierarchyQueryHandler.Handle [L31–L78]
      └─ uses_service IControlledRepository<StandardAccount>
        └─ method ReadQuery [L49]
          └─ ... (no implementation details available)
      └─ uses_service ILeadScheduleService (AddScoped)
        └─ method GetAccountsInHierarchy [L55]
          └─ implementation Cirrus.ApplicationService.Features.LeadSchedules.LeadScheduleService.GetAccountsInHierarchy [L14-L50]
  └─ sends_request GetStandardAccountManagerQuery [L157]
    └─ handled_by Cirrus.ApplicationService.Accounting.Queries.GetStandardAccountManagerQueryHandler.Handle [L54–L184]
      └─ maps_to MasterAccountForStandardChartDto [L179]
        └─ automapper.registration CirrusMappingProfile (MasterAccount->MasterAccountForStandardChartDto) [L306]
      └─ uses_service IControlledRepository<MasterAccount>
        └─ method WriteQuery [L98]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<StandardAccount>
        └─ method WriteQuery [L83]
          └─ ... (no implementation details available)
      └─ uses_service ILogger
        └─ method LogWarning [L142]
          └─ ... (no implementation details available)
      └─ uses_service IMapper
        └─ method ConfigurationProvider [L181]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L105]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)
      └─ logs ILogger [Warning] [L142]

[web] PUT /api/accounting/ledger/standard-accounts/child/{id:Guid}  (Cirrus.Api.Controllers.Accounting.Ledger.StandardAccountController.PutChild)  [L123–L128] status=200 [auth=Authentication.UserPolicy,Authentication.AdminPolicy]
  └─ calls StandardAccountRepository.WriteQuery [L126]
  └─ write StandardAccount [L126]
    └─ reads_from StandardAccounts
  └─ uses_service IControlledRepository<StandardAccount>
    └─ method WriteQuery [L126]
      └─ ... (no implementation details available)

[web] PUT /api/accounting/ledger/standard-accounts/header/{id:Guid}  (Cirrus.Api.Controllers.Accounting.Ledger.StandardAccountController.PutHeader)  [L168–L179] status=200 [auth=Authentication.UserPolicy,Authentication.AdminPolicy]
  └─ calls StandardAccountRepository.WriteQuery [L171]
  └─ write StandardAccount [L171]
    └─ reads_from StandardAccounts
  └─ uses_service IControlledRepository<StandardAccount>
    └─ method WriteQuery [L171]
      └─ ... (no implementation details available)
  └─ sends_request CheckForExistingLeadScheduleInStandardAccountHierarchyQuery [L175]
    └─ handled_by Cirrus.ApplicationService.Accounting.Queries.CheckForExistingLeadScheduleInHierarchyQueryHandler.Handle [L31–L78]
      └─ uses_service IControlledRepository<StandardAccount>
        └─ method ReadQuery [L49]
          └─ ... (no implementation details available)
      └─ uses_service ILeadScheduleService (AddScoped)
        └─ method GetAccountsInHierarchy [L55]
          └─ implementation Cirrus.ApplicationService.Features.LeadSchedules.LeadScheduleService.GetAccountsInHierarchy [L14-L50]

[web] POST /api/accounting/ledger/standard-charts/  (Cirrus.Api.Controllers.Accounting.Ledger.StandardChartController.Create)  [L153–L158] status=201 [auth=Authentication.UserPolicy,Authentication.AdminPolicy]
  └─ calls StandardChartRepository.Add [L157]
  └─ insert StandardChart [L157]
    └─ reads_from StandardCharts
  └─ uses_service IControlledRepository<StandardChart>
    └─ method Add [L157]
      └─ ... (no implementation details available)

[web] DELETE /api/accounting/ledger/standard-charts/{id:int}  (Cirrus.Api.Controllers.Accounting.Ledger.StandardChartController.Delete)  [L173–L178] status=200 [auth=Authentication.UserPolicy,Authentication.AdminPolicy]
  └─ calls StandardChartRepository.Remove [L177]
  └─ calls StandardChartRepository.WriteQuery [L176]
  └─ delete StandardChart [L177]
    └─ reads_from StandardCharts
  └─ write StandardChart [L176]
    └─ reads_from StandardCharts
  └─ uses_service IControlledRepository<StandardChart>
    └─ method WriteQuery [L176]
      └─ ... (no implementation details available)

[web] GET /api/accounting/ledger/standard-charts/{id:int}  (Cirrus.Api.Controllers.Accounting.Ledger.StandardChartController.Get)  [L52–L58] status=200 [auth=Authentication.UserPolicy]
  └─ maps_to StandardChartDto [L55]
    └─ automapper.registration ExternalApiMappingProfile (StandardChart->StandardChartDto) [L78]
    └─ automapper.registration CirrusMappingProfile (StandardChart->StandardChartDto) [L240]
  └─ calls StandardChartRepository.ReadQuery [L55]
  └─ query StandardChart [L55]
    └─ reads_from StandardCharts
  └─ uses_service IControlledRepository<StandardChart>
    └─ method ReadQuery [L55]
      └─ ... (no implementation details available)

[web] GET /api/accounting/ledger/standard-charts/{standardChartId:int}/accounts/hierarchy  (Cirrus.Api.Controllers.Accounting.Ledger.StandardChartController.GetAccountHierarchy)  [L94–L102] status=200 [auth=Authentication.UserPolicy]

[web] GET /api/accounting/ledger/standard-charts/  (Cirrus.Api.Controllers.Accounting.Ledger.StandardChartController.GetAll)  [L63–L72] status=200 [auth=Authentication.UserPolicy]
  └─ maps_to StandardChartDto [L66]
    └─ automapper.registration ExternalApiMappingProfile (StandardChart->StandardChartDto) [L78]
    └─ automapper.registration CirrusMappingProfile (StandardChart->StandardChartDto) [L240]
  └─ calls StandardChartRepository.ReadQuery [L66]
  └─ query StandardChart [L66]
    └─ reads_from StandardCharts
  └─ uses_service IControlledRepository<StandardChart>
    └─ method ReadQuery [L66]
      └─ ... (no implementation details available)

[web] GET /api/accounting/ledger/standard-charts  (Cirrus.Api.Controllers.Accounting.Ledger.StandardChartController.GetCombinedMasterStandardQuery)  [L180–L204] status=200 [auth=Authentication.UserPolicy]
  └─ maps_to StandardChartDto [L188]
    └─ automapper.registration ExternalApiMappingProfile (StandardChart->StandardChartDto) [L78]
    └─ automapper.registration CirrusMappingProfile (StandardChart->StandardChartDto) [L240]
  └─ calls StandardChartRepository.ReadQuery [L188]
  └─ query StandardChart [L188]
    └─ reads_from StandardCharts
  └─ uses_service IControlledRepository<StandardChart>
    └─ method ReadQuery [L188]
      └─ ... (no implementation details available)

[web] GET /api/accounting/ledger/standard-charts/sets  (Cirrus.Api.Controllers.Accounting.Ledger.StandardChartController.GetStandardChartSets)  [L78–L84] status=200 [auth=Authentication.UserPolicy]
  └─ maps_to StandardChartSetDto [L81]
  └─ uses_service IReadRepository (InstancePerLifetimeScope)
    └─ method Table [L81]
      └─ ... (no implementation details available)

[web] GET /api/accounting/ledger/standard-charts/{standardChartId:int}/accounts/hierarchy/refresh  (Cirrus.Api.Controllers.Accounting.Ledger.StandardChartController.RefreshAccountHierarchy)  [L120–L148] status=200 [auth=Authentication.UserPolicy]
  └─ calls MasterAccountRepository.ReadQuery [L135]
  └─ calls StandardAccountRepository.ReadQuery [L138]
  └─ query MasterAccount [L135]
    └─ reads_from MasterAccounts
  └─ query StandardAccount [L138]
    └─ reads_from StandardAccounts
  └─ uses_service IControlledRepository<MasterAccount>
    └─ method ReadQuery [L135]
      └─ ... (no implementation details available)
  └─ uses_service IControlledRepository<StandardAccount>
    └─ method ReadQuery [L138]
      └─ ... (no implementation details available)

[web] PUT /api/accounting/ledger/standard-charts/{id:int}  (Cirrus.Api.Controllers.Accounting.Ledger.StandardChartController.Update)  [L163–L168] status=200 [auth=Authentication.UserPolicy,Authentication.AdminPolicy]
  └─ calls StandardChartRepository.WriteQuery [L166]
  └─ write StandardChart [L166]
    └─ reads_from StandardCharts
  └─ uses_service IControlledRepository<StandardChart>
    └─ method WriteQuery [L166]
      └─ ... (no implementation details available)

[web] POST /api/accounting/reports/footer-templates/  (Cirrus.Api.Controllers.Accounting.Reports.FooterTemplatesController.Create)  [L52–L58] status=201 [auth=user,admin]
  └─ calls FooterTemplateRepository.Add [L56]
  └─ insert FooterTemplate [L56]
    └─ reads_from ReportFooterTemplates
  └─ uses_service IControlledRepository<FooterTemplate>
    └─ method Add [L56]
      └─ ... (no implementation details available)

[web] DELETE /api/accounting/reports/footer-templates/{id}  (Cirrus.Api.Controllers.Accounting.Reports.FooterTemplatesController.Delete)  [L68–L74] status=200 [auth=user,admin]
  └─ calls FooterTemplateRepository.Remove [L72]
  └─ calls FooterTemplateRepository.WriteQuery [L71]
  └─ delete FooterTemplate [L72]
    └─ reads_from ReportFooterTemplates
  └─ write FooterTemplate [L71]
    └─ reads_from ReportFooterTemplates
  └─ uses_service IControlledRepository<FooterTemplate>
    └─ method WriteQuery [L71]
      └─ ... (no implementation details available)

[web] GET /api/accounting/reports/footer-templates/{id}  (Cirrus.Api.Controllers.Accounting.Reports.FooterTemplatesController.Get)  [L34–L39] status=200 [auth=user]
  └─ maps_to FooterTemplateDto [L37]
    └─ automapper.registration CirrusMappingProfile (FooterTemplate->FooterTemplateDto) [L629]
    └─ converts_to FooterContentDto [L49]
  └─ calls FooterTemplateRepository.ReadQuery [L37]
  └─ query FooterTemplate [L37]
    └─ reads_from ReportFooterTemplates
  └─ uses_service IControlledRepository<FooterTemplate>
    └─ method ReadQuery [L37]
      └─ ... (no implementation details available)

[web] GET /api/accounting/reports/footer-templates/  (Cirrus.Api.Controllers.Accounting.Reports.FooterTemplatesController.GetAll)  [L44–L50] status=200 [auth=user]
  └─ maps_to FooterTemplateLightDto [L47]
    └─ automapper.registration CirrusMappingProfile (FooterTemplate->FooterTemplateLightDto) [L628]
  └─ calls FooterTemplateRepository.ReadQuery [L47]
  └─ query FooterTemplate [L47]
    └─ reads_from ReportFooterTemplates
  └─ uses_service IControlledRepository<FooterTemplate>
    └─ method ReadQuery [L47]
      └─ ... (no implementation details available)

[web] PUT /api/accounting/reports/footer-templates/{id}  (Cirrus.Api.Controllers.Accounting.Reports.FooterTemplatesController.Update)  [L60–L66] status=200 [auth=user,admin]
  └─ calls FooterTemplateRepository.WriteQuery [L63]
  └─ write FooterTemplate [L63]
    └─ reads_from ReportFooterTemplates
  └─ uses_service IControlledRepository<FooterTemplate>
    └─ method WriteQuery [L63]
      └─ ... (no implementation details available)

[web] GET /api/accounting/reports/generate-content/insert  (Cirrus.Api.Controllers.Accounting.Reports.GenerateReportContentController.GenerateInsert)  [L23–L33] status=200 [auth=user]

[web] POST /api/accounting/reports/header-templates/  (Cirrus.Api.Controllers.Accounting.Reports.HeaderTemplatesController.Create)  [L62–L68] status=201 [auth=user,admin]
  └─ calls HeaderTemplateRepository.Add [L66]
  └─ insert HeaderTemplate [L66]
    └─ reads_from ReportHeaderTemplates
  └─ uses_service IControlledRepository<HeaderTemplate>
    └─ method Add [L66]
      └─ ... (no implementation details available)

[web] DELETE /api/accounting/reports/header-templates/{id}  (Cirrus.Api.Controllers.Accounting.Reports.HeaderTemplatesController.Delete)  [L79–L85] status=200 [auth=user,admin]
  └─ calls HeaderTemplateRepository.Remove [L83]
  └─ calls HeaderTemplateRepository.WriteQuery [L82]
  └─ delete HeaderTemplate [L83]
    └─ reads_from ReportHeaderTemplates
  └─ write HeaderTemplate [L82]
    └─ reads_from ReportHeaderTemplates
  └─ uses_service IControlledRepository<HeaderTemplate>
    └─ method WriteQuery [L82]
      └─ ... (no implementation details available)

[web] GET /api/accounting/reports/header-templates/{id}  (Cirrus.Api.Controllers.Accounting.Reports.HeaderTemplatesController.Get)  [L39–L49] status=200 [auth=user]
  └─ maps_to HeaderTemplateDto (var dto) [L46]
  └─ calls HeaderTemplateRepository.ReadQuery [L42]
  └─ calls ReportContentRepository.LoadReadProperties [L45]
  └─ query HeaderTemplate [L42]
    └─ reads_from ReportHeaderTemplates
  └─ uses_service IControlledRepository<HeaderTemplate>
    └─ method ReadQuery [L42]
      └─ ... (no implementation details available)
  └─ uses_service IMapper
    └─ method Map [L46]
      └─ ... (no implementation details available)
  └─ uses_service ReportContentRepository (InstancePerLifetimeScope)
    └─ method LoadReadProperties [L45]
      └─ implementation Cirrus.Data.Repository.Accounting.Report.ReportContentRepository.LoadReadProperties [L11-L65]
  └─ sends_request PrepareImagesContentCommand [L47]

[web] GET /api/accounting/reports/header-templates/  (Cirrus.Api.Controllers.Accounting.Reports.HeaderTemplatesController.GetAll)  [L54–L60] status=200 [auth=user]
  └─ maps_to HeaderTemplateLightDto [L57]
    └─ automapper.registration CirrusMappingProfile (HeaderTemplate->HeaderTemplateLightDto) [L627]
  └─ calls HeaderTemplateRepository.ReadQuery [L57]
  └─ query HeaderTemplate [L57]
    └─ reads_from ReportHeaderTemplates
  └─ uses_service IControlledRepository<HeaderTemplate>
    └─ method ReadQuery [L57]
      └─ ... (no implementation details available)

[web] PUT /api/accounting/reports/header-templates/{id}  (Cirrus.Api.Controllers.Accounting.Reports.HeaderTemplatesController.Update)  [L70–L77] status=200 [auth=user,admin]
  └─ calls HeaderTemplateRepository.WriteQuery [L73]
  └─ calls ReportContentRepository.LoadReadProperties [L74]
  └─ write HeaderTemplate [L73]
    └─ reads_from ReportHeaderTemplates
  └─ uses_service IControlledRepository<HeaderTemplate>
    └─ method WriteQuery [L73]
      └─ ... (no implementation details available)
  └─ uses_service ReportContentRepository (InstancePerLifetimeScope)
    └─ method LoadReadProperties [L74]
      └─ implementation Cirrus.Data.Repository.Accounting.Report.ReportContentRepository.LoadReadProperties [L11-L65]

[web] DELETE /api/accounting/reports/images/{imageId}  (Cirrus.Api.Controllers.Accounting.Reports.Images.ImagesController.Delete)  [L63–L68] status=200 [auth=Authentication.UserPolicy]
  └─ calls ImageRepository.Remove [L67]
  └─ calls ImageRepository.WriteQuery [L66]
  └─ delete Image [L67]
    └─ reads_from Images
  └─ write Image [L66]
    └─ reads_from Images
  └─ uses_service IControlledRepository<Image>
    └─ method WriteQuery [L66]
      └─ ... (no implementation details available)

[web] GET /api/accounting/reports/images/{id}  (Cirrus.Api.Controllers.Accounting.Reports.Images.ImagesController.Get)  [L40–L44] status=200 [auth=Authentication.UserPolicy]
  └─ sends_request GetImageQuery [L43]
    └─ handled_by Cirrus.ApplicationService.Accounting.Queries.Reports.Images.GetImageQueryHandler.Handle [L23–L57]
      └─ maps_to ImageDto [L43]
        └─ automapper.registration CirrusMappingProfile (Image->ImageDto) [L589]
      └─ uses_service IControlledRepository<Image>
        └─ method ReadQuery [L43]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L53]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)
      └─ uses_service IStorageService (InstancePerLifetimeScope)
        └─ method CreateDownloadUrl [L50]
          └─ implementation IStorageService.CreateDownloadUrl [L9-L9]
          └─ ... (no implementation details available)
      └─ uses_storage IStorageService.CreateDownloadUrl [L50]

[web] GET /api/accounting/reports/images  (Cirrus.Api.Controllers.Accounting.Reports.Images.ImagesController.GetAll)  [L31–L38] status=200 [auth=Authentication.UserPolicy]

[web] POST /api/accounting/reports/images  (Cirrus.Api.Controllers.Accounting.Reports.Images.ImagesController.Post)  [L46–L54] status=201 [auth=Authentication.UserPolicy]
  └─ calls ImageRepository.Add [L53]
  └─ calls ImageRepository.ReadQuery [L51]
  └─ insert Image [L53]
    └─ reads_from Images
  └─ query Image [L51]
    └─ reads_from Images
  └─ uses_service IControlledRepository<Image>
    └─ method ReadQuery [L51]
      └─ ... (no implementation details available)

[web] PUT /api/accounting/reports/images/{imageId}  (Cirrus.Api.Controllers.Accounting.Reports.Images.ImagesController.Put)  [L56–L61] status=200 [auth=Authentication.UserPolicy]
  └─ calls ImageRepository.WriteQuery [L59]
  └─ write Image [L59]
    └─ reads_from Images
  └─ uses_service IControlledRepository<Image>
    └─ method WriteQuery [L59]
      └─ ... (no implementation details available)

[web] POST /api/accounting/reports/templates/import-tables/extract  (Cirrus.Api.Controllers.Accounting.Reports.ImportTablesController.Get)  [L24–L28] status=201 [auth=user]
  └─ sends_request ExtractExcelTablesCommand [L27]
    └─ handled_by Cirrus.ApplicationService.Accounting.Commands.Reports.ReportTemplates.ExtractExcelTablesCommandHandler.Handle [L35–L98]
      └─ uses_service DataverseService
        └─ method Get [L85]
          └─ implementation Cirrus.Central.Features.MachineToMachine.DataverseService.Get [L14-L66]
      └─ uses_service IStorageService (InstancePerLifetimeScope)
        └─ method GetStream [L76]
          └─ implementation IStorageService.GetStream [L9-L9]
          └─ ... (no implementation details available)
      └─ uses_service ITenantService (AddScoped)
        └─ method GetCurrentTenant [L84]
          └─ implementation ITenantService.GetCurrentTenant [L14-L14]
          └─ ... (no implementation details available)
      └─ uses_service IUserService (InstancePerLifetimeScope)
        └─ method GetUser [L79]
          └─ implementation IUserService.GetUser [L18-L18]
          └─ ... (no implementation details available)
      └─ uses_storage IStorageService.GetStream [L76]

[web] GET /api/accounting/reports/labels/  (Cirrus.Api.Controllers.Accounting.Reports.Layout.ReportLabelController.GetAll)  [L42–L49] status=200 [auth=Authentication.UserPolicy]
  └─ maps_to ReportLabelWithAccountDto [L45]
    └─ automapper.registration CirrusMappingProfile (ReportLabel->ReportLabelWithAccountDto) [L650]
  └─ calls ReportLabelRepository.ReadQuery [L45]
  └─ query ReportLabel [L45]
    └─ reads_from ReportLabels
  └─ uses_service IControlledRepository<ReportLabel>
    └─ method ReadQuery [L45]
      └─ ... (no implementation details available)

[web] GET /api/accounting/reports/labels/accounts/{fileId:Guid}  (Cirrus.Api.Controllers.Accounting.Reports.Layout.ReportLabelController.GetReportLabelsByAccount)  [L59–L72] status=200 [auth=Authentication.UserPolicy]
  └─ maps_to AccountWithReportLabelsDto [L66]
    └─ automapper.registration CirrusMappingProfile (Account->AccountWithReportLabelsDto) [L321]
  └─ calls AccountRepository.ReadQuery [L66]
  └─ query Account [L66]
  └─ uses_service IControlledRepository<Account>
    └─ method ReadQuery [L66]
      └─ ... (no implementation details available)

[web] PUT /api/accounting/reports/labels/account/{id:Guid}  (Cirrus.Api.Controllers.Accounting.Reports.Layout.ReportLabelController.UpdateAccountReportLabels)  [L81–L90] status=200 [auth=Authentication.UserPolicy]
  └─ calls AccountRepository.WriteQuery [L84]
  └─ write Account [L84]
  └─ uses_service IControlledRepository<Account>
    └─ method WriteQuery [L84]
      └─ ... (no implementation details available)
  └─ sends_request CanIAccessFileQuery [L85]
    └─ handled_by Cirrus.ApplicationService.Firm.Queries.CanIAccessFileQueryHandler.Handle [L43–L101]
      └─ uses_service IRequestInfoService (AddScoped)
        └─ method IsValidServiceAccountRequest [L66]
          └─ implementation IRequestInfoService.IsValidServiceAccountRequest [L20-L20]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L90]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)
      └─ uses_service ITenantService (AddScoped)
        └─ method GetCurrentTenant [L68]
          └─ implementation ITenantService.GetCurrentTenant [L14-L14]
          └─ ... (no implementation details available)
      └─ uses_service IUserService (InstancePerLifetimeScope)
        └─ method GetUserId [L68]
          └─ implementation IUserService.GetUserId [L18-L18]
          └─ ... (no implementation details available)
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L79]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L71]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L68]

[web] GET /api/accounting/reports/layout/master/{pageTypeId:int}/layout  (Cirrus.Api.Controllers.Accounting.Reports.Layout.ReportLayoutController.GetMasterPageLayoutOptions)  [L38–L42] status=200 [auth=Authentication.UserPolicy]

[web] GET /api/accounting/reports/layout/template/{pageTypeId:int}/layout  (Cirrus.Api.Controllers.Accounting.Reports.Layout.ReportLayoutController.GetTemplatePageLayoutOptions)  [L57–L61] status=200 [auth=Authentication.UserPolicy]

[web] GET /api/accounting/reports/page-layouts  (Cirrus.Api.Controllers.Accounting.Reports.Layout.ReportPageLayoutController.ConditionalAdminAuth)  [L114–L121] status=200 [auth=Authentication.UserPolicy]
  └─ uses_service IAuthorizationService
    └─ method AuthorizeAsync [L116]
      └─ ... (no implementation details available)

[web] POST /api/accounting/reports/page-layouts/  (Cirrus.Api.Controllers.Accounting.Reports.Layout.ReportPageLayoutController.Create)  [L84–L92] status=201 [auth=Authentication.UserPolicy]
  └─ calls ReportPageLayoutRepository.Add [L90]
  └─ insert ReportPageLayout [L90]
    └─ reads_from ReportPageLayouts
  └─ uses_service IControlledRepository<ReportPageLayout>
    └─ method Add [L90]
      └─ ... (no implementation details available)
  └─ sends_request CanIAccessFileQuery [L88]
    └─ handled_by Cirrus.ApplicationService.Firm.Queries.CanIAccessFileQueryHandler.Handle [L43–L101]
      └─ uses_service IRequestInfoService (AddScoped)
        └─ method IsValidServiceAccountRequest [L66]
          └─ implementation IRequestInfoService.IsValidServiceAccountRequest [L20-L20]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L90]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)
      └─ uses_service ITenantService (AddScoped)
        └─ method GetCurrentTenant [L68]
          └─ implementation ITenantService.GetCurrentTenant [L14-L14]
          └─ ... (no implementation details available)
      └─ uses_service IUserService (InstancePerLifetimeScope)
        └─ method GetUserId [L68]
          └─ implementation IUserService.GetUserId [L18-L18]
          └─ ... (no implementation details available)
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L79]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L71]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L68]

[web] DELETE /api/accounting/reports/page-layouts/{id}  (Cirrus.Api.Controllers.Accounting.Reports.Layout.ReportPageLayoutController.Delete)  [L104–L112] status=200 [auth=Authentication.UserPolicy]
  └─ calls ReportPageLayoutRepository.Remove [L110]
  └─ calls ReportPageLayoutRepository.WriteQuery [L107]
  └─ delete ReportPageLayout [L110]
    └─ reads_from ReportPageLayouts
  └─ write ReportPageLayout [L107]
    └─ reads_from ReportPageLayouts
  └─ uses_service IControlledRepository<ReportPageLayout>
    └─ method WriteQuery [L107]
      └─ ... (no implementation details available)
  └─ sends_request CanIAccessFileQuery [L109]
    └─ handled_by Cirrus.ApplicationService.Firm.Queries.CanIAccessFileQueryHandler.Handle [L43–L101]
      └─ uses_service IRequestInfoService (AddScoped)
        └─ method IsValidServiceAccountRequest [L66]
          └─ implementation IRequestInfoService.IsValidServiceAccountRequest [L20-L20]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L90]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)
      └─ uses_service ITenantService (AddScoped)
        └─ method GetCurrentTenant [L68]
          └─ implementation ITenantService.GetCurrentTenant [L14-L14]
          └─ ... (no implementation details available)
      └─ uses_service IUserService (InstancePerLifetimeScope)
        └─ method GetUserId [L68]
          └─ implementation IUserService.GetUserId [L18-L18]
          └─ ... (no implementation details available)
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L79]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L71]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L68]

[web] GET /api/accounting/reports/page-layouts/{id}  (Cirrus.Api.Controllers.Accounting.Reports.Layout.ReportPageLayoutController.Get)  [L45–L49] status=200 [auth=Authentication.UserPolicy]
  └─ sends_request GetReportPageLayoutQuery [L48]
    └─ handled_by Cirrus.ApplicationService.Accounting.Queries.Reports.GetReportPageLayoutsQueryHandler.Handle [L47–L197]
      └─ maps_to ReportPageLayoutDto [L124]
      └─ maps_to ReportPageLayoutDto [L95]
        └─ automapper.registration CirrusMappingProfile (ReportPageLayout->ReportPageLayoutDto) [L644]
      └─ maps_to ReportPageLayoutDto [L101]
      └─ uses_service IControlledRepository<ReportPageLayout>
        └─ method ReadQuery [L95]
          └─ ... (no implementation details available)
      └─ uses_service IMapper
        └─ method Map [L101]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L70]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)

[web] GET /api/accounting/reports/page-layouts/  (Cirrus.Api.Controllers.Accounting.Reports.Layout.ReportPageLayoutController.GetAll)  [L55–L62] status=200 [auth=Authentication.UserPolicy]
  └─ maps_to ReportPageLayoutLightDto [L58]
    └─ automapper.registration CirrusMappingProfile (ReportPageLayout->ReportPageLayoutLightDto) [L646]
  └─ calls ReportPageLayoutRepository.ReadQuery [L58]
  └─ query ReportPageLayout [L58]
    └─ reads_from ReportPageLayouts
  └─ uses_service IControlledRepository<ReportPageLayout>
    └─ method ReadQuery [L58]
      └─ ... (no implementation details available)

[web] GET /api/accounting/reports/page-layouts/new-template  (Cirrus.Api.Controllers.Accounting.Reports.Layout.ReportPageLayoutController.GetNewTemplate)  [L78–L82] status=200 [auth=Authentication.UserPolicy]
  └─ sends_request GetReportPageLayoutQuery [L81]
    └─ handled_by Cirrus.ApplicationService.Accounting.Queries.Reports.GetReportPageLayoutsQueryHandler.Handle [L47–L197]
      └─ maps_to ReportPageLayoutDto [L124]
      └─ maps_to ReportPageLayoutDto [L95]
        └─ automapper.registration CirrusMappingProfile (ReportPageLayout->ReportPageLayoutDto) [L644]
      └─ maps_to ReportPageLayoutDto [L101]
      └─ uses_service IControlledRepository<ReportPageLayout>
        └─ method ReadQuery [L95]
          └─ ... (no implementation details available)
      └─ uses_service IMapper
        └─ method Map [L101]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L70]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)

[web] GET /api/accounting/reports/page-layouts/templates  (Cirrus.Api.Controllers.Accounting.Reports.Layout.ReportPageLayoutController.GetTemplates)  [L68–L72] status=200 [auth=Authentication.UserPolicy]
  └─ sends_request GetReportPageLayoutsQuery [L71]

[web] PUT /api/accounting/reports/page-layouts/{id}  (Cirrus.Api.Controllers.Accounting.Reports.Layout.ReportPageLayoutController.Update)  [L94–L102] status=200 [auth=Authentication.UserPolicy]
  └─ calls ReportPageLayoutRepository.WriteQuery [L97]
  └─ write ReportPageLayout [L97]
    └─ reads_from ReportPageLayouts
  └─ uses_service IControlledRepository<ReportPageLayout>
    └─ method WriteQuery [L97]
      └─ ... (no implementation details available)
  └─ sends_request CanIAccessFileQuery [L99]
    └─ handled_by Cirrus.ApplicationService.Firm.Queries.CanIAccessFileQueryHandler.Handle [L43–L101]
      └─ uses_service IRequestInfoService (AddScoped)
        └─ method IsValidServiceAccountRequest [L66]
          └─ implementation IRequestInfoService.IsValidServiceAccountRequest [L20-L20]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L90]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)
      └─ uses_service ITenantService (AddScoped)
        └─ method GetCurrentTenant [L68]
          └─ implementation ITenantService.GetCurrentTenant [L14-L14]
          └─ ... (no implementation details available)
      └─ uses_service IUserService (InstancePerLifetimeScope)
        └─ method GetUserId [L68]
          └─ implementation IUserService.GetUserId [L18-L18]
          └─ ... (no implementation details available)
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L79]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L71]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L68]

[web] GET /api/accounting/reports/notes/disclosure-templates  (Cirrus.Api.Controllers.Accounting.Reports.Notes.DisclosureTemplatesController.CanIEditDisclosureTemplate)  [L189–L200] status=200 [auth=Authentication.UserPolicy]
  └─ uses_service IUserService (InstancePerLifetimeScope)
    └─ method IsInRole [L193]
      └─ implementation IUserService.IsInRole [L18-L18]
      └─ ... (no implementation details available)
  └─ sends_request CanIAccessFileQuery [L198]
    └─ handled_by Cirrus.ApplicationService.Firm.Queries.CanIAccessFileQueryHandler.Handle [L43–L101]
      └─ uses_service IRequestInfoService (AddScoped)
        └─ method IsValidServiceAccountRequest [L66]
          └─ implementation IRequestInfoService.IsValidServiceAccountRequest [L20-L20]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L90]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)
      └─ uses_service ITenantService (AddScoped)
        └─ method GetCurrentTenant [L68]
          └─ implementation ITenantService.GetCurrentTenant [L14-L14]
          └─ ... (no implementation details available)
      └─ uses_service IUserService (InstancePerLifetimeScope)
        └─ method GetUserId [L68]
          └─ implementation IUserService.GetUserId [L18-L18]
          └─ ... (no implementation details available)
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L79]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L71]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L68]

[web] POST /api/accounting/reports/notes/disclosure-templates/master/file  (Cirrus.Api.Controllers.Accounting.Reports.Notes.DisclosureTemplatesController.Create)  [L121–L147] status=201 [auth=Authentication.UserPolicy]
  └─ calls DisclosureTemplateRepository.Add [L145]
  └─ calls DisclosureTemplateRepository.WriteQuery [L137]
  └─ calls DisclosureTemplateRepository.ReadQuery [L127]
  └─ insert DisclosureTemplate [L145]
    └─ reads_from DisclosureTemplates
  └─ query DisclosureTemplate [L127]
    └─ reads_from DisclosureTemplates
  └─ write DisclosureTemplate [L137]
    └─ reads_from DisclosureTemplates
  └─ uses_service IControlledRepository<DisclosureTemplate>
    └─ method ReadQuery [L127]
      └─ ... (no implementation details available)

[web] POST /api/accounting/reports/notes/disclosure-templates/inherit  (Cirrus.Api.Controllers.Accounting.Reports.Notes.DisclosureTemplatesController.CreateInherited)  [L153–L163] status=201 [auth=Authentication.UserPolicy]
  └─ calls DisclosureTemplateRepository.Add [L161]
  └─ calls DisclosureTemplateRepository.ReadQuery [L156]
  └─ insert DisclosureTemplate [L161]
    └─ reads_from DisclosureTemplates
  └─ query DisclosureTemplate [L156]
    └─ reads_from DisclosureTemplates
  └─ uses_service IControlledRepository<DisclosureTemplate>
    └─ method ReadQuery [L156]
      └─ ... (no implementation details available)

[web] DELETE /api/accounting/reports/notes/disclosure-templates/{id:Guid}  (Cirrus.Api.Controllers.Accounting.Reports.Notes.DisclosureTemplatesController.Delete)  [L180–L187] status=200 [auth=Authentication.UserPolicy]
  └─ calls DisclosureTemplateRepository.Remove [L185]
  └─ calls DisclosureTemplateRepository.WriteQuery [L183]
  └─ delete DisclosureTemplate [L185]
    └─ reads_from DisclosureTemplates
  └─ write DisclosureTemplate [L183]
    └─ reads_from DisclosureTemplates
  └─ uses_service IControlledRepository<DisclosureTemplate>
    └─ method WriteQuery [L183]
      └─ ... (no implementation details available)

[web] GET /api/accounting/reports/notes/disclosure-templates/{id:Guid}  (Cirrus.Api.Controllers.Accounting.Reports.Notes.DisclosureTemplatesController.Get)  [L44–L48] status=200 [auth=Authentication.UserPolicy]
  └─ sends_request GetDisclosureTemplateQuery [L47]
    └─ handled_by Cirrus.ApplicationService.Accounting.Queries.Reports.Notes.GetDisclosureTemplateQueryHandler.Handle [L30–L69]
      └─ maps_to DisclosureTemplateDto [L47]
        └─ automapper.registration CirrusMappingProfile (DisclosureTemplate->DisclosureTemplateDto) [L826]
      └─ maps_to DisclosureVariantForDisclosureTemplateDto [L54]
        └─ automapper.registration CirrusMappingProfile (DisclosureVariant->DisclosureVariantForDisclosureTemplateDto) [L850]
      └─ uses_service IControlledRepository<DisclosureTemplate>
        └─ method ReadQuery [L47]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<DisclosureVariant>
        └─ method ReadQuery [L54]
          └─ ... (no implementation details available)
      └─ uses_service IMapper
        └─ method ConfigurationProvider [L57]
          └─ ... (no implementation details available)

[web] GET /api/accounting/reports/notes/disclosure-templates/  (Cirrus.Api.Controllers.Accounting.Reports.Notes.DisclosureTemplatesController.GetAll)  [L38–L42] status=200 [auth=Authentication.UserPolicy]
  └─ sends_request GetDisclosureTemplatesQuery [L41]
    └─ handled_by Cirrus.ApplicationService.Accounting.Queries.Reports.Notes.GetDisclosureTemplatesQueryHandler.Handle [L64–L215]
      └─ maps_to DisclosureVariantForReportingSuiteLightDto [L187]
      └─ uses_service IControlledRepository<DisclosureTemplate>
        └─ method ReadQuery [L143]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<DisclosureVariant>
        └─ method ReadQuery [L201]
          └─ ... (no implementation details available)
      └─ uses_service IMapper
        └─ method ConfigurationProvider [L163]
          └─ ... (no implementation details available)

[web] PUT /api/accounting/reports/notes/disclosure-templates/{id:Guid}/reorder/file  (Cirrus.Api.Controllers.Accounting.Reports.Notes.DisclosureTemplatesController.Reorder)  [L76–L98] status=200 [auth=Authentication.UserPolicy]
  └─ calls DisclosureTemplateRepository.WriteQuery [L83]
  └─ calls DisclosureTemplateRepository.ReadQuery [L79]
  └─ query DisclosureTemplate [L79]
    └─ reads_from DisclosureTemplates
  └─ write DisclosureTemplate [L83]
    └─ reads_from DisclosureTemplates
  └─ uses_service IControlledRepository<DisclosureTemplate>
    └─ method ReadQuery [L79]
      └─ ... (no implementation details available)

[web] PUT /api/accounting/reports/notes/disclosure-templates/{id:Guid}  (Cirrus.Api.Controllers.Accounting.Reports.Notes.DisclosureTemplatesController.Update)  [L168–L175] status=200 [auth=Authentication.UserPolicy]
  └─ calls DisclosureTemplateRepository.WriteQuery [L171]
  └─ write DisclosureTemplate [L171]
    └─ reads_from DisclosureTemplates
  └─ uses_service IControlledRepository<DisclosureTemplate>
    └─ method WriteQuery [L171]
      └─ ... (no implementation details available)

[web] GET /api/accounting/reports/notes/disclosures/variants  (Cirrus.Api.Controllers.Accounting.Reports.Notes.DisclosureVariantsController.CanIEditDisclosureVariant)  [L177–L188] status=200 [auth=Authentication.UserPolicy]
  └─ uses_service IUserService (InstancePerLifetimeScope)
    └─ method IsInRole [L181]
      └─ implementation IUserService.IsInRole [L18-L18]
      └─ ... (no implementation details available)
  └─ sends_request CanIAccessFileQuery [L186]
    └─ handled_by Cirrus.ApplicationService.Firm.Queries.CanIAccessFileQueryHandler.Handle [L43–L101]
      └─ uses_service IRequestInfoService (AddScoped)
        └─ method IsValidServiceAccountRequest [L66]
          └─ implementation IRequestInfoService.IsValidServiceAccountRequest [L20-L20]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L90]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)
      └─ uses_service ITenantService (AddScoped)
        └─ method GetCurrentTenant [L68]
          └─ implementation ITenantService.GetCurrentTenant [L14-L14]
          └─ ... (no implementation details available)
      └─ uses_service IUserService (InstancePerLifetimeScope)
        └─ method GetUserId [L68]
          └─ implementation IUserService.GetUserId [L18-L18]
          └─ ... (no implementation details available)
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L79]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L71]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L68]

[web] PUT /api/accounting/reports/notes/disclosures/variants/{id:Guid}/confirmMasterChangesChecked  (Cirrus.Api.Controllers.Accounting.Reports.Notes.DisclosureVariantsController.ConfirmMasterChangesChecked)  [L153–L162] status=200 [auth=Authentication.UserPolicy]
  └─ calls DisclosureVariantRepository.WriteQuery [L156]
  └─ write DisclosureVariant [L156]
    └─ reads_from DisclosureVariants
  └─ uses_service IControlledRepository<DisclosureVariant>
    └─ method WriteQuery [L156]
      └─ ... (no implementation details available)

[web] POST /api/accounting/reports/notes/disclosures/variants/  (Cirrus.Api.Controllers.Accounting.Reports.Notes.DisclosureVariantsController.Create)  [L109–L118] status=201 [auth=Authentication.UserPolicy]
  └─ calls DisclosureTemplateRepository.ReadQuery [L112]
  └─ calls DisclosureVariantRepository.Add [L116]
  └─ query DisclosureTemplate [L112]
    └─ reads_from DisclosureTemplates
  └─ insert DisclosureVariant [L116]
    └─ reads_from DisclosureVariants
  └─ uses_service IControlledRepository<DisclosureTemplate>
    └─ method ReadQuery [L112]
      └─ ... (no implementation details available)
  └─ uses_service IControlledRepository<DisclosureVariant>
    └─ method Add [L116]
      └─ ... (no implementation details available)

[web] POST /api/accounting/reports/notes/disclosures/variants/inherit  (Cirrus.Api.Controllers.Accounting.Reports.Notes.DisclosureVariantsController.CreateInherited)  [L124–L135] status=201 [auth=Authentication.UserPolicy]
  └─ calls DisclosureTemplateRepository.ReadQuery [L129]
  └─ calls DisclosureVariantRepository.Add [L133]
  └─ calls DisclosureVariantRepository.ReadQuery [L130]
  └─ query DisclosureTemplate [L129]
    └─ reads_from DisclosureTemplates
  └─ insert DisclosureVariant [L133]
    └─ reads_from DisclosureVariants
  └─ query DisclosureVariant [L130]
    └─ reads_from DisclosureVariants
  └─ uses_service IControlledRepository<DisclosureTemplate>
    └─ method ReadQuery [L129]
      └─ ... (no implementation details available)
  └─ uses_service IControlledRepository<DisclosureVariant>
    └─ method ReadQuery [L130]
      └─ ... (no implementation details available)

[web] DELETE /api/accounting/reports/notes/disclosures/variants/{id:Guid}  (Cirrus.Api.Controllers.Accounting.Reports.Notes.DisclosureVariantsController.Delete)  [L167–L175] status=200 [auth=Authentication.UserPolicy]
  └─ calls DisclosureVariantRepository.Remove [L173]
  └─ calls DisclosureVariantRepository.WriteQuery [L170]
  └─ calls ReportContentRepository.LoadWriteProperties [L171]
  └─ delete DisclosureVariant [L173]
    └─ reads_from DisclosureVariants
  └─ write DisclosureVariant [L170]
    └─ reads_from DisclosureVariants
  └─ uses_service IControlledRepository<DisclosureVariant>
    └─ method WriteQuery [L170]
      └─ ... (no implementation details available)
  └─ uses_service ReportContentRepository (InstancePerLifetimeScope)
    └─ method LoadWriteProperties [L171]
      └─ implementation Cirrus.Data.Repository.Accounting.Report.ReportContentRepository.LoadWriteProperties [L11-L65]

[web] GET /api/accounting/reports/notes/disclosures/variants/{id:Guid}  (Cirrus.Api.Controllers.Accounting.Reports.Notes.DisclosureVariantsController.Get)  [L50–L79] status=200 [auth=Authentication.UserPolicy]
  └─ maps_to DisclosureVariantDto (var dto) [L71]
  └─ calls DisclosureVariantRepository.ReadQuery [L56]
  └─ calls ReportContentRepository.LoadReadProperties [L68]
  └─ query DisclosureVariant [L56]
    └─ reads_from DisclosureVariants
  └─ uses_service IControlledRepository<DisclosureVariant>
    └─ method ReadQuery [L56]
      └─ ... (no implementation details available)
  └─ uses_service IMapper
    └─ method Map [L71]
      └─ ... (no implementation details available)
  └─ uses_service ReportContentRepository (InstancePerLifetimeScope)
    └─ method LoadReadProperties [L68]
      └─ implementation Cirrus.Data.Repository.Accounting.Report.ReportContentRepository.LoadReadProperties [L11-L65]
  └─ sends_request PrepareImagesContentCommand [L72]

[web] POST /api/accounting/reports/notes/disclosures/variants/tables  (Cirrus.Api.Controllers.Accounting.Reports.Notes.DisclosureVariantsController.GetTables)  [L81–L103] status=201 [auth=Authentication.UserPolicy]
  └─ calls DisclosureVariantRepository.ReadQuery [L84]
  └─ query DisclosureVariant [L84]
    └─ reads_from DisclosureVariants
  └─ uses_service IControlledRepository<DisclosureVariant>
    └─ method ReadQuery [L84]
      └─ ... (no implementation details available)

[web] PUT /api/accounting/reports/notes/disclosures/variants/{id:Guid}  (Cirrus.Api.Controllers.Accounting.Reports.Notes.DisclosureVariantsController.Update)  [L140–L148] status=200 [auth=Authentication.UserPolicy]
  └─ calls DisclosureVariantRepository.WriteQuery [L143]
  └─ calls ReportContentRepository.LoadWriteProperties [L144]
  └─ write DisclosureVariant [L143]
    └─ reads_from DisclosureVariants
  └─ uses_service IControlledRepository<DisclosureVariant>
    └─ method WriteQuery [L143]
      └─ ... (no implementation details available)
  └─ uses_service ReportContentRepository (InstancePerLifetimeScope)
    └─ method LoadWriteProperties [L144]
      └─ implementation Cirrus.Data.Repository.Accounting.Report.ReportContentRepository.LoadWriteProperties [L11-L65]

[web] GET /api/accounting/reports/notes/policies  (Cirrus.Api.Controllers.Accounting.Reports.Notes.PoliciesController.CanIEditPolicy)  [L201–L212] status=200 [auth=Authentication.UserPolicy]
  └─ uses_service IUserService (InstancePerLifetimeScope)
    └─ method IsInRole [L205]
      └─ implementation IUserService.IsInRole [L18-L18]
      └─ ... (no implementation details available)
  └─ sends_request CanIAccessFileQuery [L210]
    └─ handled_by Cirrus.ApplicationService.Firm.Queries.CanIAccessFileQueryHandler.Handle [L43–L101]
      └─ uses_service IRequestInfoService (AddScoped)
        └─ method IsValidServiceAccountRequest [L66]
          └─ implementation IRequestInfoService.IsValidServiceAccountRequest [L20-L20]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L90]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)
      └─ uses_service ITenantService (AddScoped)
        └─ method GetCurrentTenant [L68]
          └─ implementation ITenantService.GetCurrentTenant [L14-L14]
          └─ ... (no implementation details available)
      └─ uses_service IUserService (InstancePerLifetimeScope)
        └─ method GetUserId [L68]
          └─ implementation IUserService.GetUserId [L18-L18]
          └─ ... (no implementation details available)
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L79]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L71]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L68]

[web] POST /api/accounting/reports/notes/policies/master/file  (Cirrus.Api.Controllers.Accounting.Reports.Notes.PoliciesController.Create)  [L133–L158] status=201 [auth=Authentication.UserPolicy]
  └─ calls PolicyRepository.Add [L156]
  └─ calls PolicyRepository.WriteQuery [L151]
  └─ calls PolicyRepository.ReadQuery [L139]
  └─ insert Policy [L156]
  └─ query Policy [L139]
  └─ write Policy [L151]
  └─ uses_service IControlledRepository<Policy>
    └─ method ReadQuery [L139]
      └─ ... (no implementation details available)

[web] POST /api/accounting/reports/notes/policies/inherit  (Cirrus.Api.Controllers.Accounting.Reports.Notes.PoliciesController.CreateInherited)  [L164–L175] status=201 [auth=Authentication.UserPolicy]
  └─ calls PolicyRepository.Add [L173]
  └─ calls PolicyRepository.ReadQuery [L167]
  └─ insert Policy [L173]
  └─ query Policy [L167]
  └─ uses_service IControlledRepository<Policy>
    └─ method ReadQuery [L167]
      └─ ... (no implementation details available)

[web] DELETE /api/accounting/reports/notes/policies/{id:Guid}  (Cirrus.Api.Controllers.Accounting.Reports.Notes.PoliciesController.Delete)  [L192–L199] status=200 [auth=Authentication.UserPolicy]
  └─ calls PolicyRepository.Remove [L197]
  └─ calls PolicyRepository.WriteQuery [L195]
  └─ delete Policy [L197]
  └─ write Policy [L195]
  └─ uses_service IControlledRepository<Policy>
    └─ method WriteQuery [L195]
      └─ ... (no implementation details available)

[web] GET /api/accounting/reports/notes/policies/{id:Guid}  (Cirrus.Api.Controllers.Accounting.Reports.Notes.PoliciesController.Get)  [L44–L48] status=200 [auth=Authentication.UserPolicy]
  └─ sends_request GetPolicyQuery [L47]
    └─ handled_by Cirrus.ApplicationService.Accounting.Queries.Reports.Notes.GetPolicyQueryHandler.Handle [L30–L68]
      └─ maps_to PolicyDto [L47]
        └─ automapper.registration CirrusMappingProfile (Policy->PolicyDto) [L789]
      └─ maps_to PolicyVariantForPolicyDto [L54]
        └─ automapper.registration CirrusMappingProfile (PolicyVariant->PolicyVariantForPolicyDto) [L811]
      └─ uses_service IControlledRepository<Policy>
        └─ method ReadQuery [L47]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<PolicyVariant>
        └─ method ReadQuery [L54]
          └─ ... (no implementation details available)
      └─ uses_service IMapper
        └─ method ConfigurationProvider [L57]
          └─ ... (no implementation details available)

[web] GET /api/accounting/reports/notes/policies/  (Cirrus.Api.Controllers.Accounting.Reports.Notes.PoliciesController.GetAll)  [L38–L42] status=200 [auth=Authentication.UserPolicy]
  └─ sends_request GetPoliciesQuery [L41]
    └─ handled_by Cirrus.ApplicationService.Accounting.Queries.Reports.Notes.GetPoliciesQueryHandler.Handle [L70–L227]
      └─ maps_to PolicyVariantForReportingSuiteLightDto [L199]
      └─ uses_service IControlledRepository<Policy>
        └─ method ReadQuery [L149]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<PolicyVariant>
        └─ method ReadQuery [L213]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<ReportTemplate>
        └─ method ReadQuery [L153]
          └─ ... (no implementation details available)
      └─ uses_service IMapper
        └─ method ConfigurationProvider [L175]
          └─ ... (no implementation details available)

[web] PUT /api/accounting/reports/notes/policies/{id:Guid}/reorder/file  (Cirrus.Api.Controllers.Accounting.Reports.Notes.PoliciesController.Reorder)  [L82–L105] status=200 [auth=Authentication.UserPolicy]
  └─ calls PolicyRepository.WriteQuery [L90]
  └─ calls PolicyRepository.ReadQuery [L85]
  └─ query Policy [L85]
  └─ write Policy [L90]
  └─ uses_service IControlledRepository<Policy>
    └─ method ReadQuery [L85]
      └─ ... (no implementation details available)

[web] PUT /api/accounting/reports/notes/policies/{id:Guid}  (Cirrus.Api.Controllers.Accounting.Reports.Notes.PoliciesController.Update)  [L180–L187] status=200 [auth=Authentication.UserPolicy]
  └─ calls PolicyRepository.WriteQuery [L183]
  └─ write Policy [L183]
  └─ uses_service IControlledRepository<Policy>
    └─ method WriteQuery [L183]
      └─ ... (no implementation details available)

[web] POST /api/accounting/reports/notes/policy-layouts/  (Cirrus.Api.Controllers.Accounting.Reports.Notes.PolicyLayoutsController.Create)  [L62–L69] status=201 [auth=Authentication.AdminPolicy]
  └─ calls PolicyLayoutRepository.Add [L67]
  └─ insert PolicyLayout [L67]
    └─ reads_from PolicyLayouts
  └─ uses_service IControlledRepository<PolicyLayout>
    └─ method Add [L67]
      └─ ... (no implementation details available)
  └─ sends_request OptimisePolicyLayoutModelCommand [L65]
    └─ handled_by Cirrus.ApplicationService.Accounting.Commands.Reports.PolicyLayouts.OptimisePolicyLayoutModelCommandHandler.Handle [L24–L94]
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L37]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)

[web] DELETE /api/accounting/reports/notes/policy-layouts/{id:Guid}  (Cirrus.Api.Controllers.Accounting.Reports.Notes.PolicyLayoutsController.Delete)  [L85–L90] status=200 [auth=Authentication.AdminPolicy]
  └─ calls PolicyLayoutRepository.Remove [L89]
  └─ calls PolicyLayoutRepository.WriteQuery [L88]
  └─ delete PolicyLayout [L89]
    └─ reads_from PolicyLayouts
  └─ write PolicyLayout [L88]
    └─ reads_from PolicyLayouts
  └─ uses_service IControlledRepository<PolicyLayout>
    └─ method WriteQuery [L88]
      └─ ... (no implementation details available)

[web] GET /api/accounting/reports/notes/policy-layouts/{id:Guid}  (Cirrus.Api.Controllers.Accounting.Reports.Notes.PolicyLayoutsController.Get)  [L51–L56] status=200 [auth=Authentication.AdminPolicy]
  └─ maps_to PolicyLayoutDto [L54]
    └─ automapper.registration CirrusMappingProfile (PolicyLayout->PolicyLayoutDto) [L783]
  └─ calls PolicyLayoutRepository.ReadQuery [L54]
  └─ query PolicyLayout [L54]
    └─ reads_from PolicyLayouts
  └─ uses_service IControlledRepository<PolicyLayout>
    └─ method ReadQuery [L54]
      └─ ... (no implementation details available)

[web] GET /api/accounting/reports/notes/policy-layouts/  (Cirrus.Api.Controllers.Accounting.Reports.Notes.PolicyLayoutsController.GetAll)  [L39–L49] status=200 [auth=Authentication.AdminPolicy]
  └─ maps_to PolicyLayoutLightDto [L44]
    └─ automapper.registration CirrusMappingProfile (PolicyLayout->PolicyLayoutLightDto) [L782]
  └─ calls PolicyLayoutRepository.ReadQuery [L44]
  └─ query PolicyLayout [L44]
    └─ reads_from PolicyLayouts
  └─ uses_service IControlledRepository<PolicyLayout>
    └─ method ReadQuery [L44]
      └─ ... (no implementation details available)
  └─ uses_service IJurisdictionService (AddScoped)
    └─ method GetFirmJurisdictions [L42]
      └─ implementation IJurisdictionService.GetFirmJurisdictions [L17-L17]
      └─ ... (no implementation details available)

[web] PUT /api/accounting/reports/notes/policy-layouts/{id:Guid}  (Cirrus.Api.Controllers.Accounting.Reports.Notes.PolicyLayoutsController.Update)  [L74–L80] status=200 [auth=Authentication.AdminPolicy]
  └─ calls PolicyLayoutRepository.WriteQuery [L78]
  └─ write PolicyLayout [L78]
    └─ reads_from PolicyLayouts
  └─ uses_service IControlledRepository<PolicyLayout>
    └─ method WriteQuery [L78]
      └─ ... (no implementation details available)
  └─ sends_request OptimisePolicyLayoutModelCommand [L77]
    └─ handled_by Cirrus.ApplicationService.Accounting.Commands.Reports.PolicyLayouts.OptimisePolicyLayoutModelCommandHandler.Handle [L24–L94]
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L37]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)

[web] GET /api/accounting/reports/notes/policies/variants  (Cirrus.Api.Controllers.Accounting.Reports.Notes.PolicyVariantsController.CanIEditPolicyVariant)  [L159–L170] status=200 [auth=Authentication.UserPolicy]
  └─ uses_service IUserService (InstancePerLifetimeScope)
    └─ method IsInRole [L163]
      └─ implementation IUserService.IsInRole [L18-L18]
      └─ ... (no implementation details available)
  └─ sends_request CanIAccessFileQuery [L168]
    └─ handled_by Cirrus.ApplicationService.Firm.Queries.CanIAccessFileQueryHandler.Handle [L43–L101]
      └─ uses_service IRequestInfoService (AddScoped)
        └─ method IsValidServiceAccountRequest [L66]
          └─ implementation IRequestInfoService.IsValidServiceAccountRequest [L20-L20]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L90]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)
      └─ uses_service ITenantService (AddScoped)
        └─ method GetCurrentTenant [L68]
          └─ implementation ITenantService.GetCurrentTenant [L14-L14]
          └─ ... (no implementation details available)
      └─ uses_service IUserService (InstancePerLifetimeScope)
        └─ method GetUserId [L68]
          └─ implementation IUserService.GetUserId [L18-L18]
          └─ ... (no implementation details available)
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L79]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L71]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L68]

[web] PUT /api/accounting/reports/notes/policies/variants/{id:Guid}/confirmMasterChangesChecked  (Cirrus.Api.Controllers.Accounting.Reports.Notes.PolicyVariantsController.ConfirmMasterChangesChecked)  [L135–L144] status=200 [auth=Authentication.UserPolicy]
  └─ calls PolicyVariantRepository.WriteQuery [L138]
  └─ write PolicyVariant [L138]
    └─ reads_from PolicyVariants
  └─ uses_service IControlledRepository<PolicyVariant>
    └─ method WriteQuery [L138]
      └─ ... (no implementation details available)

[web] POST /api/accounting/reports/notes/policies/variants/  (Cirrus.Api.Controllers.Accounting.Reports.Notes.PolicyVariantsController.Create)  [L94–L102] status=201 [auth=Authentication.UserPolicy]
  └─ calls PolicyRepository.ReadQuery [L97]
  └─ calls PolicyVariantRepository.Add [L100]
  └─ insert PolicyVariant [L100]
    └─ reads_from PolicyVariants
  └─ query Policy [L97]
  └─ uses_service IControlledRepository<Policy>
    └─ method ReadQuery [L97]
      └─ ... (no implementation details available)
  └─ uses_service IControlledRepository<PolicyVariant>
    └─ method Add [L100]
      └─ ... (no implementation details available)

[web] POST /api/accounting/reports/notes/policies/variants/inherit  (Cirrus.Api.Controllers.Accounting.Reports.Notes.PolicyVariantsController.CreateInherited)  [L108–L117] status=201 [auth=Authentication.UserPolicy]
  └─ calls PolicyRepository.ReadQuery [L111]
  └─ calls PolicyVariantRepository.Add [L115]
  └─ calls PolicyVariantRepository.ReadQuery [L112]
  └─ insert PolicyVariant [L115]
    └─ reads_from PolicyVariants
  └─ query PolicyVariant [L112]
    └─ reads_from PolicyVariants
  └─ query Policy [L111]
  └─ uses_service IControlledRepository<Policy>
    └─ method ReadQuery [L111]
      └─ ... (no implementation details available)
  └─ uses_service IControlledRepository<PolicyVariant>
    └─ method ReadQuery [L112]
      └─ ... (no implementation details available)

[web] DELETE /api/accounting/reports/notes/policies/variants/{id:Guid}  (Cirrus.Api.Controllers.Accounting.Reports.Notes.PolicyVariantsController.Delete)  [L149–L157] status=200 [auth=Authentication.UserPolicy]
  └─ calls PolicyVariantRepository.Remove [L155]
  └─ calls PolicyVariantRepository.WriteQuery [L152]
  └─ calls ReportContentRepository.LoadWriteProperties [L154]
  └─ delete PolicyVariant [L155]
    └─ reads_from PolicyVariants
  └─ write PolicyVariant [L152]
    └─ reads_from PolicyVariants
  └─ uses_service IControlledRepository<PolicyVariant>
    └─ method WriteQuery [L152]
      └─ ... (no implementation details available)
  └─ uses_service ReportContentRepository (InstancePerLifetimeScope)
    └─ method LoadWriteProperties [L154]
      └─ implementation Cirrus.Data.Repository.Accounting.Report.ReportContentRepository.LoadWriteProperties [L11-L65]

[web] GET /api/accounting/reports/notes/policies/variants/{id:Guid}  (Cirrus.Api.Controllers.Accounting.Reports.Notes.PolicyVariantsController.Get)  [L46–L64] status=200 [auth=Authentication.UserPolicy]
  └─ maps_to PolicyVariantDto (var dto) [L61]
  └─ calls PolicyVariantRepository.ReadQuery [L49]
  └─ calls ReportContentRepository.LoadReadProperties [L58]
  └─ query PolicyVariant [L49]
    └─ reads_from PolicyVariants
  └─ uses_service IControlledRepository<PolicyVariant>
    └─ method ReadQuery [L49]
      └─ ... (no implementation details available)
  └─ uses_service IMapper
    └─ method Map [L61]
      └─ ... (no implementation details available)
  └─ uses_service ReportContentRepository (InstancePerLifetimeScope)
    └─ method LoadReadProperties [L58]
      └─ implementation Cirrus.Data.Repository.Accounting.Report.ReportContentRepository.LoadReadProperties [L11-L65]
  └─ sends_request PrepareImagesContentCommand [L62]

[web] POST /api/accounting/reports/notes/policies/variants/tables  (Cirrus.Api.Controllers.Accounting.Reports.Notes.PolicyVariantsController.GetTables)  [L66–L88] status=201 [auth=Authentication.UserPolicy]
  └─ calls PolicyVariantRepository.ReadQuery [L69]
  └─ query PolicyVariant [L69]
    └─ reads_from PolicyVariants
  └─ uses_service IControlledRepository<PolicyVariant>
    └─ method ReadQuery [L69]
      └─ ... (no implementation details available)

[web] PUT /api/accounting/reports/notes/policies/variants/{id:Guid}  (Cirrus.Api.Controllers.Accounting.Reports.Notes.PolicyVariantsController.Update)  [L122–L130] status=200 [auth=Authentication.UserPolicy]
  └─ calls PolicyVariantRepository.WriteQuery [L125]
  └─ calls ReportContentRepository.LoadWriteProperties [L127]
  └─ write PolicyVariant [L125]
    └─ reads_from PolicyVariants
  └─ uses_service IControlledRepository<PolicyVariant>
    └─ method WriteQuery [L125]
      └─ ... (no implementation details available)
  └─ uses_service ReportContentRepository (InstancePerLifetimeScope)
    └─ method LoadWriteProperties [L127]
      └─ implementation Cirrus.Data.Repository.Accounting.Report.ReportContentRepository.LoadWriteProperties [L11-L65]

[web] POST /api/accounting/reports/notes/reporting-suites/  (Cirrus.Api.Controllers.Accounting.Reports.Notes.ReportingSuitesController.Create)  [L106–L112] status=201 [auth=Authentication.UserPolicy,Authentication.AdminPolicy]
  └─ calls ReportingSuiteRepository.Add [L110]
  └─ insert ReportingSuite [L110]
    └─ reads_from PolicySuites
  └─ uses_service IControlledRepository<ReportingSuite>
    └─ method Add [L110]
      └─ ... (no implementation details available)

[web] DELETE /api/accounting/reports/notes/reporting-suites/{id:int}  (Cirrus.Api.Controllers.Accounting.Reports.Notes.ReportingSuitesController.Delete)  [L128–L134] status=200 [auth=Authentication.UserPolicy,Authentication.AdminPolicy]
  └─ calls ReportingSuiteRepository.Remove [L132]
  └─ calls ReportingSuiteRepository.WriteQuery [L131]
  └─ delete ReportingSuite [L132]
    └─ reads_from PolicySuites
  └─ write ReportingSuite [L131]
    └─ reads_from PolicySuites
  └─ uses_service IControlledRepository<ReportingSuite>
    └─ method WriteQuery [L131]
      └─ ... (no implementation details available)

[web] GET /api/accounting/reports/notes/reporting-suites/{id:int}  (Cirrus.Api.Controllers.Accounting.Reports.Notes.ReportingSuitesController.Get)  [L77–L81] status=200 [auth=Authentication.UserPolicy]
  └─ sends_request GetReportingSuiteQuery [L80]
    └─ handled_by Cirrus.ApplicationService.Accounting.Queries.Reports.Notes.GetReportingSuiteQueryHandler.Handle [L26–L50]
      └─ maps_to ReportingSuiteDto [L42]
        └─ automapper.registration CirrusMappingProfile (ReportingSuite->ReportingSuiteDto) [L762]
      └─ uses_service IControlledRepository<ReportingSuite>
        └─ method ReadQuery [L42]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L43]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)

[web] GET /api/accounting/reports/notes/reporting-suites/admin  (Cirrus.Api.Controllers.Accounting.Reports.Notes.ReportingSuitesController.GetAll)  [L41–L55] status=200 [auth=Authentication.UserPolicy,Authentication.AdminPolicy]
  └─ maps_to ReportingSuiteLightDto [L45]
    └─ automapper.registration CirrusMappingProfile (ReportingSuite->ReportingSuiteLightDto) [L760]
  └─ calls ReportingSuiteRepository.ReadQuery [L45]
  └─ query ReportingSuite [L45]
    └─ reads_from PolicySuites
  └─ uses_service IControlledRepository<ReportingSuite>
    └─ method ReadQuery [L45]
      └─ ... (no implementation details available)
  └─ uses_service IJurisdictionService (AddScoped)
    └─ method GetFirmJurisdictions [L44]
      └─ implementation IJurisdictionService.GetFirmJurisdictions [L17-L17]
      └─ ... (no implementation details available)

[web] GET /api/accounting/reports/notes/reporting-suites/  (Cirrus.Api.Controllers.Accounting.Reports.Notes.ReportingSuitesController.GetAllUltraLight)  [L57–L75] status=200 [auth=Authentication.UserPolicy]
  └─ maps_to ReportingSuiteUltraLightDto [L64]
    └─ automapper.registration CirrusMappingProfile (ReportingSuite->ReportingSuiteUltraLightDto) [L766]
  └─ calls ReportingSuiteRepository.ReadQuery [L64]
  └─ query ReportingSuite [L64]
    └─ reads_from PolicySuites
  └─ uses_service IControlledRepository<ReportingSuite>
    └─ method ReadQuery [L64]
      └─ ... (no implementation details available)
  └─ uses_service IJurisdictionService (AddScoped)
    └─ method GetUserJurisdictions [L62]
      └─ implementation IJurisdictionService.GetUserJurisdictions [L17-L17]
      └─ ... (no implementation details available)

[web] GET /api/accounting/reports/notes/reporting-suites/unselected-disclosure-variants  (Cirrus.Api.Controllers.Accounting.Reports.Notes.ReportingSuitesController.GetUnselectedDisclosureVariants)  [L92–L100] status=200 [auth=Authentication.UserPolicy]
  └─ sends_request GetDisclosureTemplatesWithVariantsQuery [L98]

[web] GET /api/accounting/reports/notes/reporting-suites/unselected-policy-variants  (Cirrus.Api.Controllers.Accounting.Reports.Notes.ReportingSuitesController.GetUnselectedPolicyVariants)  [L83–L90] status=200 [auth=Authentication.UserPolicy]
  └─ sends_request GetPoliciesWithVariantsQuery [L88]

[web] PUT /api/accounting/reports/notes/reporting-suites/{id:int}  (Cirrus.Api.Controllers.Accounting.Reports.Notes.ReportingSuitesController.Update)  [L117–L123] status=200 [auth=Authentication.UserPolicy,Authentication.AdminPolicy]
  └─ calls ReportingSuiteRepository.WriteQuery [L120]
  └─ write ReportingSuite [L120]
    └─ reads_from PolicySuites
  └─ uses_service IControlledRepository<ReportingSuite>
    └─ method WriteQuery [L120]
      └─ ... (no implementation details available)

[web] GET /api/accounting/reports/published/template/{templateId:guid}/current  (Cirrus.Api.Controllers.Accounting.Reports.PublishedReportsController.Current)  [L80–L91] status=200 [auth=user]
  └─ maps_to PublishedReportBatchDto [L90]
  └─ calls PublishedReportBatchRepository.ReadQuery [L83]
  └─ query PublishedReportBatch [L83]
    └─ reads_from PublishedReportBatches
  └─ uses_service IControlledRepository<PublishedReportBatch>
    └─ method ReadQuery [L83]
      └─ ... (no implementation details available)
  └─ uses_service IMapper
    └─ method Map [L90]
      └─ ... (no implementation details available)
  └─ uses_service IRequestProcessor (InstancePerDependency)
    └─ method ProcessAsync [L88]
      └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
      └─ ... (no implementation details available)
  └─ sends_request CanIAccessFileQuery [L88]
    └─ handled_by Cirrus.ApplicationService.Firm.Queries.CanIAccessFileQueryHandler.Handle [L43–L101]
      └─ uses_service IRequestInfoService (AddScoped)
        └─ method IsValidServiceAccountRequest [L66]
          └─ implementation IRequestInfoService.IsValidServiceAccountRequest [L20-L20]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L90]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)
      └─ uses_service ITenantService (AddScoped)
        └─ method GetCurrentTenant [L68]
          └─ implementation ITenantService.GetCurrentTenant [L14-L14]
          └─ ... (no implementation details available)
      └─ uses_service IUserService (InstancePerLifetimeScope)
        └─ method GetUserId [L68]
          └─ implementation IUserService.GetUserId [L18-L18]
          └─ ... (no implementation details available)
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L79]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L71]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L68]

[web] GET /api/accounting/reports/published/batch/{id:guid}  (Cirrus.Api.Controllers.Accounting.Reports.PublishedReportsController.Detail)  [L94–L100] status=200 [auth=user]
  └─ maps_to PublishedReportBatchDto [L99]
  └─ calls PublishedReportBatchRepository.ReadQuery [L97]
  └─ query PublishedReportBatch [L97]
    └─ reads_from PublishedReportBatches
  └─ uses_service IControlledRepository<PublishedReportBatch>
    └─ method ReadQuery [L97]
      └─ ... (no implementation details available)
  └─ uses_service IMapper
    └─ method Map [L99]
      └─ ... (no implementation details available)
  └─ uses_service IRequestProcessor (InstancePerDependency)
    └─ method ProcessAsync [L98]
      └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
      └─ ... (no implementation details available)
  └─ sends_request CanIAccessFileQuery [L98]
    └─ handled_by Cirrus.ApplicationService.Firm.Queries.CanIAccessFileQueryHandler.Handle [L43–L101]
      └─ uses_service IRequestInfoService (AddScoped)
        └─ method IsValidServiceAccountRequest [L66]
          └─ implementation IRequestInfoService.IsValidServiceAccountRequest [L20-L20]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L90]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)
      └─ uses_service ITenantService (AddScoped)
        └─ method GetCurrentTenant [L68]
          └─ implementation ITenantService.GetCurrentTenant [L14-L14]
          └─ ... (no implementation details available)
      └─ uses_service IUserService (InstancePerLifetimeScope)
        └─ method GetUserId [L68]
          └─ implementation IUserService.GetUserId [L18-L18]
          └─ ... (no implementation details available)
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L79]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L71]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L68]

[web] GET /api/accounting/reports/published/file/{publishedReportFileId:guid}/download  (Cirrus.Api.Controllers.Accounting.Reports.PublishedReportsController.DownloadLink)  [L128–L157] status=200 [auth=user]
  └─ calls PublishedReportBatchRepository.ReadQuery [L147]
  └─ calls PublishedReportFileRepository.ReadQuery [L132]
  └─ query PublishedReportBatch [L147]
    └─ reads_from PublishedReportBatches
  └─ query PublishedReportFile [L132]
    └─ reads_from PublishedReportFiles
  └─ uses_service IControlledRepository<PublishedReportBatch>
    └─ method ReadQuery [L147]
      └─ ... (no implementation details available)
  └─ uses_service IControlledRepository<PublishedReportFile>
    └─ method ReadQuery [L132]
      └─ ... (no implementation details available)
  └─ uses_service IRequestProcessor (InstancePerDependency)
    └─ method ProcessAsync [L133]
      └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
      └─ ... (no implementation details available)
  └─ sends_request CanIAccessFileQuery [L133]
    └─ handled_by Cirrus.ApplicationService.Firm.Queries.CanIAccessFileQueryHandler.Handle [L43–L101]
      └─ uses_service IRequestInfoService (AddScoped)
        └─ method IsValidServiceAccountRequest [L66]
          └─ implementation IRequestInfoService.IsValidServiceAccountRequest [L20-L20]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L90]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)
      └─ uses_service ITenantService (AddScoped)
        └─ method GetCurrentTenant [L68]
          └─ implementation ITenantService.GetCurrentTenant [L14-L14]
          └─ ... (no implementation details available)
      └─ uses_service IUserService (InstancePerLifetimeScope)
        └─ method GetUserId [L68]
          └─ implementation IUserService.GetUserId [L18-L18]
          └─ ... (no implementation details available)
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L79]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L71]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L68]
  └─ sends_request CreateDownloadCommand [L152]
    └─ handled_by Cirrus.ApplicationService.Services.Commands.CreateDownloadCommandHandler.Handle [L48–L73]
      └─ uses_service IStorageService (InstancePerLifetimeScope)
        └─ method CreateDownloadUrl [L60]
          └─ implementation IStorageService.CreateDownloadUrl [L9-L9]
          └─ ... (no implementation details available)
      └─ uses_storage IStorageService.CreateDownloadUrl [L60]
  └─ sends_request CreateDownloadCommand [L140]
    └─ handled_by Cirrus.ApplicationService.Services.Commands.CreateDownloadCommandHandler.Handle [L48–L73]
      └─ uses_service IStorageService (InstancePerLifetimeScope)
        └─ method CreateDownloadUrl [L60]
          └─ implementation IStorageService.CreateDownloadUrl [L9-L9]
          └─ ... (no implementation details available)
      └─ uses_storage IStorageService.CreateDownloadUrl [L60]

[web] POST /api/accounting/reports/published/batch/{id:guid}/invalidate  (Cirrus.Api.Controllers.Accounting.Reports.PublishedReportsController.Invalidate)  [L113–L121] status=201 [auth=user]
  └─ calls PublishedReportBatchRepository.WriteQuery [L117]
  └─ write PublishedReportBatch [L117]
    └─ reads_from PublishedReportBatches
  └─ uses_service IControlledRepository<PublishedReportBatch>
    └─ method WriteQuery [L117]
      └─ ... (no implementation details available)
  └─ uses_service IRequestProcessor (InstancePerDependency)
    └─ method ProcessAsync [L118]
      └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
      └─ ... (no implementation details available)
  └─ sends_request CanIAccessFileQuery [L118]
    └─ handled_by Cirrus.ApplicationService.Firm.Queries.CanIAccessFileQueryHandler.Handle [L43–L101]
      └─ uses_service IRequestInfoService (AddScoped)
        └─ method IsValidServiceAccountRequest [L66]
          └─ implementation IRequestInfoService.IsValidServiceAccountRequest [L20-L20]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L90]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)
      └─ uses_service ITenantService (AddScoped)
        └─ method GetCurrentTenant [L68]
          └─ implementation ITenantService.GetCurrentTenant [L14-L14]
          └─ ... (no implementation details available)
      └─ uses_service IUserService (InstancePerLifetimeScope)
        └─ method GetUserId [L68]
          └─ implementation IUserService.GetUserId [L18-L18]
          └─ ... (no implementation details available)
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L79]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L71]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L68]

[web] GET /api/accounting/reports/published/template/{templateId:guid}  (Cirrus.Api.Controllers.Accounting.Reports.PublishedReportsController.List)  [L60–L77] status=200 [auth=user]
  └─ maps_to PublishedReportBatchDto [L72]
    └─ automapper.registration CirrusMappingProfile (PublishedReportBatch->PublishedReportBatchDto) [L601]
  └─ calls PublishedReportBatchRepository.ReadQuery [L66]
  └─ query PublishedReportBatch [L66]
    └─ reads_from PublishedReportBatches
  └─ uses_service IControlledRepository<PublishedReportBatch>
    └─ method ReadQuery [L66]
      └─ ... (no implementation details available)
  └─ uses_service IRequestProcessor (InstancePerDependency)
    └─ method ProcessAsync [L70]
      └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
      └─ ... (no implementation details available)
  └─ sends_request CanIAccessFileQuery [L70]
    └─ handled_by Cirrus.ApplicationService.Firm.Queries.CanIAccessFileQueryHandler.Handle [L43–L101]
      └─ uses_service IRequestInfoService (AddScoped)
        └─ method IsValidServiceAccountRequest [L66]
          └─ implementation IRequestInfoService.IsValidServiceAccountRequest [L20-L20]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L90]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)
      └─ uses_service ITenantService (AddScoped)
        └─ method GetCurrentTenant [L68]
          └─ implementation ITenantService.GetCurrentTenant [L14-L14]
          └─ ... (no implementation details available)
      └─ uses_service IUserService (InstancePerLifetimeScope)
        └─ method GetUserId [L68]
          └─ implementation IUserService.GetUserId [L18-L18]
          └─ ... (no implementation details available)
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L79]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L71]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L68]

[web] POST /api/accounting/reports/published/publish  (Cirrus.Api.Controllers.Accounting.Reports.PublishedReportsController.Publish)  [L51–L57] status=201 [auth=user]
  └─ uses_service IRequestProcessor (InstancePerDependency)
    └─ method ProcessAsync [L55]
      └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
      └─ ... (no implementation details available)
  └─ sends_request PublishReportsCommand [L55]
    └─ handled_by Cirrus.ApplicationService.Accounting.Reports.Publishing.PublishReportsCommandHandler.Handle [L45–L151]
      └─ maps_to PublishedReportBatchDto [L138]
      └─ uses_service IControlledRepository<PublishedReportBatch>
        └─ method ReadQuery [L84]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<ReportTemplate>
        └─ method ReadQuery [L90]
          └─ ... (no implementation details available)
      └─ uses_service ILogger<PublishReportsCommandHandler>
        └─ method LogInformation [L136]
          └─ ... (no implementation details available)
      └─ uses_service IMapper
        └─ method Map [L138]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L99]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)
      └─ uses_service IStorageService (InstancePerLifetimeScope)
        └─ method UploadFile [L126]
          └─ implementation IStorageService.UploadFile [L9-L9]
          └─ ... (no implementation details available)
      └─ uses_service IUserService (InstancePerLifetimeScope)
        └─ method GetUserId [L101]
          └─ implementation IUserService.GetUserId [L18-L18]
          └─ ... (no implementation details available)
      └─ uses_storage IStorageService.UploadFile [L126]
      └─ logs ILogger<PublishReportsCommandHandler> [Information] [L136]

[web] POST /api/accounting/reports/published/batch/{id:guid}/revert  (Cirrus.Api.Controllers.Accounting.Reports.PublishedReportsController.Revert)  [L103–L110] status=201 [auth=user]
  └─ calls PublishedReportBatchRepository.WriteQuery [L107]
  └─ write PublishedReportBatch [L107]
    └─ reads_from PublishedReportBatches
  └─ uses_service IControlledRepository<PublishedReportBatch>
    └─ method WriteQuery [L107]
      └─ ... (no implementation details available)
  └─ uses_service IRequestProcessor (InstancePerDependency)
    └─ method ProcessAsync [L108]
      └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
      └─ ... (no implementation details available)
  └─ sends_request CanIAccessFileQuery [L108]
    └─ handled_by Cirrus.ApplicationService.Firm.Queries.CanIAccessFileQueryHandler.Handle [L43–L101]
      └─ uses_service IRequestInfoService (AddScoped)
        └─ method IsValidServiceAccountRequest [L66]
          └─ implementation IRequestInfoService.IsValidServiceAccountRequest [L20-L20]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L90]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)
      └─ uses_service ITenantService (AddScoped)
        └─ method GetCurrentTenant [L68]
          └─ implementation ITenantService.GetCurrentTenant [L14-L14]
          └─ ... (no implementation details available)
      └─ uses_service IUserService (InstancePerLifetimeScope)
        └─ method GetUserId [L68]
          └─ implementation IUserService.GetUserId [L18-L18]
          └─ ... (no implementation details available)
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L79]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L71]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L68]

[web] POST /api/reportBatch/lodge  (Cirrus.Api.Controllers.Accounting.Reports.ReportBatchLodgmentController.Lodge)  [L32–L42] status=201
  └─ sends_request LodgeReportBatchCommand [L40]
    └─ handled_by Cirrus.ApplicationService.Accounting.Reports.Lodgement.LodgeReportBatchCommandHandler.Handle [L28–L83]
      └─ uses_service IControlledRepository<PublishedReportBatch>
        └─ method WriteQuery [L45]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L78]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)
    └─ handled_by Cirrus.Tests.Integration.Database.Accounting.Reports.TestLodgeReportBatchCommandHandler.Handle [L89–L108]
      └─ uses_service IControlledRepository<PublishedReportBatch>
        └─ method WriteQuery [L97]
          └─ ... (no implementation details available)

[web] POST /api/accounting/reports/masters/  (Cirrus.Api.Controllers.Accounting.Reports.ReportMastersController.Create)  [L135–L142] status=201 [auth=user,admin]
  └─ calls ReportMasterRepository.Add [L140]
  └─ insert ReportMaster [L140]
    └─ reads_from ReportMasters
  └─ uses_service IControlledRepository<ReportMaster>
    └─ method Add [L140]
      └─ ... (no implementation details available)

[web] POST /api/accounting/reports/masters/templates/{templateId}  (Cirrus.Api.Controllers.Accounting.Reports.ReportMastersController.CreateFromTemplate)  [L148–L152] status=201 [auth=user,admin]
  └─ sends_request CreateReportMasterFromTemplateCommand [L151]
    └─ handled_by Cirrus.ApplicationService.Accounting.Commands.Reports.ReportMasterTemplates.CreateReportMasterFromTemplateCommandHandler.Handle [L26–L156]
      └─ maps_to DisclosureTemplateLightDto [L63]
        └─ automapper.registration CirrusMappingProfile (DisclosureTemplate->DisclosureTemplateLightDto) [L829]
      └─ uses_service IControlledRepository<DisclosureTemplate>
        └─ method ReadQuery [L63]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<MasterAccount>
        └─ method ReadQuery [L59]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<ReportMaster>
        └─ method ReadQuery [L67]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<ReportPageLayout>
        └─ method ReadQuery [L129]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<ReportPageType>
        └─ method WriteQuery [L60]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<StandardChart>
        └─ method ReadQuery [L134]
          └─ ... (no implementation details available)
      └─ uses_service IMapper
        └─ method ConfigurationProvider [L64]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L72]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)

[web] DELETE /api/accounting/reports/masters/{id:int}  (Cirrus.Api.Controllers.Accounting.Reports.ReportMastersController.Delete)  [L169–L176] status=200 [auth=user,admin]
  └─ calls ReportMasterRepository.Remove [L173]
  └─ calls ReportMasterRepository.WriteQuery [L172]
  └─ delete ReportMaster [L173]
    └─ reads_from ReportMasters
  └─ write ReportMaster [L172]
    └─ reads_from ReportMasters
  └─ uses_service IControlledRepository<ReportMaster>
    └─ method WriteQuery [L172]
      └─ ... (no implementation details available)

[web] GET /api/accounting/reports/masters/{id}  (Cirrus.Api.Controllers.Accounting.Reports.ReportMastersController.Get)  [L62–L66] status=200 [auth=user,admin]
  └─ sends_request GetReportMasterQuery [L65]
    └─ handled_by Cirrus.ApplicationService.Accounting.Queries.Reports.GetReportMasterQueryHandler.Handle [L28–L73]
      └─ maps_to ReportMasterDto [L42]
        └─ automapper.registration CirrusMappingProfile (ReportMaster->ReportMasterDto) [L570]
      └─ maps_to ReportMasterDepreciationPageDetailDto [L54]
      └─ maps_to ReportMasterFinancialPageDetailDto [L46]
      └─ uses_service IControlledRepository<ReportMaster>
        └─ method ReadQuery [L42]
          └─ ... (no implementation details available)
      └─ uses_service IMapper
        └─ method ConfigurationProvider [L51]
          └─ ... (no implementation details available)

[web] GET /api/accounting/reports/masters/forfile/{fileId:Guid}  (Cirrus.Api.Controllers.Accounting.Reports.ReportMastersController.GetAll)  [L97–L119] status=200 [auth=user]
  └─ maps_to ReportMasterLightDto [L113]
    └─ automapper.registration CirrusMappingProfile (ReportMaster->ReportMasterLightDto) [L571]
  └─ calls FileRepository.ReadQuery [L100]
  └─ calls ReportMasterRepository.ReadQuery [L113]
  └─ calls EntityRepository.ReadQuery [L107]
  └─ query File [L100]
    └─ reads_from Files
  └─ query ReportMaster [L113]
    └─ reads_from ReportMasters
  └─ query Entity [L107]
  └─ uses_service IControlledRepository<Entity>
    └─ method ReadQuery [L107]
      └─ ... (no implementation details available)
  └─ uses_service IControlledRepository<File>
    └─ method ReadQuery [L100]
      └─ ... (no implementation details available)
  └─ uses_service IControlledRepository<ReportMaster>
    └─ method ReadQuery [L113]
      └─ ... (no implementation details available)

[web] GET /api/accounting/reports/masters/templates  (Cirrus.Api.Controllers.Accounting.Reports.ReportMastersController.GetAllMasterTemplates)  [L125–L129] status=200 [auth=user,admin]
  └─ sends_request GetReportMasterTemplates [L128]
    └─ handled_by Cirrus.ApplicationService.Accounting.Queries.Reports.ReportMasterTemplates.GetReportMasterTemplatesHandler.Handle [L23–L47]

[web] GET /api/accounting/reports/masters/package  (Cirrus.Api.Controllers.Accounting.Reports.ReportMastersController.GetPackage)  [L72–L76] status=200 [auth=user,admin]
  └─ sends_request ReportMasterPackageQuery [L75]
    └─ handled_by Cirrus.ApplicationService.Accounting.Queries.Reports.ReportMasterPackageQueryHandler.Handle [L37–L75]
      └─ maps_to FooterTemplateDto [L65]
        └─ automapper.registration CirrusMappingProfile (FooterTemplate->FooterTemplateDto) [L629]
        └─ converts_to FooterContentDto [L49]
      └─ maps_to HeaderTemplateLightDto [L62]
        └─ automapper.registration CirrusMappingProfile (HeaderTemplate->HeaderTemplateLightDto) [L627]
      └─ maps_to ReportPageLayoutLightDto [L68]
        └─ automapper.registration CirrusMappingProfile (ReportPageLayout->ReportPageLayoutLightDto) [L646]
      └─ uses_service IControlledRepository<FooterTemplate>
        └─ method ReadQuery [L65]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<HeaderTemplate>
        └─ method ReadQuery [L62]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<ReportPageLayout>
        └─ method ReadQuery [L68]
          └─ ... (no implementation details available)
      └─ uses_service IJurisdictionService (AddScoped)
        └─ method GetFirmJurisdictions [L58]
          └─ implementation IJurisdictionService.GetFirmJurisdictions [L17-L17]
          └─ ... (no implementation details available)
      └─ uses_service IMapper
        └─ method ConfigurationProvider [L63]
          └─ ... (no implementation details available)

[web] GET /api/accounting/reports/masters  (Cirrus.Api.Controllers.Accounting.Reports.ReportMastersController.GetReportMasterParameters)  [L178–L189] status=200 [auth=user]
  └─ calls ReportPageTypeRepository.WriteQuery [L185]
  └─ write ReportPageType [L185]
    └─ reads_from ReportPageTypes
  └─ uses_service IControlledRepository<ReportPageType>
    └─ method WriteQuery [L185]
      └─ ... (no implementation details available)

[web] PUT /api/accounting/reports/masters/{id:int}  (Cirrus.Api.Controllers.Accounting.Reports.ReportMastersController.Update)  [L157–L164] status=200 [auth=user,admin]
  └─ calls ReportMasterRepository.WriteQuery [L160]
  └─ write ReportMaster [L160]
    └─ reads_from ReportMasters
  └─ uses_service IControlledRepository<ReportMaster>
    └─ method WriteQuery [L160]
      └─ ... (no implementation details available)

[web] GET /api/accounting/reports/output/included-accounts  (Cirrus.Api.Controllers.Accounting.Reports.ReportOutputController.Get)  [L51–L128] status=200 [auth=user]
  └─ maps_to AccountUltraLightDto [L117]
    └─ automapper.registration CirrusMappingProfile (Account->AccountUltraLightDto) [L312]
  └─ maps_to AccountUltraLightDto [L102]
    └─ automapper.registration CirrusMappingProfile (Account->AccountUltraLightDto) [L312]
  └─ maps_to AccountUltraLightDto [L96]
  └─ maps_to AccountUltraLightDto [L66]
    └─ automapper.registration CirrusMappingProfile (Account->AccountUltraLightDto) [L312]
  └─ calls FileRepository.ReadQuery [L82]
  └─ calls AccountRepository.ReadQuery [L66]
  └─ query File [L82]
    └─ reads_from Files
  └─ query Account [L66]
  └─ uses_service IControlledRepository<Account>
    └─ method ReadQuery [L66]
      └─ ... (no implementation details available)
  └─ uses_service IControlledRepository<File>
    └─ method ReadQuery [L82]
      └─ ... (no implementation details available)
  └─ uses_service IMapper
    └─ method Map [L96]
      └─ ... (no implementation details available)

[web] POST /api/accounting/reports/pageTypes/  (Cirrus.Api.Controllers.Accounting.Reports.ReportPageTypesController.Create)  [L149–L168] status=201 [auth=user,admin]
  └─ calls ReportPageTypeRepository.Add [L165]
  └─ calls ReportPageTypeRepository.ReadQuery [L156]
  └─ calls ReportPageTypeRepository.WriteQuery [L152]
  └─ insert ReportPageType [L165]
    └─ reads_from ReportPageTypes
  └─ query ReportPageType [L156]
    └─ reads_from ReportPageTypes
  └─ write ReportPageType [L152]
    └─ reads_from ReportPageTypes
  └─ uses_service IControlledRepository<ReportPageType>
    └─ method WriteQuery [L152]
      └─ ... (no implementation details available)

[web] DELETE /api/accounting/reports/pageTypes/{id}  (Cirrus.Api.Controllers.Accounting.Reports.ReportPageTypesController.Delete)  [L203–L210] status=200 [auth=user,admin]
  └─ calls ReportContentRepository.LoadWriteProperties [L207]
  └─ calls ReportPageTypeRepository.Remove [L208]
  └─ calls ReportPageTypeRepository.WriteQuery [L206]
  └─ delete ReportPageType [L208]
    └─ reads_from ReportPageTypes
  └─ write ReportPageType [L206]
    └─ reads_from ReportPageTypes
  └─ uses_service IControlledRepository<ReportPageType>
    └─ method WriteQuery [L206]
      └─ ... (no implementation details available)
  └─ uses_service ReportContentRepository (InstancePerLifetimeScope)
    └─ method LoadWriteProperties [L207]
      └─ implementation Cirrus.Data.Repository.Accounting.Report.ReportContentRepository.LoadWriteProperties [L11-L65]

[web] GET /api/accounting/reports/pageTypes/{id}  (Cirrus.Api.Controllers.Accounting.Reports.ReportPageTypesController.Get)  [L53–L67] status=200 [auth=user]
  └─ maps_to ReportPageTypeDto (var dto) [L64]
  └─ calls ReportContentRepository.LoadReadProperties [L63]
  └─ calls ReportPageTypeRepository.ReadQuery [L56]
  └─ query ReportPageType [L56]
    └─ reads_from ReportPageTypes
  └─ uses_service IControlledRepository<ReportPageType>
    └─ method ReadQuery [L56]
      └─ ... (no implementation details available)
  └─ uses_service IMapper
    └─ method Map [L64]
      └─ ... (no implementation details available)
  └─ uses_service ReportContentRepository (InstancePerLifetimeScope)
    └─ method LoadReadProperties [L63]
      └─ implementation Cirrus.Data.Repository.Accounting.Report.ReportContentRepository.LoadReadProperties [L11-L65]
  └─ sends_request PrepareImagesContentCommand [L65]

[web] GET /api/accounting/reports/pageTypes/  (Cirrus.Api.Controllers.Accounting.Reports.ReportPageTypesController.GetAll)  [L83–L95] status=200 [auth=user]
  └─ maps_to ReportPageTypeLightWithContentFieldsDto [L90]
    └─ automapper.registration CirrusMappingProfile (ReportPageType->ReportPageTypeLightWithContentFieldsDto) [L635]
  └─ calls ReportPageTypeRepository.ReadQuery [L90]
  └─ query ReportPageType [L90]
    └─ reads_from ReportPageTypes
  └─ uses_service IControlledRepository<ReportPageType>
    └─ method ReadQuery [L90]
      └─ ... (no implementation details available)
  └─ uses_service IJurisdictionService (AddScoped)
    └─ method GetUserJurisdictions [L88]
      └─ implementation IJurisdictionService.GetUserJurisdictions [L17-L17]
      └─ ... (no implementation details available)

[web] GET /api/accounting/reports/pageTypes/admin  (Cirrus.Api.Controllers.Accounting.Reports.ReportPageTypesController.GetAllAdmin)  [L139–L147] status=200 [auth=user,admin]
  └─ maps_to ReportPageTypeLightAdminDto [L143]
    └─ automapper.registration CirrusMappingProfile (ReportPageType->ReportPageTypeLightAdminDto) [L637]
  └─ calls ReportPageTypeRepository.ReadQuery [L143]
  └─ query ReportPageType [L143]
    └─ reads_from ReportPageTypes
  └─ uses_service IControlledRepository<ReportPageType>
    └─ method ReadQuery [L143]
      └─ ... (no implementation details available)
  └─ uses_service IJurisdictionService (AddScoped)
    └─ method GetFirmJurisdictions [L142]
      └─ implementation IJurisdictionService.GetFirmJurisdictions [L17-L17]
      └─ ... (no implementation details available)

[web] GET /api/accounting/reports/pageTypes/{id}/light  (Cirrus.Api.Controllers.Accounting.Reports.ReportPageTypesController.GetLight)  [L72–L78] status=200 [auth=user]
  └─ maps_to ReportPageTypeLightWithContentFieldsDto [L75]
    └─ automapper.registration CirrusMappingProfile (ReportPageType->ReportPageTypeLightWithContentFieldsDto) [L635]
  └─ calls ReportPageTypeRepository.ReadQuery [L75]
  └─ query ReportPageType [L75]
    └─ reads_from ReportPageTypes
  └─ uses_service IControlledRepository<ReportPageType>
    └─ method ReadQuery [L75]
      └─ ... (no implementation details available)

[web] POST /api/accounting/reports/pageTypes/tables  (Cirrus.Api.Controllers.Accounting.Reports.ReportPageTypesController.GetTables)  [L97–L118] status=201 [auth=user]
  └─ calls ReportPageTypeRepository.ReadQuery [L100]
  └─ query ReportPageType [L100]
    └─ reads_from ReportPageTypes
  └─ uses_service IControlledRepository<ReportPageType>
    └─ method ReadQuery [L100]
      └─ ... (no implementation details available)

[web] GET /api/accounting/reports/pageTypes/package  (Cirrus.Api.Controllers.Accounting.Reports.ReportPageTypesController.GetUiPackage)  [L123–L134] status=200 [auth=user]
  └─ maps_to FooterTemplateLightDto [L129]
    └─ automapper.registration CirrusMappingProfile (FooterTemplate->FooterTemplateLightDto) [L628]
  └─ maps_to HeaderTemplateLightDto [L126]
    └─ automapper.registration CirrusMappingProfile (HeaderTemplate->HeaderTemplateLightDto) [L627]
  └─ calls FooterTemplateRepository.ReadQuery [L129]
  └─ calls HeaderTemplateRepository.ReadQuery [L126]
  └─ query FooterTemplate [L129]
    └─ reads_from ReportFooterTemplates
  └─ query HeaderTemplate [L126]
    └─ reads_from ReportHeaderTemplates
  └─ uses_service IControlledRepository<FooterTemplate>
    └─ method ReadQuery [L129]
      └─ ... (no implementation details available)
  └─ uses_service IControlledRepository<HeaderTemplate>
    └─ method ReadQuery [L126]
      └─ ... (no implementation details available)

[web] PUT /api/accounting/reports/pageTypes/{id}/reorder  (Cirrus.Api.Controllers.Accounting.Reports.ReportPageTypesController.Reorder)  [L186–L201] status=200 [auth=user,admin]
  └─ calls ReportPageTypeRepository.WriteQuery [L193]
  └─ calls ReportPageTypeRepository.ReadQuery [L189]
  └─ query ReportPageType [L189]
    └─ reads_from ReportPageTypes
  └─ write ReportPageType [L193]
    └─ reads_from ReportPageTypes
  └─ uses_service IControlledRepository<ReportPageType>
    └─ method ReadQuery [L189]
      └─ ... (no implementation details available)

[web] PUT /api/accounting/reports/pageTypes/{id}  (Cirrus.Api.Controllers.Accounting.Reports.ReportPageTypesController.Update)  [L170–L177] status=200 [auth=user,admin]
  └─ calls ReportContentRepository.LoadWriteProperties [L174]
  └─ calls ReportPageTypeRepository.WriteQuery [L173]
  └─ write ReportPageType [L173]
    └─ reads_from ReportPageTypes
  └─ uses_service IControlledRepository<ReportPageType>
    └─ method WriteQuery [L173]
      └─ ... (no implementation details available)
  └─ uses_service ReportContentRepository (InstancePerLifetimeScope)
    └─ method LoadWriteProperties [L174]
      └─ implementation Cirrus.Data.Repository.Accounting.Report.ReportContentRepository.LoadWriteProperties [L11-L65]

[web] DELETE /api/accounting/reports/settings/  (Cirrus.Api.Controllers.Accounting.Reports.ReportSettingsController.Delete)  [L62–L68] status=200 [auth=Authentication.AdminPolicy]
  └─ calls ReportSettingsRepository.Remove [L67]
  └─ calls ReportSettingsRepository.WriteQuery [L65]
  └─ delete ReportSettings [L67]
    └─ reads_from ReportSettings
  └─ write ReportSettings [L65]
    └─ reads_from ReportSettings
  └─ uses_service IControlledRepository<ReportSettings>
    └─ method WriteQuery [L65]
      └─ ... (no implementation details available)

[web] GET /api/accounting/reports/settings/  (Cirrus.Api.Controllers.Accounting.Reports.ReportSettingsController.Get)  [L31–L37] status=200 [auth=Authentication.AdminPolicy]
  └─ maps_to ReportSettingsDto [L34]
    └─ automapper.registration CirrusMappingProfile (ReportSettings->ReportSettingsDto) [L531]
  └─ calls ReportSettingsRepository.ReadQuery [L34]
  └─ query ReportSettings [L34]
    └─ reads_from ReportSettings
  └─ uses_service IControlledRepository<ReportSettings>
    └─ method ReadQuery [L34]
      └─ ... (no implementation details available)

[web] PUT /api/accounting/reports/settings/  (Cirrus.Api.Controllers.Accounting.Reports.ReportSettingsController.Save)  [L42–L57] status=200 [auth=Authentication.AdminPolicy]
  └─ calls ReportSettingsRepository.Add [L51]
  └─ calls ReportSettingsRepository.WriteQuery [L45]
  └─ insert ReportSettings [L51]
    └─ reads_from ReportSettings
  └─ write ReportSettings [L45]
    └─ reads_from ReportSettings
  └─ uses_service IControlledRepository<ReportSettings>
    └─ method WriteQuery [L45]
      └─ ... (no implementation details available)

[web] POST /api/accounting/reports/templates/  (Cirrus.Api.Controllers.Accounting.Reports.ReportTemplatesController.Create)  [L175–L192] status=201 [auth=user]
  └─ calls FileRepository.WriteQuery [L178]
  └─ calls ReportTemplateRepository.Add [L190]
  └─ calls ReportTemplateRepository.WriteQuery [L181]
  └─ write File [L178]
    └─ reads_from Files
  └─ insert ReportTemplate [L190]
  └─ write ReportTemplate [L181]
  └─ uses_service IControlledRepository<File>
    └─ method WriteQuery [L178]
      └─ ... (no implementation details available)
  └─ uses_service IControlledRepository<ReportTemplate>
    └─ method WriteQuery [L181]
      └─ ... (no implementation details available)
  └─ sends_request GetReportTemplateParametersQuery [L188]
    └─ handled_by Cirrus.ApplicationService.Accounting.Queries.Reports.GetReportTemplateParametersQueryHandler.Handle [L31–L86]
      └─ calls ReportContentRepository.LoadWriteProperties [L82]
      └─ uses_service IControlledRepository<Dataset>
        └─ method WriteQuery [L66]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<Entity>
        └─ method WriteQuery [L74]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<ReportPageType>
        └─ method WriteQuery [L71]
          └─ ... (no implementation details available)
  └─ sends_request CanIAccessFileQuery [L179]
    └─ handled_by Cirrus.ApplicationService.Firm.Queries.CanIAccessFileQueryHandler.Handle [L43–L101]
      └─ uses_service IRequestInfoService (AddScoped)
        └─ method IsValidServiceAccountRequest [L66]
          └─ implementation IRequestInfoService.IsValidServiceAccountRequest [L20-L20]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L90]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)
      └─ uses_service ITenantService (AddScoped)
        └─ method GetCurrentTenant [L68]
          └─ implementation ITenantService.GetCurrentTenant [L14-L14]
          └─ ... (no implementation details available)
      └─ uses_service IUserService (InstancePerLifetimeScope)
        └─ method GetUserId [L68]
          └─ implementation IUserService.GetUserId [L18-L18]
          └─ ... (no implementation details available)
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L79]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L71]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L68]

[web] DELETE /api/accounting/reports/templates/{id:Guid}  (Cirrus.Api.Controllers.Accounting.Reports.ReportTemplatesController.Delete)  [L335–L345] status=200 [auth=user]
  └─ calls ReportTemplateRepository.Remove [L342]
  └─ delete ReportTemplate [L342]
  └─ uses_service IControlledRepository<ReportTemplate>
    └─ method Remove [L342]
      └─ ... (no implementation details available)
  └─ sends_request CanIAccessFileQuery [L340]
    └─ handled_by Cirrus.ApplicationService.Firm.Queries.CanIAccessFileQueryHandler.Handle [L43–L101]
      └─ uses_service IRequestInfoService (AddScoped)
        └─ method IsValidServiceAccountRequest [L66]
          └─ implementation IRequestInfoService.IsValidServiceAccountRequest [L20-L20]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L90]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)
      └─ uses_service ITenantService (AddScoped)
        └─ method GetCurrentTenant [L68]
          └─ implementation ITenantService.GetCurrentTenant [L14-L14]
          └─ ... (no implementation details available)
      └─ uses_service IUserService (InstancePerLifetimeScope)
        └─ method GetUserId [L68]
          └─ implementation IUserService.GetUserId [L18-L18]
          └─ ... (no implementation details available)
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L79]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L71]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L68]

[web] GET /api/accounting/reports/templates/{templateId:guid}/download-data  (Cirrus.Api.Controllers.Accounting.Reports.ReportTemplatesController.DownloadData)  [L241–L260] status=200 [auth=user]
  └─ sends_request ExportReportAsStreamCommand [L250]
    └─ handled_by Cirrus.ApplicationService.Accounting.Commands.Reports.ReportTemplates.ExportReportAsStreamCommandHandler.Handle [L48–L147]
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L66]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)
  └─ sends_request CanIAccessFileQuery [L246]
    └─ handled_by Cirrus.ApplicationService.Firm.Queries.CanIAccessFileQueryHandler.Handle [L43–L101]
      └─ uses_service IRequestInfoService (AddScoped)
        └─ method IsValidServiceAccountRequest [L66]
          └─ implementation IRequestInfoService.IsValidServiceAccountRequest [L20-L20]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L90]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)
      └─ uses_service ITenantService (AddScoped)
        └─ method GetCurrentTenant [L68]
          └─ implementation ITenantService.GetCurrentTenant [L14-L14]
          └─ ... (no implementation details available)
      └─ uses_service IUserService (InstancePerLifetimeScope)
        └─ method GetUserId [L68]
          └─ implementation IUserService.GetUserId [L18-L18]
          └─ ... (no implementation details available)
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L79]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L71]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L68]

[web] POST /api/accounting/reports/templates/export/download  (Cirrus.Api.Controllers.Accounting.Reports.ReportTemplatesController.ExportAs)  [L232–L239] status=201 [auth=user]
  └─ sends_request ExportReportAsStreamCommand [L236]
    └─ handled_by Cirrus.ApplicationService.Accounting.Commands.Reports.ReportTemplates.ExportReportAsStreamCommandHandler.Handle [L48–L147]
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L66]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)
  └─ sends_request CanIAccessFileQuery [L235]
    └─ handled_by Cirrus.ApplicationService.Firm.Queries.CanIAccessFileQueryHandler.Handle [L43–L101]
      └─ uses_service IRequestInfoService (AddScoped)
        └─ method IsValidServiceAccountRequest [L66]
          └─ implementation IRequestInfoService.IsValidServiceAccountRequest [L20-L20]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L90]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)
      └─ uses_service ITenantService (AddScoped)
        └─ method GetCurrentTenant [L68]
          └─ implementation ITenantService.GetCurrentTenant [L14-L14]
          └─ ... (no implementation details available)
      └─ uses_service IUserService (InstancePerLifetimeScope)
        └─ method GetUserId [L68]
          └─ implementation IUserService.GetUserId [L18-L18]
          └─ ... (no implementation details available)
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L79]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L71]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L68]

[web] POST /api/accounting/reports/templates/{templateId}/generate  (Cirrus.Api.Controllers.Accounting.Reports.ReportTemplatesController.Generate)  [L209–L214] status=201 [auth=user]
  └─ sends_request BuildReportCommand [L212]
    └─ handled_by Cirrus.ApplicationService.Accounting.Commands.BuildReportHandler.Handle [L49–L105]
      └─ maps_to ReportTemplateCreateModel [L101]
      └─ uses_service IControlledRepository<File>
        └─ method WriteQuery [L66]
          └─ ... (no implementation details available)
      └─ uses_service IMapper
        └─ method Map [L101]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L75]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)

[web] POST /api/accounting/reports/templates/generate/download  (Cirrus.Api.Controllers.Accounting.Reports.ReportTemplatesController.GenerateAs)  [L220–L225] status=201 [auth=user]
  └─ sends_request BuildReportCommand [L223]
    └─ handled_by Cirrus.ApplicationService.Accounting.Commands.BuildReportHandler.Handle [L49–L105]
      └─ maps_to ReportTemplateCreateModel [L101]
      └─ uses_service IControlledRepository<File>
        └─ method WriteQuery [L66]
          └─ ... (no implementation details available)
      └─ uses_service IMapper
        └─ method Map [L101]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L75]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)

[web] GET /api/accounting/reports/templates/{id}  (Cirrus.Api.Controllers.Accounting.Reports.ReportTemplatesController.Get)  [L70–L74] status=200 [auth=user]
  └─ sends_request GetReportTemplateQuery [L73]
    └─ handled_by Cirrus.ApplicationService.Accounting.Queries.Reports.GetReportTemplateQueryHandler.Handle [L39–L150]
      └─ calls ReportContentRepository.LoadReadProperties [L126]
      └─ maps_to ReportElementDto [L135]
      └─ maps_to ReportTemplateDto [L60]
        └─ automapper.registration CirrusMappingProfile (ReportTemplate->ReportTemplateDto) [L534]
        └─ converts_to ReportTemplateCreateModel [L552]
      └─ maps_to ReportTemplateColumnDto [L89]
        └─ converts_to ReportTemplateColumnCreateModel [L555]
      └─ maps_to ReportTemplateFinancialPageDetailDto [L84]
        └─ converts_to ReportTemplateFinancialPageModel [L559]
      └─ maps_to ReportTemplateNotePageDetailDto [L128]
        └─ converts_to ReportTemplateNotePageModel [L558]
      └─ maps_to ReportTemplatePageDto [L67]
        └─ converts_to ReportTemplatePageCreateModel [L556]
        └─ converts_to ReportTemplatePageCreateUpdateModel [L557]
      └─ uses_service IControlledRepository<ReportTemplate>
        └─ method ReadQuery [L60]
          └─ ... (no implementation details available)
      └─ uses_service IMapper
        └─ method ConfigurationProvider [L70]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L64]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)

[web] GET /api/accounting/reports/templates/forfile/{fileId}  (Cirrus.Api.Controllers.Accounting.Reports.ReportTemplatesController.GetAll)  [L160–L169] status=200 [auth=user]
  └─ maps_to ReportTemplateLightDto [L164]
    └─ automapper.registration CirrusMappingProfile (ReportTemplate->ReportTemplateLightDto) [L546]
  └─ calls ReportTemplateRepository.ReadQuery [L164]
  └─ query ReportTemplate [L164]
  └─ uses_service IControlledRepository<ReportTemplate>
    └─ method ReadQuery [L164]
      └─ ... (no implementation details available)
  └─ sends_request CanIAccessFileQuery [L163]
    └─ handled_by Cirrus.ApplicationService.Firm.Queries.CanIAccessFileQueryHandler.Handle [L43–L101]
      └─ uses_service IRequestInfoService (AddScoped)
        └─ method IsValidServiceAccountRequest [L66]
          └─ implementation IRequestInfoService.IsValidServiceAccountRequest [L20-L20]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L90]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)
      └─ uses_service ITenantService (AddScoped)
        └─ method GetCurrentTenant [L68]
          └─ implementation ITenantService.GetCurrentTenant [L14-L14]
          └─ ... (no implementation details available)
      └─ uses_service IUserService (InstancePerLifetimeScope)
        └─ method GetUserId [L68]
          └─ implementation IUserService.GetUserId [L18-L18]
          └─ ... (no implementation details available)
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L79]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L71]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L68]

[web] GET /api/accounting/reports/templates/{fileId:Guid}/default/{masterId:int}  (Cirrus.Api.Controllers.Accounting.Reports.ReportTemplatesController.GetDefaultFromMaster)  [L134–L138] status=200 [auth=user]
  └─ sends_request ReportTemplateFromMasterQuery [L137]
    └─ handled_by Cirrus.ApplicationService.Accounting.Queries.Reports.ReportTemplateFromMasterQueryHandler.Handle [L45–L267]
      └─ maps_to HeaderAccountMatchDto [L67]
      └─ uses_service IControlledRepository<Account>
        └─ method ReadQuery [L67]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<File>
        └─ method ReadQuery [L77]
          └─ ... (no implementation details available)
      └─ uses_service IMapper
        └─ method ConfigurationProvider [L71]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L65]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)

[web] GET /api/accounting/reports/templates/{id}/disclosures  (Cirrus.Api.Controllers.Accounting.Reports.ReportTemplatesController.GetDisclosures)  [L124–L128] status=200 [auth=user]
  └─ sends_request GetDefaultDisclosuresForExistingReportQuery [L127]
    └─ handled_by Cirrus.ApplicationService.Accounting.Queries.Reports.Notes.GetDefaultDisclosuresForExistingReportQueryHandler.Handle [L42–L104]
      └─ calls ReportContentRepository.LoadReadProperties [L70]
      └─ maps_to DisclosureModel [L72]
      └─ uses_service IControlledRepository<ReportTemplate>
        └─ method ReadQuery [L62]
          └─ ... (no implementation details available)
      └─ uses_service IMapper
        └─ method Map [L72]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L85]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)

[web] GET /api/accounting/reports/templates/{id}/modified-info  (Cirrus.Api.Controllers.Accounting.Reports.ReportTemplatesController.GetModifiedInfo)  [L80–L88] status=200 [auth=user]
  └─ maps_to ReportTemplateModifiedInfoDto [L83]
    └─ automapper.registration CirrusMappingProfile (ReportTemplate->ReportTemplateModifiedInfoDto) [L542]
  └─ maps_to UserUltraLightDto [L85]
    └─ automapper.registration DataverseMappingProfile (User->UserUltraLightDto) [L86]
    └─ automapper.registration WorkpapersMappingProfile (User->UserUltraLightDto) [L96]
    └─ automapper.registration CirrusMappingProfile (User->UserUltraLightDto) [L103]
  └─ calls ReportTemplateRepository.ReadQuery [L83]
  └─ calls UserRepository.ReadQuery [L85]
  └─ query User [L85]
  └─ query ReportTemplate [L83]
  └─ uses_service IControlledRepository<ReportTemplate>
    └─ method ReadQuery [L83]
      └─ ... (no implementation details available)
  └─ uses_service IControlledRepository<User>
    └─ method ReadQuery [L85]
      └─ ... (no implementation details available)

[web] GET /api/accounting/reports/templates/package  (Cirrus.Api.Controllers.Accounting.Reports.ReportTemplatesController.GetPackage)  [L144–L148] status=200 [auth=user]
  └─ sends_request ReportTemplatePackageQuery [L147]
    └─ handled_by Cirrus.ApplicationService.Accounting.Queries.Reports.ReportTemplatePackageQueryHandler.Handle [L50–L129]
      └─ maps_to DatasetLightDto [L101]
        └─ automapper.registration CirrusMappingProfile (Dataset->DatasetLightDto) [L204]
      └─ maps_to FooterTemplateDto [L116]
        └─ automapper.registration CirrusMappingProfile (FooterTemplate->FooterTemplateDto) [L629]
        └─ converts_to FooterContentDto [L49]
      └─ maps_to HeaderTemplateLightDto [L113]
        └─ automapper.registration CirrusMappingProfile (HeaderTemplate->HeaderTemplateLightDto) [L627]
      └─ maps_to ReportPageLayoutLightDto [L119]
        └─ automapper.registration CirrusMappingProfile (ReportPageLayout->ReportPageLayoutLightDto) [L646]
      └─ maps_to ReportingSuiteUltraLightDto [L123]
        └─ automapper.registration CirrusMappingProfile (ReportingSuite->ReportingSuiteUltraLightDto) [L766]
      └─ maps_to ReportSettingsLightDto [L83]
        └─ automapper.registration CirrusMappingProfile (ReportSettings->ReportSettingsLightDto) [L532]
      └─ maps_to ReportWatermarkDto [L87]
        └─ automapper.registration CirrusMappingProfile (ReportWatermark->ReportWatermarkDto) [L605]
      └─ maps_to DivisionLightDto [L105]
        └─ automapper.registration CirrusMappingProfile (Division->DivisionLightDto) [L226]
      └─ maps_to TradingAccountLightDto [L109]
        └─ automapper.registration CirrusMappingProfile (TradingAccount->TradingAccountLightDto) [L228]
      └─ uses_service IControlledRepository<Dataset>
        └─ method ReadQuery [L101]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<Division>
        └─ method ReadQuery [L105]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<FooterTemplate>
        └─ method ReadQuery [L116]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<HeaderTemplate>
        └─ method ReadQuery [L113]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<ReportingSuite>
        └─ method ReadQuery [L123]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<ReportPageLayout>
        └─ method ReadQuery [L119]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<ReportSettings>
        └─ method ReadQuery [L83]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<ReportWatermark>
        └─ method ReadQuery [L87]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<TradingAccount>
        └─ method ReadQuery [L109]
          └─ ... (no implementation details available)
      └─ uses_service IJurisdictionService (AddScoped)
        └─ method GetUserJurisdictions [L97]
          └─ implementation IJurisdictionService.GetUserJurisdictions [L17-L17]
          └─ ... (no implementation details available)
      └─ uses_service IMapper
        └─ method ConfigurationProvider [L84]
          └─ ... (no implementation details available)

[web] GET /api/accounting/reports/templates/{id}/policies  (Cirrus.Api.Controllers.Accounting.Reports.ReportTemplatesController.GetPolicies)  [L104–L108] status=200 [auth=user]
  └─ sends_request GetDefaultPoliciesForExistingReportQuery [L107]
    └─ handled_by Cirrus.ApplicationService.Accounting.Queries.Reports.Notes.GetDefaultPoliciesForExistingReportQueryHandler.Handle [L44–L105]
      └─ calls ReportContentRepository.LoadReadProperties [L72]
      └─ maps_to PolicySelectorModel [L74]
      └─ uses_service IControlledRepository<ReportTemplate>
        └─ method ReadQuery [L64]
          └─ ... (no implementation details available)
      └─ uses_service IMapper
        └─ method Map [L74]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L87]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)

[web] GET /api/accounting/reports/templates/test  (Cirrus.Api.Controllers.Accounting.Reports.ReportTemplatesController.GetTestReport)  [L150–L154] status=200 [auth=user]
  └─ sends_request GetTestReportQuery [L153]
    └─ handled_by Cirrus.ApplicationService.Accounting.Queries.Reports.GetTestReportQueryHandler.Handle [L28–L64]
      └─ maps_to ReportSettingsDto [L58]
        └─ automapper.registration CirrusMappingProfile (ReportSettings->ReportSettingsDto) [L531]
      └─ uses_service FileManagerService
        └─ method GetCurrentFolder [L45]
          └─ implementation Cirrus.ApplicationService.Services.FileManager.FileManagerService.GetCurrentFolder [L8-L34]
      └─ uses_service IControlledRepository<Office>
        └─ method ReadQuery [L55]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<ReportSettings>
        └─ method ReadQuery [L58]
          └─ ... (no implementation details available)
      └─ uses_service IMapper
        └─ method ConfigurationProvider [L58]
          └─ ... (no implementation details available)

[web] GET /api/accounting/reports/templates  (Cirrus.Api.Controllers.Accounting.Reports.ReportTemplatesController.LoadReportContent)  [L347–L356] status=200 [auth=user]
  └─ calls ReportContentRepository.LoadWriteProperties [L349]
  └─ uses_service ReportContentRepository (InstancePerLifetimeScope)
    └─ method LoadWriteProperties [L349]
      └─ implementation Cirrus.Data.Repository.Accounting.Report.ReportContentRepository.LoadWriteProperties [L11-L65]

[web] PUT /api/accounting/reports/templates/{id}/update-lock  (Cirrus.Api.Controllers.Accounting.Reports.ReportTemplatesController.Lock)  [L297–L303] status=200 [auth=user]
  └─ calls ReportTemplateRepository.WriteQuery [L300]
  └─ write ReportTemplate [L300]
  └─ uses_service IControlledRepository<ReportTemplate>
    └─ method WriteQuery [L300]
      └─ ... (no implementation details available)
  └─ sends_request CanIAccessFileQuery [L301]
    └─ handled_by Cirrus.ApplicationService.Firm.Queries.CanIAccessFileQueryHandler.Handle [L43–L101]
      └─ uses_service IRequestInfoService (AddScoped)
        └─ method IsValidServiceAccountRequest [L66]
          └─ implementation IRequestInfoService.IsValidServiceAccountRequest [L20-L20]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L90]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)
      └─ uses_service ITenantService (AddScoped)
        └─ method GetCurrentTenant [L68]
          └─ implementation ITenantService.GetCurrentTenant [L14-L14]
          └─ ... (no implementation details available)
      └─ uses_service IUserService (InstancePerLifetimeScope)
        └─ method GetUserId [L68]
          └─ implementation IUserService.GetUserId [L18-L18]
          └─ ... (no implementation details available)
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L79]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L71]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L68]

[web] PUT /api/accounting/reports/templates/{id}/reorder  (Cirrus.Api.Controllers.Accounting.Reports.ReportTemplatesController.Reorder)  [L312–L330] status=200 [auth=user]
  └─ calls ReportTemplateRepository.WriteQuery [L321]
  └─ calls ReportTemplateRepository.ReadQuery [L315]
  └─ query ReportTemplate [L315]
  └─ write ReportTemplate [L321]
  └─ uses_service IControlledRepository<ReportTemplate>
    └─ method ReadQuery [L315]
      └─ ... (no implementation details available)
  └─ sends_request CanIAccessFileQuery [L319]
    └─ handled_by Cirrus.ApplicationService.Firm.Queries.CanIAccessFileQueryHandler.Handle [L43–L101]
      └─ uses_service IRequestInfoService (AddScoped)
        └─ method IsValidServiceAccountRequest [L66]
          └─ implementation IRequestInfoService.IsValidServiceAccountRequest [L20-L20]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L90]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)
      └─ uses_service ITenantService (AddScoped)
        └─ method GetCurrentTenant [L68]
          └─ implementation ITenantService.GetCurrentTenant [L14-L14]
          └─ ... (no implementation details available)
      └─ uses_service IUserService (InstancePerLifetimeScope)
        └─ method GetUserId [L68]
          └─ implementation IUserService.GetUserId [L18-L18]
          └─ ... (no implementation details available)
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L79]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L71]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L68]

[web] POST /api/accounting/reports/templates/save  (Cirrus.Api.Controllers.Accounting.Reports.ReportTemplatesController.SaveAs)  [L269–L274] status=201 [auth=user]

[web] PUT /api/accounting/reports/templates/{id:Guid}  (Cirrus.Api.Controllers.Accounting.Reports.ReportTemplatesController.Update)  [L279–L295] status=200 [auth=user]
  └─ maps_to ReportTemplateModifiedInfoDto [L294]
  └─ calls PublishedReportBatchRepository.ReadQuery [L289]
  └─ query PublishedReportBatch [L289]
    └─ reads_from PublishedReportBatches
  └─ uses_service IControlledRepository<PublishedReportBatch>
    └─ method ReadQuery [L289]
      └─ ... (no implementation details available)
  └─ uses_service IMapper
    └─ method Map [L294]
      └─ ... (no implementation details available)
  └─ sends_request GetReportTemplateParametersQuery [L292]
    └─ handled_by Cirrus.ApplicationService.Accounting.Queries.Reports.GetReportTemplateParametersQueryHandler.Handle [L31–L86]
      └─ calls ReportContentRepository.LoadWriteProperties [L82]
      └─ uses_service IControlledRepository<Dataset>
        └─ method WriteQuery [L66]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<Entity>
        └─ method WriteQuery [L74]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<ReportPageType>
        └─ method WriteQuery [L71]
          └─ ... (no implementation details available)
  └─ sends_request CanIAccessFileQuery [L285]
    └─ handled_by Cirrus.ApplicationService.Firm.Queries.CanIAccessFileQueryHandler.Handle [L43–L101]
      └─ uses_service IRequestInfoService (AddScoped)
        └─ method IsValidServiceAccountRequest [L66]
          └─ implementation IRequestInfoService.IsValidServiceAccountRequest [L20-L20]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L90]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)
      └─ uses_service ITenantService (AddScoped)
        └─ method GetCurrentTenant [L68]
          └─ implementation ITenantService.GetCurrentTenant [L14-L14]
          └─ ... (no implementation details available)
      └─ uses_service IUserService (InstancePerLifetimeScope)
        └─ method GetUserId [L68]
          └─ implementation IUserService.GetUserId [L18-L18]
          └─ ... (no implementation details available)
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L79]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L71]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L68]

[web] DELETE /api/accounting/reports/saved-reports/{id}  (Cirrus.Api.Controllers.Accounting.Reports.SavedReportFilesController.Delete)  [L94–L104] status=200 [auth=user]
  └─ calls PublishedReportFileRepository.WriteQuery [L97]
  └─ write PublishedReportFile [L97]
    └─ reads_from PublishedReportFiles
  └─ uses_service IControlledRepository<PublishedReportFile>
    └─ method WriteQuery [L97]
      └─ ... (no implementation details available)
  └─ sends_request CanIAccessFileQuery [L101]
    └─ handled_by Cirrus.ApplicationService.Firm.Queries.CanIAccessFileQueryHandler.Handle [L43–L101]
      └─ uses_service IRequestInfoService (AddScoped)
        └─ method IsValidServiceAccountRequest [L66]
          └─ implementation IRequestInfoService.IsValidServiceAccountRequest [L20-L20]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L90]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)
      └─ uses_service ITenantService (AddScoped)
        └─ method GetCurrentTenant [L68]
          └─ implementation ITenantService.GetCurrentTenant [L14-L14]
          └─ ... (no implementation details available)
      └─ uses_service IUserService (InstancePerLifetimeScope)
        └─ method GetUserId [L68]
          └─ implementation IUserService.GetUserId [L18-L18]
          └─ ... (no implementation details available)
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L79]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L71]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L68]

[web] GET /api/accounting/reports/saved-reports/download/{id}  (Cirrus.Api.Controllers.Accounting.Reports.SavedReportFilesController.Export)  [L66–L80] status=200 [auth=user]
  └─ calls PublishedReportFileRepository.ReadQuery [L69]
  └─ query PublishedReportFile [L69]
    └─ reads_from PublishedReportFiles
  └─ uses_service IControlledRepository<PublishedReportFile>
    └─ method ReadQuery [L69]
      └─ ... (no implementation details available)
  └─ sends_request CanIAccessFileQuery [L73]
    └─ handled_by Cirrus.ApplicationService.Firm.Queries.CanIAccessFileQueryHandler.Handle [L43–L101]
      └─ uses_service IRequestInfoService (AddScoped)
        └─ method IsValidServiceAccountRequest [L66]
          └─ implementation IRequestInfoService.IsValidServiceAccountRequest [L20-L20]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L90]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)
      └─ uses_service ITenantService (AddScoped)
        └─ method GetCurrentTenant [L68]
          └─ implementation ITenantService.GetCurrentTenant [L14-L14]
          └─ ... (no implementation details available)
      └─ uses_service IUserService (InstancePerLifetimeScope)
        └─ method GetUserId [L68]
          └─ implementation IUserService.GetUserId [L18-L18]
          └─ ... (no implementation details available)
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L79]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L71]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L68]

[web] GET /api/accounting/reports/saved-reports/{id}  (Cirrus.Api.Controllers.Accounting.Reports.SavedReportFilesController.Get)  [L53–L64] status=200 [auth=user]
  └─ maps_to SavedReportFileDto [L63]
  └─ calls PublishedReportFileRepository.ReadQuery [L57]
  └─ query PublishedReportFile [L57]
    └─ reads_from PublishedReportFiles
  └─ uses_service IControlledRepository<PublishedReportFile>
    └─ method ReadQuery [L57]
      └─ ... (no implementation details available)
  └─ uses_service IMapper
    └─ method Map [L63]
      └─ ... (no implementation details available)
  └─ sends_request CanIAccessFileQuery [L61]
    └─ handled_by Cirrus.ApplicationService.Firm.Queries.CanIAccessFileQueryHandler.Handle [L43–L101]
      └─ uses_service IRequestInfoService (AddScoped)
        └─ method IsValidServiceAccountRequest [L66]
          └─ implementation IRequestInfoService.IsValidServiceAccountRequest [L20-L20]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L90]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)
      └─ uses_service ITenantService (AddScoped)
        └─ method GetCurrentTenant [L68]
          └─ implementation ITenantService.GetCurrentTenant [L14-L14]
          └─ ... (no implementation details available)
      └─ uses_service IUserService (InstancePerLifetimeScope)
        └─ method GetUserId [L68]
          └─ implementation IUserService.GetUserId [L18-L18]
          └─ ... (no implementation details available)
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L79]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L71]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L68]

[web] GET /api/accounting/reports/saved-reports/forfile/{fileId}  (Cirrus.Api.Controllers.Accounting.Reports.SavedReportFilesController.GetAll)  [L82–L92] status=200 [auth=user]
  └─ maps_to SavedReportFileDto [L86]
    └─ automapper.registration CirrusMappingProfile (PublishedReportFile->SavedReportFileDto) [L594]
  └─ calls PublishedReportFileRepository.ReadQuery [L86]
  └─ query PublishedReportFile [L86]
    └─ reads_from PublishedReportFiles
  └─ uses_service IControlledRepository<PublishedReportFile>
    └─ method ReadQuery [L86]
      └─ ... (no implementation details available)
  └─ sends_request CanIAccessFileQuery [L85]
    └─ handled_by Cirrus.ApplicationService.Firm.Queries.CanIAccessFileQueryHandler.Handle [L43–L101]
      └─ uses_service IRequestInfoService (AddScoped)
        └─ method IsValidServiceAccountRequest [L66]
          └─ implementation IRequestInfoService.IsValidServiceAccountRequest [L20-L20]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L90]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)
      └─ uses_service ITenantService (AddScoped)
        └─ method GetCurrentTenant [L68]
          └─ implementation ITenantService.GetCurrentTenant [L14-L14]
          └─ ... (no implementation details available)
      └─ uses_service IUserService (InstancePerLifetimeScope)
        └─ method GetUserId [L68]
          └─ implementation IUserService.GetUserId [L18-L18]
          └─ ... (no implementation details available)
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L79]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L71]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L68]

[web] GET /api/accounting/reports/styles/fonts/{fontName}/url  (Cirrus.Api.Controllers.Accounting.Reports.Styles.FontsController.GetUploadedFontUrl)  [L24–L30] status=200
  └─ sends_request GetUploadedFontUrlQuery [L28]
    └─ handled_by Cirrus.ApplicationService.Accounting.Queries.Reports.ReportStyles.GetUploadedFontUrlQueryHandler.Handle [L23–L41]
      └─ uses_service IStorageService (InstancePerLifetimeScope)
        └─ method CreateDownloadUrl [L37]
          └─ implementation IStorageService.CreateDownloadUrl [L9-L9]
          └─ ... (no implementation details available)
      └─ uses_service UploadedFontsConfiguration
        └─ method UrlExpiryMin [L37]
          └─ ... (no implementation details available)
      └─ uses_storage IStorageService.CreateDownloadUrl [L37]

[web] GET /api/accounting/reports/styles/css/branding-css  (Cirrus.Api.Controllers.Accounting.Reports.Styles.ReportCssController.GetBrandingCss)  [L46–L56] status=200 [auth=Authentication.AdminPolicy]
  └─ maps_to ReportSettingsDto [L53]
    └─ automapper.registration CirrusMappingProfile (ReportSettings->ReportSettingsDto) [L531]
  └─ calls ReportSettingsRepository.ReadQuery [L53]
  └─ calls OfficeRepository.ReadQuery [L51]
  └─ query ReportSettings [L53]
    └─ reads_from ReportSettings
  └─ query Office [L51]
    └─ reads_from Offices
  └─ uses_service IControlledRepository<Office>
    └─ method ReadQuery [L51]
      └─ ... (no implementation details available)
  └─ uses_service IControlledRepository<ReportSettings>
    └─ method ReadQuery [L53]
      └─ ... (no implementation details available)
  └─ sends_request GetPdfBrandingCssQuery [L54]
    └─ handled_by Cirrus.ApplicationService.Accounting.Queries.Reports.ReportStyles.GetPdfBrandingCssQueryHandler.Handle [L20–L41]
      └─ uses_service FileManagerService
        └─ method GetCurrentFolder [L31]
          └─ implementation Cirrus.ApplicationService.Services.FileManager.FileManagerService.GetCurrentFolder [L8-L34]

[web] GET /api/accounting/reports/styles/css/editable-defaults  (Cirrus.Api.Controllers.Accounting.Reports.Styles.ReportCssController.GetEditableStyleDefaultsCss)  [L61–L71] status=200 [auth=Authentication.AdminPolicy]
  └─ sends_request GetDefaultPdfCssQuery [L65]
    └─ handled_by Cirrus.ApplicationService.Accounting.Queries.Reports.ReportStyles.GetPdfCssQueryHandler.Handle [L13–L38]
      └─ uses_service FileManagerService
        └─ method GetCurrentFolder [L23]
          └─ implementation Cirrus.ApplicationService.Services.FileManager.FileManagerService.GetCurrentFolder [L8-L34]

[web] GET /api/accounting/reports/styles/css/whitelist  (Cirrus.Api.Controllers.Accounting.Reports.Styles.ReportCssController.GetWhiteListCssProperties)  [L73–L79] status=200 [auth=Authentication.AdminPolicy]
  └─ sends_request GetWhiteListCssPropertiesQuery [L77]
    └─ handled_by Cirrus.ApplicationService.Accounting.Queries.Reports.ReportStyles.GetWhiteListCssPropertiesQueryHandler.Handle [L12–L19]

[web] GET /api/accounting/reports/styles/excel/download/master  (Cirrus.Api.Controllers.Accounting.Reports.Styles.ReportExcelController.DownloadMaster)  [L41–L49] status=200 [auth=Authentication.AdminPolicy]

[web] GET /api/accounting/reports/styles/excel/download/{reportStyleId:Guid}  (Cirrus.Api.Controllers.Accounting.Reports.Styles.ReportExcelController.DownloadTemplate)  [L55–L79] status=200 [auth=Authentication.AdminPolicy]
  └─ calls ReportStyleRepository.ReadQuery [L59]
  └─ query ReportStyle [L59]
    └─ reads_from ReportStyles
  └─ uses_service IControlledRepository<ReportStyle>
    └─ method ReadQuery [L59]
      └─ ... (no implementation details available)

[web] POST /api/accounting/reports/styles/  (Cirrus.Api.Controllers.Accounting.Reports.Styles.ReportStylesController.Create)  [L72–L79] status=201 [auth=Authentication.UserPolicy,Authentication.AdminPolicy]
  └─ calls ReportStyleRepository.Add [L76]
  └─ insert ReportStyle [L76]
    └─ reads_from ReportStyles
  └─ uses_service IControlledRepository<ReportStyle>
    └─ method Add [L76]
      └─ ... (no implementation details available)

[web] DELETE /api/accounting/reports/styles/{id:Guid}  (Cirrus.Api.Controllers.Accounting.Reports.Styles.ReportStylesController.Delete)  [L100–L105] status=200 [auth=Authentication.UserPolicy,Authentication.AdminPolicy]
  └─ calls ReportStyleRepository.Remove [L104]
  └─ calls ReportStyleRepository.WriteQuery [L103]
  └─ delete ReportStyle [L104]
    └─ reads_from ReportStyles
  └─ write ReportStyle [L103]
    └─ reads_from ReportStyles
  └─ uses_service IControlledRepository<ReportStyle>
    └─ method WriteQuery [L103]
      └─ ... (no implementation details available)

[web] GET /api/accounting/reports/styles/{id}  (Cirrus.Api.Controllers.Accounting.Reports.Styles.ReportStylesController.Get)  [L41–L53] status=200 [auth=Authentication.UserPolicy,Authentication.AdminPolicy]
  └─ maps_to ReportStyleDto [L44]
    └─ automapper.registration CirrusMappingProfile (ReportStyle->ReportStyleDto) [L580]
  └─ calls ReportStyleRepository.ReadQuery [L44]
  └─ query ReportStyle [L44]
    └─ reads_from ReportStyles
  └─ uses_service IControlledRepository<ReportStyle>
    └─ method ReadQuery [L44]
      └─ ... (no implementation details available)
  └─ sends_request GetCustomCssQuery [L49]
    └─ handled_by Cirrus.ApplicationService.Accounting.Queries.Reports.ReportStyles.GetCustomCssQueryHandler.Handle [L30–L86]
      └─ uses_service IControlledRepository<ReportStyle>
        └─ method ReadQuery [L43]
          └─ ... (no implementation details available)
      └─ uses_service IStorageService (InstancePerLifetimeScope)
        └─ method GetFileBytes [L53]
          └─ implementation IStorageService.GetFileBytes [L9-L9]
          └─ ... (no implementation details available)
      └─ uses_storage IStorageService.GetFileBytes [L53]

[web] GET /api/accounting/reports/styles/  (Cirrus.Api.Controllers.Accounting.Reports.Styles.ReportStylesController.GetAll)  [L59–L66] status=200 [auth=Authentication.UserPolicy]
  └─ maps_to ReportStyleLightDto [L62]
    └─ automapper.registration CirrusMappingProfile (ReportStyle->ReportStyleLightDto) [L582]
  └─ calls ReportStyleRepository.ReadQuery [L62]
  └─ query ReportStyle [L62]
    └─ reads_from ReportStyles
  └─ uses_service IControlledRepository<ReportStyle>
    └─ method ReadQuery [L62]
      └─ ... (no implementation details available)

[web] PUT /api/accounting/reports/styles/{id:Guid}  (Cirrus.Api.Controllers.Accounting.Reports.Styles.ReportStylesController.Update)  [L84–L95] status=200 [auth=Authentication.UserPolicy,Authentication.AdminPolicy]
  └─ calls ReportStyleRepository.WriteQuery [L87]
  └─ write ReportStyle [L87]
    └─ reads_from ReportStyles
  └─ uses_service IControlledRepository<ReportStyle>
    └─ method WriteQuery [L87]
      └─ ... (no implementation details available)
  └─ sends_request ValidateCssFontUrlsCommand [L91]
    └─ handled_by Cirrus.ApplicationService.Accounting.Commands.Reports.ReportStyles.ValidateCssFontUrlsCommandHandler.Handle [L24–L60]
      └─ uses_service IOptions<CssTemplatesConfig>
        └─ method Value [L34]
          └─ ... (no implementation details available)

[web] POST /api/accounting/reports/watermarks/  (Cirrus.Api.Controllers.Accounting.Reports.Styles.ReportWatermarksController.Create)  [L60–L67] status=201 [auth=Authentication.UserPolicy,Authentication.AdminPolicy]
  └─ insert ReportWatermark [L64]
    └─ reads_from ReportWatermarks
  └─ uses_service IControlledRepository<ReportWatermark>
    └─ method Add [L64]
      └─ ... (no implementation details available)

[web] DELETE /api/accounting/reports/watermarks/{id:guid}  (Cirrus.Api.Controllers.Accounting.Reports.Styles.ReportWatermarksController.Delete)  [L83–L88] status=200 [auth=Authentication.UserPolicy,Authentication.AdminPolicy]
  └─ delete ReportWatermark [L87]
    └─ reads_from ReportWatermarks
  └─ write ReportWatermark [L86]
    └─ reads_from ReportWatermarks
  └─ uses_service IControlledRepository<ReportWatermark>
    └─ method WriteQuery [L86]
      └─ ... (no implementation details available)

[web] GET /api/accounting/reports/watermarks/{id:guid}  (Cirrus.Api.Controllers.Accounting.Reports.Styles.ReportWatermarksController.Get)  [L35–L42] status=200 [auth=Authentication.UserPolicy,Authentication.AdminPolicy]
  └─ maps_to ReportWatermarkDto [L38]
    └─ automapper.registration CirrusMappingProfile (ReportWatermark->ReportWatermarkDto) [L605]
  └─ query ReportWatermark [L38]
    └─ reads_from ReportWatermarks
  └─ uses_service IControlledRepository<ReportWatermark>
    └─ method ReadQuery [L38]
      └─ ... (no implementation details available)

[web] GET /api/accounting/reports/watermarks/  (Cirrus.Api.Controllers.Accounting.Reports.Styles.ReportWatermarksController.GetAll)  [L48–L54] status=200 [auth=Authentication.UserPolicy]
  └─ maps_to ReportWatermarkDto [L51]
    └─ automapper.registration CirrusMappingProfile (ReportWatermark->ReportWatermarkDto) [L605]
  └─ query ReportWatermark [L51]
    └─ reads_from ReportWatermarks
  └─ uses_service IControlledRepository<ReportWatermark>
    └─ method ReadQuery [L51]
      └─ ... (no implementation details available)

[web] PUT /api/accounting/reports/watermarks/{id:guid}  (Cirrus.Api.Controllers.Accounting.Reports.Styles.ReportWatermarksController.Update)  [L72–L78] status=200 [auth=Authentication.UserPolicy,Authentication.AdminPolicy]
  └─ write ReportWatermark [L75]
    └─ reads_from ReportWatermarks
  └─ uses_service IControlledRepository<ReportWatermark>
    └─ method WriteQuery [L75]
      └─ ... (no implementation details available)

[web] GET /api/accounting/reports/styles/word/download/master  (Cirrus.Api.Controllers.Accounting.Reports.Styles.ReportWordController.DownloadMaster)  [L41–L49] status=200 [auth=Authentication.AdminPolicy]

[web] GET /api/accounting/reports/styles/word/download/{reportStyleId:Guid}  (Cirrus.Api.Controllers.Accounting.Reports.Styles.ReportWordController.DownloadTemplate)  [L55–L79] status=200 [auth=Authentication.AdminPolicy]
  └─ calls ReportStyleRepository.ReadQuery [L59]
  └─ query ReportStyle [L59]
    └─ reads_from ReportStyles
  └─ uses_service IControlledRepository<ReportStyle>
    └─ method ReadQuery [L59]
      └─ ... (no implementation details available)

[web] POST /api/accounting/divisions/  (Cirrus.Api.Controllers.Accounting.Setup.DivisionsController.Create)  [L71–L78] status=201 [auth=user]
  └─ calls DivisionRepository.Add [L76]
  └─ insert Division [L76]
    └─ reads_from Divisions
  └─ uses_service IControlledRepository<Division>
    └─ method Add [L76]
      └─ ... (no implementation details available)
  └─ sends_request CanIAccessFileQuery [L74]
    └─ handled_by Cirrus.ApplicationService.Firm.Queries.CanIAccessFileQueryHandler.Handle [L43–L101]
      └─ uses_service IRequestInfoService (AddScoped)
        └─ method IsValidServiceAccountRequest [L66]
          └─ implementation IRequestInfoService.IsValidServiceAccountRequest [L20-L20]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L90]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)
      └─ uses_service ITenantService (AddScoped)
        └─ method GetCurrentTenant [L68]
          └─ implementation ITenantService.GetCurrentTenant [L14-L14]
          └─ ... (no implementation details available)
      └─ uses_service IUserService (InstancePerLifetimeScope)
        └─ method GetUserId [L68]
          └─ implementation IUserService.GetUserId [L18-L18]
          └─ ... (no implementation details available)
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L79]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L71]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L68]

[web] DELETE /api/accounting/divisions/{id:Guid}  (Cirrus.Api.Controllers.Accounting.Setup.DivisionsController.Delete)  [L95–L102] status=200 [auth=user]
  └─ calls DivisionRepository.Remove [L100]
  └─ calls DivisionRepository.WriteQuery [L98]
  └─ delete Division [L100]
    └─ reads_from Divisions
  └─ write Division [L98]
    └─ reads_from Divisions
  └─ uses_service IControlledRepository<Division>
    └─ method WriteQuery [L98]
      └─ ... (no implementation details available)
  └─ sends_request CanIAccessFileQuery [L99]
    └─ handled_by Cirrus.ApplicationService.Firm.Queries.CanIAccessFileQueryHandler.Handle [L43–L101]
      └─ uses_service IRequestInfoService (AddScoped)
        └─ method IsValidServiceAccountRequest [L66]
          └─ implementation IRequestInfoService.IsValidServiceAccountRequest [L20-L20]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L90]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)
      └─ uses_service ITenantService (AddScoped)
        └─ method GetCurrentTenant [L68]
          └─ implementation ITenantService.GetCurrentTenant [L14-L14]
          └─ ... (no implementation details available)
      └─ uses_service IUserService (InstancePerLifetimeScope)
        └─ method GetUserId [L68]
          └─ implementation IUserService.GetUserId [L18-L18]
          └─ ... (no implementation details available)
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L79]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L71]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L68]

[web] GET /api/accounting/divisions/{id}  (Cirrus.Api.Controllers.Accounting.Setup.DivisionsController.Get)  [L41–L47] status=200 [auth=user]
  └─ maps_to DivisionDto [L44]
    └─ automapper.registration CirrusMappingProfile (Division->DivisionDto) [L225]
  └─ calls DivisionRepository.ReadQuery [L44]
  └─ query Division [L44]
    └─ reads_from Divisions
  └─ uses_service IControlledRepository<Division>
    └─ method ReadQuery [L44]
      └─ ... (no implementation details available)

[web] GET /api/accounting/divisions/forfile/{fileId}  (Cirrus.Api.Controllers.Accounting.Setup.DivisionsController.GetAll)  [L56–L65] status=200 [auth=user]
  └─ maps_to DivisionLightDto [L60]
    └─ automapper.registration CirrusMappingProfile (Division->DivisionLightDto) [L226]
  └─ calls DivisionRepository.ReadQuery [L60]
  └─ query Division [L60]
    └─ reads_from Divisions
  └─ uses_service IControlledRepository<Division>
    └─ method ReadQuery [L60]
      └─ ... (no implementation details available)
  └─ sends_request CanIAccessFileQuery [L59]
    └─ handled_by Cirrus.ApplicationService.Firm.Queries.CanIAccessFileQueryHandler.Handle [L43–L101]
      └─ uses_service IRequestInfoService (AddScoped)
        └─ method IsValidServiceAccountRequest [L66]
          └─ implementation IRequestInfoService.IsValidServiceAccountRequest [L20-L20]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L90]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)
      └─ uses_service ITenantService (AddScoped)
        └─ method GetCurrentTenant [L68]
          └─ implementation ITenantService.GetCurrentTenant [L14-L14]
          └─ ... (no implementation details available)
      └─ uses_service IUserService (InstancePerLifetimeScope)
        └─ method GetUserId [L68]
          └─ implementation IUserService.GetUserId [L18-L18]
          └─ ... (no implementation details available)
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L79]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L71]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L68]

[web] PUT /api/accounting/divisions/{id:Guid}  (Cirrus.Api.Controllers.Accounting.Setup.DivisionsController.Update)  [L83–L90] status=200 [auth=user]
  └─ calls DivisionRepository.WriteQuery [L86]
  └─ write Division [L86]
    └─ reads_from Divisions
  └─ uses_service IControlledRepository<Division>
    └─ method WriteQuery [L86]
      └─ ... (no implementation details available)
  └─ sends_request CanIAccessFileQuery [L87]
    └─ handled_by Cirrus.ApplicationService.Firm.Queries.CanIAccessFileQueryHandler.Handle [L43–L101]
      └─ uses_service IRequestInfoService (AddScoped)
        └─ method IsValidServiceAccountRequest [L66]
          └─ implementation IRequestInfoService.IsValidServiceAccountRequest [L20-L20]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L90]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)
      └─ uses_service ITenantService (AddScoped)
        └─ method GetCurrentTenant [L68]
          └─ implementation ITenantService.GetCurrentTenant [L14-L14]
          └─ ... (no implementation details available)
      └─ uses_service IUserService (InstancePerLifetimeScope)
        └─ method GetUserId [L68]
          └─ implementation IUserService.GetUserId [L18-L18]
          └─ ... (no implementation details available)
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L79]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L71]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L68]

[web] POST /api/accounting/matching-rules/file/{fileId}/apply  (Cirrus.Api.Controllers.Accounting.Setup.MatchingRulesController.ApplyAll)  [L132–L138] status=201 [auth=user]

[web] POST /api/accounting/matching-rules/apply  (Cirrus.Api.Controllers.Accounting.Setup.MatchingRulesController.ApplyRule)  [L213–L221] status=201 [auth=user]

[web] GET /api/accounting/matching-rules  (Cirrus.Api.Controllers.Accounting.Setup.MatchingRulesController.ConfirmHasAccess)  [L223–L234] status=200 [auth=user]
  └─ uses_service IUserService (InstancePerLifetimeScope)
    └─ method GetUser [L225]
      └─ implementation IUserService.GetUser [L18-L18]
      └─ ... (no implementation details available)
  └─ sends_request CanIAccessFileQuery [L232]
    └─ handled_by Cirrus.ApplicationService.Firm.Queries.CanIAccessFileQueryHandler.Handle [L43–L101]
      └─ uses_service IRequestInfoService (AddScoped)
        └─ method IsValidServiceAccountRequest [L66]
          └─ implementation IRequestInfoService.IsValidServiceAccountRequest [L20-L20]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L90]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)
      └─ uses_service ITenantService (AddScoped)
        └─ method GetCurrentTenant [L68]
          └─ implementation ITenantService.GetCurrentTenant [L14-L14]
          └─ ... (no implementation details available)
      └─ uses_service IUserService (InstancePerLifetimeScope)
        └─ method GetUserId [L68]
          └─ implementation IUserService.GetUserId [L18-L18]
          └─ ... (no implementation details available)
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L79]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L71]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L68]

[web] POST /api/accounting/matching-rules/  (Cirrus.Api.Controllers.Accounting.Setup.MatchingRulesController.Create)  [L144–L156] status=201 [auth=user]
  └─ calls MatchingRuleRepository.Add [L154]
  └─ calls MatchingRuleRepository.WriteQuery [L148]
  └─ insert MatchingRule [L154]
    └─ reads_from MatchingRules
  └─ write MatchingRule [L148]
    └─ reads_from MatchingRules
  └─ uses_service IControlledRepository<MatchingRule>
    └─ method WriteQuery [L148]
      └─ ... (no implementation details available)

[web] DELETE /api/accounting/matching-rules/{id:Guid}  (Cirrus.Api.Controllers.Accounting.Setup.MatchingRulesController.Delete)  [L200–L208] status=200 [auth=user]
  └─ calls MatchingRuleRepository.Remove [L205]
  └─ calls MatchingRuleRepository.WriteQuery [L203]
  └─ delete MatchingRule [L205]
    └─ reads_from MatchingRules
  └─ write MatchingRule [L203]
    └─ reads_from MatchingRules
  └─ uses_service IControlledRepository<MatchingRule>
    └─ method WriteQuery [L203]
      └─ ... (no implementation details available)

[web] GET /api/accounting/matching-rules/{id}  (Cirrus.Api.Controllers.Accounting.Setup.MatchingRulesController.Get)  [L61–L78] status=200 [auth=user]
  └─ maps_to MatchingRuleDto [L64]
    └─ automapper.registration CirrusMappingProfile (MatchingRule->MatchingRuleDto) [L230]
    └─ automapper.registration WorkpapersMappingProfile (MatchingRule->MatchingRuleDto) [L887]
  └─ calls MatchingRuleRepository.ReadQuery [L64]
  └─ query MatchingRule [L64]
    └─ reads_from MatchingRules
  └─ uses_service IControlledRepository<MatchingRule>
    └─ method ReadQuery [L64]
      └─ ... (no implementation details available)

[web] GET /api/accounting/matching-rules/file/{fileId}  (Cirrus.Api.Controllers.Accounting.Setup.MatchingRulesController.GetAll)  [L108–L116] status=200 [auth=user]
  └─ sends_request GetMatchingRulesForFileQuery [L113]
    └─ handled_by Cirrus.ApplicationService.Accounting.Queries.GetMatchingRulesForFileHandler.Handle [L35–L132]
      └─ maps_to AccountUltraLightDto [L108]
        └─ automapper.registration CirrusMappingProfile (Account->AccountUltraLightDto) [L312]
      └─ maps_to AccountTypeLightDto [L98]
        └─ automapper.registration CirrusMappingProfile (AccountType->AccountTypeLightDto) [L246]
        └─ automapper.registration WorkpapersMappingProfile (AccountType->AccountTypeLightDto) [L707]
      └─ maps_to MatchingRuleDto [L77]
        └─ automapper.registration CirrusMappingProfile (MatchingRule->MatchingRuleDto) [L230]
        └─ automapper.registration WorkpapersMappingProfile (MatchingRule->MatchingRuleDto) [L887]
      └─ uses_service IControlledRepository<Account>
        └─ method ReadQuery [L108]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<AccountType>
        └─ method ReadQuery [L98]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<File>
        └─ method ReadQuery [L70]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<MatchingRule>
        └─ method ReadQuery [L77]
          └─ ... (no implementation details available)
      └─ uses_service IMapper
        └─ method ConfigurationProvider [L79]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L68]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)

[web] GET /api/accounting/matching-rules/rule-set/{ruleSetId}  (Cirrus.Api.Controllers.Accounting.Setup.MatchingRulesController.GetAllMasters)  [L87–L99] status=200 [auth=user,admin]
  └─ maps_to MatchingRuleDto [L90]
    └─ automapper.registration CirrusMappingProfile (MatchingRule->MatchingRuleDto) [L230]
    └─ automapper.registration WorkpapersMappingProfile (MatchingRule->MatchingRuleDto) [L887]
  └─ calls MatchingRuleRepository.ReadQuery [L90]
  └─ query MatchingRule [L90]
    └─ reads_from MatchingRules
  └─ uses_service IControlledRepository<MatchingRule>
    └─ method ReadQuery [L90]
      └─ ... (no implementation details available)

[web] PUT /api/accounting/matching-rules/{id}/reorder  (Cirrus.Api.Controllers.Accounting.Setup.MatchingRulesController.Reorder)  [L177–L195] status=200 [auth=user,admin]
  └─ calls MatchingRuleRepository.WriteQuery [L186]
  └─ calls MatchingRuleRepository.ReadQuery [L180]
  └─ query MatchingRule [L180]
    └─ reads_from MatchingRules
  └─ write MatchingRule [L186]
    └─ reads_from MatchingRules
  └─ uses_service IControlledRepository<MatchingRule>
    └─ method ReadQuery [L180]
      └─ ... (no implementation details available)

[web] POST /api/accounting/matching-rules/file/{fileId}/replace  (Cirrus.Api.Controllers.Accounting.Setup.MatchingRulesController.ReplaceSystem)  [L122–L127] status=201 [auth=user]
  └─ sends_request ReplaceMatchingRulesCommand [L126]
    └─ handled_by Cirrus.ApplicationService.Accounting.Commands.ReplaceMatchingRulesCommandHandler.Handle [L29–L69]
      └─ uses_service IControlledRepository<MatchingRule>
        └─ method WriteQuery [L48]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L60]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)

[web] PUT /api/accounting/matching-rules/{id:Guid}  (Cirrus.Api.Controllers.Accounting.Setup.MatchingRulesController.Update)  [L161–L168] status=200 [auth=user]
  └─ calls MatchingRuleRepository.WriteQuery [L164]
  └─ write MatchingRule [L164]
    └─ reads_from MatchingRules
  └─ uses_service IControlledRepository<MatchingRule>
    └─ method WriteQuery [L164]
      └─ ... (no implementation details available)

[web] POST /api/accounting/matching-rule-sets/  (Cirrus.Api.Controllers.Accounting.Setup.MatchingRuleSetsController.Create)  [L54–L60] status=201 [auth=Authentication.UserPolicy,Authentication.AdminPolicy]
  └─ calls MatchingRuleSetRepository.Add [L58]
  └─ insert MatchingRuleSet [L58]
    └─ reads_from MatchingRuleSets
  └─ uses_service IControlledRepository<MatchingRuleSet>
    └─ method Add [L58]
      └─ ... (no implementation details available)

[web] DELETE /api/accounting/matching-rule-sets/{id:Guid}  (Cirrus.Api.Controllers.Accounting.Setup.MatchingRuleSetsController.Delete)  [L72–L77] status=200 [auth=Authentication.UserPolicy,Authentication.AdminPolicy]
  └─ calls MatchingRuleSetRepository.Remove [L76]
  └─ calls MatchingRuleSetRepository.WriteQuery [L75]
  └─ delete MatchingRuleSet [L76]
    └─ reads_from MatchingRuleSets
  └─ write MatchingRuleSet [L75]
    └─ reads_from MatchingRuleSets
  └─ uses_service IControlledRepository<MatchingRuleSet>
    └─ method WriteQuery [L75]
      └─ ... (no implementation details available)

[web] GET /api/accounting/matching-rule-sets/{id}  (Cirrus.Api.Controllers.Accounting.Setup.MatchingRuleSetsController.Get)  [L34–L41] status=200 [auth=Authentication.UserPolicy]
  └─ maps_to MatchingRuleSetDto [L37]
    └─ automapper.registration WorkpapersMappingProfile (MatchingRuleSet->MatchingRuleSetDto) [L889]
    └─ automapper.registration CirrusMappingProfile (MatchingRuleSet->MatchingRuleSetDto) [L229]
  └─ calls MatchingRuleSetRepository.ReadQuery [L37]
  └─ query MatchingRuleSet [L37]
    └─ reads_from MatchingRuleSets
  └─ uses_service IControlledRepository<MatchingRuleSet>
    └─ method ReadQuery [L37]
      └─ ... (no implementation details available)

[web] GET /api/accounting/matching-rule-sets/  (Cirrus.Api.Controllers.Accounting.Setup.MatchingRuleSetsController.GetAll)  [L43–L52] status=200 [auth=Authentication.UserPolicy]
  └─ maps_to MatchingRuleSetDto [L46]
    └─ automapper.registration WorkpapersMappingProfile (MatchingRuleSet->MatchingRuleSetDto) [L889]
    └─ automapper.registration CirrusMappingProfile (MatchingRuleSet->MatchingRuleSetDto) [L229]
  └─ calls MatchingRuleSetRepository.ReadQuery [L46]
  └─ query MatchingRuleSet [L46]
    └─ reads_from MatchingRuleSets
  └─ uses_service IControlledRepository<MatchingRuleSet>
    └─ method ReadQuery [L46]
      └─ ... (no implementation details available)

[web] PUT /api/accounting/matching-rule-sets/{id:Guid}  (Cirrus.Api.Controllers.Accounting.Setup.MatchingRuleSetsController.Update)  [L62–L67] status=200 [auth=Authentication.UserPolicy,Authentication.AdminPolicy]
  └─ calls MatchingRuleSetRepository.WriteQuery [L65]
  └─ write MatchingRuleSet [L65]
    └─ reads_from MatchingRuleSets
  └─ uses_service IControlledRepository<MatchingRuleSet>
    └─ method WriteQuery [L65]
      └─ ... (no implementation details available)

[web] POST /api/accounting/tradingAccounts/  (Cirrus.Api.Controllers.Accounting.Setup.TradingAccountsController.Create)  [L71–L78] status=201 [auth=user]
  └─ calls TradingAccountRepository.Add [L76]
  └─ insert TradingAccount [L76]
    └─ reads_from TradingAccounts
  └─ uses_service IControlledRepository<TradingAccount>
    └─ method Add [L76]
      └─ ... (no implementation details available)
  └─ sends_request CanIAccessFileQuery [L74]
    └─ handled_by Cirrus.ApplicationService.Firm.Queries.CanIAccessFileQueryHandler.Handle [L43–L101]
      └─ uses_service IRequestInfoService (AddScoped)
        └─ method IsValidServiceAccountRequest [L66]
          └─ implementation IRequestInfoService.IsValidServiceAccountRequest [L20-L20]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L90]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)
      └─ uses_service ITenantService (AddScoped)
        └─ method GetCurrentTenant [L68]
          └─ implementation ITenantService.GetCurrentTenant [L14-L14]
          └─ ... (no implementation details available)
      └─ uses_service IUserService (InstancePerLifetimeScope)
        └─ method GetUserId [L68]
          └─ implementation IUserService.GetUserId [L18-L18]
          └─ ... (no implementation details available)
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L79]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L71]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L68]

[web] DELETE /api/accounting/tradingAccounts/{id:Guid}  (Cirrus.Api.Controllers.Accounting.Setup.TradingAccountsController.Delete)  [L95–L102] status=200 [auth=user]
  └─ calls TradingAccountRepository.Remove [L100]
  └─ calls TradingAccountRepository.WriteQuery [L98]
  └─ delete TradingAccount [L100]
    └─ reads_from TradingAccounts
  └─ write TradingAccount [L98]
    └─ reads_from TradingAccounts
  └─ uses_service IControlledRepository<TradingAccount>
    └─ method WriteQuery [L98]
      └─ ... (no implementation details available)
  └─ sends_request CanIAccessFileQuery [L99]
    └─ handled_by Cirrus.ApplicationService.Firm.Queries.CanIAccessFileQueryHandler.Handle [L43–L101]
      └─ uses_service IRequestInfoService (AddScoped)
        └─ method IsValidServiceAccountRequest [L66]
          └─ implementation IRequestInfoService.IsValidServiceAccountRequest [L20-L20]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L90]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)
      └─ uses_service ITenantService (AddScoped)
        └─ method GetCurrentTenant [L68]
          └─ implementation ITenantService.GetCurrentTenant [L14-L14]
          └─ ... (no implementation details available)
      └─ uses_service IUserService (InstancePerLifetimeScope)
        └─ method GetUserId [L68]
          └─ implementation IUserService.GetUserId [L18-L18]
          └─ ... (no implementation details available)
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L79]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L71]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L68]

[web] GET /api/accounting/tradingAccounts/{id}  (Cirrus.Api.Controllers.Accounting.Setup.TradingAccountsController.Get)  [L41–L47] status=200 [auth=user]
  └─ maps_to TradingAccountDto [L44]
    └─ automapper.registration CirrusMappingProfile (TradingAccount->TradingAccountDto) [L227]
  └─ calls TradingAccountRepository.ReadQuery [L44]
  └─ query TradingAccount [L44]
    └─ reads_from TradingAccounts
  └─ uses_service IControlledRepository<TradingAccount>
    └─ method ReadQuery [L44]
      └─ ... (no implementation details available)

[web] GET /api/accounting/tradingAccounts/forfile/{fileId}  (Cirrus.Api.Controllers.Accounting.Setup.TradingAccountsController.GetAll)  [L56–L65] status=200 [auth=user]
  └─ maps_to TradingAccountDto [L60]
    └─ automapper.registration CirrusMappingProfile (TradingAccount->TradingAccountDto) [L227]
  └─ calls TradingAccountRepository.ReadQuery [L60]
  └─ query TradingAccount [L60]
    └─ reads_from TradingAccounts
  └─ uses_service IControlledRepository<TradingAccount>
    └─ method ReadQuery [L60]
      └─ ... (no implementation details available)
  └─ sends_request CanIAccessFileQuery [L59]
    └─ handled_by Cirrus.ApplicationService.Firm.Queries.CanIAccessFileQueryHandler.Handle [L43–L101]
      └─ uses_service IRequestInfoService (AddScoped)
        └─ method IsValidServiceAccountRequest [L66]
          └─ implementation IRequestInfoService.IsValidServiceAccountRequest [L20-L20]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L90]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)
      └─ uses_service ITenantService (AddScoped)
        └─ method GetCurrentTenant [L68]
          └─ implementation ITenantService.GetCurrentTenant [L14-L14]
          └─ ... (no implementation details available)
      └─ uses_service IUserService (InstancePerLifetimeScope)
        └─ method GetUserId [L68]
          └─ implementation IUserService.GetUserId [L18-L18]
          └─ ... (no implementation details available)
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L79]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L71]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L68]

[web] PUT /api/accounting/tradingAccounts/{id:Guid}  (Cirrus.Api.Controllers.Accounting.Setup.TradingAccountsController.Update)  [L83–L90] status=200 [auth=user]
  └─ calls TradingAccountRepository.WriteQuery [L86]
  └─ write TradingAccount [L86]
    └─ reads_from TradingAccounts
  └─ uses_service IControlledRepository<TradingAccount>
    └─ method WriteQuery [L86]
      └─ ... (no implementation details available)
  └─ sends_request CanIAccessFileQuery [L87]
    └─ handled_by Cirrus.ApplicationService.Firm.Queries.CanIAccessFileQueryHandler.Handle [L43–L101]
      └─ uses_service IRequestInfoService (AddScoped)
        └─ method IsValidServiceAccountRequest [L66]
          └─ implementation IRequestInfoService.IsValidServiceAccountRequest [L20-L20]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L90]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)
      └─ uses_service ITenantService (AddScoped)
        └─ method GetCurrentTenant [L68]
          └─ implementation ITenantService.GetCurrentTenant [L14-L14]
          └─ ... (no implementation details available)
      └─ uses_service IUserService (InstancePerLifetimeScope)
        └─ method GetUserId [L68]
          └─ implementation IUserService.GetUserId [L18-L18]
          └─ ... (no implementation details available)
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L79]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L71]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L68]

[web] POST /api/accounting/sourcedata/sources/  (Cirrus.Api.Controllers.Accounting.SourceData.SourcesController.Create)  [L128–L134] status=201 [auth=user]
  └─ calls SourceRepository.Add [L132]
  └─ insert Source [L132]
  └─ uses_service IControlledRepository<Source>
    └─ method Add [L132]
      └─ ... (no implementation details available)

[web] DELETE /api/accounting/sourcedata/sources/{id:Guid}  (Cirrus.Api.Controllers.Accounting.SourceData.SourcesController.Delete)  [L150–L156] status=200 [auth=user]
  └─ calls SourceRepository.Remove [L154]
  └─ calls SourceRepository.WriteQuery [L153]
  └─ delete Source [L154]
  └─ write Source [L153]
  └─ uses_service IControlledRepository<Source>
    └─ method WriteQuery [L153]
      └─ ... (no implementation details available)

[web] GET /api/accounting/sourcedata/sources/{id}  (Cirrus.Api.Controllers.Accounting.SourceData.SourcesController.Get)  [L55–L64] status=200 [auth=user]
  └─ maps_to UserUltraLightDto [L61]
    └─ automapper.registration DataverseMappingProfile (User->UserUltraLightDto) [L86]
    └─ automapper.registration WorkpapersMappingProfile (User->UserUltraLightDto) [L96]
    └─ automapper.registration CirrusMappingProfile (User->UserUltraLightDto) [L103]
  └─ maps_to SourceDto [L58]
    └─ automapper.registration ExternalApiMappingProfile (Source->SourceDto) [L95]
    └─ automapper.registration CirrusMappingProfile (Source->SourceDto) [L216]
    └─ automapper.registration WorkpapersMappingProfile (Source->SourceDto) [L598]
  └─ calls UserRepository.ReadQuery [L61]
  └─ calls SourceRepository.ReadQuery [L58]
  └─ query User [L61]
  └─ query Source [L58]
  └─ uses_service ApiService (SingleInstance)
    └─ method GetFeatures [L62]
      └─ implementation Cirrus.ApplicationService.Accounting.Services.ApiService.GetFeatures [L14-L75]
  └─ uses_service IControlledRepository<Source>
    └─ method ReadQuery [L58]
      └─ ... (no implementation details available)
  └─ uses_service IControlledRepository<User>
    └─ method ReadQuery [L61]
      └─ ... (no implementation details available)

[web] GET /api/accounting/sourcedata/sources/{id}/divisions  (Cirrus.Api.Controllers.Accounting.SourceData.SourcesController.GetDivisions)  [L70–L74] status=200 [auth=user]
  └─ sends_request GetSourceDivisionsQuery [L73]
    └─ handled_by Cirrus.ApplicationService.Accounting.Queries.Api.GetSourceDivisionsQueryHandler.Handle [L31–L55]
      └─ maps_to SourceLightDto [L48]
        └─ automapper.registration CirrusMappingProfile (Source->SourceLightDto) [L220]
        └─ automapper.registration WorkpapersMappingProfile (Source->SourceLightDto) [L597]
      └─ uses_service ApiService (SingleInstance)
        └─ method GetApiMethods [L49]
          └─ implementation Cirrus.ApplicationService.Accounting.Services.ApiService.GetApiMethods [L14-L75]
      └─ uses_service IControlledRepository<Source>
        └─ method ReadQuery [L48]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L50]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)

[web] GET /api/accounting/sourcedata/sources/forfile/{fileId:Guid}  (Cirrus.Api.Controllers.Accounting.SourceData.SourcesController.GetForFile)  [L80–L103] status=200 [auth=user]
  └─ maps_to SourceLightDto [L97]
    └─ automapper.registration CirrusMappingProfile (Source->SourceLightDto) [L220]
    └─ automapper.registration WorkpapersMappingProfile (Source->SourceLightDto) [L597]
  └─ calls SourceRepository.ReadQuery [L97]
  └─ query Source [L97]
  └─ uses_service ApiService (SingleInstance)
    └─ method GetAllImplementedApiTypeFeatures [L89]
      └─ implementation Cirrus.ApplicationService.Accounting.Services.ApiService.GetAllImplementedApiTypeFeatures [L14-L75]
  └─ uses_service IControlledRepository<Source>
    └─ method ReadQuery [L97]
      └─ ... (no implementation details available)

[web] GET /api/accounting/sourcedata/sources/types  (Cirrus.Api.Controllers.Accounting.SourceData.SourcesController.GetSourceTypes)  [L109–L122] status=200 [auth=user]
  └─ maps_to SourceTypeDto [L112]
    └─ automapper.registration CirrusMappingProfile (SourceType->SourceTypeDto) [L205]
  └─ query SourceType [L112]
  └─ uses_service ApiService (SingleInstance)
    └─ method GetFeatures [L118]
      └─ implementation Cirrus.ApplicationService.Accounting.Services.ApiService.GetFeatures [L14-L75]
  └─ uses_service IControlledRepository<SourceType>
    └─ method ReadQuery [L112]
      └─ ... (no implementation details available)

[web] PUT /api/accounting/sourcedata/sources/{id:Guid}  (Cirrus.Api.Controllers.Accounting.SourceData.SourcesController.Update)  [L139–L145] status=200 [auth=user]
  └─ calls SourceRepository.WriteQuery [L142]
  └─ write Source [L142]
  └─ uses_service IControlledRepository<Source>
    └─ method WriteQuery [L142]
      └─ ... (no implementation details available)

[web] GET /api/accounting/tax-forms/{formId}/balances/{datasetId}  (Cirrus.Api.Controllers.Accounting.Tax.TaxFormsController.GetFormBalances)  [L32–L37] status=200 [auth=user]
  └─ sends_request CanIAccessDatasetQuery [L35]
    └─ handled_by Cirrus.ApplicationService.Accounting.Queries.CanIAccessDatasetQueryHandler.Handle [L58–L140]
      └─ uses_service IControlledRepository<Dataset>
        └─ method ReadQuery [L127]
          └─ ... (no implementation details available)
      └─ uses_service IRequestInfoService (AddScoped)
        └─ method IsValidServiceAccountRequest [L101]
          └─ implementation IRequestInfoService.IsValidServiceAccountRequest [L20-L20]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L129]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)
      └─ uses_service ITenantService (AddScoped)
        └─ method GetCurrentTenant [L88]
          └─ implementation ITenantService.GetCurrentTenant [L14-L14]
          └─ ... (no implementation details available)
      └─ uses_service IUserService (InstancePerLifetimeScope)
        └─ method GetUserId [L103]
          └─ implementation IUserService.GetUserId [L18-L18]
          └─ ... (no implementation details available)
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L116]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L106]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L103]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L90]
      └─ uses_cache IDistributedCache.CreateDatasetLockKey [write] [L88]
  └─ sends_request GetTaxLabelBalancesQuery [L36]
    └─ handled_by Cirrus.ApplicationService.Accounting.Queries.GetTaxLabelBalancesQueryHandler.Handle [L25–L88]
      └─ uses_service GetTaxLabelBalancesByAccountTypeQuery
        └─ method Execute [L50]
          └─ ... (no implementation details available)
      └─ uses_service GetTaxLabelBalancesByClassificationQuery
        └─ method Execute [L54]
          └─ ... (no implementation details available)
      └─ uses_service GetTaxLabelBalancesByCurrentClassificationQuery
        └─ method Execute [L58]
          └─ ... (no implementation details available)
      └─ uses_service GetTaxLabelsQuery
        └─ method Execute [L47]
          └─ ... (no implementation details available)

[web] GET /api/accounting/tax-forms/  (Cirrus.Api.Controllers.Accounting.Tax.TaxFormsController.GetForms)  [L26–L30] status=200 [auth=user]

[web] GET /api/accounting/tax/taxonomy/  (Cirrus.Api.Controllers.Accounting.Tax.TaxonomyController.GetAll)  [L36–L45] status=200 [auth=user]
  └─ maps_to TaxonomyLightDto [L39]
  └─ uses_service IReadRepository (InstancePerLifetimeScope)
    └─ method Table [L39]
      └─ ... (no implementation details available)

[web] GET /api/accounting/tax/taxonomy/report  (Cirrus.Api.Controllers.Accounting.Tax.TaxonomyController.GetReport)  [L47–L51] status=200 [auth=user]
  └─ sends_request GetTaxonomyReport [L50]
    └─ handled_by Cirrus.ApplicationService.Accounting.Queries.Tax.GetTaxonomyReportQueryHandler.Handle [L43–L148]
      └─ maps_to AccountLightListDto [L135]
      └─ maps_to AccountTypeLightWithTaxonomyDto [L112]
      └─ maps_to TaxonomyDto [L106]
      └─ uses_service GetAccountsQuery
        └─ method Execute [L79]
          └─ implementation Cirrus.Connections.DataGet.Queries.GetAccountsQuery.Execute [L9-L23]
            └─ handled_by Cirrus.Connections.DataGet.Queries.GetAccountsQueryHandler.Handle [L25–L59]
              └─ uses_client DataGetClient [L40]
                └─ calls GetAccounts (GET /api/accounting-file/{fileId}/accounts?apiType={*}&password={*}&username={*}, method=GetAccountsAsync, target=DataGet.Api, query=apiType={*}&password={*}&username={*}) [L65]
                  └─ target_service DataGet.Api
                    └─ [web] GET /api/accounting-file/{fileId}/accounts  (DataGet.Api.Controllers.Connections.AccountingFileController.GetAccounts)  [L44–L52] status=200 [auth=Authentication.MachineToMachinePolicy]
                      └─ sends_request GetAccountsQuery [L48]
                        └─ handled_by Cirrus.Connections.DataGet.Queries.GetAccountsQueryHandler.Handle [L25–L59]
              └─ uses_service DatagetFileIdService
                └─ method GetFileIdFromSource [L38]
                  └─ implementation Cirrus.Connections.DataGet.Services.DatagetFileIdService.GetFileIdFromSource [L14-L37]
              └─ uses_service DataGetClient
                └─ method GetAccountsAsync [L40]
                  └─ implementation Cirrus.Connections.DataGet.Client.DataGetClient.GetAccountsAsync [L15-L302]
                    └─ calls GetAccounts [L106]
      └─ uses_service GetTrialBalanceForDatesQuery
        └─ method Execute [L78]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<Dataset>
        └─ method ReadQuery [L66]
          └─ ... (no implementation details available)
      └─ uses_service IMapper
        └─ method ConfigurationProvider [L109]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L71]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)

[web] GET /api/accounting/taxforms/{formId}/balances/{datasetId}  (Cirrus.Api.Controllers.Accounting.TaxFormsController.GetFormBalances)  [L40–L45] status=200 [auth=user]
  └─ sends_request CanIAccessDatasetQuery [L43]
    └─ handled_by Cirrus.ApplicationService.Accounting.Queries.CanIAccessDatasetQueryHandler.Handle [L58–L140]
      └─ uses_service IControlledRepository<Dataset>
        └─ method ReadQuery [L127]
          └─ ... (no implementation details available)
      └─ uses_service IRequestInfoService (AddScoped)
        └─ method IsValidServiceAccountRequest [L101]
          └─ implementation IRequestInfoService.IsValidServiceAccountRequest [L20-L20]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L129]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)
      └─ uses_service ITenantService (AddScoped)
        └─ method GetCurrentTenant [L88]
          └─ implementation ITenantService.GetCurrentTenant [L14-L14]
          └─ ... (no implementation details available)
      └─ uses_service IUserService (InstancePerLifetimeScope)
        └─ method GetUserId [L103]
          └─ implementation IUserService.GetUserId [L18-L18]
          └─ ... (no implementation details available)
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L116]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L106]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L103]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L90]
      └─ uses_cache IDistributedCache.CreateDatasetLockKey [write] [L88]
  └─ sends_request GetTaxLabelBalancesQuery [L44]
    └─ handled_by Cirrus.ApplicationService.Accounting.Queries.GetTaxLabelBalancesQueryHandler.Handle [L25–L88]
      └─ uses_service GetTaxLabelBalancesByAccountTypeQuery
        └─ method Execute [L50]
          └─ ... (no implementation details available)
      └─ uses_service GetTaxLabelBalancesByClassificationQuery
        └─ method Execute [L54]
          └─ ... (no implementation details available)
      └─ uses_service GetTaxLabelBalancesByCurrentClassificationQuery
        └─ method Execute [L58]
          └─ ... (no implementation details available)
      └─ uses_service GetTaxLabelsQuery
        └─ method Execute [L47]
          └─ ... (no implementation details available)

[web] GET /api/accounting/taxforms/  (Cirrus.Api.Controllers.Accounting.TaxFormsController.GetForms)  [L30–L34] status=200 [auth=user]

[web] GET /api/accounting/workpapers/starters/{id}/download  (Cirrus.Api.Controllers.Accounting.WorkpapersController.DownloadStarter)  [L101–L106] status=200 [auth=Authentication.UserPolicy]
  └─ uses_service WorkpapersService
    └─ method Get [L105]
      └─ implementation Cirrus.Central.Features.MachineToMachine.WorkpapersService.Get [L12-L30]
  └─ sends_request GetFirmForCurrentRequestQuery [L104]
    └─ handled_by Cirrus.Central.Queries.GetFirmForCurrentRequestQueryHandler.Handle [L19–L55]
      └─ uses_service IHttpContextAccessor
        └─ method HttpContext [L38]
          └─ ... (no implementation details available)
      └─ uses_service ILogger<GetFirmForCurrentRequestQueryHandler>
        └─ method LogWarning [L47]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method Process [L51]
          └─ implementation IRequestProcessor.Process [L9-L9]
          └─ ... (no implementation details available)
      └─ logs ILogger<GetFirmForCurrentRequestQueryHandler> [Warning] [L47]

[web] GET /api/accounting/workpapers/features  (Cirrus.Api.Controllers.Accounting.WorkpapersController.GetFeatures)  [L35–L62] status=200 [auth=Authentication.UserPolicy]
  └─ uses_service WorkpapersService
    └─ method Get [L43]
      └─ implementation Cirrus.Central.Features.MachineToMachine.WorkpapersService.Get [L12-L30]
  └─ sends_request GetFirmForCurrentRequestQuery [L38]
    └─ handled_by Cirrus.Central.Queries.GetFirmForCurrentRequestQueryHandler.Handle [L19–L55]
      └─ uses_service IHttpContextAccessor
        └─ method HttpContext [L38]
          └─ ... (no implementation details available)
      └─ uses_service ILogger<GetFirmForCurrentRequestQueryHandler>
        └─ method LogWarning [L47]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method Process [L51]
          └─ implementation IRequestProcessor.Process [L9-L9]
          └─ ... (no implementation details available)
      └─ logs ILogger<GetFirmForCurrentRequestQueryHandler> [Warning] [L47]

[web] GET /api/accounting/workpapers/starters  (Cirrus.Api.Controllers.Accounting.WorkpapersController.GetStarters)  [L68–L95] status=200 [auth=Authentication.UserPolicy]
  └─ uses_service WorkpapersService
    └─ method Get [L76]
      └─ implementation Cirrus.Central.Features.MachineToMachine.WorkpapersService.Get [L12-L30]
  └─ sends_request GetFirmForCurrentRequestQuery [L71]
    └─ handled_by Cirrus.Central.Queries.GetFirmForCurrentRequestQueryHandler.Handle [L19–L55]
      └─ uses_service IHttpContextAccessor
        └─ method HttpContext [L38]
          └─ ... (no implementation details available)
      └─ uses_service ILogger<GetFirmForCurrentRequestQueryHandler>
        └─ method LogWarning [L47]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method Process [L51]
          └─ implementation IRequestProcessor.Process [L9-L9]
          └─ ... (no implementation details available)
      └─ logs ILogger<GetFirmForCurrentRequestQueryHandler> [Warning] [L47]

[web] PUT /api/central/tenants/{dataverseId}  (Cirrus.Api.Controllers.Central.CentralController.ProcessCoreDataverseChanges)  [L47–L69] status=200 [auth=Authentication.MachineToMachinePolicy]
  └─ calls CentralRepository.Commit [L67]
  └─ calls CentralRepository.WriteTable [L50]
  └─ uses_service CentralRepository
    └─ method WriteTable [L50]
      └─ implementation Cirrus.Central.Data.CentralRepository.WriteTable [L10-L55]

[web] POST /api/central/user/core  (Cirrus.Api.Controllers.Central.CentralController.ProcessIdentityAccountChanges)  [L37–L42] status=201 [auth=Authentication.MachineToMachinePolicy]
  └─ sends_request UpdateIdentityAccountChangesCommand [L40]
    └─ handled_by Cirrus.Central.Commands.UpdateIdentityAccountChangesCommandHandler.Handle [L28–L75]
      └─ calls CentralRepository.Commit [L61]
      └─ calls CentralRepository.WriteTable [L43]
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L66]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)

[web] GET /api/central/databases/{databaseId}  (Cirrus.Api.Controllers.Central.DatabaseController.Get)  [L38–L45] status=200 [auth=Authentication.MachineToMachinePolicy]
  └─ maps_to DatabaseDto [L41]
  └─ calls CentralRepository.ReadTable [L41]
  └─ uses_service CentralRepository
    └─ method ReadTable [L41]
      └─ implementation Cirrus.Central.Data.CentralRepository.ReadTable [L10-L55]

[web] GET /api/central/databases/  (Cirrus.Api.Controllers.Central.DatabaseController.GetAll)  [L28–L36] status=200 [auth=Authentication.MachineToMachinePolicy]
  └─ maps_to DatabaseLightDto [L31]
  └─ calls CentralRepository.ReadTable [L31]
  └─ uses_service CentralRepository
    └─ method ReadTable [L31]
      └─ implementation Cirrus.Central.Data.CentralRepository.ReadTable [L10-L55]

[web] POST /api/central/firms/  (Cirrus.Api.Controllers.Central.FirmController.CreateFirm)  [L85–L92] status=201 [auth=Authentication.MachineToMachinePolicy]
  └─ sends_request CreateFirmCommand [L88]
    └─ handled_by Cirrus.Central.Commands.CreateFirmCommandHandler.Handle [L37–L162]
      └─ calls CentralRepository.Commit [L76]
      └─ calls CentralRepository.Add [L75]
      └─ calls CentralRepository.WriteTable [L61]
      └─ calls CentralRepository.WriteTable [L58]
      └─ uses_service TenantService
        └─ method AssignCurrentTenantId [L78]
          └─ implementation Cirrus.Central.Tenants.TenantService.AssignCurrentTenantId [L26-L139]
          └─ implementation Cirrus.Central.Tenants.TenantService.AssignCurrentTenantId [L26-L139]
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L86]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)

[web] GET /api/central/firms/tenants  (Cirrus.Api.Controllers.Central.FirmController.FindTenants)  [L51–L61] status=200 [auth=Authentication.MachineToMachinePolicy]

[web] GET /api/central/firms/{dataverseId}  (Cirrus.Api.Controllers.Central.FirmController.Get)  [L63–L72] status=200 [auth=Authentication.MachineToMachinePolicy]
  └─ maps_to FirmDto [L66]
    └─ converts_to FirmWithStatsDto [L162]
  └─ calls CentralRepository.ReadTable [L66]
  └─ uses_service CentralRepository
    └─ method ReadTable [L66]
      └─ implementation Cirrus.Central.Data.CentralRepository.ReadTable [L10-L55]

[web] GET /api/central/firms/  (Cirrus.Api.Controllers.Central.FirmController.GetAll)  [L41–L49] status=200 [auth=Authentication.MachineToMachinePolicy]
  └─ maps_to FirmDto [L44]
    └─ converts_to FirmWithStatsDto [L162]
  └─ calls CentralRepository.ReadTable [L44]
  └─ uses_service CentralRepository
    └─ method ReadTable [L44]
      └─ implementation Cirrus.Central.Data.CentralRepository.ReadTable [L10-L55]

[web] GET /api/central/firms/{firmId}/owners  (Cirrus.Api.Controllers.Central.FirmController.GetOwners)  [L74–L83] status=200 [auth=Authentication.MachineToMachinePolicy]
  └─ maps_to FirmUserDto [L77]
  └─ calls CentralRepository.ReadTable [L77]
  └─ uses_service CentralRepository
    └─ method ReadTable [L77]
      └─ implementation Cirrus.Central.Data.CentralRepository.ReadTable [L10-L55]

[web] POST /api/central/firms/{firmId}/owners/{centralUserId}/resend-invite  (Cirrus.Api.Controllers.Central.FirmController.ResendUserInvite)  [L107–L119] status=201 [auth=Authentication.MachineToMachinePolicy]
  └─ calls CentralRepository.ReadTable [L111]
  └─ uses_service CentralRepository
    └─ method ReadTable [L111]
      └─ implementation Cirrus.Central.Data.CentralRepository.ReadTable [L10-L55]

[web] PUT /api/central/firms/{dataverseId}  (Cirrus.Api.Controllers.Central.FirmController.UpdateFirm)  [L94–L105] status=200 [auth=Authentication.MachineToMachinePolicy]
  └─ calls CentralRepository.Commit [L101]
  └─ calls CentralRepository.WriteTable [L97]
  └─ uses_service CentralRepository
    └─ method WriteTable [L97]
      └─ implementation Cirrus.Central.Data.CentralRepository.WriteTable [L10-L55]

[web] GET /api/central/storage-accounts/  (Cirrus.Api.Controllers.Central.StorageAccountsController.GetAll)  [L28–L36] status=200 [auth=Authentication.MachineToMachinePolicy]
  └─ maps_to StorageAccountDto [L31]
  └─ calls CentralRepository.ReadTable [L31]
  └─ uses_service CentralRepository
    └─ method ReadTable [L31]
      └─ implementation Cirrus.Central.Data.CentralRepository.ReadTable [L10-L55]

[web] POST /api/dataverse/files  (Cirrus.Api.Controllers.Dataverse.DataverseController.Files)  [L119–L126] status=201 [auth=Authentication.RequireTenantIdPolicy]
  └─ maps_to FileLightDto [L122]
    └─ automapper.registration CirrusMappingProfile (File->FileLightDto) [L192]
  └─ calls FileRepository.ReadQuery [L122]
  └─ query File [L122]
    └─ reads_from Files
  └─ uses_service IControlledRepository<File>
    └─ method ReadQuery [L122]
      └─ ... (no implementation details available)

[web] GET /api/dataverse/{entityRoute}/audit-entity/{dataverseId}  (Cirrus.Api.Controllers.Dataverse.DataverseController.GetAudit)  [L102–L110] status=200 [auth=Authentication.RequireTenantIdPolicy]

[web] GET /api/dataverse/{entityRoute}/audit  (Cirrus.Api.Controllers.Dataverse.DataverseController.GetData)  [L89–L96] status=200 [auth=Authentication.RequireTenantIdPolicy]

[web] PUT /api/dataverse/clients  (Cirrus.Api.Controllers.Dataverse.DataverseController.UpdateClientChanges)  [L78–L83] status=200 [auth=Authentication.RequireTenantIdPolicy]
  └─ uses_service ITenantService (AddScoped)
    └─ method GetCurrentTenant [L81]
      └─ implementation ITenantService.GetCurrentTenant [L14-L14]
      └─ ... (no implementation details available)

[web] PUT /api/dataverse/offices  (Cirrus.Api.Controllers.Dataverse.DataverseController.UpdateOfficeChanges)  [L48–L53] status=200 [auth=Authentication.RequireTenantIdPolicy]
  └─ uses_service ITenantService (AddScoped)
    └─ method GetCurrentTenant [L51]
      └─ implementation ITenantService.GetCurrentTenant [L14-L14]
      └─ ... (no implementation details available)

[web] PUT /api/dataverse/teams  (Cirrus.Api.Controllers.Dataverse.DataverseController.UpdateTeamChanges)  [L58–L63] status=200 [auth=Authentication.RequireTenantIdPolicy]
  └─ uses_service ITenantService (AddScoped)
    └─ method GetCurrentTenant [L61]
      └─ implementation ITenantService.GetCurrentTenant [L14-L14]
      └─ ... (no implementation details available)
  └─ sends_request ProcessDataverseTeamCommand [L62]
    └─ handled_by Cirrus.Central.Dataverse.Commands.ProcessDataverseTeamCommandHandler.Handle [L23–L64]
      └─ uses_service IControlledRepository<Team>
        └─ method WriteQuery [L37]
          └─ ... (no implementation details available)

[web] PUT /api/dataverse/users  (Cirrus.Api.Controllers.Dataverse.DataverseController.UpdateUserChanges)  [L68–L73] status=200 [auth=Authentication.RequireTenantIdPolicy]
  └─ uses_service ITenantService (AddScoped)
    └─ method GetCurrentTenant [L71]
      └─ implementation ITenantService.GetCurrentTenant [L14-L14]
      └─ ... (no implementation details available)

[web] GET /api/one-platform/clients/{dataverseId}  (Cirrus.Api.Controllers.Dataverse.OnePlatformController.GetClientId)  [L30–L39] status=200 [auth=Authentication.UserPolicy]
  └─ calls ClientRepository.ReadQuery [L33]
  └─ query Client [L33]
  └─ uses_service IControlledRepository<Client>
    └─ method ReadQuery [L33]
      └─ ... (no implementation details available)

[web] GET /api/one-platform/entities/{dataverseId}  (Cirrus.Api.Controllers.Dataverse.OnePlatformController.GetEntityId)  [L41–L51] status=200 [auth=Authentication.UserPolicy]
  └─ calls EntityRepository.ReadQuery [L44]
  └─ query Entity [L44]
  └─ uses_service IControlledRepository<Entity>
    └─ method ReadQuery [L44]
      └─ ... (no implementation details available)

[web] GET /api/audit-trail/  (Cirrus.Api.Controllers.Firm.AuditHistoriesController.GetForAuditedEntity)  [L34–L44] status=200 [auth=Authentication.UserPolicy]
  └─ maps_to AuditHistoryDto [L37]
    └─ automapper.registration DataverseMappingProfile (AuditHistory->AuditHistoryDto) [L257]
    └─ automapper.registration CirrusMappingProfile (AuditHistory->AuditHistoryDto) [L187]
    └─ converts_to ExportAuditHistoryDto [L114]
  └─ calls AuditHistoryRepository.ReadQuery [L37]
  └─ query AuditHistory [L37]
    └─ reads_from AuditHistories
  └─ uses_service IControlledRepository<AuditHistory>
    └─ method ReadQuery [L37]
      └─ ... (no implementation details available)

[web] POST /api/clients/  (Cirrus.Api.Controllers.Firm.ClientsController.Create)  [L162–L174] status=201 [auth=user]
  └─ calls ClientRepository.Add [L172]
  └─ insert Client [L172]
  └─ uses_service IControlledRepository<Client>
    └─ method Add [L172]
      └─ ... (no implementation details available)
  └─ uses_service IFirmSettingsService (AddScoped)
    └─ method GetCurrentSettings [L165]
      └─ implementation Cirrus.ApplicationService.Firm.FirmSettingsService.GetCurrentSettings [L15-L112]
  └─ uses_service IUserService (InstancePerLifetimeScope)
    └─ method GetUser [L166]
      └─ implementation IUserService.GetUser [L18-L18]
      └─ ... (no implementation details available)

[web] DELETE /api/clients/{id:Guid}  (Cirrus.Api.Controllers.Firm.ClientsController.Delete)  [L191–L197] status=200 [auth=user]
  └─ calls ClientRepository.WriteQuery [L194]
  └─ write Client [L194]
  └─ uses_service IControlledRepository<Client>
    └─ method WriteQuery [L194]
      └─ ... (no implementation details available)

[web] GET /api/clients/{id}  (Cirrus.Api.Controllers.Firm.ClientsController.Get)  [L93–L111] status=200 [auth=user]
  └─ maps_to ClientDto [L108]
    └─ automapper.registration DataverseMappingProfile (Client->ClientDto) [L165]
    └─ automapper.registration WorkpapersMappingProfile (Client->ClientDto) [L69]
    └─ automapper.registration CirrusMappingProfile (Client->ClientDto) [L146]
  └─ maps_to ClientDto [L98]
    └─ automapper.registration DataverseMappingProfile (Client->ClientDto) [L165]
    └─ automapper.registration WorkpapersMappingProfile (Client->ClientDto) [L69]
    └─ automapper.registration CirrusMappingProfile (Client->ClientDto) [L146]
  └─ calls ClientRepository.ReadQuery [L98]
  └─ query Client [L98]
  └─ uses_service IControlledRepository<Client>
    └─ method ReadQuery [L98]
      └─ ... (no implementation details available)

[web] GET /api/clients/{id}/entities  (Cirrus.Api.Controllers.Firm.ClientsController.GetEntitiesAndFiles)  [L120–L156] status=200 [auth=user]
  └─ maps_to FileDto [L145]
    └─ automapper.registration CirrusMappingProfile (File->FileDto) [L199]
    └─ automapper.registration ExternalApiMappingProfile (File->FileDto) [L39]
  └─ maps_to EntityWithFileDto [L138]
    └─ automapper.registration CirrusMappingProfile (Entity->EntityWithFileDto) [L172]
  └─ calls FileRepository.ReadQuery [L145]
  └─ calls EntityRepository.ReadQuery [L138]
  └─ calls ClientRepository.ReadQuery [L132]
  └─ query File [L145]
    └─ reads_from Files
  └─ query Client [L132]
  └─ query Entity [L138]
  └─ uses_service IControlledRepository<Client>
    └─ method ReadQuery [L132]
      └─ ... (no implementation details available)
  └─ uses_service IControlledRepository<Entity>
    └─ method ReadQuery [L138]
      └─ ... (no implementation details available)
  └─ uses_service IControlledRepository<File>
    └─ method ReadQuery [L145]
      └─ ... (no implementation details available)

[web] GET /api/clients/  (Cirrus.Api.Controllers.Firm.ClientsController.Search)  [L57–L75] status=200 [auth=user]

[web] GET /api/clients/and-entities  (Cirrus.Api.Controllers.Firm.ClientsController.SearchClientAndEntity)  [L84–L88] status=200 [auth=user]
  └─ sends_request FindClientsAndEntitiesQuery [L87]
    └─ handled_by Cirrus.ApplicationService.Firm.Queries.FindClientsAndEntitiesQueryHandler.Handle [L55–L138]
      └─ maps_to ClientEntitySearchDto [L122]
        └─ automapper.registration CirrusMappingProfile (Client->ClientEntitySearchDto) [L148]
      └─ maps_to ClientEntitySearchDto [L108]
        └─ automapper.registration CirrusMappingProfile (Entity->ClientEntitySearchDto) [L175]
      └─ uses_service FirmSettingsService
        └─ method GetCurrentSettings [L75]
          └─ implementation Cirrus.ApplicationService.Firm.FirmSettingsService.GetCurrentSettings [L15-L112]
      └─ uses_service IControlledRepository<Client>
        └─ method ReadQuery [L122]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<Entity>
        └─ method ReadQuery [L108]
          └─ ... (no implementation details available)
      └─ uses_service IMapper
        └─ method ConfigurationProvider [L115]
          └─ ... (no implementation details available)
      └─ uses_service IUserService (InstancePerLifetimeScope)
        └─ method GetUser [L78]
          └─ implementation IUserService.GetUser [L18-L18]
          └─ ... (no implementation details available)

[web] PUT /api/clients/{id:Guid}  (Cirrus.Api.Controllers.Firm.ClientsController.Update)  [L179–L186] status=200 [auth=user]
  └─ calls ClientRepository.WriteQuery [L182]
  └─ write Client [L182]
  └─ uses_service IControlledRepository<Client>
    └─ method WriteQuery [L182]
      └─ ... (no implementation details available)

[web] POST /api/entities/  (Cirrus.Api.Controllers.Firm.EntitiesController.Create)  [L94–L106] status=201 [auth=user]
  └─ calls EntityRepository.Add [L104]
  └─ calls ClientRepository.WriteQuery [L97]
  └─ write Client [L97]
  └─ insert Entity [L104]
  └─ uses_service IControlledRepository<Client>
    └─ method WriteQuery [L97]
      └─ ... (no implementation details available)
  └─ uses_service IControlledRepository<Entity>
    └─ method Add [L104]
      └─ ... (no implementation details available)
  └─ uses_service IFirmSettingsService (AddScoped)
    └─ method GetFirmJurisdictions [L100]
      └─ implementation Cirrus.ApplicationService.Firm.FirmSettingsService.GetFirmJurisdictions [L15-L112]

[web] DELETE /api/entities/{id:Guid}  (Cirrus.Api.Controllers.Firm.EntitiesController.Delete)  [L128–L135] status=200 [auth=user]
  └─ calls EntityRepository.Remove [L133]
  └─ calls EntityRepository.WriteQuery [L131]
  └─ delete Entity [L133]
  └─ write Entity [L131]
  └─ uses_service IControlledRepository<Entity>
    └─ method WriteQuery [L131]
      └─ ... (no implementation details available)
  └─ sends_request CanIAccessEntityQuery [L132]
    └─ handled_by Cirrus.ApplicationService.Firm.Queries.CanIAccessEntityQueryHandler.Handle [L41–L99]
      └─ uses_service TenantService
        └─ method GetCurrentTenant [L72]
          └─ implementation Cirrus.Central.Tenants.TenantService.GetCurrentTenant [L26-L139]
          └─ implementation Cirrus.Central.Tenants.TenantService.GetCurrentTenant [L26-L139]
      └─ uses_service IControlledRepository<Entity>
        └─ method ReadQuery [L81]
          └─ ... (no implementation details available)
      └─ uses_service IRequestInfoService (AddScoped)
        └─ method IsValidServiceAccountRequest [L67]
          └─ implementation IRequestInfoService.IsValidServiceAccountRequest [L20-L20]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L83]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)
      └─ uses_service IUserService (InstancePerLifetimeScope)
        └─ method GetUserId [L72]
          └─ implementation IUserService.GetUserId [L18-L18]
          └─ ... (no implementation details available)
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L92]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L74]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L72]

[web] GET /api/entities/{id}  (Cirrus.Api.Controllers.Firm.EntitiesController.Get)  [L70–L88] status=200 [auth=user]
  └─ maps_to EntityDto [L85]
    └─ automapper.registration CirrusMappingProfile (Entity->EntityDto) [L165]
  └─ maps_to EntityDto [L75]
    └─ automapper.registration CirrusMappingProfile (Entity->EntityDto) [L165]
  └─ calls EntityRepository.ReadQuery [L75]
  └─ query Entity [L75]
  └─ uses_service IControlledRepository<Entity>
    └─ method ReadQuery [L75]
      └─ ... (no implementation details available)
  └─ sends_request CanIAccessEntityQuery [L84]
    └─ handled_by Cirrus.ApplicationService.Firm.Queries.CanIAccessEntityQueryHandler.Handle [L41–L99]
      └─ uses_service TenantService
        └─ method GetCurrentTenant [L72]
          └─ implementation Cirrus.Central.Tenants.TenantService.GetCurrentTenant [L26-L139]
          └─ implementation Cirrus.Central.Tenants.TenantService.GetCurrentTenant [L26-L139]
      └─ uses_service IControlledRepository<Entity>
        └─ method ReadQuery [L81]
          └─ ... (no implementation details available)
      └─ uses_service IRequestInfoService (AddScoped)
        └─ method IsValidServiceAccountRequest [L67]
          └─ implementation IRequestInfoService.IsValidServiceAccountRequest [L20-L20]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L83]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)
      └─ uses_service IUserService (InstancePerLifetimeScope)
        └─ method GetUserId [L72]
          └─ implementation IUserService.GetUserId [L18-L18]
          └─ ... (no implementation details available)
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L92]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L74]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L72]
  └─ sends_request CanIAccessEntityQuery [L80]
    └─ handled_by Cirrus.ApplicationService.Firm.Queries.CanIAccessEntityQueryHandler.Handle [L41–L99]
      └─ uses_service TenantService
        └─ method GetCurrentTenant [L72]
          └─ implementation Cirrus.Central.Tenants.TenantService.GetCurrentTenant [L26-L139]
          └─ implementation Cirrus.Central.Tenants.TenantService.GetCurrentTenant [L26-L139]
      └─ uses_service IControlledRepository<Entity>
        └─ method ReadQuery [L81]
          └─ ... (no implementation details available)
      └─ uses_service IRequestInfoService (AddScoped)
        └─ method IsValidServiceAccountRequest [L67]
          └─ implementation IRequestInfoService.IsValidServiceAccountRequest [L20-L20]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L83]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)
      └─ uses_service IUserService (InstancePerLifetimeScope)
        └─ method GetUserId [L72]
          └─ implementation IUserService.GetUserId [L18-L18]
          └─ ... (no implementation details available)
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L92]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L74]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L72]

[web] GET /api/entities/  (Cirrus.Api.Controllers.Firm.EntitiesController.Search)  [L48–L64] status=200 [auth=user]
  └─ sends_request FindEntitiesQuery [L63]
    └─ handled_by Cirrus.ApplicationService.Firm.Queries.FindEntitiesQueryHandler.Handle [L70–L200]
      └─ uses_service FirmSettingsService
        └─ method GetCurrentSettings [L129]
          └─ implementation Cirrus.ApplicationService.Firm.FirmSettingsService.GetCurrentSettings [L15-L112]
      └─ uses_service IControlledRepository<Entity>
        └─ method ReadQuery [L89]
          └─ ... (no implementation details available)
      └─ uses_service IUserService (InstancePerLifetimeScope)
        └─ method GetUserId [L91]
          └─ implementation IUserService.GetUserId [L18-L18]
          └─ ... (no implementation details available)

[web] PUT /api/entities/{id:Guid}  (Cirrus.Api.Controllers.Firm.EntitiesController.Update)  [L111–L123] status=200 [auth=user]
  └─ calls EntityRepository.WriteQuery [L114]
  └─ calls ClientRepository.WriteQuery [L116]
  └─ write Client [L116]
  └─ write Entity [L114]
  └─ uses_service IControlledRepository<Client>
    └─ method WriteQuery [L116]
      └─ ... (no implementation details available)
  └─ uses_service IControlledRepository<Entity>
    └─ method WriteQuery [L114]
      └─ ... (no implementation details available)
  └─ uses_service IFirmSettingsService (AddScoped)
    └─ method GetFirmJurisdictions [L118]
      └─ implementation Cirrus.ApplicationService.Firm.FirmSettingsService.GetFirmJurisdictions [L15-L112]
  └─ sends_request CanIAccessEntityQuery [L115]
    └─ handled_by Cirrus.ApplicationService.Firm.Queries.CanIAccessEntityQueryHandler.Handle [L41–L99]
      └─ uses_service TenantService
        └─ method GetCurrentTenant [L72]
          └─ implementation Cirrus.Central.Tenants.TenantService.GetCurrentTenant [L26-L139]
          └─ implementation Cirrus.Central.Tenants.TenantService.GetCurrentTenant [L26-L139]
      └─ uses_service IControlledRepository<Entity>
        └─ method ReadQuery [L81]
          └─ ... (no implementation details available)
      └─ uses_service IRequestInfoService (AddScoped)
        └─ method IsValidServiceAccountRequest [L67]
          └─ implementation IRequestInfoService.IsValidServiceAccountRequest [L20-L20]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L83]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)
      └─ uses_service IUserService (InstancePerLifetimeScope)
        └─ method GetUserId [L72]
          └─ implementation IUserService.GetUserId [L18-L18]
          └─ ... (no implementation details available)
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L92]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L74]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L72]

[web] POST /api/offices/  (Cirrus.Api.Controllers.Firm.OfficesController.Create)  [L79–L85] status=201 [auth=user,admin]
  └─ calls OfficeRepository.Add [L83]
  └─ insert Office [L83]
    └─ reads_from Offices
  └─ uses_service IControlledRepository<Office>
    └─ method Add [L83]
      └─ ... (no implementation details available)

[web] DELETE /api/offices/{id:Guid}  (Cirrus.Api.Controllers.Firm.OfficesController.Delete)  [L101–L107] status=200 [auth=user,admin]
  └─ calls OfficeRepository.Remove [L105]
  └─ calls OfficeRepository.WriteQuery [L104]
  └─ delete Office [L105]
    └─ reads_from Offices
  └─ write Office [L104]
    └─ reads_from Offices
  └─ uses_service IControlledRepository<Office>
    └─ method WriteQuery [L104]
      └─ ... (no implementation details available)

[web] GET /api/offices/{id}  (Cirrus.Api.Controllers.Firm.OfficesController.Get)  [L43–L49] status=200 [auth=user]
  └─ maps_to OfficeDto [L46]
    └─ automapper.registration ExternalApiMappingProfile (Office->OfficeDto) [L54]
    └─ automapper.registration WorkpapersMappingProfile (Office->OfficeDto) [L181]
    └─ automapper.registration DataverseMappingProfile (Office->OfficeDto) [L138]
    └─ automapper.registration CirrusMappingProfile (Office->OfficeDto) [L128]
  └─ calls OfficeRepository.ReadQuery [L46]
  └─ query Office [L46]
    └─ reads_from Offices
  └─ uses_service IControlledRepository<Office>
    └─ method ReadQuery [L46]
      └─ ... (no implementation details available)

[web] GET /api/offices/  (Cirrus.Api.Controllers.Firm.OfficesController.GetAll)  [L58–L73] status=200 [auth=user]
  └─ maps_to OfficeLightDto [L68]
    └─ automapper.registration WorkpapersMappingProfile (Office->OfficeLightDto) [L179]
    └─ automapper.registration DataverseMappingProfile (Office->OfficeLightDto) [L141]
    └─ automapper.registration CirrusMappingProfile (Office->OfficeLightDto) [L129]
  └─ calls OfficeRepository.ReadQuery [L68]
  └─ query Office [L68]
    └─ reads_from Offices
  └─ uses_service IControlledRepository<Office>
    └─ method ReadQuery [L68]
      └─ ... (no implementation details available)
  └─ uses_service IFirmSettingsService (AddScoped)
    └─ method GetCurrentSettings [L66]
      └─ implementation Cirrus.ApplicationService.Firm.FirmSettingsService.GetCurrentSettings [L15-L112]
  └─ uses_service IUserService (InstancePerLifetimeScope)
    └─ method IsInRole [L61]
      └─ implementation IUserService.IsInRole [L18-L18]
      └─ ... (no implementation details available)

[web] PUT /api/offices/{id}  (Cirrus.Api.Controllers.Firm.OfficesController.Update)  [L90–L96] status=200 [auth=user,admin]
  └─ calls OfficeRepository.WriteQuery [L93]
  └─ write Office [L93]
    └─ reads_from Offices
  └─ uses_service IControlledRepository<Office>
    └─ method WriteQuery [L93]
      └─ ... (no implementation details available)

[web] POST /api/officeUsers/  (Cirrus.Api.Controllers.Firm.OfficeUsersController.Create)  [L73–L79] status=201 [auth=user,admin]
  └─ calls OfficeUserRepository.Add [L77]
  └─ insert OfficeUser [L77]
    └─ reads_from OfficeUsers
  └─ uses_service IControlledRepository<OfficeUser>
    └─ method Add [L77]
      └─ ... (no implementation details available)

[web] DELETE /api/officeUsers/{id:int}  (Cirrus.Api.Controllers.Firm.OfficeUsersController.Delete)  [L95–L101] status=200 [auth=user,admin]
  └─ calls OfficeUserRepository.Remove [L99]
  └─ calls OfficeUserRepository.WriteQuery [L98]
  └─ delete OfficeUser [L99]
    └─ reads_from OfficeUsers
  └─ write OfficeUser [L98]
    └─ reads_from OfficeUsers
  └─ uses_service IControlledRepository<OfficeUser>
    └─ method WriteQuery [L98]
      └─ ... (no implementation details available)

[web] GET /api/officeUsers/{id}  (Cirrus.Api.Controllers.Firm.OfficeUsersController.Get)  [L41–L47] status=200 [auth=user]
  └─ maps_to OfficeUserDto [L44]
    └─ automapper.registration DataverseMappingProfile (OfficeUser->OfficeUserDto) [L143]
    └─ automapper.registration CirrusMappingProfile (OfficeUser->OfficeUserDto) [L130]
  └─ calls OfficeUserRepository.ReadQuery [L44]
  └─ query OfficeUser [L44]
    └─ reads_from OfficeUsers
  └─ uses_service IControlledRepository<OfficeUser>
    └─ method ReadQuery [L44]
      └─ ... (no implementation details available)

[web] GET /api/officeUsers/foroffice/{officeId:Guid}  (Cirrus.Api.Controllers.Firm.OfficeUsersController.GetAllForOffice)  [L56–L67] status=200 [auth=user]
  └─ maps_to OfficeUserWithUserDto [L61]
    └─ automapper.registration CirrusMappingProfile (OfficeUser->OfficeUserWithUserDto) [L131]
    └─ automapper.registration DataverseMappingProfile (OfficeUser->OfficeUserWithUserDto) [L144]
  └─ calls OfficeUserRepository.ReadQuery [L61]
  └─ query OfficeUser [L61]
    └─ reads_from OfficeUsers
  └─ uses_service IControlledRepository<OfficeUser>
    └─ method ReadQuery [L61]
      └─ ... (no implementation details available)

[web] PUT /api/officeUsers/{id}  (Cirrus.Api.Controllers.Firm.OfficeUsersController.Update)  [L84–L90] status=200 [auth=user,admin]
  └─ calls OfficeUserRepository.WriteQuery [L87]
  └─ write OfficeUser [L87]
    └─ reads_from OfficeUsers
  └─ uses_service IControlledRepository<OfficeUser>
    └─ method WriteQuery [L87]
      └─ ... (no implementation details available)

[web] POST /api/teams/  (Cirrus.Api.Controllers.Firm.TeamsController.Create)  [L68–L74] status=201 [auth=user,admin]
  └─ calls TeamRepository.Add [L72]
  └─ insert Team [L72]
    └─ reads_from Teams
  └─ uses_service IControlledRepository<Team>
    └─ method Add [L72]
      └─ ... (no implementation details available)

[web] DELETE /api/teams/{id:Guid}  (Cirrus.Api.Controllers.Firm.TeamsController.Delete)  [L92–L98] status=200 [auth=user,admin]
  └─ calls TeamRepository.Remove [L96]
  └─ calls TeamRepository.WriteQuery [L95]
  └─ delete Team [L96]
    └─ reads_from Teams
  └─ write Team [L95]
    └─ reads_from Teams
  └─ uses_service IControlledRepository<Team>
    └─ method WriteQuery [L95]
      └─ ... (no implementation details available)

[web] GET /api/teams/{id}  (Cirrus.Api.Controllers.Firm.TeamsController.Get)  [L40–L46] status=200 [auth=user]
  └─ maps_to TeamDto [L43]
    └─ automapper.registration DataverseMappingProfile (Team->TeamDto) [L149]
    └─ automapper.registration ExternalApiMappingProfile (Team->TeamDto) [L75]
    └─ automapper.registration CirrusMappingProfile (Team->TeamDto) [L138]
    └─ automapper.registration WorkpapersMappingProfile (Team->TeamDto) [L190]
  └─ calls TeamRepository.ReadQuery [L43]
  └─ query Team [L43]
    └─ reads_from Teams
  └─ uses_service IControlledRepository<Team>
    └─ method ReadQuery [L43]
      └─ ... (no implementation details available)

[web] GET /api/teams/  (Cirrus.Api.Controllers.Firm.TeamsController.GetAll)  [L55–L62] status=200 [auth=user]
  └─ maps_to TeamLightDto [L58]
    └─ automapper.registration CirrusMappingProfile (Team->TeamLightDto) [L139]
    └─ automapper.registration WorkpapersMappingProfile (Team->TeamLightDto) [L188]
    └─ automapper.registration DataverseMappingProfile (Team->TeamLightDto) [L150]
  └─ calls TeamRepository.ReadQuery [L58]
  └─ query Team [L58]
    └─ reads_from Teams
  └─ uses_service IControlledRepository<Team>
    └─ method ReadQuery [L58]
      └─ ... (no implementation details available)

[web] PUT /api/teams/{id}  (Cirrus.Api.Controllers.Firm.TeamsController.Update)  [L79–L87] status=200 [auth=user,user]
  └─ calls TeamRepository.WriteQuery [L84]
  └─ write Team [L84]
    └─ reads_from Teams
  └─ uses_service IControlledRepository<Team>
    └─ method WriteQuery [L84]
      └─ ... (no implementation details available)

[web] POST /api/team-users/  (Cirrus.Api.Controllers.Firm.TeamUsersController.Create)  [L74–L80] status=201 [auth=Authentication.UserPolicy,Authentication.AdminPolicy]
  └─ calls TeamUserRepository.Add [L78]
  └─ insert TeamUser [L78]
    └─ reads_from TeamUsers
  └─ uses_service IControlledRepository<TeamUser>
    └─ method Add [L78]
      └─ ... (no implementation details available)

[web] DELETE /api/team-users/{id:int}  (Cirrus.Api.Controllers.Firm.TeamUsersController.Delete)  [L96–L102] status=200 [auth=Authentication.UserPolicy,Authentication.AdminPolicy]
  └─ calls TeamUserRepository.Remove [L100]
  └─ calls TeamUserRepository.WriteQuery [L99]
  └─ delete TeamUser [L100]
    └─ reads_from TeamUsers
  └─ write TeamUser [L99]
    └─ reads_from TeamUsers
  └─ uses_service IControlledRepository<TeamUser>
    └─ method WriteQuery [L99]
      └─ ... (no implementation details available)

[web] GET /api/team-users/{id}  (Cirrus.Api.Controllers.Firm.TeamUsersController.Get)  [L42–L48] status=200 [auth=Authentication.UserPolicy]
  └─ maps_to TeamUserDto [L45]
    └─ automapper.registration DataverseMappingProfile (TeamUser->TeamUserDto) [L151]
    └─ automapper.registration CirrusMappingProfile (TeamUser->TeamUserDto) [L140]
  └─ calls TeamUserRepository.ReadQuery [L45]
  └─ query TeamUser [L45]
    └─ reads_from TeamUsers
  └─ uses_service IControlledRepository<TeamUser>
    └─ method ReadQuery [L45]
      └─ ... (no implementation details available)

[web] GET /api/team-users/for-team/{teamId:Guid}  (Cirrus.Api.Controllers.Firm.TeamUsersController.GetAllForTeam)  [L57–L68] status=200 [auth=Authentication.UserPolicy]
  └─ maps_to TeamUserWithUserDto [L62]
    └─ automapper.registration DataverseMappingProfile (TeamUser->TeamUserWithUserDto) [L152]
    └─ automapper.registration CirrusMappingProfile (TeamUser->TeamUserWithUserDto) [L141]
  └─ calls TeamUserRepository.ReadQuery [L62]
  └─ query TeamUser [L62]
    └─ reads_from TeamUsers
  └─ uses_service IControlledRepository<TeamUser>
    └─ method ReadQuery [L62]
      └─ ... (no implementation details available)

[web] PUT /api/team-users/{id}  (Cirrus.Api.Controllers.Firm.TeamUsersController.Update)  [L85–L91] status=200 [auth=Authentication.UserPolicy,Authentication.AdminPolicy]
  └─ calls TeamUserRepository.WriteQuery [L88]
  └─ write TeamUser [L88]
    └─ reads_from TeamUsers
  └─ uses_service IControlledRepository<TeamUser>
    └─ method WriteQuery [L88]
      └─ ... (no implementation details available)

[web] POST /api/users/  (Cirrus.Api.Controllers.Firm.UsersController.Create)  [L129–L135] status=201 [auth=Authentication.UserPolicy,Authentication.AdminPolicy]
  └─ calls UserRepository.Add [L133]
  └─ insert User [L133]
  └─ uses_service IControlledRepository<User>
    └─ method Add [L133]
      └─ ... (no implementation details available)

[web] GET /api/users/{id}  (Cirrus.Api.Controllers.Firm.UsersController.Get)  [L99–L105] status=200 [auth=Authentication.UserPolicy,Authentication.AdminPolicy]
  └─ maps_to UserDto [L102]
    └─ automapper.registration ExternalApiMappingProfile (User->UserDto) [L61]
    └─ automapper.registration CirrusMappingProfile (User->UserDto) [L110]
    └─ automapper.registration WorkpapersMappingProfile (User->UserDto) [L106]
    └─ automapper.registration DataverseMappingProfile (User->UserDto) [L77]
  └─ calls UserRepository.ReadQuery [L102]
  └─ query User [L102]
  └─ uses_service IControlledRepository<User>
    └─ method ReadQuery [L102]
      └─ ... (no implementation details available)

[web] GET /api/users/intercom-profile  (Cirrus.Api.Controllers.Firm.UsersController.IntercomUserProfile)  [L85–L90] status=200 [auth=Authentication.UserPolicy]

[web] POST /api/users/{userId}/request-identity-account  (Cirrus.Api.Controllers.Firm.UsersController.Invite)  [L165–L172] status=201 [auth=Authentication.UserPolicy,Authentication.AdminPolicy]
  └─ calls UserRepository.WriteQuery [L168]
  └─ write User [L168]
  └─ uses_service IControlledRepository<User>
    └─ method WriteQuery [L168]
      └─ ... (no implementation details available)

[web] GET /api/users/profile  (Cirrus.Api.Controllers.Firm.UsersController.Profile)  [L59–L76] status=200 [auth=Authentication.UserPolicy]
  └─ maps_to ReportSettingsLightDto [L68]
    └─ automapper.registration CirrusMappingProfile (ReportSettings->ReportSettingsLightDto) [L532]
  └─ maps_to FirmLightDto [L73]
  └─ maps_to UserProfileDto [L62]
    └─ automapper.registration DataverseMappingProfile (User->UserProfileDto) [L93]
    └─ automapper.registration CirrusMappingProfile (User->UserProfileDto) [L115]
    └─ automapper.registration WorkpapersMappingProfile (User->UserProfileDto) [L109]
  └─ calls ReportSettingsRepository.ReadQuery [L68]
  └─ calls UserRepository.ReadQuery [L62]
  └─ query ReportSettings [L68]
    └─ reads_from ReportSettings
  └─ query User [L62]
  └─ uses_service IControlledRepository<ReportSettings>
    └─ method ReadQuery [L68]
      └─ ... (no implementation details available)
  └─ uses_service IControlledRepository<User>
    └─ method ReadQuery [L62]
      └─ ... (no implementation details available)
  └─ uses_service IMapper
    └─ method Map [L73]
      └─ ... (no implementation details available)
  └─ uses_service IUserService (InstancePerLifetimeScope)
    └─ method GetUserId [L64]
      └─ implementation IUserService.GetUserId [L18-L18]
      └─ ... (no implementation details available)
  └─ sends_request GetFirmForCurrentRequestQuery [L73]
    └─ handled_by Cirrus.Central.Queries.GetFirmForCurrentRequestQueryHandler.Handle [L19–L55]
      └─ uses_service IHttpContextAccessor
        └─ method HttpContext [L38]
          └─ ... (no implementation details available)
      └─ uses_service ILogger<GetFirmForCurrentRequestQueryHandler>
        └─ method LogWarning [L47]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method Process [L51]
          └─ implementation IRequestProcessor.Process [L9-L9]
          └─ ... (no implementation details available)
      └─ logs ILogger<GetFirmForCurrentRequestQueryHandler> [Warning] [L47]

[web] POST /api/users/{userId}/resendInvite  (Cirrus.Api.Controllers.Firm.UsersController.ResendInvite)  [L174–L183] status=201 [auth=Authentication.UserPolicy,Authentication.AdminPolicy]
  └─ calls UserRepository.ReadQuery [L177]
  └─ query User [L177]
  └─ uses_service IControlledRepository<User>
    └─ method ReadQuery [L177]
      └─ ... (no implementation details available)
  └─ uses_service ITenantService (AddScoped)
    └─ method GetCurrentTenant [L181]
      └─ implementation ITenantService.GetCurrentTenant [L14-L14]
      └─ ... (no implementation details available)

[web] GET /api/users/  (Cirrus.Api.Controllers.Firm.UsersController.Search)  [L114–L123] status=200 [auth=Authentication.UserPolicy]
  └─ sends_request FindUsersQuery [L122]
    └─ handled_by Cirrus.ApplicationService.Firm.Queries.FindUsersQueryHandler.Handle [L60–L143]
      └─ uses_service IControlledRepository<User>
        └─ method ReadQuery [L74]
          └─ ... (no implementation details available)

[web] PUT /api/users/{id}  (Cirrus.Api.Controllers.Firm.UsersController.Update)  [L155–L163] status=200 [auth=Authentication.UserPolicy]
  └─ calls UserRepository.WriteQuery [L160]
  └─ write User [L160]
  └─ uses_service IControlledRepository<User>
    └─ method WriteQuery [L160]
      └─ ... (no implementation details available)
  └─ uses_service IUserService (InstancePerLifetimeScope)
    └─ method GetUserId [L158]
      └─ implementation IUserService.GetUserId [L18-L18]
      └─ ... (no implementation details available)

[web] GET /api/health  (Cirrus.Api.Controllers.HealthController.Alive)  [L10–L14] status=200 [AllowAnonymous]

[web] GET /api/internal/accounting/files/exist-for-client/{dataverseClientId:guid}  (Cirrus.Api.Controllers.Internal.FilesController.CheckForClientFiles)  [L38–L47] status=200 [auth=Authentication.MachineToMachinePolicy,Authentication.RequireTenantIdPolicy]
  └─ calls FileRepository.ReadQuery [L41]
  └─ query File [L41]
    └─ reads_from Files
  └─ uses_service IControlledRepository<File>
    └─ method ReadQuery [L41]
      └─ ... (no implementation details available)

[web] GET /api/internal/ledger/standard-charts/{standardChartId:int}/accounts/hierarchy  (Cirrus.Api.Controllers.Internal.StandardChartController.GetAccountsHierarchy)  [L46–L71] status=200 [auth=Authentication.MachineToMachinePolicy,Authentication.RequireTenantIdPolicy]
  └─ maps_to StandardChartDto [L54]
    └─ automapper.registration ExternalApiMappingProfile (StandardChart->StandardChartDto) [L78]
    └─ automapper.registration CirrusMappingProfile (StandardChart->StandardChartDto) [L240]
  └─ calls StandardChartRepository.ReadQuery [L54]
  └─ query StandardChart [L54]
    └─ reads_from StandardCharts
  └─ uses_service IControlledRepository<StandardChart>
    └─ method ReadQuery [L54]
      └─ ... (no implementation details available)

[web] GET /loaderio-e3b65372cc4066290ec67078a9c6cd0a  (Cirrus.Api.Controllers.LoadTestController.LoaderIo)  [L10–L14] status=200 [AllowAnonymous]

[web] GET /loaderio-ea179ca138937c6992ea6d4e6e516fe6  (Cirrus.Api.Controllers.LoadTestController.NewLoaderIo)  [L16–L20] status=200 [AllowAnonymous]

[web] GET /api/documents/upload  (Cirrus.Api.Controllers.UploadController.UploadFileGet)  [L23–L29] status=200 [auth=Authentication.UserPolicy]

[web] POST /api/documents/upload  (Cirrus.Api.Controllers.UploadController.UploadFilePost)  [L31–L48] status=201 [auth=Authentication.UserPolicy]

[web] GET /api/workpapers/auto-reconcile/creditors  (Cirrus.Api.Controllers.Workpapers.AutoReconcileController.GetCreditors)  [L45–L51] status=200 [auth=Authentication.UserPolicy]
  └─ uses_service ApiService (SingleInstance)
    └─ method GetApiMethods [L49]
      └─ implementation Cirrus.ApplicationService.Accounting.Services.ApiService.GetApiMethods [L14-L75]

[web] GET /api/workpapers/auto-reconcile/debtors  (Cirrus.Api.Controllers.Workpapers.AutoReconcileController.GetDebtors)  [L37–L43] status=200 [auth=Authentication.UserPolicy]
  └─ uses_service ApiService (SingleInstance)
    └─ method GetApiMethods [L41]
      └─ implementation Cirrus.ApplicationService.Accounting.Services.ApiService.GetApiMethods [L14-L75]

[web] GET /api/workpapers/auto-reconcile  (Cirrus.Api.Controllers.Workpapers.AutoReconcileController.GetSourceInfo)  [L61–L75] status=200 [auth=Authentication.UserPolicy]
  └─ calls DatasetRepository.ReadQuery [L65]
  └─ query Dataset [L65]
  └─ uses_service IControlledRepository<Dataset>
    └─ method ReadQuery [L65]
      └─ ... (no implementation details available)
  └─ sends_request CanIAccessDatasetQuery [L63]
    └─ handled_by Cirrus.ApplicationService.Accounting.Queries.CanIAccessDatasetQueryHandler.Handle [L58–L140]
      └─ uses_service IControlledRepository<Dataset>
        └─ method ReadQuery [L127]
          └─ ... (no implementation details available)
      └─ uses_service IRequestInfoService (AddScoped)
        └─ method IsValidServiceAccountRequest [L101]
          └─ implementation IRequestInfoService.IsValidServiceAccountRequest [L20-L20]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L129]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)
      └─ uses_service ITenantService (AddScoped)
        └─ method GetCurrentTenant [L88]
          └─ implementation ITenantService.GetCurrentTenant [L14-L14]
          └─ ... (no implementation details available)
      └─ uses_service IUserService (InstancePerLifetimeScope)
        └─ method GetUserId [L103]
          └─ implementation IUserService.GetUserId [L18-L18]
          └─ ... (no implementation details available)
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L116]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L106]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L103]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L90]
      └─ uses_cache IDistributedCache.CreateDatasetLockKey [write] [L88]

[web] GET /api/workpapers/auto-reconcile/wages  (Cirrus.Api.Controllers.Workpapers.AutoReconcileController.GetWages)  [L53–L59] status=200 [auth=Authentication.UserPolicy]
  └─ uses_service ApiService (SingleInstance)
    └─ method GetApiMethods [L57]
      └─ implementation Cirrus.ApplicationService.Accounting.Services.ApiService.GetApiMethods [L14-L75]

[web] GET /ledger/v1/datasets/{datasetId:Guid}  (Cirrus.Api.External.Controllers.v1.Ledger.Datasets.DatasetsController.Get)  [L79–L84] status=200
  └─ maps_to DatasetDto [L82]
    └─ automapper.registration CirrusMappingProfile (Dataset->DatasetDto) [L202]
    └─ automapper.registration ExternalApiMappingProfile (Dataset->DatasetDto) [L64]
  └─ calls DatasetRepository.ReadQuery [L82]
  └─ query Dataset [L82]
  └─ uses_service IControlledRepository<Dataset>
    └─ method ReadQuery [L82]
      └─ ... (no implementation details available)

[web] GET /ledger/v1/datasets/detailed  (Cirrus.Api.External.Controllers.v1.Ledger.Datasets.DatasetsController.GetDatasetsDetailedQuery)  [L64–L71] status=200
  └─ calls DatasetRepository.ReadQuery [L67]
  └─ query Dataset [L67]
  └─ uses_service IControlledRepository<Dataset>
    └─ method ReadQuery [L67]
      └─ ... (no implementation details available)

[web] GET /ledger/v1/datasets/  (Cirrus.Api.External.Controllers.v1.Ledger.Datasets.DatasetsController.GetDatasetsMinimalQuery)  [L45–L52] status=200
  └─ calls DatasetRepository.ReadQuery [L48]
  └─ query Dataset [L48]
  └─ uses_service IControlledRepository<Dataset>
    └─ method ReadQuery [L48]
      └─ ... (no implementation details available)

[web] GET /ledger/v1/files/{fileId:Guid}  (Cirrus.Api.External.Controllers.v1.Ledger.FilesController.Get)  [L67–L72] status=200
  └─ maps_to FileDto [L70]
    └─ automapper.registration CirrusMappingProfile (File->FileDto) [L199]
    └─ automapper.registration ExternalApiMappingProfile (File->FileDto) [L39]
  └─ calls FileRepository.ReadQuery [L70]
  └─ query File [L70]
    └─ reads_from Files
  └─ uses_service IControlledRepository<File>
    └─ method ReadQuery [L70]
      └─ ... (no implementation details available)

[web] GET /ledger/v1/files/{fileId:Guid}/datasets  (Cirrus.Api.External.Controllers.v1.Ledger.FilesController.GetFileDatasets)  [L80–L87] status=200
  └─ maps_to DatasetDto [L83]
    └─ automapper.registration CirrusMappingProfile (Dataset->DatasetDto) [L202]
    └─ automapper.registration ExternalApiMappingProfile (Dataset->DatasetDto) [L64]
  └─ calls DatasetRepository.ReadQuery [L83]
  └─ query Dataset [L83]
  └─ uses_service IControlledRepository<Dataset>
    └─ method ReadQuery [L83]
      └─ ... (no implementation details available)

[web] GET /ledger/v1/files/{fileId:Guid}/entities  (Cirrus.Api.External.Controllers.v1.Ledger.FilesController.GetFileEntities)  [L95–L104] status=200
  └─ maps_to EntityReferenceDto [L98]
  └─ calls FileRepository.ReadQuery [L98]
  └─ query File [L98]
    └─ reads_from Files
  └─ uses_service IControlledRepository<File>
    └─ method ReadQuery [L98]
      └─ ... (no implementation details available)

[web] GET /ledger/v1/files/{fileId:Guid}/entities/{entityId:Guid}/datasets  (Cirrus.Api.External.Controllers.v1.Ledger.FilesController.GetFileEntitiesDatasets)  [L113–L120] status=200
  └─ maps_to DatasetDto [L116]
    └─ automapper.registration CirrusMappingProfile (Dataset->DatasetDto) [L202]
    └─ automapper.registration ExternalApiMappingProfile (Dataset->DatasetDto) [L64]
  └─ calls DatasetRepository.ReadQuery [L116]
  └─ query Dataset [L116]
  └─ uses_service IControlledRepository<Dataset>
    └─ method ReadQuery [L116]
      └─ ... (no implementation details available)

[web] GET /ledger/v1/files/  (Cirrus.Api.External.Controllers.v1.Ledger.FilesController.GetFilesAsync)  [L48–L59] status=200
  └─ calls FileRepository.ReadQuery [L53]
  └─ query File [L53]
    └─ reads_from Files
  └─ uses_service IControlledRepository<File>
    └─ method ReadQuery [L53]
      └─ ... (no implementation details available)

[web] GET /ledger/v1/standard-charts/{standardChartId:int}  (Cirrus.Api.External.Controllers.v1.Ledger.StandardChartsController.Get)  [L45–L51] status=200
  └─ maps_to StandardChartDto [L48]
    └─ automapper.registration ExternalApiMappingProfile (StandardChart->StandardChartDto) [L78]
    └─ automapper.registration CirrusMappingProfile (StandardChart->StandardChartDto) [L240]
  └─ calls StandardChartRepository.ReadQuery [L48]
  └─ query StandardChart [L48]
    └─ reads_from StandardCharts
  └─ uses_service IControlledRepository<StandardChart>
    └─ method ReadQuery [L48]
      └─ ... (no implementation details available)

[web] GET /ledger/v1/standard-charts/{standardChartId:int}/accounts  (Cirrus.Api.External.Controllers.v1.Ledger.StandardChartsController.GetAccountsHierarchy)  [L60–L81] status=200
  └─ uses_service ICirrusProxyService (AddScoped)
    └─ method Get [L80]
      └─ implementation Cirrus.Api.External.Features.CirrusProxy.CirrusProxyService.Get [L10-L73]
        └─ uses_client CirrusClient [L26]
        └─ uses_service CirrusClient
          └─ method Get [L26]
            └─ ... (no implementation details available)

[web] POST /api/reportFile/lodgement/status  (Cirrus.Api.Features.Reporting.Lodgement.ReportFileLodgementStatusController.Post)  [L14–L22] status=201
  └─ sends_request UpdateReportFileLodgementStatusCommand [L19]
    └─ handled_by Cirrus.ApplicationService.Accounting.Reports.Lodgement.UpdateReportFileLodgementStatusCommandHandler.Handle [L30–L65]
      └─ uses_service IControlledRepository<PublishedReportFile>
        └─ method WriteQuery [L49]
          └─ ... (no implementation details available)
    └─ handled_by Cirrus.Tests.Integration.Database.Accounting.Reports.TestUpdateReportFileLodgementStatusCommandHandler.Handle [L115–L126]
      └─ uses_service IControlledRepository<PublishedReportFile>
        └─ method WriteQuery [L121]
          └─ ... (no implementation details available)

[web] DELETE /api/accounting-file/{fileId}/journal/{sourceJournalId}  (DataGet.Api.Controllers.Connections.AccountingFileController.DeleteJournal)  [L99–L107] status=200 [auth=Authentication.MachineToMachinePolicy]
  └─ sends_request DeleteJournalCommand [L103]
    └─ handled_by Cirrus.Connections.DataGet.Commands.DeleteJournalCommandHandler.Handle [L23–L56]
      └─ uses_client IDatagetClient [L52]
      └─ uses_service IControlledRepository<Dataset>
        └─ method ReadQuery [L39]
          └─ ... (no implementation details available)
      └─ uses_service IDatagetClient (InstancePerLifetimeScope)
        └─ method DeleteJournalAsync [L52]
          └─ ... (no implementation details available)
      └─ uses_service IDatagetFileIdService (InstancePerLifetimeScope)
        └─ method GetFileIdFromSource [L44]
          └─ implementation Cirrus.Connections.DataGet.Services.DatagetFileIdService.GetFileIdFromSource [L14-L37]

[web] GET /api/accounting-file/{fileId}/accounts  (DataGet.Api.Controllers.Connections.AccountingFileController.GetAccounts)  [L44–L52] status=200 [auth=Authentication.MachineToMachinePolicy]
  └─ sends_request GetAccountsQuery [L48]
    └─ handled_by Cirrus.Connections.DataGet.Queries.GetAccountsQueryHandler.Handle [L25–L59]
      └─ uses_client DataGetClient [L40]
        └─ calls GetAccounts (GET /api/accounting-file/{fileId}/accounts?apiType={*}&password={*}&username={*}, method=GetAccountsAsync, target=DataGet.Api, query=apiType={*}&password={*}&username={*}) [L65]
          └─ target_service DataGet.Api
      └─ uses_service DatagetFileIdService
        └─ method GetFileIdFromSource [L38]
          └─ implementation Cirrus.Connections.DataGet.Services.DatagetFileIdService.GetFileIdFromSource [L14-L37]
      └─ uses_service DataGetClient
        └─ method GetAccountsAsync [L40]
          └─ implementation Cirrus.Connections.DataGet.Client.DataGetClient.GetAccountsAsync [L15-L302]
            └─ calls GetAccounts [L106]

[web] GET /api/accounting-file/{fileId}/creditors  (DataGet.Api.Controllers.Connections.AccountingFileController.GetCreditors)  [L109–L117] status=200 [auth=Authentication.MachineToMachinePolicy]
  └─ sends_request GetCreditorsQuery [L113]
    └─ handled_by Cirrus.Connections.DataGet.Queries.GetCreditorsQueryHandler.Handle [L25–L57]
      └─ uses_client DataGetClient [L53]
        └─ calls GetCreditors (GET /api/accounting-file/{fileId}/creditors?apiType={*}&endDate={*}&password={*}&sourceAccountSystemId={*}&username={*}, method=GetCreditorsAsync, target=DataGet.Api, query=apiType={*}&endDate={*}&password={*}&sourceAccountSystemId={*}&username={*}) [L156]
          └─ target_service DataGet.Api
      └─ uses_service DatagetFileIdService
        └─ method GetFileIdFromSource [L40]
          └─ implementation Cirrus.Connections.DataGet.Services.DatagetFileIdService.GetFileIdFromSource [L14-L37]
      └─ uses_service DataGetClient
        └─ method GetCreditorsAsync [L53]
          └─ implementation Cirrus.Connections.DataGet.Client.DataGetClient.GetCreditorsAsync [L15-L302]
            └─ calls GetCreditors [L194]
      └─ uses_service IControlledRepository<SourceAccount>
        └─ method ReadQuery [L46]
          └─ ... (no implementation details available)
  └─ returns Creditors [L113]

[web] GET /api/accounting-file/{fileId}/debtors  (DataGet.Api.Controllers.Connections.AccountingFileController.GetDebtors)  [L119–L127] status=200 [auth=Authentication.MachineToMachinePolicy]
  └─ sends_request GetDebtorsQuery [L123]
    └─ handled_by Cirrus.Connections.DataGet.Queries.GetDebtorsQueryHandler.Handle [L25–L56]
      └─ uses_client DataGetClient [L52]
        └─ calls GetDebtors (GET /api/accounting-file/{fileId}/debtors?apiType={*}&endDate={*}&password={*}&sourceAccountSystemId={*}&username={*}, method=GetDebtorsAsync, target=DataGet.Api, query=apiType={*}&endDate={*}&password={*}&sourceAccountSystemId={*}&username={*}) [L171]
          └─ target_service DataGet.Api
      └─ uses_service DatagetFileIdService
        └─ method GetFileIdFromSource [L40]
          └─ implementation Cirrus.Connections.DataGet.Services.DatagetFileIdService.GetFileIdFromSource [L14-L37]
      └─ uses_service DataGetClient
        └─ method GetDebtorsAsync [L52]
          └─ implementation Cirrus.Connections.DataGet.Client.DataGetClient.GetDebtorsAsync [L15-L302]
            └─ calls GetDebtors [L206]
      └─ uses_service IControlledRepository<SourceAccount>
        └─ method ReadQuery [L45]
          └─ ... (no implementation details available)
  └─ returns Debtors [L123]

[web] GET /api/accounting-file/{fileId}/movement-journals  (DataGet.Api.Controllers.Connections.AccountingFileController.GetMovements)  [L54–L63] status=200 [auth=Authentication.MachineToMachinePolicy]
  └─ sends_request GetMovementJournalsQuery [L59]
    └─ handled_by Cirrus.Connections.DataGet.Queries.GetMovementJournalsQueryHandler.Handle [L49–L204]
      └─ uses_client DataGetClient [L81]
        └─ calls GetAccounts (GET /api/accounting-file/{fileId}/accounts?apiType={*}&password={*}&username={*}, method=GetAccountsAsync, target=DataGet.Api, query=apiType={*}&password={*}&username={*}) [L65]
          └─ target_service DataGet.Api
            └─ [web] GET /api/accounting-file/{fileId}/accounts  (DataGet.Api.Controllers.Connections.AccountingFileController.GetAccounts)  [L44–L52] status=200 [auth=Authentication.MachineToMachinePolicy]
              └─ sends_request GetAccountsQuery [L48]
                └─ handled_by Cirrus.Connections.DataGet.Queries.GetAccountsQueryHandler.Handle [L25–L59]
                  └─ uses_client DataGetClient [L40]
                    └─ calls GetAccounts (GET /api/accounting-file/{fileId}/accounts?apiType={*}&password={*}&username={*}, method=GetAccountsAsync, target=DataGet.Api, query=apiType={*}&password={*}&username={*}) [L65]
                      └─ target_service DataGet.Api (see previous expansion)
                  └─ uses_service DatagetFileIdService
                    └─ method GetFileIdFromSource [L38]
                      └─ implementation Cirrus.Connections.DataGet.Services.DatagetFileIdService.GetFileIdFromSource [L14-L37]
                  └─ uses_service DataGetClient
                    └─ method GetAccountsAsync [L40]
                      └─ implementation Cirrus.Connections.DataGet.Client.DataGetClient.GetAccountsAsync [L15-L302]
                        └─ calls GetAccounts [L106]
      └─ uses_service ApiService (SingleInstance)
        └─ method GetFeatures [L77]
          └─ implementation Cirrus.ApplicationService.Accounting.Services.ApiService.GetFeatures [L14-L75]
      └─ uses_service DatagetFileIdService
        └─ method GetFileIdFromSource [L76]
          └─ implementation Cirrus.Connections.DataGet.Services.DatagetFileIdService.GetFileIdFromSource [L14-L37]
      └─ uses_service DataGetClient
        └─ method GetAccountsAsync [L81]
          └─ implementation Cirrus.Connections.DataGet.Client.DataGetClient.GetAccountsAsync [L15-L302]
            └─ calls GetAccounts [L106]
      └─ uses_service IControlledRepository<CachedSourceAccount>
        └─ method Add [L116]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<SourceDivision>
        └─ method ReadQuery [L187]
          └─ ... (no implementation details available)

[web] GET /api/accounting-file/{fileId}/divisions  (DataGet.Api.Controllers.Connections.AccountingFileController.GetSourceDivisions)  [L34–L42] status=200 [auth=Authentication.MachineToMachinePolicy]
  └─ sends_request GetDivisionsQuery [L38]
    └─ handled_by Cirrus.Connections.DataGet.Queries.GetDivisionsQueryHandler.Handle [L22–L54]
      └─ maps_to SourceDivisionDto [L49]
      └─ uses_client DataGetClient [L45]
      └─ uses_service DatagetFileIdService
        └─ method GetFileIdFromSource [L39]
          └─ implementation Cirrus.Connections.DataGet.Services.DatagetFileIdService.GetFileIdFromSource [L14-L37]
      └─ uses_service DataGetClient
        └─ method GetDivisionsAsync [L45]
          └─ implementation Cirrus.Connections.DataGet.Client.DataGetClient.GetDivisionsAsync [L15-L302]
            └─ calls GetSourceDivisions [L95]
      └─ uses_service IControlledRepository<SourceDivision>
        └─ method ReadQuery [L41]
          └─ ... (no implementation details available)
      └─ uses_service IMapper
        └─ method Map [L49]
          └─ ... (no implementation details available)

[web] GET /api/accounting-file/{fileId}/transactions  (DataGet.Api.Controllers.Connections.AccountingFileController.GetTransactions)  [L65–L77] status=200 [auth=Authentication.MachineToMachinePolicy]
  └─ sends_request GetTransactionsQuery [L73]
    └─ handled_by Cirrus.Connections.DataGet.Queries.GetTransactionsQueryHandler.Handle [L34–L73]
      └─ uses_client DataGetClient [L50]
        └─ calls GetTransactions (GET /api/accounting-file/{fileId}/transactions?apiType={*}&endDate={*}&password={*}&startDate={*}&username={*}, method=GetTransactionsAsync, target=DataGet.Api, query=apiType={*}&endDate={*}&password={*}&startDate={*}&username={*}) [L116]
          └─ target_service DataGet.Api
      └─ uses_service DatagetFileIdService
        └─ method GetFileIdFromSource [L48]
          └─ implementation Cirrus.Connections.DataGet.Services.DatagetFileIdService.GetFileIdFromSource [L14-L37]
      └─ uses_service DataGetClient
        └─ method GetTransactionsAsync [L50]
          └─ implementation Cirrus.Connections.DataGet.Client.DataGetClient.GetTransactionsAsync [L15-L302]
            └─ calls GetTransactions [L151]

[web] GET /api/accounting-file/{fileId}/wages  (DataGet.Api.Controllers.Connections.AccountingFileController.GetWages)  [L129–L145] status=200 [auth=Authentication.MachineToMachinePolicy]
  └─ sends_request GetWagesQuery [L134]
    └─ handled_by Cirrus.Connections.DataGet.Queries.GetWagesQueryHandler.Handle [L26–L45]
      └─ uses_client DataGetClient [L41]
        └─ calls GetWages (GET /api/accounting-file/{fileId}/wages?apiType={*}&endDate={*}&jurisdiction={*}&password={*}&startDate={*}&username={*}, method=GetWagesAsync, target=DataGet.Api, query=apiType={*}&endDate={*}&jurisdiction={*}&password={*}&startDate={*}&username={*}) [L189]
          └─ target_service DataGet.Api
        └─ calls GetWages (GET /api/accounting-file/{fileId}/wages?apiType={*}&endDate={*}&jurisdiction={*}&password={*}&startDate={*}&username={*}, method=GetWagesAsync, target=DataGet.Api, query=apiType={*}&endDate={*}&jurisdiction={*}&password={*}&startDate={*}&username={*}) [L190]
          └─ target_service DataGet.Api (see previous expansion)
        └─ calls GetWages (GET /api/accounting-file/{fileId}/wages?apiType={*}&endDate={*}&jurisdiction={*}&password={*}&startDate={*}&username={*}, method=GetWagesAsync, target=DataGet.Api, query=apiType={*}&endDate={*}&jurisdiction={*}&password={*}&startDate={*}&username={*}) [L191]
          └─ target_service DataGet.Api (see previous expansion)
        └─ calls GetWages (GET /api/accounting-file/{fileId}/wages?apiType={*}&endDate={*}&jurisdiction={*}&password={*}&startDate={*}&username={*}, method=GetWagesAsync, target=DataGet.Api, query=apiType={*}&endDate={*}&jurisdiction={*}&password={*}&startDate={*}&username={*}) [L192]
          └─ target_service DataGet.Api (see previous expansion)
        └─ calls GetWages (GET /api/accounting-file/{fileId}/wages?apiType={*}&endDate={*}&jurisdiction={*}&password={*}&startDate={*}&username={*}, method=GetWagesAsync, target=DataGet.Api, query=apiType={*}&endDate={*}&jurisdiction={*}&password={*}&startDate={*}&username={*}) [L193]
          └─ target_service DataGet.Api (see previous expansion)
      └─ uses_service DatagetFileIdService
        └─ method GetFileIdFromSource [L39]
          └─ implementation Cirrus.Connections.DataGet.Services.DatagetFileIdService.GetFileIdFromSource [L14-L37]
      └─ uses_service DataGetClient
        └─ method GetWagesAsync [L41]
          └─ implementation Cirrus.Connections.DataGet.Client.DataGetClient.GetWagesAsync [L15-L302]
            └─ calls GetWages [L218]

[web] GET /api/accounting-file/{fileId}/legacy-bas  (DataGet.Api.Controllers.Connections.AccountingFileController.LegacyGetBAS)  [L167–L175] status=200 [auth=Authentication.MachineToMachinePolicy]

[web] GET /api/accounting-file/{fileId}/legacy-clientdetails  (DataGet.Api.Controllers.Connections.AccountingFileController.LegacyGetClientDetails)  [L147–L155] status=200 [auth=Authentication.MachineToMachinePolicy]

[web] GET /api/accounting-file/{fileId}/legacy-generalledger  (DataGet.Api.Controllers.Connections.AccountingFileController.LegacyGetGeneralLedger)  [L177–L185] status=200 [auth=Authentication.MachineToMachinePolicy]

[web] GET /api/accounting-file/{fileId}/legacy-rental  (DataGet.Api.Controllers.Connections.AccountingFileController.LegacyGetRentalQuery)  [L187–L195] status=200 [auth=Authentication.MachineToMachinePolicy]

[web] GET /api/accounting-file/{fileId}/legacy-trialbalance  (DataGet.Api.Controllers.Connections.AccountingFileController.LegacyGetTrialBalance)  [L157–L165] status=200 [auth=Authentication.MachineToMachinePolicy]

[web] POST /api/accounting-file/{fileId}/accounts  (DataGet.Api.Controllers.Connections.AccountingFileController.PostAccount)  [L89–L97] status=201 [auth=Authentication.MachineToMachinePolicy]
  └─ sends_request PostAccountCommand [L93]
    └─ handled_by DataGet.Connections.App.Commands.PostAccountCommandHandler.Handle [L22–L43]
      └─ uses_service IExternalApiServiceFactory (InstancePerLifetimeScope)
        └─ method GetAccountingApiFromApiType [L32]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L41]
          └─ implementation DataGet.Services.Features.Requests.RequestProcessor.ProcessAsync [L7-L35]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle

[web] POST /api/accounting-file/{fileId}/journal  (DataGet.Api.Controllers.Connections.AccountingFileController.PostJournal)  [L79–L87] status=201 [auth=Authentication.MachineToMachinePolicy]
  └─ sends_request PostJournalCommand [L83]
    └─ handled_by Cirrus.Connections.DataGet.Commands.PostJournalCommandHandler.Handle [L30–L135]
      └─ uses_client IDatagetClient [L82]
      └─ uses_service IControlledRepository<SourceAccount>
        └─ method WriteQuery [L56]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<SourceDivision>
        └─ method ReadQuery [L76]
          └─ ... (no implementation details available)
      └─ uses_service IDatagetClient (InstancePerLifetimeScope)
        └─ method CreateJournalAsync [L82]
          └─ ... (no implementation details available)
      └─ uses_service IDatagetFileIdService (InstancePerLifetimeScope)
        └─ method GetFileIdFromSource [L52]
          └─ implementation Cirrus.Connections.DataGet.Services.DatagetFileIdService.GetFileIdFromSource [L14-L37]
  └─ returns JournalPostResponse [L83]

[web] DELETE /api/connection/{apiType}/disconnect  (DataGet.Api.Controllers.Connections.ConnectionController.Disconnect)  [L90–L98] status=200 [auth=Authentication.MachineToMachinePolicy]
  └─ sends_request DisconnectCommand [L94]
    └─ handled_by DataGet.Connections.App.Commands.DisconnectCommandHandler.Handle [L26–L99]
      └─ uses_service IConnectionContextProvider (InstancePerLifetimeScope)
        └─ method ConnectionContext [L64]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<Connection>
        └─ method WriteQuery [L77]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<FileToken>
        └─ method WriteQuery [L92]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<UserToken>
        └─ method WriteQuery [L70]
          └─ ... (no implementation details available)
      └─ uses_service IExternalApiServiceFactory (InstancePerLifetimeScope)
        └─ method GetExternalApiFromApiType [L47]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L68]
          └─ implementation DataGet.Services.Features.Requests.RequestProcessor.ProcessAsync [L7-L35]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle

[web] DELETE /api/connection/{apiType}/disconnect-file  (DataGet.Api.Controllers.Connections.ConnectionController.DisconnectFile)  [L150–L157] status=200 [auth=Authentication.MachineToMachinePolicy]
  └─ sends_request DisconnectFileCommand [L154]
    └─ handled_by Cirrus.Connections.DataGet.Commands.DisconnectFileCommandHandler.Handle [L21–L35]
      └─ uses_client IDatagetClient [L32]
      └─ uses_service IDatagetClient (InstancePerLifetimeScope)
        └─ method DisconnectFileAsync [L32]
          └─ ... (no implementation details available)

[web] GET /api/connection/{apiType}/accounting-files  (DataGet.Api.Controllers.Connections.ConnectionController.GetAccountingFiles)  [L100–L108] status=200 [auth=Authentication.MachineToMachinePolicy]
  └─ sends_request GetAccountingFilesQuery [L104]
    └─ handled_by Cirrus.Connections.DataGet.Queries.GetAccountingFilesQueryHandler.Handle [L15–L38]
      └─ uses_client DataGetClient [L26]
        └─ calls GetAccountingFiles (GET /api/connection/{apiType}/accounting-files, method=GetAccountingFilesAsync, target=DataGet.Api) [L52]
          └─ target_service DataGet.Api
      └─ uses_service DataGetClient
        └─ method GetAccountingFilesAsync [L26]
          └─ implementation Cirrus.Connections.DataGet.Client.DataGetClient.GetAccountingFilesAsync [L15-L302]
            └─ calls GetAccountingFiles [L74]

[web] GET /api/connection/{apiType}/authorisation-url  (DataGet.Api.Controllers.Connections.ConnectionController.GetAuthorisationUrl)  [L46–L54] status=200 [auth=Authentication.MachineToMachinePolicy]
  └─ sends_request GetAuthorizationUrlQuery [L50]
    └─ handled_by DataGet.Connections.App.Queries.GetAuthorizationUrlQueryHandler.Handle [L23–L60]
      └─ uses_service ConnectionContextProvider
        └─ method ConnectionContext [L39]
          └─ ... (no implementation details available)
      └─ uses_service ExternalApiServiceFactory
        └─ method GetExternalApiFromApiType [L51]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method Process [L53]
          └─ implementation DataGet.Services.Features.Requests.RequestProcessor.Process [L7-L35]

[web] GET /api/connection/{apiType}/{tenantId}/base-address  (DataGet.Api.Controllers.Connections.ConnectionController.GetBaseAddress)  [L181–L190] status=200 [auth=Authentication.MachineToMachinePolicy]
  └─ sends_request GetBaseAddress [L185]
    └─ handled_by DataGet.Connections.App.Queries.GetBaseAddressHandler.Handle [L16–L30]
      └─ uses_service ConnectionContextProvider
        └─ method ConnectionContext [L27]
          └─ ... (no implementation details available)

[web] GET /api/connection/{apiType}  (DataGet.Api.Controllers.Connections.ConnectionController.GetConnection)  [L40–L44] status=200 [auth=Authentication.MachineToMachinePolicy]
  └─ sends_request GetConnectionQuery [L43]
    └─ handled_by DataGet.Connections.App.Queries.GetConnectionQueryHandler.Handle [L20–L48]
      └─ calls ConnectionRepository.ReadQuery [L40]
      └─ maps_to ConnectionDto [L40]
      └─ uses_service IMapper
        └─ method ConfigurationProvider [L43]
          └─ ... (no implementation details available)
      └─ uses_service RequestContextProvider
        └─ method CurrentContext [L38]
          └─ implementation DataGet.ApplicationService.Services.RequestContextProvider.CurrentContext [L11-L76]

[web] GET /api/connection/  (DataGet.Api.Controllers.Connections.ConnectionController.GetConnections)  [L34–L38] status=200 [auth=Authentication.MachineToMachinePolicy]
  └─ sends_request GetConnectionsQuery [L37]
    └─ handled_by DataGet.Connections.App.Queries.GetConnectionsQueryHandler.Handle [L14–L78]
      └─ uses_service IControlledRepository<FileToken>
        └─ method ReadQuery [L40]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<UserToken>
        └─ method ReadQuery [L32]
          └─ ... (no implementation details available)
      └─ uses_service RequestContextProvider
        └─ method CurrentIdentification [L29]
          └─ implementation DataGet.ApplicationService.Services.RequestContextProvider.CurrentIdentification [L11-L76]

[web] GET /api/connection/{apiType}/tenants  (DataGet.Api.Controllers.Connections.ConnectionController.GetTenants)  [L159–L168] status=200 [auth=Authentication.MachineToMachinePolicy]

[web] GET /api/connection/{apiType}/token  (DataGet.Api.Controllers.Connections.ConnectionController.GetToken)  [L170–L179] status=200 [auth=Authentication.MachineToMachinePolicy]

[web] GET /api/connection/process-callback  (DataGet.Api.Controllers.Connections.ConnectionController.ProcessCallback)  [L56–L85] status=200 [AllowAnonymous]
  └─ sends_request ProcessCallbackCommand [L74]
    └─ handled_by DataGet.Connections.App.Commands.ProcessCallbackCommandHandler.Handle [L24–L92]
      └─ uses_service IConnectionContextProvider (InstancePerLifetimeScope)
        └─ method AssignActiveConnectionAsync [L67]
          └─ ... (no implementation details available)
      └─ uses_service IConnectionService (InstancePerLifetimeScope)
        └─ method GetConnectionAsync [L48]
          └─ implementation IConnectionService.GetConnectionAsync [L44-L45]
          └─ ... (no implementation details available)
      └─ uses_service IExternalApiServiceFactory (InstancePerLifetimeScope)
        └─ method GetExternalApiFromApiType [L69]
          └─ ... (no implementation details available)
      └─ uses_service RequestContextProvider
        └─ method AssignActiveContext [L66]
          └─ implementation DataGet.ApplicationService.Services.RequestContextProvider.AssignActiveContext [L11-L76]
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L73]
          └─ implementation DataGet.Services.Features.Requests.RequestProcessor.ProcessAsync [L7-L35]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle

[web] POST /api/connection/{apiType}/file-token  (DataGet.Api.Controllers.Connections.ConnectionController.StoreExistingFileTokens)  [L141–L148] status=201 [auth=Authentication.MachineToMachinePolicy]
  └─ sends_request StoreExistingFileTokensCommand [L145]
    └─ handled_by DataGet.Connections.App.Commands.StoreExistingFileTokensCommandHandler.Handle [L24–L79]
      └─ uses_service FileTokenService
        └─ method GetTokenAsync [L41]
          └─ implementation DataGet.Connections.App.Services.FileTokenService.GetTokenAsync [L11-L102]
          └─ implementation DataGet.Connections.App.Services.FileTokenService.GetTokenAsync [L11-L102]
      └─ uses_service IControlledRepository<FileToken>
        └─ method ReadQuery [L52]
          └─ ... (no implementation details available)
      └─ uses_service ILogger<StoreExistingFileTokensCommandHandler>
        └─ method LogError [L48]
          └─ ... (no implementation details available)
      └─ logs ILogger<StoreExistingFileTokensCommandHandler> [Error] [L48]

[web] POST /api/connection/{apiType}/token  (DataGet.Api.Controllers.Connections.ConnectionController.StoreExistingToken)  [L132–L139] status=201 [auth=Authentication.MachineToMachinePolicy]
  └─ sends_request StoreExistingTokenCommand [L136]
    └─ handled_by DataGet.Connections.App.Commands.StoreExistingTokenCommandHandler.Handle [L17–L34]
      └─ uses_service UserTokenService
        └─ method GetTokenAsync [L28]
          └─ implementation DataGet.Connections.App.Services.UserTokenService.GetTokenAsync [L11-L81]
          └─ implementation DataGet.Connections.App.Services.UserTokenService.GetTokenAsync [L11-L81]

[web] GET /api/connection/{apiType}/test-connection  (DataGet.Api.Controllers.Connections.ConnectionController.TestConnection)  [L110–L119] status=200 [auth=Authentication.MachineToMachinePolicy]
  └─ sends_request TestConnectionCommand [L114]
    └─ handled_by DataGet.Connections.App.Commands.TestConnectionCommandHandler.Handle [L25–L61]
      └─ uses_service IExternalApiServiceFactory (InstancePerLifetimeScope)
        └─ method GetExternalApiFromApiType [L38]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L47]
          └─ implementation DataGet.Services.Features.Requests.RequestProcessor.ProcessAsync [L7-L35]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle

[web] GET /api/connection/{apiType}/{email}/test-connection  (DataGet.Api.Controllers.Connections.ConnectionController.TestConnectionWithEmail)  [L121–L130] status=200 [auth=Authentication.MachineToMachinePolicy]
  └─ sends_request TestConnectionCommand [L125]
    └─ handled_by DataGet.Connections.App.Commands.TestConnectionCommandHandler.Handle [L25–L61]
      └─ uses_service IExternalApiServiceFactory (InstancePerLifetimeScope)
        └─ method GetExternalApiFromApiType [L38]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L47]
          └─ implementation DataGet.Services.Features.Requests.RequestProcessor.ProcessAsync [L7-L35]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle

[web] GET /api/gov-link/activity-statements/  (DataGet.Api.Controllers.GovLink.ActivityStatementController.GetActivityStatements)  [L22–L31] status=200 [auth=Authentication.MachineToMachinePolicy]

[web] GET /api/gov-link/activity-statements/detail  (DataGet.Api.Controllers.GovLink.ActivityStatementController.GetActivityStatementsDetail)  [L33–L42] status=200 [auth=Authentication.MachineToMachinePolicy]

[web] GET /api/gov-link/activity-statements/summary  (DataGet.Api.Controllers.GovLink.ActivityStatementController.GetActivityStatementSummary)  [L44–L53] status=200 [auth=Authentication.MachineToMachinePolicy]

[web] GET /api/gov-link/activity-statements/test/detail  (DataGet.Api.Controllers.GovLink.ActivityStatementController.MultipleActivityStatementTest)  [L66–L73] status=200 [AllowAnonymous]

[web] GET /api/gov-link/activity-statements/test/detail/single  (DataGet.Api.Controllers.GovLink.ActivityStatementController.SingleActivityStatementTest)  [L56–L63] status=200 [AllowAnonymous]

[web] GET /api/gov-link/client-accounts/detail  (DataGet.Api.Controllers.GovLink.ClientAccountController.GetTransactionDetail)  [L22–L31] status=200 [auth=Authentication.MachineToMachinePolicy]

[web] GET /api/gov-link/client-accounts/test/detail  (DataGet.Api.Controllers.GovLink.ClientAccountController.GetTransactionDetailTest)  [L45–L52] status=200 [AllowAnonymous]

[web] GET /api/gov-link/client-accounts/summary  (DataGet.Api.Controllers.GovLink.ClientAccountController.GetTransactionSummary)  [L33–L42] status=200 [auth=Authentication.MachineToMachinePolicy]

[web] GET /api/gov-link/individual-income-tax-returns/profile-compare  (DataGet.Api.Controllers.GovLink.IndividualIncomeTaxReturnController.GetProfileComparison)  [L44–L53] status=200 [auth=Authentication.MachineToMachinePolicy]

[web] GET /api/gov-link/individual-income-tax-returns/test/profile-compare  (DataGet.Api.Controllers.GovLink.IndividualIncomeTaxReturnController.GetProfileComparisonTest)  [L66–L73] status=200 [AllowAnonymous]

[web] GET /api/gov-link/individual-income-tax-returns/  (DataGet.Api.Controllers.GovLink.IndividualIncomeTaxReturnController.GetReport)  [L23–L32] status=200 [auth=Authentication.MachineToMachinePolicy]

[web] GET /api/gov-link/individual-income-tax-returns/summary  (DataGet.Api.Controllers.GovLink.IndividualIncomeTaxReturnController.GetReportSummary)  [L34–L42] status=200 [auth=Authentication.MachineToMachinePolicy]

[web] GET /api/gov-link/individual-income-tax-returns/test  (DataGet.Api.Controllers.GovLink.IndividualIncomeTaxReturnController.GetReportTest)  [L56–L63] status=200 [AllowAnonymous]

[web] GET /api/health  (DataGet.Api.Controllers.HealthController.Alive)  [L10–L14] status=200 [AllowAnonymous]

[web] PUT /api/cloud-capcha/authenticate  (DataGet.Api.Controllers.Integrations.CloudCapchaController.Authenticate)  [L45–L75] status=200 [auth=Authentication.MachineToMachinePolicy]
  └─ uses_service IApiTokenService (InstancePerLifetimeScope)
    └─ method GetTokenAsync [L50]
      └─ implementation DataGet.Connections.App.Services.ApiTokenService.GetTokenAsync [L11-L61]

[web] DELETE /api/cloud-capcha/disconnect  (DataGet.Api.Controllers.Integrations.CloudCapchaController.Disconnect)  [L118–L126] status=200 [auth=Authentication.MachineToMachinePolicy]
  └─ uses_service IConnectionService (InstancePerLifetimeScope)
    └─ method DeleteCurrentConnectionAsync [L123]
      └─ implementation IConnectionService.DeleteCurrentConnectionAsync [L44-L45]
      └─ ... (no implementation details available)

[web] GET /api/cloud-capcha/access-info  (DataGet.Api.Controllers.Integrations.CloudCapchaController.GetAccessInfo)  [L77–L91] status=200 [auth=Authentication.MachineToMachinePolicy]
  └─ uses_service IApiTokenService (InstancePerLifetimeScope)
    └─ method GetTokenAsync [L82]
      └─ implementation DataGet.Connections.App.Services.ApiTokenService.GetTokenAsync [L11-L61]

[web] POST /api/cloud-capcha/activities  (DataGet.Api.Controllers.Integrations.CloudCapchaController.PostActivities)  [L110–L116] status=201 [auth=Authentication.MachineToMachinePolicy]
  └─ uses_service ICloudCapchaService (AddScoped)
    └─ method CreateActivitiesAsync [L115]
      └─ implementation DataGet.Integrations.CloudCapcha.Api.Services.CloudCapchaService.CreateActivitiesAsync [L15-L216]

[web] GET /api/cloud-capcha/test-connection  (DataGet.Api.Controllers.Integrations.CloudCapchaController.TestConnection)  [L93–L108] status=200 [auth=Authentication.MachineToMachinePolicy]
  └─ uses_service IApiTokenService (InstancePerLifetimeScope)
    └─ method GetTokenAsync [L98]
      └─ implementation DataGet.Connections.App.Services.ApiTokenService.GetTokenAsync [L11-L61]

[web] POST /api/companies-house/test-data/company  (DataGet.Api.Controllers.Integrations.CompaniesHouseController.CreateSandboxTextCompany)  [L432–L440] status=201 [auth=Authentication.MachineToMachinePolicy]
  └─ sends_request CreateSandboxTestCompanyCommand [L437]
    └─ handled_by DataGet.Integrations.CompaniesHouse.Api.Commands.CreateTestCompanyCommandHandler.Handle [L14–L21]

[web] DELETE /api/companies-house/test-data/company/{companyNumber}  (DataGet.Api.Controllers.Integrations.CompaniesHouseController.DeleteSandboxTextCompany)  [L442–L450] status=200 [auth=Authentication.MachineToMachinePolicy]
  └─ sends_request DeleteSandboxTestCompanyCommand [L447]
    └─ handled_by DataGet.Integrations.CompaniesHouse.Api.Commands.DeleteTestCompanyCommandHandler.Handle [L16–L26]

[web] GET /api/companies-house/document/{documentId}/download  (DataGet.Api.Controllers.Integrations.CompaniesHouseController.DownloadDocumentContent)  [L418–L430] status=200 [auth=Authentication.MachineToMachinePolicy]
  └─ sends_request GetDocumentContentQuery [L423]
    └─ handled_by DataGet.Integrations.CompaniesHouse.Api.Queries.GetDocumentContentQueryHandler.Handle [L15–L31]

[web] GET /api/companies-house/company/{companyNumber}/charges/{chargeId}  (DataGet.Api.Controllers.Integrations.CompaniesHouseController.GetCompanyCharge)  [L171–L179] status=200 [auth=Authentication.MachineToMachinePolicy]
  └─ sends_request GetCompanyChargeQuery [L176]
    └─ handled_by DataGet.Integrations.CompaniesHouse.Api.Queries.GetCompanyChargeQueryHandler.Handle [L16–L26]

[web] GET /api/companies-house/company/{companyNumber}/charges  (DataGet.Api.Controllers.Integrations.CompaniesHouseController.GetCompanyCharges)  [L161–L169] status=200 [auth=Authentication.MachineToMachinePolicy]
  └─ sends_request GetCompanyChargesQuery [L166]
    └─ handled_by DataGet.Integrations.CompaniesHouse.Api.Queries.GetCompanyChargesQueryHandler.Handle [L21–L33]

[web] GET /api/companies-house/company/{companyNumber}/exemptions  (DataGet.Api.Controllers.Integrations.CompaniesHouseController.GetCompanyExemptions)  [L213–L221] status=200 [auth=Authentication.MachineToMachinePolicy]
  └─ sends_request GetCompanyExemptionsQuery [L218]
    └─ handled_by DataGet.Integrations.CompaniesHouse.Api.Queries.GetCompanyExemptionsQueryHandler.Handle [L15–L24]

[web] GET /api/companies-house/company/{companyNumber}/filing-history  (DataGet.Api.Controllers.Integrations.CompaniesHouseController.GetCompanyFilingHistory)  [L181–L191] status=200 [auth=Authentication.MachineToMachinePolicy]
  └─ sends_request GetCompanyFilingHistoryQuery [L188]
    └─ handled_by DataGet.Integrations.CompaniesHouse.Api.Queries.GetCompanyFilingHistoryQueryHandler.Handle [L23–L35]

[web] GET /api/companies-house/company/{companyNumber}/filing-history/{transactionId}  (DataGet.Api.Controllers.Integrations.CompaniesHouseController.GetCompanyFilingHistoryItem)  [L193–L201] status=200 [auth=Authentication.MachineToMachinePolicy]
  └─ sends_request GetCompanyFilingHistoryItemQuery [L198]
    └─ handled_by DataGet.Integrations.CompaniesHouse.Api.Queries.GetCompanyFilingHistoryItemQueryHandler.Handle [L19–L30]

[web] GET /api/companies-house/company/{companyNumber}/insolvency  (DataGet.Api.Controllers.Integrations.CompaniesHouseController.GetCompanyInsolvency)  [L203–L211] status=200 [auth=Authentication.MachineToMachinePolicy]
  └─ sends_request GetCompanyInsolvencyQuery [L208]
    └─ handled_by DataGet.Integrations.CompaniesHouse.Api.Queries.GetCompanyInsolvencyQueryHandler.Handle [L15–L24]

[web] GET /api/companies-house/company/{companyNumber}/appointments/{appointmentId}  (DataGet.Api.Controllers.Integrations.CompaniesHouseController.GetCompanyOfficer)  [L141–L149] status=200 [auth=Authentication.MachineToMachinePolicy]
  └─ sends_request GetCompanyOfficerQuery [L146]
    └─ handled_by DataGet.Integrations.CompaniesHouse.Api.Queries.GetOfficerQueryHandler.Handle [L16–L28]

[web] GET /api/companies-house/company/{companyNumber}/officers  (DataGet.Api.Controllers.Integrations.CompaniesHouseController.GetCompanyOfficers)  [L129–L139] status=200 [auth=Authentication.MachineToMachinePolicy]
  └─ sends_request GetCompanyOfficersQuery [L136]
    └─ handled_by DataGet.Integrations.CompaniesHouse.Api.Queries.GetOfficersQueryHandler.Handle [L27–L38]

[web] GET /api/companies-house/company/{companyNumber}  (DataGet.Api.Controllers.Integrations.CompaniesHouseController.GetCompanyProfile)  [L119–L127] status=200 [auth=Authentication.MachineToMachinePolicy]
  └─ sends_request GetCompanyProfileQuery [L124]
    └─ handled_by DataGet.Integrations.CompaniesHouse.Api.Queries.GetCompanyProfileQueryHandler.Handle [L15–L25]

[web] GET /api/companies-house/company/{companyNumber}/persons-with-significant-control/corporate-entity/{pscId}  (DataGet.Api.Controllers.Integrations.CompaniesHouseController.GetCompanyPscCorporateEntity)  [L274–L282] status=200 [auth=Authentication.MachineToMachinePolicy]
  └─ sends_request GetCompanyPscCorporateEntityQuery [L279]
    └─ handled_by DataGet.Integrations.CompaniesHouse.Api.Queries.GetCompanyPscCorporateEntityQueryHandler.Handle [L19–L31]

[web] GET /api/companies-house/company/{companyNumber}/persons-with-significant-control/corporate-entity-beneficial-owner/{pscId}  (DataGet.Api.Controllers.Integrations.CompaniesHouseController.GetCompanyPscCorporateEntityBeneficialOwner)  [L264–L272] status=200 [auth=Authentication.MachineToMachinePolicy]
  └─ sends_request GetCompanyPscCorporateEntityBeneficialOwnerQuery [L269]
    └─ handled_by DataGet.Integrations.CompaniesHouse.Api.Queries.GetCompanyPscCorporateEntityBeneficialOwnerQueryHandler.Handle [L19–L32]

[web] GET /api/companies-house/company/{companyNumber}/persons-with-significant-control/individual/{pscId}  (DataGet.Api.Controllers.Integrations.CompaniesHouseController.GetCompanyPscIndividual)  [L294–L302] status=200 [auth=Authentication.MachineToMachinePolicy]
  └─ sends_request GetCompanyPscIndividualQuery [L299]
    └─ handled_by DataGet.Integrations.CompaniesHouse.Api.Queries.GetCompanyPscIndividualQueryHandler.Handle [L19–L31]

[web] GET /api/companies-house/company/{companyNumber}/persons-with-significant-control/individual-beneficial-owner/{pscId}  (DataGet.Api.Controllers.Integrations.CompaniesHouseController.GetCompanyPscIndividualBeneficialOwner)  [L284–L292] status=200 [auth=Authentication.MachineToMachinePolicy]
  └─ sends_request GetCompanyPscIndividualBeneficialOwnerQuery [L289]
    └─ handled_by DataGet.Integrations.CompaniesHouse.Api.Queries.GetCompanyPscIndividualBeneficialOwnerQueryHandler.Handle [L19–L31]

[web] GET /api/companies-house/company/{companyNumber}/persons-with-significant-control/individual/{pscId}/full-record  (DataGet.Api.Controllers.Integrations.CompaniesHouseController.GetCompanyPscIndividualFullRecord)  [L314–L322] status=200 [auth=Authentication.MachineToMachinePolicy]
  └─ sends_request GetCompanyPscIndividualFullRecordQuery [L319]
    └─ handled_by DataGet.Integrations.CompaniesHouse.Api.Queries.GetCompanyPscIndividualFullRecordQueryHandler.Handle [L19–L31]

[web] GET /api/companies-house/company/{companyNumber}/persons-with-significant-control/individual/{pscId}/verification-state  (DataGet.Api.Controllers.Integrations.CompaniesHouseController.GetCompanyPscIndividualVerificationState)  [L304–L312] status=200 [auth=Authentication.MachineToMachinePolicy]
  └─ sends_request GetCompanyPscIndividualVerificationStateQuery [L309]
    └─ handled_by DataGet.Integrations.CompaniesHouse.Api.Queries.GetCompanyPscIndividualVerificationStateQueryHandler.Handle [L19–L31]

[web] GET /api/companies-house/company/{companyNumber}/persons-with-significant-control/legal-person/{pscId}  (DataGet.Api.Controllers.Integrations.CompaniesHouseController.GetCompanyPscLegalPerson)  [L334–L342] status=200 [auth=Authentication.MachineToMachinePolicy]
  └─ sends_request GetCompanyPscLegalPersonQuery [L339]
    └─ handled_by DataGet.Integrations.CompaniesHouse.Api.Queries.GetCompanyPscLegalPersonQueryHandler.Handle [L19–L31]

[web] GET /api/companies-house/company/{companyNumber}/persons-with-significant-control/legal-person-beneficial-owner/{pscId}  (DataGet.Api.Controllers.Integrations.CompaniesHouseController.GetCompanyPscLegalPersonBeneficialOwner)  [L324–L332] status=200 [auth=Authentication.MachineToMachinePolicy]
  └─ sends_request GetCompanyPscLegalPersonBeneficialOwnerQuery [L329]
    └─ handled_by DataGet.Integrations.CompaniesHouse.Api.Queries.GetCompanyPscLegalPersonBeneficialOwnerQueryHandler.Handle [L19–L31]

[web] GET /api/companies-house/company/{companyNumber}/persons-with-significant-control  (DataGet.Api.Controllers.Integrations.CompaniesHouseController.GetCompanyPscList)  [L374–L384] status=200 [auth=Authentication.MachineToMachinePolicy]
  └─ sends_request GetCompanyPscListQuery [L381]
    └─ handled_by DataGet.Integrations.CompaniesHouse.Api.Queries.GetCompanyPscListQueryHandler.Handle [L26–L38]

[web] GET /api/companies-house/company/{companyNumber}/persons-with-significant-control-statements/{statementId}  (DataGet.Api.Controllers.Integrations.CompaniesHouseController.GetCompanyPscStatement)  [L344–L352] status=200 [auth=Authentication.MachineToMachinePolicy]
  └─ sends_request GetCompanyPscStatementQuery [L349]
    └─ handled_by DataGet.Integrations.CompaniesHouse.Api.Queries.GetCompanyPscStatementQueryHandler.Handle [L19–L29]

[web] GET /api/companies-house/company/{companyNumber}/persons-with-significant-control-statements  (DataGet.Api.Controllers.Integrations.CompaniesHouseController.GetCompanyPscStatementsList)  [L386–L396] status=200 [auth=Authentication.MachineToMachinePolicy]
  └─ sends_request GetCompanyPscStatementsListQuery [L393]
    └─ handled_by DataGet.Integrations.CompaniesHouse.Api.Queries.GetCompanyPscStatementsListQueryHandler.Handle [L26–L38]

[web] GET /api/companies-house/company/{companyNumber}/persons-with-significant-control/super-secure-beneficial-owner/{superSecureId}  (DataGet.Api.Controllers.Integrations.CompaniesHouseController.GetCompanyPscSuperSecureBeneficialOwner)  [L354–L362] status=200 [auth=Authentication.MachineToMachinePolicy]
  └─ sends_request GetCompanyPscSuperSecureBeneficialOwnerQuery [L359]
    └─ handled_by DataGet.Integrations.CompaniesHouse.Api.Queries.GetCompanyPscSuperSecureBeneficialOwnerQueryHandler.Handle [L19–L29]

[web] GET /api/companies-house/company/{companyNumber}/persons-with-significant-control/super-secure/{superSecureId}  (DataGet.Api.Controllers.Integrations.CompaniesHouseController.GetCompanyPscSuperSecurePerson)  [L364–L372] status=200 [auth=Authentication.MachineToMachinePolicy]
  └─ sends_request GetCompanyPscSuperSecurePersonQuery [L369]
    └─ handled_by DataGet.Integrations.CompaniesHouse.Api.Queries.GetCompanyPscSuperSecurePersonQueryHandler.Handle [L19–L29]

[web] GET /api/companies-house/company/{companyNumber}/registered-office-address  (DataGet.Api.Controllers.Integrations.CompaniesHouseController.GetCompanyRegisteredOfficeAddress)  [L109–L117] status=200 [auth=Authentication.MachineToMachinePolicy]
  └─ sends_request GetCompanyRegisteredOfficeAddressQuery [L114]
    └─ handled_by DataGet.Integrations.CompaniesHouse.Api.Queries.GetCompanyRegisteredOfficeAddressQueryHandler.Handle [L15–L25]

[web] GET /api/companies-house/company/{companyNumber}/registers  (DataGet.Api.Controllers.Integrations.CompaniesHouseController.GetCompanyRegisters)  [L151–L159] status=200 [auth=Authentication.MachineToMachinePolicy]
  └─ sends_request GetCompanyRegistersQuery [L156]
    └─ handled_by DataGet.Integrations.CompaniesHouse.Api.Queries.GetCompanyRegistersQueryHandler.Handle [L15–L24]

[web] GET /api/companies-house/company/{companyNumber}/uk-establishments  (DataGet.Api.Controllers.Integrations.CompaniesHouseController.GetCompanyUkEstablishments)  [L254–L262] status=200 [auth=Authentication.MachineToMachinePolicy]
  └─ sends_request GetCompanyUkEstablishmentsQuery [L259]
    └─ handled_by DataGet.Integrations.CompaniesHouse.Api.Queries.GetCompanyUkEstablishmentsQueryHandler.Handle [L15–L24]

[web] GET /api/companies-house/disqualified-officers/corporate/{officerId}  (DataGet.Api.Controllers.Integrations.CompaniesHouseController.GetCorporateDisqualification)  [L233–L241] status=200 [auth=Authentication.MachineToMachinePolicy]
  └─ sends_request GetCorporateDisqualificationQuery [L238]
    └─ handled_by DataGet.Integrations.CompaniesHouse.Api.Queries.GetCorporateDisqualificationQueryHandler.Handle [L15–L24]

[web] GET /api/companies-house/document/{documentId}/content  (DataGet.Api.Controllers.Integrations.CompaniesHouseController.GetDocumentContentLocation)  [L408–L416] status=200 [auth=Authentication.MachineToMachinePolicy]
  └─ sends_request GetDocumentContentLocationQuery [L413]
    └─ handled_by DataGet.Integrations.CompaniesHouse.Api.Queries.GetDocumentContentLocationQueryHandler.Handle [L18–L31]

[web] GET /api/companies-house/document/{documentId}  (DataGet.Api.Controllers.Integrations.CompaniesHouseController.GetDocumentMetadata)  [L398–L406] status=200 [auth=Authentication.MachineToMachinePolicy]
  └─ sends_request GetDocumentMetadataQuery [L403]
    └─ handled_by DataGet.Integrations.CompaniesHouse.Api.Queries.GetDocumentMetadataQueryHandler.Handle [L15–L24]

[web] GET /api/companies-house/disqualified-officers/natural/{officerId}  (DataGet.Api.Controllers.Integrations.CompaniesHouseController.GetNaturalDisqualification)  [L223–L231] status=200 [auth=Authentication.MachineToMachinePolicy]
  └─ sends_request GetNaturalDisqualificationQuery [L228]
    └─ handled_by DataGet.Integrations.CompaniesHouse.Api.Queries.GetNaturalDisqualificationQueryHandler.Handle [L15–L24]

[web] GET /api/companies-house/officers/{officerId}/appointments  (DataGet.Api.Controllers.Integrations.CompaniesHouseController.GetOfficerAppointmentList)  [L243–L252] status=200 [auth=Authentication.MachineToMachinePolicy]
  └─ sends_request GetOfficerAppointmentsQuery [L249]
    └─ handled_by DataGet.Integrations.CompaniesHouse.Api.Queries.GetOfficerAppointmentsQueryHandler.Handle [L23–L38]

[web] GET /api/companies-house/search/advanced-search/companies  (DataGet.Api.Controllers.Integrations.CompaniesHouseController.SearchAdvanced)  [L93–L107] status=200 [auth=Authentication.MachineToMachinePolicy]
  └─ sends_request SearchAdvancedQuery [L104]
    └─ handled_by DataGet.Integrations.CompaniesHouse.Api.Queries.SearchAdvancedQueryHandler.Handle [L40–L50]

[web] GET /api/companies-house/search/all  (DataGet.Api.Controllers.Integrations.CompaniesHouseController.SearchAll)  [L29–L37] status=200 [auth=Authentication.MachineToMachinePolicy]
  └─ sends_request SearchAllQuery [L34]
    └─ handled_by DataGet.Integrations.CompaniesHouse.Api.Queries.SearchAllQueryHandler.Handle [L17–L28]

[web] GET /api/companies-house/search/companies  (DataGet.Api.Controllers.Integrations.CompaniesHouseController.SearchCompanies)  [L39–L48] status=200 [auth=Authentication.MachineToMachinePolicy]
  └─ sends_request SearchCompaniesQuery [L45]
    └─ handled_by DataGet.Integrations.CompaniesHouse.Api.Queries.SearchCompaniesQueryHandler.Handle [L23–L34]

[web] GET /api/companies-house/search/alphabetical-search/companies  (DataGet.Api.Controllers.Integrations.CompaniesHouseController.SearchCompaniesAlphabetically)  [L70–L79] status=200 [auth=Authentication.MachineToMachinePolicy]
  └─ sends_request SearchCompaniesAlphabeticallyQuery [L76]
    └─ handled_by DataGet.Integrations.CompaniesHouse.Api.Queries.SearchCompaniesAlphabeticallyQueryHandler.Handle [L23–L34]

[web] GET /api/companies-house/search/disqualified-officers  (DataGet.Api.Controllers.Integrations.CompaniesHouseController.SearchDisqualifiedOfficers)  [L60–L68] status=200 [auth=Authentication.MachineToMachinePolicy]
  └─ sends_request SearchDisqualifiedOfficersQuery [L65]
    └─ handled_by DataGet.Integrations.CompaniesHouse.Api.Queries.SearchDisqualifiedOfficersQueryHandler.Handle [L21–L32]

[web] GET /api/companies-house/search/dissolved-search/companies  (DataGet.Api.Controllers.Integrations.CompaniesHouseController.SearchDissolvedCompanies)  [L81–L91] status=200 [auth=Authentication.MachineToMachinePolicy]
  └─ sends_request SearchDissolvedCompaniesQuery [L88]
    └─ handled_by DataGet.Integrations.CompaniesHouse.Api.Queries.SearchDissolvedCompaniesQueryHandler.Handle [L27–L40]

[web] GET /api/companies-house/search/officers  (DataGet.Api.Controllers.Integrations.CompaniesHouseController.SearchOfficers)  [L50–L58] status=200 [auth=Authentication.MachineToMachinePolicy]
  └─ sends_request SearchOfficersQuery [L55]
    └─ handled_by DataGet.Integrations.CompaniesHouse.Api.Queries.SearchOfficersQueryHandler.Handle [L21–L32]

[web] GET /api/companies-house  (DataGet.Api.Controllers.Integrations.CompaniesHouseController.SetConnectionContext)  [L452–L455] status=200 [auth=Authentication.MachineToMachinePolicy]

[web] GET /api/companies-house-gateway/charge-search  (DataGet.Api.Controllers.Integrations.CompaniesHouseGatewayController.GetChargeSearchAsync)  [L58–L62] status=200 [auth=Authentication.MachineToMachinePolicy]
  └─ sends_request GetChargeSearchQuery [L61]
    └─ handled_by DataGet.Integrations.CompaniesHouseGateway.Api.Queries.GetChargeSearchQueryHandler.Handle [L51–L80]
      └─ maps_to ChargesResponseDto [L78]
      └─ uses_client CompaniesHouseInputGatewayClient [L74]
      └─ uses_service CompaniesHouseInputGatewayClient
        └─ method SendAsync [L74]
          └─ implementation DataGet.Integrations.CompaniesHouseGateway.Api.Gateway.CompaniesHouseInputGatewayClient.SendAsync [L13-L227]
      └─ uses_service GovTalkEnvelopeCreator
        └─ method Create [L73]
          └─ ... (no implementation details available)
      └─ uses_service IMapper
        └─ method Map [L78]
          └─ ... (no implementation details available)

[web] GET /api/companies-house-gateway/company-info  (DataGet.Api.Controllers.Integrations.CompaniesHouseGatewayController.GetCompanyDataAsync)  [L27–L31] status=200 [auth=Authentication.MachineToMachinePolicy]
  └─ sends_request GetCompanyDataQuery [L30]
    └─ handled_by DataGet.Integrations.CompaniesHouseGateway.Api.Queries.GetCompanyDataQueryHandler.Handle [L35–L64]
      └─ maps_to CompanyDataDto [L62]
      └─ uses_client CompaniesHouseInputGatewayClient [L58]
      └─ uses_service CompaniesHouseInputGatewayClient
        └─ method SendAsync [L58]
          └─ implementation DataGet.Integrations.CompaniesHouseGateway.Api.Gateway.CompaniesHouseInputGatewayClient.SendAsync [L13-L227]
      └─ uses_service GovTalkEnvelopeCreator
        └─ method Create [L57]
          └─ ... (no implementation details available)
      └─ uses_service IMapper
        └─ method Map [L62]
          └─ ... (no implementation details available)

[web] GET /api/companies-house-gateway/document  (DataGet.Api.Controllers.Integrations.CompaniesHouseGatewayController.GetDocumentAsync)  [L90–L94] status=200 [auth=Authentication.MachineToMachinePolicy]

[web] GET /api/companies-house-gateway/e-reminder  (DataGet.Api.Controllers.Integrations.CompaniesHouseGatewayController.GetEReminderAsync)  [L100–L104] status=200 [auth=Authentication.MachineToMachinePolicy]
  └─ sends_request GetEReminderQuery [L103]
    └─ handled_by DataGet.Integrations.CompaniesHouseGateway.Api.Queries.GetEReminderQueryHandler.Handle [L33–L61]
      └─ maps_to ERemindersResponseDto [L59]
      └─ uses_client CompaniesHouseInputGatewayClient [L55]
      └─ uses_service CompaniesHouseInputGatewayClient
        └─ method SendAsync [L55]
          └─ implementation DataGet.Integrations.CompaniesHouseGateway.Api.Gateway.CompaniesHouseInputGatewayClient.SendAsync [L13-L227]
      └─ uses_service GovTalkEnvelopeCreator
        └─ method Create [L54]
          └─ ... (no implementation details available)
      └─ uses_service IMapper
        └─ method Map [L59]
          └─ ... (no implementation details available)

[web] GET /api/companies-house-gateway/members-register-info  (DataGet.Api.Controllers.Integrations.CompaniesHouseGatewayController.GetMembersRegisterDataAsync)  [L38–L42] status=200 [auth=Authentication.MachineToMachinePolicy]
  └─ sends_request GetMembersRegisterDataQuery [L41]
    └─ handled_by DataGet.Integrations.CompaniesHouseGateway.Api.Queries.GetMembersRegisterDataQueryHandler.Handle [L33–L62]
      └─ maps_to MembersRegisterDataResponseDto [L60]
      └─ uses_client CompaniesHouseInputGatewayClient [L56]
      └─ uses_service CompaniesHouseInputGatewayClient
        └─ method SendAsync [L56]
          └─ implementation DataGet.Integrations.CompaniesHouseGateway.Api.Gateway.CompaniesHouseInputGatewayClient.SendAsync [L13-L227]
      └─ uses_service GovTalkEnvelopeCreator
        └─ method Create [L55]
          └─ ... (no implementation details available)
      └─ uses_service IMapper
        └─ method Map [L60]
          └─ ... (no implementation details available)

[web] GET /api/companies-house-gateway/payment-periods  (DataGet.Api.Controllers.Integrations.CompaniesHouseGatewayController.GetPaymentPeriodsAsync)  [L48–L52] status=200 [auth=Authentication.MachineToMachinePolicy]
  └─ sends_request GetPaymentPeriodsQuery [L51]
    └─ handled_by DataGet.Integrations.CompaniesHouseGateway.Api.Queries.GetPaymentPeriodsQueryHandler.Handle [L33–L61]
      └─ maps_to PaymentPeriodsResponseDto [L59]
      └─ uses_client CompaniesHouseInputGatewayClient [L55]
      └─ uses_service CompaniesHouseInputGatewayClient
        └─ method SendAsync [L55]
          └─ implementation DataGet.Integrations.CompaniesHouseGateway.Api.Gateway.CompaniesHouseInputGatewayClient.SendAsync [L13-L227]
      └─ uses_service GovTalkEnvelopeCreator
        └─ method Create [L54]
          └─ ... (no implementation details available)
      └─ uses_service IMapper
        └─ method Map [L59]
          └─ ... (no implementation details available)

[web] GET /api/companies-house-gateway/status-acknowledgement  (DataGet.Api.Controllers.Integrations.CompaniesHouseGatewayController.GetStatusAcknowledgementAsync)  [L80–L84] status=200 [auth=Authentication.MachineToMachinePolicy]
  └─ sends_request GetStatusAcknowledgementQuery [L83]
    └─ handled_by DataGet.Integrations.CompaniesHouseGateway.Api.Queries.GetStatusAcknowledgementQueryHandler.Handle [L25–L53]
      └─ maps_to StatusAckDto [L51]
      └─ uses_client CompaniesHouseInputGatewayClient [L47]
      └─ uses_service CompaniesHouseInputGatewayClient
        └─ method SendAsync [L47]
          └─ implementation DataGet.Integrations.CompaniesHouseGateway.Api.Gateway.CompaniesHouseInputGatewayClient.SendAsync [L13-L227]
      └─ uses_service GovTalkEnvelopeCreator
        └─ method Create [L46]
          └─ ... (no implementation details available)
      └─ uses_service IMapper
        └─ method Map [L51]
          └─ ... (no implementation details available)

[web] GET /api/companies-house-gateway/submission-status  (DataGet.Api.Controllers.Integrations.CompaniesHouseGatewayController.GetSubmissionStatusAsync)  [L69–L73] status=200 [auth=Authentication.MachineToMachinePolicy]
  └─ sends_request GetSubmissionStatusQuery [L72]
    └─ handled_by DataGet.Integrations.CompaniesHouseGateway.Api.Queries.GetSubmissionStatusQueryHandler.Handle [L43–L71]
      └─ maps_to SubmissionStatusResponseDto [L69]
      └─ uses_client CompaniesHouseInputGatewayClient [L65]
      └─ uses_service CompaniesHouseInputGatewayClient
        └─ method SendAsync [L65]
          └─ implementation DataGet.Integrations.CompaniesHouseGateway.Api.Gateway.CompaniesHouseInputGatewayClient.SendAsync [L13-L227]
      └─ uses_service GovTalkEnvelopeCreator
        └─ method Create [L64]
          └─ ... (no implementation details available)
      └─ uses_service IMapper
        └─ method Map [L69]
          └─ ... (no implementation details available)

[web] PUT /api/companies-house-gateway/e-reminder  (DataGet.Api.Controllers.Integrations.CompaniesHouseGatewayController.SetEReminderAsync)  [L111–L115] status=200 [auth=Authentication.MachineToMachinePolicy]
  └─ sends_request GetEReminderQuery [L114]
    └─ handled_by DataGet.Integrations.CompaniesHouseGateway.Api.Queries.GetEReminderQueryHandler.Handle [L33–L61]
      └─ maps_to ERemindersResponseDto [L59]
      └─ uses_client CompaniesHouseInputGatewayClient [L55]
      └─ uses_service CompaniesHouseInputGatewayClient
        └─ method SendAsync [L55]
          └─ implementation DataGet.Integrations.CompaniesHouseGateway.Api.Gateway.CompaniesHouseInputGatewayClient.SendAsync [L13-L227]
      └─ uses_service GovTalkEnvelopeCreator
        └─ method Create [L54]
          └─ ... (no implementation details available)
      └─ uses_service IMapper
        └─ method Map [L59]
          └─ ... (no implementation details available)

[web] POST /api/companies-house-gateway/accounts  (DataGet.Api.Controllers.Integrations.CompaniesHouseGatewayController.SubmitAccountsAsync)  [L123–L128] status=201 [auth=Authentication.MachineToMachinePolicy]
  └─ sends_request SubmitAccountsCommand [L127]
    └─ handled_by DataGet.Integrations.CompaniesHouseGateway.Api.Commands.SubmitAccountsCommandHandler.Handle [L89–L132]
      └─ uses_client CompaniesHouseInputGatewayClient [L106]
      └─ uses_service CompaniesHouseInputGatewayClient
        └─ method SendAsync [L106]
          └─ implementation DataGet.Integrations.CompaniesHouseGateway.Api.Gateway.CompaniesHouseInputGatewayClient.SendAsync [L13-L227]
      └─ uses_service GovTalkEnvelopeCreator
        └─ method CreateFiling [L105]
          └─ ... (no implementation details available)

[web] PUT /api/fyi/authenticate  (DataGet.Api.Controllers.Integrations.FyiController.Authenticate)  [L228–L253] status=200 [auth=Authentication.MachineToMachinePolicy]
  └─ uses_service UserTokenService
    └─ method GetTokenAsync [L232]
      └─ implementation DataGet.Connections.App.Services.UserTokenService.GetTokenAsync [L11-L81]
      └─ implementation DataGet.Connections.App.Services.UserTokenService.GetTokenAsync [L11-L81]

[web] GET /api/fyi/documents/{documentVersionId:guid}/authorise-upload  (DataGet.Api.Controllers.Integrations.FyiController.AuthoriseUpload)  [L144–L152] status=200 [auth=Authentication.MachineToMachinePolicy]
  └─ sends_request GetDocumentUploadAuthorisationQuery [L149]
    └─ handled_by DataGet.Integrations.Fyi.Api.Queries.GetDocumentUploadAuthorisationQueryHandler.Handle [L18–L33]
      └─ uses_service FyiService
        └─ method AuthoriseUpload [L29]
          └─ implementation DataGet.Integrations.Fyi.Api.FyiService.AuthoriseUpload [L30-L166]

[web] POST /api/fyi/documents  (DataGet.Api.Controllers.Integrations.FyiController.CreateDocument)  [L154–L163] status=201 [auth=Authentication.MachineToMachinePolicy]

[web] DELETE /api/fyi/disconnect  (DataGet.Api.Controllers.Integrations.FyiController.Disconnect)  [L283–L291] status=200 [auth=Authentication.MachineToMachinePolicy]
  └─ uses_service IConnectionService (InstancePerLifetimeScope)
    └─ method DeleteCurrentConnectionAsync [L287]
      └─ implementation IConnectionService.DeleteCurrentConnectionAsync [L44-L45]
      └─ ... (no implementation details available)

[web] GET /api/fyi/access-info  (DataGet.Api.Controllers.Integrations.FyiController.GetAccessInfo)  [L255–L268] status=200 [auth=Authentication.MachineToMachinePolicy]
  └─ uses_service UserTokenService
    └─ method GetTokenAsync [L260]
      └─ implementation DataGet.Connections.App.Services.UserTokenService.GetTokenAsync [L11-L81]
      └─ implementation DataGet.Connections.App.Services.UserTokenService.GetTokenAsync [L11-L81]

[web] GET /api/fyi/authentication-fyi-elite  (DataGet.Api.Controllers.Integrations.FyiController.GetAccessInfoWithAccessSecretForFyiElite)  [L270–L281] status=200 [auth=Authentication.MachineToMachinePolicy]
  └─ uses_service UserTokenService
    └─ method GetTokenAsync [L275]
      └─ implementation DataGet.Connections.App.Services.UserTokenService.GetTokenAsync [L11-L81]
      └─ implementation DataGet.Connections.App.Services.UserTokenService.GetTokenAsync [L11-L81]

[web] GET /api/fyi/cabinets/{cabinetId:long}  (DataGet.Api.Controllers.Integrations.FyiController.GetCabinet)  [L56–L65] status=200 [auth=Authentication.MachineToMachinePolicy]
  └─ sends_request GetCabinetQuery [L61]
    └─ handled_by DataGet.Integrations.Fyi.Api.Queries.GetCabinetQueryHandler.Handle [L18–L33]
      └─ uses_service FyiService
        └─ method GetCabinet [L29]
          └─ implementation DataGet.Integrations.Fyi.Api.FyiService.GetCabinet [L30-L166]

[web] GET /api/fyi/cabinets  (DataGet.Api.Controllers.Integrations.FyiController.GetCabinets)  [L45–L54] status=200 [auth=Authentication.MachineToMachinePolicy]
  └─ sends_request GetCabinetsQuery [L50]
    └─ handled_by DataGet.Integrations.Fyi.Api.Queries.GetCabinetsQueryHandler.Handle [L19–L36]
      └─ uses_service FyiService
        └─ method GetCabinets [L30]
          └─ implementation DataGet.Integrations.Fyi.Api.FyiService.GetCabinets [L30-L166]

[web] GET /api/fyi/categories  (DataGet.Api.Controllers.Integrations.FyiController.GetCategories)  [L67–L76] status=200 [auth=Authentication.MachineToMachinePolicy]
  └─ sends_request GetCategoriesQuery [L72]
    └─ handled_by DataGet.Integrations.Fyi.Api.Queries.GetCategoriesQueryHandler.Handle [L19–L36]
      └─ uses_service FyiService
        └─ method GetCategories [L30]
          └─ implementation DataGet.Integrations.Fyi.Api.FyiService.GetCategories [L30-L166]

[web] GET /api/fyi/categories/{categoryId:long}  (DataGet.Api.Controllers.Integrations.FyiController.GetCategory)  [L78–L87] status=200 [auth=Authentication.MachineToMachinePolicy]
  └─ sends_request GetCategoryQuery [L83]
    └─ handled_by DataGet.Integrations.Fyi.Api.Queries.GetCategoryQueryHandler.Handle [L18–L33]
      └─ uses_service FyiService
        └─ method GetCategory [L29]
          └─ implementation DataGet.Integrations.Fyi.Api.FyiService.GetCategory [L30-L166]

[web] GET /api/fyi/documents/{documentId:guid}  (DataGet.Api.Controllers.Integrations.FyiController.GetDocument)  [L111–L120] status=200 [auth=Authentication.MachineToMachinePolicy]

[web] GET /api/fyi/documents/{documentVersionId:guid}/downloadUrl  (DataGet.Api.Controllers.Integrations.FyiController.GetDocumentDownloadUrl)  [L133–L142] status=200 [auth=Authentication.MachineToMachinePolicy]
  └─ sends_request GetDocumentDownloadUrlQuery [L138]
    └─ handled_by DataGet.Integrations.Fyi.Api.Queries.GetDocumentDownloadUrlQueryHandler.Handle [L18–L33]
      └─ uses_service FyiService
        └─ method GetDocumentDownloadUrl [L29]
          └─ implementation DataGet.Integrations.Fyi.Api.FyiService.GetDocumentDownloadUrl [L30-L166]

[web] GET /api/fyi/documents  (DataGet.Api.Controllers.Integrations.FyiController.GetDocuments)  [L89–L109] status=200 [auth=Authentication.MachineToMachinePolicy]
  └─ sends_request GetDocumentsQuery [L105]
    └─ handled_by DataGet.Integrations.Fyi.Api.Queries.GetDocumentsQueryHandler.Handle [L19–L36]
      └─ uses_service FyiService
        └─ method GetDocuments [L30]
          └─ implementation DataGet.Integrations.Fyi.Api.FyiService.GetDocuments [L30-L166]

[web] GET /api/fyi/entities  (DataGet.Api.Controllers.Integrations.FyiController.GetEntities)  [L175–L184] status=200 [auth=Authentication.MachineToMachinePolicy]
  └─ sends_request GetEntitiesQuery [L180]
    └─ handled_by DataGet.Integrations.Fyi.Api.Queries.GetEntitiesQueryHandler.Handle [L19–L36]
      └─ uses_service FyiService
        └─ method GetEntities [L30]
          └─ implementation DataGet.Integrations.Fyi.Api.FyiService.GetEntities [L30-L166]

[web] GET /api/fyi/entities/{entityId:long}  (DataGet.Api.Controllers.Integrations.FyiController.GetEntity)  [L186–L195] status=200 [auth=Authentication.MachineToMachinePolicy]
  └─ sends_request GetEntityQuery [L191]
    └─ handled_by DataGet.Integrations.Fyi.Api.Queries.GetEntityQueryHandler.Handle [L18–L33]
      └─ uses_service FyiService
        └─ method GetEntity [L29]
          └─ implementation DataGet.Integrations.Fyi.Api.FyiService.GetEntity [L30-L166]

[web] GET /api/fyi/documents/external  (DataGet.Api.Controllers.Integrations.FyiController.GetExternalDocument)  [L122–L131] status=200 [auth=Authentication.MachineToMachinePolicy]
  └─ sends_request GetExternalDocumentQuery [L127]
    └─ handled_by DataGet.Integrations.Fyi.Api.Queries.GetExternalDocumentQueryHandler.Handle [L18–L33]
      └─ uses_service FyiService
        └─ method GetExternalDocument [L29]
          └─ implementation DataGet.Integrations.Fyi.Api.FyiService.GetExternalDocument [L30-L166]

[web] GET /api/fyi/groups/{groupId:long}  (DataGet.Api.Controllers.Integrations.FyiController.GetGroup)  [L208–L215] status=200 [auth=Authentication.MachineToMachinePolicy]
  └─ sends_request GetGroupQuery [L211]
    └─ handled_by DataGet.Integrations.Fyi.Api.Queries.GetGroupQueryHandler.Handle [L18–L33]
      └─ uses_service FyiService
        └─ method GetGroup [L29]
          └─ implementation DataGet.Integrations.Fyi.Api.FyiService.GetGroup [L30-L166]

[web] GET /api/fyi/groups  (DataGet.Api.Controllers.Integrations.FyiController.GetGroups)  [L197–L206] status=200 [auth=Authentication.MachineToMachinePolicy]
  └─ sends_request GetGroupsQuery [L202]
    └─ handled_by DataGet.Integrations.Fyi.Api.Queries.GetGroupsQueryHandler.Handle [L19–L36]
      └─ uses_service FyiService
        └─ method GetGroups [L30]
          └─ implementation DataGet.Integrations.Fyi.Api.FyiService.GetGroups [L30-L166]

[web] GET /api/fyi/users  (DataGet.Api.Controllers.Integrations.FyiController.GetUsers)  [L217–L226] status=200 [auth=Authentication.MachineToMachinePolicy]

[web] GET /api/fyi  (DataGet.Api.Controllers.Integrations.FyiController.SetConnectionContext)  [L319–L322] status=200 [auth=Authentication.MachineToMachinePolicy]

[web] GET /api/fyi/test-connection  (DataGet.Api.Controllers.Integrations.FyiController.TestConnection)  [L293–L302] status=200 [auth=Authentication.MachineToMachinePolicy]

[web] POST /api/fyi/documents/upload-file  (DataGet.Api.Controllers.Integrations.FyiController.UploadFile)  [L165–L173] status=201 [auth=Authentication.MachineToMachinePolicy]
  └─ sends_request UploadFileCommand [L170]
    └─ handled_by DataGet.Integrations.Fyi.Api.Commands.UploadFileCommandHandler.Handle [L23–L59]
      └─ uses_client HttpClient [L46]
      └─ uses_service HttpClient (SingleInstance)
        └─ method GetByteArrayAsync [L46]
          └─ ... (no implementation details available)

[web] GET /api/fyi/verify-connection  (DataGet.Api.Controllers.Integrations.FyiController.VerifyConnection)  [L304–L317] status=200 [auth=Authentication.MachineToMachinePolicy]
  └─ uses_service UserTokenService
    └─ method GetTokenAsync [L309]
      └─ implementation DataGet.Connections.App.Services.UserTokenService.GetTokenAsync [L11-L81]
      └─ implementation DataGet.Connections.App.Services.UserTokenService.GetTokenAsync [L11-L81]

[web] PUT /api/fyi-elite/authenticate  (DataGet.Api.Controllers.Integrations.FyiEliteController.Authenticate)  [L36–L62] status=200 [auth=Authentication.MachineToMachinePolicy]
  └─ uses_service UserTokenService
    └─ method GetTokenAsync [L41]
      └─ implementation DataGet.Connections.App.Services.UserTokenService.GetTokenAsync [L11-L81]
      └─ implementation DataGet.Connections.App.Services.UserTokenService.GetTokenAsync [L11-L81]

[web] DELETE /api/fyi-elite/disconnect  (DataGet.Api.Controllers.Integrations.FyiEliteController.Disconnect)  [L79–L90] status=200 [auth=Authentication.MachineToMachinePolicy]
  └─ uses_service UserTokenService
    └─ method GetTokenAsync [L84]
      └─ implementation DataGet.Connections.App.Services.UserTokenService.GetTokenAsync [L11-L81]
      └─ implementation DataGet.Connections.App.Services.UserTokenService.GetTokenAsync [L11-L81]

[web] GET /api/fyi-elite/access-info  (DataGet.Api.Controllers.Integrations.FyiEliteController.GetAccessInfo)  [L64–L77] status=200 [auth=Authentication.MachineToMachinePolicy]
  └─ uses_service UserTokenService
    └─ method GetTokenAsync [L69]
      └─ implementation DataGet.Connections.App.Services.UserTokenService.GetTokenAsync [L11-L81]
      └─ implementation DataGet.Connections.App.Services.UserTokenService.GetTokenAsync [L11-L81]

[web] GET /api/fyi-elite  (DataGet.Api.Controllers.Integrations.FyiEliteController.SetConnectionContext)  [L103–L106] status=200 [auth=Authentication.MachineToMachinePolicy]

[web] GET /api/fyi-elite/test-connection  (DataGet.Api.Controllers.Integrations.FyiEliteController.TestConnection)  [L92–L101] status=200 [auth=Authentication.MachineToMachinePolicy]

[web] GET /api/hmrc/feedback  (DataGet.Api.Controllers.Integrations.HmrcController.GetFraudHeaderFeedback)  [L79–L89] status=200 [auth=Authentication.MachineToMachinePolicy]
  └─ uses_service HmrcApiService (AddScoped)
    └─ method GetFraudHeaderFeedback [L84]
      └─ implementation DataGet.Integrations.Hmrc.Api.Services.HmrcApiService.GetFraudHeaderFeedback [L17-L78]

[web] POST /api/hmrc/vat/obligations  (DataGet.Api.Controllers.Integrations.HmrcController.GetVatObligations)  [L42–L53] status=201 [auth=Authentication.MachineToMachinePolicy]
  └─ uses_service HmrcApiService (AddScoped)
    └─ method GetVatObligations [L48]
      └─ implementation DataGet.Integrations.Hmrc.Api.Services.HmrcApiService.GetVatObligations [L17-L78]

[web] POST /api/hmrc/vat/package  (DataGet.Api.Controllers.Integrations.HmrcController.GetVatPackage)  [L29–L40] status=201 [auth=Authentication.MachineToMachinePolicy]
  └─ uses_service HmrcApiService (AddScoped)
    └─ method GetVatPackage [L35]
      └─ implementation DataGet.Integrations.Hmrc.Api.Services.HmrcApiService.GetVatPackage [L17-L78]

[web] GET /api/hmrc  (DataGet.Api.Controllers.Integrations.HmrcController.SetConnectionContext)  [L91–L94] status=200 [auth=Authentication.MachineToMachinePolicy]

[web] POST /api/hmrc/vat/submit  (DataGet.Api.Controllers.Integrations.HmrcController.SubmitVatReturn)  [L55–L65] status=201 [auth=Authentication.MachineToMachinePolicy]
  └─ uses_service HmrcApiService (AddScoped)
    └─ method SubmitVatReturn [L60]
      └─ implementation DataGet.Integrations.Hmrc.Api.Services.HmrcApiService.SubmitVatReturn [L17-L78]

[web] POST /api/hmrc/validate  (DataGet.Api.Controllers.Integrations.HmrcController.ValidateFraudHeaders)  [L67–L77] status=201 [auth=Authentication.MachineToMachinePolicy]
  └─ uses_service HmrcApiService (AddScoped)
    └─ method ValidateFraudHeaders [L72]
      └─ implementation DataGet.Integrations.Hmrc.Api.Services.HmrcApiService.ValidateFraudHeaders [L17-L78]

[web] PUT /api/imanage/authenticate-firm-user  (DataGet.Api.Controllers.Integrations.IManageController.AuthenticateFirmUser)  [L94–L113] status=200 [auth=Authentication.MachineToMachinePolicy]
  └─ uses_service UserTokenService
    └─ method SaveTokenAsync [L109]
      └─ implementation DataGet.Connections.App.Services.UserTokenService.SaveTokenAsync [L11-L81]
      └─ implementation DataGet.Connections.App.Services.UserTokenService.SaveTokenAsync [L11-L81]

[web] DELETE /api/imanage/disconnect  (DataGet.Api.Controllers.Integrations.IManageController.Disconnect)  [L148–L164] status=200 [auth=Authentication.MachineToMachinePolicy]
  └─ uses_service IConnectionService (InstancePerLifetimeScope)
    └─ method GetConnectionsAsync [L154]
      └─ implementation IConnectionService.GetConnectionsAsync [L44-L45]
      └─ ... (no implementation details available)
  └─ sends_request DeleteIntegrationConfigCommand [L159]
    └─ handled_by DataGet.Connections.App.Commands.DeleteIntegrationConfigCommandHandler.Handle [L19–L41]
      └─ uses_service IControlledRepository<IntegrationConfiguration>
        └─ method WriteQuery [L30]
          └─ ... (no implementation details available)
  └─ sends_request DisconnectIManageUserTokensCommand [L157]
    └─ handled_by DataGet.Integrations.iManage.Api.Command.DisconnectIManageUserTokensCommandHandler.Handle [L17–L40]
      └─ uses_service UserTokenService
        └─ method GetAllUserTokensAsync [L30]
          └─ implementation DataGet.Connections.App.Services.UserTokenService.GetAllUserTokensAsync [L11-L81]

[web] DELETE /api/imanage/disconnect-user-token  (DataGet.Api.Controllers.Integrations.IManageController.DisconnectUserToken)  [L166–L177] status=200 [auth=Authentication.MachineToMachinePolicy]
  └─ uses_service IConnectionService (InstancePerLifetimeScope)
    └─ method DeleteCurrentConnectionAsync [L172]
      └─ implementation IConnectionService.DeleteCurrentConnectionAsync [L44-L45]
      └─ ... (no implementation details available)
  └─ sends_request DisconnectIManageUserTokenCommand [L171]
    └─ handled_by DataGet.Integrations.iManage.Api.Command.DisconnectIManageUserTokenCommandHandler.Handle [L11–L34]
      └─ uses_service UserTokenService
        └─ method GetTokenAsync [L24]
          └─ implementation DataGet.Connections.App.Services.UserTokenService.GetTokenAsync [L11-L81]

[web] GET /api/imanage/customers/{customerId:int}/libraries/{library}/documents/{documentId}/download  (DataGet.Api.Controllers.Integrations.IManageController.DownloadDocument)  [L248–L256] status=200 [auth=Authentication.MachineToMachinePolicy]
  └─ sends_request GetIManageDocumentDownloadContentQuery [L255]
    └─ handled_by DataGet.Integrations.iManage.Api.Queries.GetIManageDocumentDownloadContentQueryHandler.Handle [L24–L41]
      └─ uses_service IManageService
        └─ method GetDocumentDownloadContent [L36]
          └─ implementation DataGet.Integrations.iManage.Api.Services.IManageService.GetDocumentDownloadContent [L12-L223]

[web] GET /api/imanage/access-info  (DataGet.Api.Controllers.Integrations.IManageController.GetAccessInfo)  [L115–L136] status=200 [auth=Authentication.MachineToMachinePolicy]
  └─ uses_service IIntegrationConfigService (InstancePerLifetimeScope)
    └─ method GetDisplayIntegrationConfigInfo [L123]
      └─ implementation DataGet.Connections.App.Services.IntegrationConfigService.GetDisplayIntegrationConfigInfo [L8-L37]

[web] GET /api/imanage  (DataGet.Api.Controllers.Integrations.IManageController.GetApiInfo)  [L290–L296] status=200 [auth=Authentication.MachineToMachinePolicy]
  └─ sends_request GetIManageApiInformationQuery [L292]
    └─ handled_by DataGet.Integrations.iManage.Api.Queries.GetIManageApiInformationQueryHandler.Handle [L12–L27]
      └─ uses_service IManageService
        └─ method GetApiInformation [L23]
          └─ implementation DataGet.Integrations.iManage.Api.Services.IManageService.GetApiInformation [L12-L223]

[web] POST /api/imanage/authorisation-url  (DataGet.Api.Controllers.Integrations.IManageController.GetAuthorisationUrl)  [L50–L65] status=201 [auth=Authentication.MachineToMachinePolicy]
  └─ uses_service IConnectionService (InstancePerLifetimeScope)
    └─ method GetCurrentUsersConnection [L53]
      └─ implementation IConnectionService.GetCurrentUsersConnection [L44-L45]
      └─ ... (no implementation details available)
  └─ sends_request CreateOrUpdateIntegrationConfigCommand [L58]
    └─ handled_by DataGet.Connections.App.Commands.CreateOrUpdateIntegrationConfigCommandHandler.Handle [L25–L52]
      └─ uses_service IControlledRepository<IntegrationConfiguration>
        └─ method WriteQuery [L36]
          └─ ... (no implementation details available)
  └─ sends_request GetIManageAuthorizationUrlQuery [L55]
    └─ handled_by DataGet.Integrations.iManage.Api.Queries.GetAuthorizationUrlQueryHandler.Handle [L25–L41]
      └─ uses_service IManageService
        └─ method GetAuthorisationUrl [L38]
          └─ implementation DataGet.Integrations.iManage.Api.Services.IManageService.GetAuthorisationUrl [L12-L223]

[web] GET /api/imanage/standard-user-authorisation-url  (DataGet.Api.Controllers.Integrations.IManageController.GetAuthorisationUrlForStandardUser)  [L67–L92] status=200 [auth=Authentication.MachineToMachinePolicy]
  └─ uses_service IConnectionService (InstancePerLifetimeScope)
    └─ method GetCurrentUsersConnection [L70]
      └─ implementation IConnectionService.GetCurrentUsersConnection [L44-L45]
      └─ ... (no implementation details available)
  └─ uses_service IIntegrationConfigService (InstancePerLifetimeScope)
    └─ method GetApiIntegrationConfig [L73]
      └─ implementation DataGet.Connections.App.Services.IntegrationConfigService.GetApiIntegrationConfig [L8-L37]
  └─ sends_request CreateOrUpdateIntegrationConfigCommand [L85]
    └─ handled_by DataGet.Connections.App.Commands.CreateOrUpdateIntegrationConfigCommandHandler.Handle [L25–L52]
      └─ uses_service IControlledRepository<IntegrationConfiguration>
        └─ method WriteQuery [L36]
          └─ ... (no implementation details available)
  └─ sends_request GetIManageAuthorizationUrlQuery [L82]
    └─ handled_by DataGet.Integrations.iManage.Api.Queries.GetAuthorizationUrlQueryHandler.Handle [L25–L41]
      └─ uses_service IManageService
        └─ method GetAuthorisationUrl [L38]
          └─ implementation DataGet.Integrations.iManage.Api.Services.IManageService.GetAuthorisationUrl [L12-L223]

[web] GET /api/imanage/customers/{customerId:int}/libraries/{library}/customs/{clientFieldCustomName}/clients  (DataGet.Api.Controllers.Integrations.IManageController.GetClients)  [L186–L195] status=200 [auth=Authentication.MachineToMachinePolicy]
  └─ sends_request GetIManageClientsQuery [L194]
    └─ handled_by DataGet.Integrations.iManage.Api.Queries.GetIManageClientsQueryHandler.Handle [L24–L42]
      └─ uses_service IManageService
        └─ method GetClients [L35]
          └─ implementation DataGet.Integrations.iManage.Api.Services.IManageService.GetClients [L12-L223]

[web] GET /api/imanage/customers/{customerId:int}/libraries/{library}/documents/{documentId}/profile  (DataGet.Api.Controllers.Integrations.IManageController.GetDocumentProfile)  [L270–L278] status=200 [auth=Authentication.MachineToMachinePolicy]
  └─ sends_request GetIManageDocumentProfileQuery [L277]
    └─ handled_by DataGet.Integrations.iManage.Api.Queries.GetIManageDocumentProfileQueryHandler.Handle [L24–L40]
      └─ uses_service IManageService
        └─ method GetDocumentProfile [L35]
          └─ implementation DataGet.Integrations.iManage.Api.Services.IManageService.GetDocumentProfile [L12-L223]

[web] GET /api/imanage/customers/{customerId:int}/libraries/{library}/customs/{clientFieldCustomName}/documents  (DataGet.Api.Controllers.Integrations.IManageController.GetDocuments)  [L237–L246] status=200 [auth=Authentication.MachineToMachinePolicy]
  └─ sends_request GetIManageDocumentsQuery [L245]
    └─ handled_by DataGet.Integrations.iManage.Api.Queries.GetIManageDocumentsQueryHandler.Handle [L26–L60]
      └─ uses_service IntegrationConfigService
        └─ method GetApiIntegrationConfig [L53]
          └─ implementation DataGet.Connections.App.Services.IntegrationConfigService.GetApiIntegrationConfig [L8-L37]
      └─ uses_service IManageService
        └─ method GetDocuments [L41]
          └─ implementation DataGet.Integrations.iManage.Api.Services.IManageService.GetDocuments [L12-L223]

[web] GET /api/imanage/customers/{customerId:int}/libraries/{library}/documents/{documentId}/versions  (DataGet.Api.Controllers.Integrations.IManageController.GetDocumentVersions)  [L280–L288] status=200 [auth=Authentication.MachineToMachinePolicy]
  └─ sends_request GetIManageDocumentVersionsQuery [L287]
    └─ handled_by DataGet.Integrations.iManage.Api.Queries.GetIManageDocumentVersionsQueryHandler.Handle [L20–L32]
      └─ uses_service IManageService
        └─ method GetVersions [L29]
          └─ implementation DataGet.Integrations.iManage.Api.Services.IManageService.GetVersions [L12-L223]

[web] GET /api/imanage/customers/{customerId:int}/folders  (DataGet.Api.Controllers.Integrations.IManageController.GetFolders)  [L228–L235] status=200 [auth=Authentication.MachineToMachinePolicy]
  └─ sends_request GetIManageFolderQuery [L234]
    └─ handled_by DataGet.Integrations.iManage.Api.Queries.GetIManageFolderQueryHandler.Handle [L19–L32]
      └─ uses_service IManageService
        └─ method GetFolders [L28]
          └─ implementation DataGet.Integrations.iManage.Api.Services.IManageService.GetFolders [L12-L223]

[web] GET /api/imanage/customers/{customerId:int}/libraries  (DataGet.Api.Controllers.Integrations.IManageController.GetLibraries)  [L179–L184] status=200 [auth=Authentication.MachineToMachinePolicy]
  └─ uses_service IIManageService (AddScoped)
    └─ method GetLibraries [L183]
      └─ implementation DataGet.Integrations.iManage.Api.Services.IManageService.GetLibraries [L12-L223]

[web] GET /api/imanage/customers/{customerId:int}/libraries/{library}/folders/{folderId}/children  (DataGet.Api.Controllers.Integrations.IManageController.GetSubFolders)  [L218–L226] status=200 [auth=Authentication.MachineToMachinePolicy]
  └─ sends_request GetIManageSubFoldersQuery [L225]
    └─ handled_by DataGet.Integrations.iManage.Api.Queries.GetIManageSubFoldersQueryHandler.Handle [L21–L37]
      └─ uses_service IManageService
        └─ method GetSubFolders [L32]
          └─ implementation DataGet.Integrations.iManage.Api.Services.IManageService.GetSubFolders [L12-L223]

[web] GET /api/imanage/customers/{customerId:int}/libraries/{library}/workspaces/{workspaceId}/children  (DataGet.Api.Controllers.Integrations.IManageController.GetWorkspaceFolders)  [L208–L216] status=200 [auth=Authentication.MachineToMachinePolicy]
  └─ sends_request GetIManageWorkspaceChildrenQuery [L215]
    └─ handled_by DataGet.Integrations.iManage.Api.Queries.GetIManageWorkspaceChildrenQueryHandler.Handle [L22–L38]
      └─ uses_service IManageService
        └─ method GetWorkspaceFolders [L33]
          └─ implementation DataGet.Integrations.iManage.Api.Services.IManageService.GetWorkspaceFolders [L12-L223]

[web] GET /api/imanage/customers/{customerId:int}/libraries/{library}/customs/{clientFieldCustomName}/workspaces  (DataGet.Api.Controllers.Integrations.IManageController.GetWorkspaces)  [L197–L206] status=200 [auth=Authentication.MachineToMachinePolicy]
  └─ sends_request GetIManageWorkspacesQuery [L205]
    └─ handled_by DataGet.Integrations.iManage.Api.Queries.GetIManageWorkspacesQueryHandler.Handle [L25–L43]
      └─ uses_service IManageService
        └─ method GetWorkspaces [L36]
          └─ implementation DataGet.Integrations.iManage.Api.Services.IManageService.GetWorkspaces [L12-L223]

[web] GET /api/imanage  (DataGet.Api.Controllers.Integrations.IManageController.SetConnectionContext)  [L298–L301] status=200 [auth=Authentication.MachineToMachinePolicy]

[web] GET /api/imanage/api-information  (DataGet.Api.Controllers.Integrations.IManageController.TestConnection)  [L138–L146] status=200 [auth=Authentication.MachineToMachinePolicy]
  └─ sends_request GetIManageApiInformationQuery [L142]
    └─ handled_by DataGet.Integrations.iManage.Api.Queries.GetIManageApiInformationQueryHandler.Handle [L12–L27]
      └─ uses_service IManageService
        └─ method GetApiInformation [L23]
          └─ implementation DataGet.Integrations.iManage.Api.Services.IManageService.GetApiInformation [L12-L223]

[web] POST /api/imanage/customers/{customerId:int}/libraries/{library}/client-selector/{clientSelector}/documents  (DataGet.Api.Controllers.Integrations.IManageController.UploadFile)  [L258–L268] status=201 [auth=Authentication.MachineToMachinePolicy]
  └─ sends_request UploadFileToIManageCommand [L266]
    └─ handled_by DataGet.Integrations.iManage.Api.Command.UploadFileToIManageCommandHandler.Handle [L27–L83]
      └─ uses_client HttpClient [L57]
      └─ uses_service IManageService
        └─ method UploadFileToIManage [L59]
          └─ implementation DataGet.Integrations.iManage.Api.Services.IManageService.UploadFileToIManage [L12-L223]
      └─ uses_service HttpClient (SingleInstance)
        └─ method GetByteArrayAsync [L57]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<IntegrationConfiguration>
        └─ method ReadQuery [L66]
          └─ ... (no implementation details available)

[web] PUT /api/karbon/authenticate  (DataGet.Api.Controllers.Integrations.KarbonController.Authenticate)  [L34–L51] status=200 [auth=Authentication.MachineToMachinePolicy]
  └─ uses_service UserTokenService
    └─ method SaveTokenAsync [L47]
      └─ implementation DataGet.Connections.App.Services.UserTokenService.SaveTokenAsync [L11-L81]
      └─ implementation DataGet.Connections.App.Services.UserTokenService.SaveTokenAsync [L11-L81]

[web] DELETE /api/karbon/disconnect  (DataGet.Api.Controllers.Integrations.KarbonController.Disconnect)  [L64–L75] status=200 [auth=Authentication.MachineToMachinePolicy]
  └─ uses_service UserTokenService
    └─ method GetTokenAsync [L69]
      └─ implementation DataGet.Connections.App.Services.UserTokenService.GetTokenAsync [L11-L81]
      └─ implementation DataGet.Connections.App.Services.UserTokenService.GetTokenAsync [L11-L81]

[web] GET /api/karbon  (DataGet.Api.Controllers.Integrations.KarbonController.SetConnectionContext)  [L77–L80] status=200 [auth=Authentication.MachineToMachinePolicy]

[web] GET /api/karbon/test-connection  (DataGet.Api.Controllers.Integrations.KarbonController.TestConnection)  [L53–L62] status=200 [auth=Authentication.MachineToMachinePolicy]
  └─ sends_request TestConnectionQuery [L58]
    └─ handled_by Cirrus.Connections.DataGet.Queries.TestConnectionQueryHandler.Handle [L17–L31]
      └─ uses_client DataGetClient [L28]
        └─ calls TestConnection (GET /api/connection/{apiType}/test-connection?fileId={*}&password={*}&username={*}, method=TestConnectionAsync, target=DataGet.Api, query=fileId={*}&password={*}&username={*}) [L472]
          └─ target_service DataGet.Api
            └─ [web] GET /api/connection/{apiType}/test-connection  (DataGet.Api.Controllers.Connections.ConnectionController.TestConnection)  [L110–L119] status=200 [auth=Authentication.MachineToMachinePolicy]
              └─ sends_request TestConnectionCommand [L114]
                └─ handled_by DataGet.Connections.App.Commands.TestConnectionCommandHandler.Handle [L25–L61]
                  └─ uses_service IExternalApiServiceFactory (InstancePerLifetimeScope)
                    └─ method GetExternalApiFromApiType [L38]
                      └─ ... (no implementation details available)
                  └─ uses_service RequestProcessor
                    └─ method ProcessAsync [L47]
                      └─ implementation DataGet.Services.Features.Requests.RequestProcessor.ProcessAsync [L7-L35]
                        └─ constructs RequestProcessorWrapper<TRequest,TResult>
                        └─ resolves IPipelineBehavior<TRequest,TResult> chain
                        └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle
      └─ uses_service DataGetClient
        └─ method TestConnectionAsync [L28]
          └─ implementation Cirrus.Connections.DataGet.Client.DataGetClient.TestConnectionAsync [L15-L302]
            └─ calls TestConnection [L84]

[web] GET /api/internal/connections/{apiType}/tenants  (DataGet.Api.Controllers.Internal.InternalController.GetConnectedTenantIds)  [L21–L28] status=200 [auth=Authentication.MachineToMachinePolicy]

[web] POST /api/lodgment/request  (DataGet.Api.Controllers.Lodgment.LodgmentController.RequestLodgementAsync)  [L31–L63] status=201
  └─ sends_request RequestLodgmentCommand [L53]
    └─ handled_by DataGet.ApplicationService.Features.Lodgment.RequestLodgmentCommandHandler.Handle [L6–L26]
      └─ uses_service LodgmentResolver
        └─ method Resolve [L15]
          └─ ... (no implementation details available)

[web] POST /create-or-update  (Dataverse.Api.Controllers.External.ClientsController.CreateOrUpdate)  [L52–L59] status=201
  └─ sends_request CreateOrUpdateClientCommand [L55]
    └─ handled_by Dataverse.ApplicationService.Commands.Clients.CreateOrUpdateClientCommandHandler.Handle [L48–L209]
      └─ maps_to ClientDto [L207]
      └─ uses_service FirmSettingsService
        └─ method GetCurrentSettingsAsync [L81]
          └─ implementation Dataverse.ApplicationService.Services.FirmSettingsService.GetCurrentSettingsAsync [L18-L97]
      └─ uses_service TenantService
        └─ method GetCurrentTenantAsync [L179]
          └─ implementation Dataverse.Services.Features.Tenants.TenantService.GetCurrentTenantAsync [L6-L27]
          └─ implementation Dataverse.Services.Features.Tenants.TenantService.GetCurrentTenantAsync [L6-L27]
      └─ uses_service IControlledRepository<Client>
        └─ method ReadQuery [L95]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<Contact>
        └─ method ReadQuery [L94]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<Office>
        └─ method ReadQuery [L89]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<Team>
        └─ method ReadQuery [L90]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<User>
        └─ method ReadQuery [L91]
          └─ ... (no implementation details available)
      └─ uses_service IMapper
        └─ method Map [L207]
          └─ ... (no implementation details available)

[web] GET /audit/find  (Dataverse.Api.Controllers.External.ClientsController.FindAudit)  [L46–L50] status=200
  └─ calls ClientRepository.ReadQuery [L49]
  └─ query Client [L49]
  └─ uses_service IControlledRepository<Client>
    └─ method ReadQuery [L49]
      └─ ... (no implementation details available)

[web] GET /audit  (Dataverse.Api.Controllers.External.ClientsController.GetAllAudits)  [L39–L44] status=200
  └─ calls ClientRepository.ReadQuery [L43]
  └─ query Client [L43]
  └─ uses_service IControlledRepository<Client>
    └─ method ReadQuery [L43]
      └─ ... (no implementation details available)

[web] PUT /  (Dataverse.Api.Controllers.External.ClientsController.UpdateDetails)  [L61–L65] status=200
  └─ sends_request CreateOrUpdateClientCommand [L64]
    └─ handled_by Dataverse.ApplicationService.Commands.Clients.CreateOrUpdateClientCommandHandler.Handle [L48–L209]
      └─ maps_to ClientDto [L207]
      └─ uses_service FirmSettingsService
        └─ method GetCurrentSettingsAsync [L81]
          └─ implementation Dataverse.ApplicationService.Services.FirmSettingsService.GetCurrentSettingsAsync [L18-L97]
      └─ uses_service TenantService
        └─ method GetCurrentTenantAsync [L179]
          └─ implementation Dataverse.Services.Features.Tenants.TenantService.GetCurrentTenantAsync [L6-L27]
          └─ implementation Dataverse.Services.Features.Tenants.TenantService.GetCurrentTenantAsync [L6-L27]
      └─ uses_service IControlledRepository<Client>
        └─ method ReadQuery [L95]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<Contact>
        └─ method ReadQuery [L94]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<Office>
        └─ method ReadQuery [L89]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<Team>
        └─ method ReadQuery [L90]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<User>
        └─ method ReadQuery [L91]
          └─ ... (no implementation details available)
      └─ uses_service IMapper
        └─ method Map [L207]
          └─ ... (no implementation details available)

[web] POST /create-or-update  (Dataverse.Api.Controllers.External.ContactsController.CreateOrUpdate)  [L53–L60] status=201
  └─ sends_request CreateOrUpdateContactCommand [L56]
    └─ handled_by Dataverse.ApplicationService.Commands.Clients.CreateOrUpdateContactCommandHandler.Handle [L39–L79]
      └─ maps_to ContactDto [L77]
      └─ uses_service FirmSettingsService
        └─ method GetCurrentSettingsAsync [L54]
          └─ implementation Dataverse.ApplicationService.Services.FirmSettingsService.GetCurrentSettingsAsync [L18-L97]
      └─ uses_service IControlledRepository<Contact>
        └─ method WriteQuery [L61]
          └─ ... (no implementation details available)
      └─ uses_service IMapper
        └─ method Map [L77]
          └─ ... (no implementation details available)

[web] GET /audit/find  (Dataverse.Api.Controllers.External.ContactsController.FindAudit)  [L47–L51] status=200
  └─ calls ContactRepository.ReadQuery [L50]
  └─ query Contact [L50]
    └─ reads_from DVS_Clients
  └─ uses_service IControlledRepository<Contact>
    └─ method ReadQuery [L50]
      └─ ... (no implementation details available)

[web] GET /audit  (Dataverse.Api.Controllers.External.ContactsController.GetAllAudits)  [L40–L45] status=200
  └─ calls ContactRepository.ReadQuery [L44]
  └─ query Contact [L44]
    └─ reads_from DVS_Clients
  └─ uses_service IControlledRepository<Contact>
    └─ method ReadQuery [L44]
      └─ ... (no implementation details available)

[web] PUT /  (Dataverse.Api.Controllers.External.ContactsController.UpdateDetails)  [L62–L66] status=200
  └─ sends_request CreateOrUpdateContactCommand [L65]
    └─ handled_by Dataverse.ApplicationService.Commands.Clients.CreateOrUpdateContactCommandHandler.Handle [L39–L79]
      └─ maps_to ContactDto [L77]
      └─ uses_service FirmSettingsService
        └─ method GetCurrentSettingsAsync [L54]
          └─ implementation Dataverse.ApplicationService.Services.FirmSettingsService.GetCurrentSettingsAsync [L18-L97]
      └─ uses_service IControlledRepository<Contact>
        └─ method WriteQuery [L61]
          └─ ... (no implementation details available)
      └─ uses_service IMapper
        └─ method Map [L77]
          └─ ... (no implementation details available)

[web] POST /create-or-update  (Dataverse.Api.Controllers.External.OfficesController.CreateOrUpdate)  [L52–L59] status=201
  └─ sends_request CreateOrUpdateOfficeCommand [L55]
    └─ handled_by Dataverse.ApplicationService.Commands.Firms.CreateOrUpdateOfficeCommandHandler.Handle [L38–L78]
      └─ maps_to OfficeDto [L76]
      └─ uses_service FirmSettingsService
        └─ method GetCurrentSettingsAsync [L53]
          └─ implementation Dataverse.ApplicationService.Services.FirmSettingsService.GetCurrentSettingsAsync [L18-L97]
      └─ uses_service IControlledRepository<Office>
        └─ method WriteQuery [L60]
          └─ ... (no implementation details available)
      └─ uses_service IMapper
        └─ method Map [L76]
          └─ ... (no implementation details available)

[web] GET /audit/find  (Dataverse.Api.Controllers.External.OfficesController.FindAudit)  [L46–L50] status=200
  └─ calls OfficeRepository.ReadQuery [L49]
  └─ query Office [L49]
    └─ reads_from Offices
  └─ uses_service IControlledRepository<Office>
    └─ method ReadQuery [L49]
      └─ ... (no implementation details available)

[web] GET /audit  (Dataverse.Api.Controllers.External.OfficesController.GetAllAudits)  [L39–L44] status=200
  └─ calls OfficeRepository.ReadQuery [L43]
  └─ query Office [L43]
    └─ reads_from Offices
  └─ uses_service IControlledRepository<Office>
    └─ method ReadQuery [L43]
      └─ ... (no implementation details available)

[web] PUT /  (Dataverse.Api.Controllers.External.OfficesController.UpdateDetails)  [L61–L65] status=200
  └─ sends_request CreateOrUpdateOfficeCommand [L64]
    └─ handled_by Dataverse.ApplicationService.Commands.Firms.CreateOrUpdateOfficeCommandHandler.Handle [L38–L78]
      └─ maps_to OfficeDto [L76]
      └─ uses_service FirmSettingsService
        └─ method GetCurrentSettingsAsync [L53]
          └─ implementation Dataverse.ApplicationService.Services.FirmSettingsService.GetCurrentSettingsAsync [L18-L97]
      └─ uses_service IControlledRepository<Office>
        └─ method WriteQuery [L60]
          └─ ... (no implementation details available)
      └─ uses_service IMapper
        └─ method Map [L76]
          └─ ... (no implementation details available)

[web] PUT /api/external/sync-configuration/{id:Guid}/error  (Dataverse.Api.Controllers.External.SyncConfigurationController.AddOrUpdateError)  [L96–L113] status=200 [auth=Authentication.AdminPolicy]
  └─ insert SyncConfigurationError [L107]
    └─ reads_from SyncConfigurationErrors
  └─ write SyncConfigurationError [L99]
    └─ reads_from SyncConfigurationErrors
  └─ uses_service IControlledRepository<SyncConfigurationError>
    └─ method WriteQuery [L99]
      └─ ... (no implementation details available)

[web] POST /api/external/sync-configuration/{id:Guid}/complete  (Dataverse.Api.Controllers.External.SyncConfigurationController.Complete)  [L81–L94] status=201 [auth=Authentication.AdminPolicy]
  └─ calls SyncConfigurationRepository.WriteQuery [L88]
  └─ write SyncConfiguration [L88]
    └─ reads_from SyncConfigurations
  └─ uses_service IControlledRepository<SyncConfiguration>
    └─ method WriteQuery [L88]
      └─ ... (no implementation details available)

[web] DELETE /api/external/sync-configuration/{id:Guid}/error  (Dataverse.Api.Controllers.External.SyncConfigurationController.DeleteErrors)  [L121–L135] status=200 [auth=Authentication.AdminPolicy]
  └─ write SyncConfigurationError [L129]
    └─ reads_from SyncConfigurationErrors
  └─ uses_service IControlledRepository<SyncConfigurationError>
    └─ method WriteQuery [L129]
      └─ ... (no implementation details available)

[web] GET /api/external/sync-configuration/  (Dataverse.Api.Controllers.External.SyncConfigurationController.GetAll)  [L55–L70] status=200 [auth=Authentication.AdminPolicy]
  └─ maps_to SyncConfigurationInsecureDto [L58]
    └─ automapper.registration DataverseMappingProfile (SyncConfiguration->SyncConfigurationInsecureDto) [L283]
  └─ uses_cache IDistributedCache.SetRecordAsync [write] [L67]
  └─ calls SyncConfigurationRepository.ReadQuery [L58]
  └─ query SyncConfiguration [L58]
    └─ reads_from SyncConfigurations
  └─ uses_service TenantService
    └─ method GetCurrentTenantAsync [L66]
      └─ implementation Dataverse.Services.Features.Tenants.TenantService.GetCurrentTenantAsync [L6-L27]
  └─ uses_service IControlledRepository<SyncConfiguration>
    └─ method ReadQuery [L58]
      └─ ... (no implementation details available)

[web] GET /api/external/sync-configuration/{id:Guid}  (Dataverse.Api.Controllers.External.SyncConfigurationController.GetById)  [L72–L79] status=200 [auth=Authentication.AdminPolicy]
  └─ maps_to SyncConfigurationInsecureDto [L75]
    └─ automapper.registration DataverseMappingProfile (SyncConfiguration->SyncConfigurationInsecureDto) [L283]
  └─ calls SyncConfigurationRepository.ReadQuery [L75]
  └─ query SyncConfiguration [L75]
    └─ reads_from SyncConfigurations
  └─ uses_service IControlledRepository<SyncConfiguration>
    └─ method ReadQuery [L75]
      └─ ... (no implementation details available)

[web] POST /api/external/sync-configuration/{id:Guid}/notification  (Dataverse.Api.Controllers.External.SyncConfigurationController.PostNotification)  [L115–L119] status=201 [auth=Authentication.AdminPolicy]
  └─ sends_request NotifyUserOfFailedSyncCommand [L118]
    └─ handled_by Dataverse.ApplicationService.Commands.Connections.NotifyUserOfFailedSyncCommandHandler.Handle [L33–L97]
      └─ uses_service BaseUrls
        └─ method Site [L67]
          └─ ... (no implementation details available)
      └─ uses_service EmailSender
        └─ method SendEmailAsync [L90]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<SyncConfiguration>
        └─ method WriteQuery [L57]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<User>
        └─ method ReadQuery [L63]
          └─ ... (no implementation details available)

[web] POST /create-or-update  (Dataverse.Api.Controllers.External.TeamsController.CreateOrUpdate)  [L52–L59] status=201
  └─ sends_request CreateOrUpdateTeamCommand [L55]
    └─ handled_by Dataverse.ApplicationService.Commands.Firms.CreateOrUpdateTeamCommandHandler.Handle [L38–L78]
      └─ maps_to TeamDto [L76]
      └─ uses_service FirmSettingsService
        └─ method GetCurrentSettingsAsync [L53]
          └─ implementation Dataverse.ApplicationService.Services.FirmSettingsService.GetCurrentSettingsAsync [L18-L97]
      └─ uses_service IControlledRepository<Team>
        └─ method WriteQuery [L60]
          └─ ... (no implementation details available)
      └─ uses_service IMapper
        └─ method Map [L76]
          └─ ... (no implementation details available)

[web] GET /audit/find  (Dataverse.Api.Controllers.External.TeamsController.FindAudit)  [L46–L50] status=200
  └─ calls TeamRepository.ReadQuery [L49]
  └─ query Team [L49]
    └─ reads_from Teams
  └─ uses_service IControlledRepository<Team>
    └─ method ReadQuery [L49]
      └─ ... (no implementation details available)

[web] GET /audit  (Dataverse.Api.Controllers.External.TeamsController.GetAllAudits)  [L39–L44] status=200
  └─ calls TeamRepository.ReadQuery [L43]
  └─ query Team [L43]
    └─ reads_from Teams
  └─ uses_service IControlledRepository<Team>
    └─ method ReadQuery [L43]
      └─ ... (no implementation details available)

[web] PUT /  (Dataverse.Api.Controllers.External.TeamsController.UpdateDetails)  [L61–L65] status=200
  └─ sends_request CreateOrUpdateTeamCommand [L64]
    └─ handled_by Dataverse.ApplicationService.Commands.Firms.CreateOrUpdateTeamCommandHandler.Handle [L38–L78]
      └─ maps_to TeamDto [L76]
      └─ uses_service FirmSettingsService
        └─ method GetCurrentSettingsAsync [L53]
          └─ implementation Dataverse.ApplicationService.Services.FirmSettingsService.GetCurrentSettingsAsync [L18-L97]
      └─ uses_service IControlledRepository<Team>
        └─ method WriteQuery [L60]
          └─ ... (no implementation details available)
      └─ uses_service IMapper
        └─ method Map [L76]
          └─ ... (no implementation details available)

[web] POST /create-or-update  (Dataverse.Api.Controllers.External.UsersController.CreateOrUpdate)  [L53–L60] status=201
  └─ maps_to UserWithIdentityInfoDto [L59]
  └─ uses_service IMapper
    └─ method Map [L59]
      └─ ... (no implementation details available)
  └─ sends_request CreateOrUpdateUserCommand [L56]
    └─ handled_by Dataverse.ApplicationService.Commands.Users.CreateOrLinkWithDataverseCommandHandler.Handle [L57–L149]
      └─ uses_service UserService
        └─ method IsInRole [L103]
          └─ implementation Dataverse.ApplicationService.Services.UserService.IsInRole [L15-L185]
      └─ uses_service EventPublisher (InstancePerLifetimeScope)
        └─ method PublishAllEventsForEntity [L145]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<FirmSettings>
        └─ method ReadQuery [L111]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<Office>
        └─ method ReadQuery [L86]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<Team>
        └─ method ReadQuery [L87]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<User>
        └─ method WriteQuery [L89]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L141]
          └─ implementation Dataverse.Services.Features.Requests.RequestProcessor.ProcessAsync [L8-L45]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle

[web] GET /audit/find  (Dataverse.Api.Controllers.External.UsersController.FindAudit)  [L47–L51] status=200
  └─ calls UserRepository.ReadQuery [L50]
  └─ query User [L50]
  └─ uses_service IControlledRepository<User>
    └─ method ReadQuery [L50]
      └─ ... (no implementation details available)

[web] GET /audit  (Dataverse.Api.Controllers.External.UsersController.GetAllAudits)  [L40–L45] status=200
  └─ calls UserRepository.ReadQuery [L44]
  └─ query User [L44]
  └─ uses_service IControlledRepository<User>
    └─ method ReadQuery [L44]
      └─ ... (no implementation details available)

[web] PUT /  (Dataverse.Api.Controllers.External.UsersController.UpdateDetails)  [L62–L66] status=200

[web] GET /api/health  (Dataverse.Api.Controllers.HealthController.Alive)  [L10–L14] status=200 [AllowAnonymous]

[web] GET /api/internal/account-mapping/benchmark-code-sets/{id:guid}  (Dataverse.Api.Controllers.Internal.AccountMapping.BenchmarkCodeSetsController.GetBenchmarkCodeSet)  [L31–L35] status=200 [auth=Authentication.MachineToMachinePolicy,Authentication.RequireTenantIdPolicy]
  └─ sends_request GetBenchmarkCodeSetQuery [L34]
    └─ handled_by Cirrus.Central.Dataverse.Queries.AccountMapping.GetBenchmarkCodeSetQueryHandler.Handle [L27–L62]
      └─ uses_service UserService
        └─ method GetUser [L42]
          └─ implementation Cirrus.ApplicationService.Services.UserService.GetUser [L14-L122]
      └─ uses_service TenantService
        └─ method GetCurrentTenant [L49]
          └─ implementation Cirrus.Central.Tenants.TenantService.GetCurrentTenant [L26-L139]
          └─ implementation Cirrus.Central.Tenants.TenantService.GetCurrentTenant [L26-L139]
      └─ uses_service DataverseService
        └─ method Get [L50]
          └─ implementation Cirrus.Central.Features.MachineToMachine.DataverseService.Get [L14-L66]
  └─ returns DataverseBenchmarkCodeSetDto [L34] [return]

[web] GET /api/internal/account-mapping/external-reporting-systems/{id:guid}  (Dataverse.Api.Controllers.Internal.AccountMapping.ExternalReportingSystemsController.GetExternalReportingSystem)  [L33–L37] status=200 [auth=Authentication.MachineToMachinePolicy,Authentication.RequireTenantIdPolicy]
  └─ sends_request GetExternalReportingSystemQuery [L36]
    └─ handled_by Dataverse.ApplicationService.Queries.AccountMapping.ExternalReportingSystems.GetExternalReportingSystemQueryHandler.Handle [L28–L47]
      └─ maps_to ExternalReportingSystemDto [L43]
        └─ automapper.registration DataverseMappingProfile (ExternalReportingSystem->ExternalReportingSystemDto) [L241]
      └─ uses_service UserService
        └─ method IsMaster [L44]
          └─ implementation Dataverse.ApplicationService.Services.UserService.IsMaster [L15-L185]
      └─ uses_service IControlledRepository<ExternalReportingSystem>
        └─ method ReadQuery [L43]
          └─ ... (no implementation details available)

[web] GET /api/internal/account-mapping/external-reporting-systems  (Dataverse.Api.Controllers.Internal.AccountMapping.ExternalReportingSystemsController.GetExternalReportingSystems)  [L45–L49] status=200 [auth=Authentication.MachineToMachinePolicy,Authentication.RequireTenantIdPolicy]
  └─ sends_request GetExternalReportingSystemsQuery [L48]
    └─ handled_by Dataverse.ApplicationService.Queries.AccountMapping.ExternalReportingSystems.GetExternalReportingSystemsQueryHandler.Handle [L29–L56]
      └─ maps_to ExternalReportingSystemLightDto [L52]
      └─ uses_service UserService
        └─ method IsMaster [L46]
          └─ implementation Dataverse.ApplicationService.Services.UserService.IsMaster [L15-L185]
      └─ uses_service IControlledRepository<ExternalReportingSystem>
        └─ method ReadQuery [L44]
          └─ ... (no implementation details available)
      └─ uses_service IMapper
        └─ method ConfigurationProvider [L53]
          └─ ... (no implementation details available)

[web] GET /api/internal/account-mapping/external-reporting-systems/{id:guid}/mapping-codes/{mappingCodeId:guid}  (Dataverse.Api.Controllers.Internal.AccountMapping.ExternalReportingSystemsController.GetMappingCode)  [L51–L55] status=200 [auth=Authentication.MachineToMachinePolicy,Authentication.RequireTenantIdPolicy]
  └─ sends_request GetExternalReportingSystemMappingCodeQuery [L54]
    └─ handled_by Dataverse.ApplicationService.Queries.AccountMapping.ExternalReportingSystems.GetExternalReportingSystemMappingCodeQueryHandler.Handle [L30–L50]
      └─ maps_to ExternalReportingSystemMappingCodeDto [L46]
        └─ automapper.registration DataverseMappingProfile (ExternalReportingSystemMappingCode->ExternalReportingSystemMappingCodeDto) [L243]
      └─ uses_service IControlledRepository<ExternalReportingSystemMappingCode>
        └─ method ReadQuery [L46]
          └─ ... (no implementation details available)

[web] GET /api/internal/account-mapping/external-reporting-systems/{id:guid}/mapping-codes  (Dataverse.Api.Controllers.Internal.AccountMapping.ExternalReportingSystemsController.GetMappingCodes)  [L57–L61] status=200 [auth=Authentication.MachineToMachinePolicy,Authentication.RequireTenantIdPolicy]
  └─ sends_request GetExternalReportingSystemMappingCodesQuery [L60]
    └─ handled_by Dataverse.ApplicationService.Queries.AccountMapping.ExternalReportingSystems.GetExternalReportingSystemMappingCodesQueryHandler.Handle [L33–L72]
      └─ maps_to ExternalReportingSystemMappingCodeDto [L54]
        └─ automapper.registration DataverseMappingProfile (ExternalReportingSystemMappingCode->ExternalReportingSystemMappingCodeDto) [L243]
      └─ uses_service UserService
        └─ method IsMaster [L53]
          └─ implementation Dataverse.ApplicationService.Services.UserService.IsMaster [L15-L185]
      └─ uses_service IControlledRepository<ExternalReportingSystemMappingCode>
        └─ method ReadQuery [L54]
          └─ ... (no implementation details available)
      └─ uses_service IMapper
        └─ method ConfigurationProvider [L57]
          └─ ... (no implementation details available)

[web] GET /api/internal/account-mapping/external-reporting-systems/mapping-codes  (Dataverse.Api.Controllers.Internal.AccountMapping.ExternalReportingSystemsController.GetMappingCodesByCode)  [L63–L68] status=200 [auth=Authentication.MachineToMachinePolicy,Authentication.RequireTenantIdPolicy]
  └─ sends_request GetExternalReportingSystemMappingCodesByCodeQuery [L66]
    └─ handled_by Dataverse.ApplicationService.Queries.AccountMapping.ExternalReportingSystems.GetExternalReportingSystemMappingCodesByCodeQueryHandler.Handle [L32–L61]
      └─ maps_to ExternalReportingSystemMappingCodeDto [L49]
        └─ automapper.registration DataverseMappingProfile (ExternalReportingSystemMappingCode->ExternalReportingSystemMappingCodeDto) [L243]
      └─ uses_service IControlledRepository<ExternalReportingSystemMappingCode>
        └─ method ReadQuery [L49]
          └─ ... (no implementation details available)
      └─ uses_service IMapper
        └─ method ConfigurationProvider [L52]
          └─ ... (no implementation details available)

[web] GET /api/internal/account-mapping/mapping-codes/{code}  (Dataverse.Api.Controllers.Internal.AccountMapping.MappingCodesController.GetMappingCodeByCode)  [L44–L48] status=200 [auth=Authentication.MachineToMachinePolicy,Authentication.RequireTenantIdPolicy]
  └─ sends_request GetMappingCodeQuery [L47]
    └─ handled_by Dataverse.ApplicationService.Queries.AccountMapping.MappingCodes.GetMappingCodeQueryHandler.Handle [L38–L75]
      └─ maps_to MappingCodeDto [L68]
      └─ uses_service UserService
        └─ method IsMaster [L59]
          └─ implementation Dataverse.ApplicationService.Services.UserService.IsMaster [L15-L185]
      └─ uses_service IControlledRepository<ExcludedMappingCode>
        └─ method ReadQuery [L62]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<MappingCode>
        └─ method ReadQuery [L56]
          └─ ... (no implementation details available)
      └─ uses_service IMapper
        └─ method ConfigurationProvider [L69]
          └─ ... (no implementation details available)

[web] GET /api/internal/account-mapping/mapping-codes/{id:guid}  (Dataverse.Api.Controllers.Internal.AccountMapping.MappingCodesController.GetMappingCodeById)  [L32–L36] status=200 [auth=Authentication.MachineToMachinePolicy,Authentication.RequireTenantIdPolicy]
  └─ sends_request GetMappingCodeQuery [L35]
    └─ handled_by Dataverse.ApplicationService.Queries.AccountMapping.MappingCodes.GetMappingCodeQueryHandler.Handle [L38–L75]
      └─ maps_to MappingCodeDto [L68]
      └─ uses_service UserService
        └─ method IsMaster [L59]
          └─ implementation Dataverse.ApplicationService.Services.UserService.IsMaster [L15-L185]
      └─ uses_service IControlledRepository<ExcludedMappingCode>
        └─ method ReadQuery [L62]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<MappingCode>
        └─ method ReadQuery [L56]
          └─ ... (no implementation details available)
      └─ uses_service IMapper
        └─ method ConfigurationProvider [L69]
          └─ ... (no implementation details available)

[web] GET /api/internal/account-mapping/mapping-codes  (Dataverse.Api.Controllers.Internal.AccountMapping.MappingCodesController.GetMappingCodes)  [L59–L68] status=200 [auth=Authentication.MachineToMachinePolicy,Authentication.RequireTenantIdPolicy]
  └─ sends_request GetMappingCodesQuery [L67]
    └─ handled_by Dataverse.ApplicationService.Queries.AccountMapping.MappingCodes.GetMappingCodesQueryHandler.Handle [L36–L107]
      └─ maps_to MappingCodeDto [L89]
      └─ maps_to MappingCodeDto [L76]
      └─ uses_service UserService
        └─ method IsMaster [L58]
          └─ implementation Dataverse.ApplicationService.Services.UserService.IsMaster [L15-L185]
      └─ uses_service IControlledRepository<ExcludedMappingCode>
        └─ method ReadQuery [L65]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<MappingCode>
        └─ method ReadQuery [L53]
          └─ ... (no implementation details available)
      └─ uses_service IMapper
        └─ method ConfigurationProvider [L79]
          └─ ... (no implementation details available)

[web] POST /api/internal/audit-histories  (Dataverse.Api.Controllers.Internal.AuditHistories.AuditHistoriesController.CreateAuditHistoryEntry)  [L27–L34] status=201 [auth=Authentication.MachineToMachinePolicy,Authentication.RequireTenantIdPolicy]
  └─ sends_request CreateAuditHistoryCommand [L31]
    └─ handled_by Dataverse.ApplicationService.Commands.AuditHistories.CreateAuditHistoryCommandHandler.Handle [L21–L49]
      └─ uses_service UserService
        └─ method GetUserIfPresentAsync [L36]
          └─ implementation Dataverse.ApplicationService.Services.UserService.GetUserIfPresentAsync [L15-L185]
      └─ uses_service IControlledRepository<AuditHistory>
        └─ method Add [L46]
          └─ ... (no implementation details available)

[web] POST /api/internal/clients/  (Dataverse.Api.Controllers.Internal.Core.ClientsController.Create)  [L70–L76] status=201 [auth=Authentication.MachineToMachinePolicy,Authentication.RequireTenantIdPolicy]
  └─ sends_request CreateOrUpdateClientCommand [L74]
    └─ handled_by Dataverse.ApplicationService.Commands.Clients.CreateOrUpdateClientCommandHandler.Handle [L48–L209]
      └─ maps_to ClientDto [L207]
      └─ uses_service FirmSettingsService
        └─ method GetCurrentSettingsAsync [L81]
          └─ implementation Dataverse.ApplicationService.Services.FirmSettingsService.GetCurrentSettingsAsync [L18-L97]
      └─ uses_service TenantService
        └─ method GetCurrentTenantAsync [L179]
          └─ implementation Dataverse.Services.Features.Tenants.TenantService.GetCurrentTenantAsync [L6-L27]
          └─ implementation Dataverse.Services.Features.Tenants.TenantService.GetCurrentTenantAsync [L6-L27]
      └─ uses_service IControlledRepository<Client>
        └─ method ReadQuery [L95]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<Contact>
        └─ method ReadQuery [L94]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<Office>
        └─ method ReadQuery [L89]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<Team>
        └─ method ReadQuery [L90]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<User>
        └─ method ReadQuery [L91]
          └─ ... (no implementation details available)
      └─ uses_service IMapper
        └─ method Map [L207]
          └─ ... (no implementation details available)

[web] POST /api/internal/clients/create-or-update  (Dataverse.Api.Controllers.Internal.Core.ClientsController.CreateOrUpdate)  [L58–L65] status=201 [auth=Authentication.MachineToMachinePolicy,Authentication.RequireTenantIdPolicy]
  └─ sends_request CreateOrUpdateClientCommand [L61]
    └─ handled_by Dataverse.ApplicationService.Commands.Clients.CreateOrUpdateClientCommandHandler.Handle [L48–L209]
      └─ maps_to ClientDto [L207]
      └─ uses_service FirmSettingsService
        └─ method GetCurrentSettingsAsync [L81]
          └─ implementation Dataverse.ApplicationService.Services.FirmSettingsService.GetCurrentSettingsAsync [L18-L97]
      └─ uses_service TenantService
        └─ method GetCurrentTenantAsync [L179]
          └─ implementation Dataverse.Services.Features.Tenants.TenantService.GetCurrentTenantAsync [L6-L27]
          └─ implementation Dataverse.Services.Features.Tenants.TenantService.GetCurrentTenantAsync [L6-L27]
      └─ uses_service IControlledRepository<Client>
        └─ method ReadQuery [L95]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<Contact>
        └─ method ReadQuery [L94]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<Office>
        └─ method ReadQuery [L89]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<Team>
        └─ method ReadQuery [L90]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<User>
        └─ method ReadQuery [L91]
          └─ ... (no implementation details available)
      └─ uses_service IMapper
        └─ method Map [L207]
          └─ ... (no implementation details available)

[web] DELETE /api/internal/clients/{id}  (Dataverse.Api.Controllers.Internal.Core.ClientsController.Delete)  [L88–L95] status=200 [auth=Authentication.MachineToMachinePolicy,Authentication.RequireTenantIdPolicy]
  └─ calls ClientRepository.WriteQuery [L91]
  └─ write Client [L91]
  └─ uses_service IControlledRepository<Client>
    └─ method WriteQuery [L91]
      └─ ... (no implementation details available)

[web] GET /api/internal/clients/{id}  (Dataverse.Api.Controllers.Internal.Core.ClientsController.Get)  [L50–L56] status=200 [auth=Authentication.MachineToMachinePolicy,Authentication.RequireTenantIdPolicy]
  └─ maps_to ClientDto [L53]
    └─ automapper.registration DataverseMappingProfile (Client->ClientDto) [L165]
    └─ automapper.registration WorkpapersMappingProfile (Client->ClientDto) [L69]
    └─ automapper.registration CirrusMappingProfile (Client->ClientDto) [L146]
  └─ calls ClientRepository.ReadQuery [L53]
  └─ query Client [L53]
  └─ uses_service IControlledRepository<Client>
    └─ method ReadQuery [L53]
      └─ ... (no implementation details available)

[web] GET /api/internal/clients/audit  (Dataverse.Api.Controllers.Internal.Core.ClientsController.GetAll)  [L42–L48] status=200 [auth=Authentication.MachineToMachinePolicy,Authentication.RequireTenantIdPolicy]
  └─ calls ClientRepository.ReadQuery [L45]
  └─ query Client [L45]
  └─ uses_service IControlledRepository<Client>
    └─ method ReadQuery [L45]
      └─ ... (no implementation details available)

[web] GET /api/internal/clients/{id:guid}/tax-agent-info  (Dataverse.Api.Controllers.Internal.Core.ClientsController.GetTaxAgentInfo)  [L97–L102] status=200 [auth=Authentication.MachineToMachinePolicy,Authentication.RequireTenantIdPolicy]
  └─ maps_to TaxAgentInfoDto [L100]
    └─ automapper.registration DataverseMappingProfile (Client->TaxAgentInfoDto) [L229]
  └─ calls ClientRepository.ReadQuery [L100]
  └─ query Client [L100]
  └─ uses_service IControlledRepository<Client>
    └─ method ReadQuery [L100]
      └─ ... (no implementation details available)

[web] PUT /api/internal/clients/{id}  (Dataverse.Api.Controllers.Internal.Core.ClientsController.UpdateDetails)  [L78–L86] status=200 [auth=Authentication.MachineToMachinePolicy,Authentication.RequireTenantIdPolicy]
  └─ sends_request CreateOrUpdateClientCommand [L82]
    └─ handled_by Dataverse.ApplicationService.Commands.Clients.CreateOrUpdateClientCommandHandler.Handle [L48–L209]
      └─ maps_to ClientDto [L207]
      └─ uses_service FirmSettingsService
        └─ method GetCurrentSettingsAsync [L81]
          └─ implementation Dataverse.ApplicationService.Services.FirmSettingsService.GetCurrentSettingsAsync [L18-L97]
      └─ uses_service TenantService
        └─ method GetCurrentTenantAsync [L179]
          └─ implementation Dataverse.Services.Features.Tenants.TenantService.GetCurrentTenantAsync [L6-L27]
          └─ implementation Dataverse.Services.Features.Tenants.TenantService.GetCurrentTenantAsync [L6-L27]
      └─ uses_service IControlledRepository<Client>
        └─ method ReadQuery [L95]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<Contact>
        └─ method ReadQuery [L94]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<Office>
        └─ method ReadQuery [L89]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<Team>
        └─ method ReadQuery [L90]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<User>
        └─ method ReadQuery [L91]
          └─ ... (no implementation details available)
      └─ uses_service IMapper
        └─ method Map [L207]
          └─ ... (no implementation details available)

[web] POST /api/internal/contacts/create-or-update  (Dataverse.Api.Controllers.Internal.Core.ContactsController.CreateOrUpdate)  [L54–L61] status=201 [auth=Authentication.MachineToMachinePolicy,Authentication.RequireTenantIdPolicy]
  └─ sends_request CreateOrUpdateContactCommand [L57]
    └─ handled_by Dataverse.ApplicationService.Commands.Clients.CreateOrUpdateContactCommandHandler.Handle [L39–L79]
      └─ maps_to ContactDto [L77]
      └─ uses_service FirmSettingsService
        └─ method GetCurrentSettingsAsync [L54]
          └─ implementation Dataverse.ApplicationService.Services.FirmSettingsService.GetCurrentSettingsAsync [L18-L97]
      └─ uses_service IControlledRepository<Contact>
        └─ method WriteQuery [L61]
          └─ ... (no implementation details available)
      └─ uses_service IMapper
        └─ method Map [L77]
          └─ ... (no implementation details available)

[web] DELETE /api/internal/contacts/{id}  (Dataverse.Api.Controllers.Internal.Core.ContactsController.Delete)  [L71–L79] status=200 [auth=Authentication.MachineToMachinePolicy,Authentication.RequireTenantIdPolicy]
  └─ calls ContactRepository.Remove [L78]
  └─ calls ContactRepository.WriteQuery [L74]
  └─ delete Contact [L78]
    └─ reads_from DVS_Clients
  └─ write Contact [L74]
    └─ reads_from DVS_Clients
  └─ uses_service IControlledRepository<Contact>
    └─ method WriteQuery [L74]
      └─ ... (no implementation details available)

[web] GET /api/internal/contacts/{id}  (Dataverse.Api.Controllers.Internal.Core.ContactsController.Get)  [L46–L52] status=200 [auth=Authentication.MachineToMachinePolicy,Authentication.RequireTenantIdPolicy]
  └─ maps_to ContactDto [L49]
    └─ automapper.registration DataverseMappingProfile (Contact->ContactDto) [L158]
  └─ calls ContactRepository.ReadQuery [L49]
  └─ query Contact [L49]
    └─ reads_from DVS_Clients
  └─ uses_service IControlledRepository<Contact>
    └─ method ReadQuery [L49]
      └─ ... (no implementation details available)

[web] GET /api/internal/contacts/audit  (Dataverse.Api.Controllers.Internal.Core.ContactsController.GetAll)  [L40–L44] status=200 [auth=Authentication.MachineToMachinePolicy,Authentication.RequireTenantIdPolicy]
  └─ calls ContactRepository.ReadQuery [L43]
  └─ query Contact [L43]
    └─ reads_from DVS_Clients
  └─ uses_service IControlledRepository<Contact>
    └─ method ReadQuery [L43]
      └─ ... (no implementation details available)

[web] PUT /api/internal/contacts  (Dataverse.Api.Controllers.Internal.Core.ContactsController.UpdateDetails)  [L63–L69] status=200 [auth=Authentication.MachineToMachinePolicy,Authentication.RequireTenantIdPolicy]
  └─ sends_request CreateOrUpdateContactCommand [L66]
    └─ handled_by Dataverse.ApplicationService.Commands.Clients.CreateOrUpdateContactCommandHandler.Handle [L39–L79]
      └─ maps_to ContactDto [L77]
      └─ uses_service FirmSettingsService
        └─ method GetCurrentSettingsAsync [L54]
          └─ implementation Dataverse.ApplicationService.Services.FirmSettingsService.GetCurrentSettingsAsync [L18-L97]
      └─ uses_service IControlledRepository<Contact>
        └─ method WriteQuery [L61]
          └─ ... (no implementation details available)
      └─ uses_service IMapper
        └─ method Map [L77]
          └─ ... (no implementation details available)

[web] POST /api/internal/offices/  (Dataverse.Api.Controllers.Internal.Core.OfficesController.Create)  [L58–L64] status=201 [auth=Authentication.MachineToMachinePolicy,Authentication.RequireTenantIdPolicy]
  └─ sends_request CreateOrUpdateOfficeCommand [L62]
    └─ handled_by Dataverse.ApplicationService.Commands.Firms.CreateOrUpdateOfficeCommandHandler.Handle [L38–L78]
      └─ maps_to OfficeDto [L76]
      └─ uses_service FirmSettingsService
        └─ method GetCurrentSettingsAsync [L53]
          └─ implementation Dataverse.ApplicationService.Services.FirmSettingsService.GetCurrentSettingsAsync [L18-L97]
      └─ uses_service IControlledRepository<Office>
        └─ method WriteQuery [L60]
          └─ ... (no implementation details available)
      └─ uses_service IMapper
        └─ method Map [L76]
          └─ ... (no implementation details available)

[web] POST /api/internal/offices/create-or-update  (Dataverse.Api.Controllers.Internal.Core.OfficesController.CreateOrUpdate)  [L69–L76] status=201 [auth=Authentication.MachineToMachinePolicy,Authentication.RequireTenantIdPolicy]
  └─ sends_request CreateOrUpdateOfficeCommand [L72]
    └─ handled_by Dataverse.ApplicationService.Commands.Firms.CreateOrUpdateOfficeCommandHandler.Handle [L38–L78]
      └─ maps_to OfficeDto [L76]
      └─ uses_service FirmSettingsService
        └─ method GetCurrentSettingsAsync [L53]
          └─ implementation Dataverse.ApplicationService.Services.FirmSettingsService.GetCurrentSettingsAsync [L18-L97]
      └─ uses_service IControlledRepository<Office>
        └─ method WriteQuery [L60]
          └─ ... (no implementation details available)
      └─ uses_service IMapper
        └─ method Map [L76]
          └─ ... (no implementation details available)

[web] DELETE /api/internal/offices/{id}  (Dataverse.Api.Controllers.Internal.Core.OfficesController.Delete)  [L88–L95] status=200 [auth=Authentication.MachineToMachinePolicy,Authentication.RequireTenantIdPolicy]
  └─ calls OfficeRepository.WriteQuery [L91]
  └─ write Office [L91]
    └─ reads_from Offices
  └─ uses_service IControlledRepository<Office>
    └─ method WriteQuery [L91]
      └─ ... (no implementation details available)

[web] GET /api/internal/offices/{id}  (Dataverse.Api.Controllers.Internal.Core.OfficesController.Get)  [L47–L53] status=200 [auth=Authentication.MachineToMachinePolicy,Authentication.RequireTenantIdPolicy]
  └─ maps_to OfficeDto [L50]
    └─ automapper.registration ExternalApiMappingProfile (Office->OfficeDto) [L54]
    └─ automapper.registration WorkpapersMappingProfile (Office->OfficeDto) [L181]
    └─ automapper.registration DataverseMappingProfile (Office->OfficeDto) [L138]
    └─ automapper.registration CirrusMappingProfile (Office->OfficeDto) [L128]
  └─ calls OfficeRepository.ReadQuery [L50]
  └─ query Office [L50]
    └─ reads_from Offices
  └─ uses_service IControlledRepository<Office>
    └─ method ReadQuery [L50]
      └─ ... (no implementation details available)

[web] GET /api/internal/offices/audit  (Dataverse.Api.Controllers.Internal.Core.OfficesController.GetAll)  [L41–L45] status=200 [auth=Authentication.MachineToMachinePolicy,Authentication.RequireTenantIdPolicy]
  └─ calls OfficeRepository.ReadQuery [L44]
  └─ query Office [L44]
    └─ reads_from Offices
  └─ uses_service IControlledRepository<Office>
    └─ method ReadQuery [L44]
      └─ ... (no implementation details available)

[web] PUT /api/internal/offices/{id}  (Dataverse.Api.Controllers.Internal.Core.OfficesController.UpdateDetails)  [L78–L86] status=200 [auth=Authentication.MachineToMachinePolicy,Authentication.RequireTenantIdPolicy]
  └─ sends_request CreateOrUpdateOfficeCommand [L82]
    └─ handled_by Dataverse.ApplicationService.Commands.Firms.CreateOrUpdateOfficeCommandHandler.Handle [L38–L78]
      └─ maps_to OfficeDto [L76]
      └─ uses_service FirmSettingsService
        └─ method GetCurrentSettingsAsync [L53]
          └─ implementation Dataverse.ApplicationService.Services.FirmSettingsService.GetCurrentSettingsAsync [L18-L97]
      └─ uses_service IControlledRepository<Office>
        └─ method WriteQuery [L60]
          └─ ... (no implementation details available)
      └─ uses_service IMapper
        └─ method Map [L76]
          └─ ... (no implementation details available)

[web] POST /api/internal/teams/  (Dataverse.Api.Controllers.Internal.Core.TeamsController.Create)  [L68–L74] status=201 [auth=Authentication.MachineToMachinePolicy,Authentication.RequireTenantIdPolicy]
  └─ sends_request CreateOrUpdateTeamCommand [L72]
    └─ handled_by Dataverse.ApplicationService.Commands.Firms.CreateOrUpdateTeamCommandHandler.Handle [L38–L78]
      └─ maps_to TeamDto [L76]
      └─ uses_service FirmSettingsService
        └─ method GetCurrentSettingsAsync [L53]
          └─ implementation Dataverse.ApplicationService.Services.FirmSettingsService.GetCurrentSettingsAsync [L18-L97]
      └─ uses_service IControlledRepository<Team>
        └─ method WriteQuery [L60]
          └─ ... (no implementation details available)
      └─ uses_service IMapper
        └─ method Map [L76]
          └─ ... (no implementation details available)

[web] POST /api/internal/teams/create-or-update  (Dataverse.Api.Controllers.Internal.Core.TeamsController.CreateOrUpdate)  [L56–L63] status=201 [auth=Authentication.MachineToMachinePolicy,Authentication.RequireTenantIdPolicy]
  └─ sends_request CreateOrUpdateTeamCommand [L59]
    └─ handled_by Dataverse.ApplicationService.Commands.Firms.CreateOrUpdateTeamCommandHandler.Handle [L38–L78]
      └─ maps_to TeamDto [L76]
      └─ uses_service FirmSettingsService
        └─ method GetCurrentSettingsAsync [L53]
          └─ implementation Dataverse.ApplicationService.Services.FirmSettingsService.GetCurrentSettingsAsync [L18-L97]
      └─ uses_service IControlledRepository<Team>
        └─ method WriteQuery [L60]
          └─ ... (no implementation details available)
      └─ uses_service IMapper
        └─ method Map [L76]
          └─ ... (no implementation details available)

[web] DELETE /api/internal/teams/{id}  (Dataverse.Api.Controllers.Internal.Core.TeamsController.Delete)  [L86–L93] status=200 [auth=Authentication.MachineToMachinePolicy,Authentication.RequireTenantIdPolicy]
  └─ calls TeamRepository.WriteQuery [L89]
  └─ write Team [L89]
    └─ reads_from Teams
  └─ uses_service IControlledRepository<Team>
    └─ method WriteQuery [L89]
      └─ ... (no implementation details available)

[web] GET /api/internal/teams/{id}  (Dataverse.Api.Controllers.Internal.Core.TeamsController.Get)  [L48–L54] status=200 [auth=Authentication.MachineToMachinePolicy,Authentication.RequireTenantIdPolicy]
  └─ maps_to TeamDto [L51]
    └─ automapper.registration DataverseMappingProfile (Team->TeamDto) [L149]
    └─ automapper.registration ExternalApiMappingProfile (Team->TeamDto) [L75]
    └─ automapper.registration CirrusMappingProfile (Team->TeamDto) [L138]
    └─ automapper.registration WorkpapersMappingProfile (Team->TeamDto) [L190]
  └─ calls TeamRepository.ReadQuery [L51]
  └─ query Team [L51]
    └─ reads_from Teams
  └─ uses_service IControlledRepository<Team>
    └─ method ReadQuery [L51]
      └─ ... (no implementation details available)

[web] GET /api/internal/teams/audit  (Dataverse.Api.Controllers.Internal.Core.TeamsController.GetAll)  [L42–L46] status=200 [auth=Authentication.MachineToMachinePolicy,Authentication.RequireTenantIdPolicy]
  └─ calls TeamRepository.ReadQuery [L45]
  └─ query Team [L45]
    └─ reads_from Teams
  └─ uses_service IControlledRepository<Team>
    └─ method ReadQuery [L45]
      └─ ... (no implementation details available)

[web] PUT /api/internal/teams/{id}  (Dataverse.Api.Controllers.Internal.Core.TeamsController.UpdateDetails)  [L76–L84] status=200 [auth=Authentication.MachineToMachinePolicy,Authentication.RequireTenantIdPolicy]
  └─ sends_request CreateOrUpdateTeamCommand [L80]
    └─ handled_by Dataverse.ApplicationService.Commands.Firms.CreateOrUpdateTeamCommandHandler.Handle [L38–L78]
      └─ maps_to TeamDto [L76]
      └─ uses_service FirmSettingsService
        └─ method GetCurrentSettingsAsync [L53]
          └─ implementation Dataverse.ApplicationService.Services.FirmSettingsService.GetCurrentSettingsAsync [L18-L97]
      └─ uses_service IControlledRepository<Team>
        └─ method WriteQuery [L60]
          └─ ... (no implementation details available)
      └─ uses_service IMapper
        └─ method Map [L76]
          └─ ... (no implementation details available)

[web] POST /api/internal/users/  (Dataverse.Api.Controllers.Internal.Core.UsersController.Create)  [L155–L161] status=201 [auth=Authentication.MachineToMachinePolicy,Authentication.RequireTenantIdPolicy]
  └─ sends_request CreateOrUpdateUserCommand [L159]
    └─ handled_by Dataverse.ApplicationService.Commands.Users.CreateOrLinkWithDataverseCommandHandler.Handle [L57–L149]
      └─ uses_service UserService
        └─ method IsInRole [L103]
          └─ implementation Dataverse.ApplicationService.Services.UserService.IsInRole [L15-L185]
      └─ uses_service EventPublisher (InstancePerLifetimeScope)
        └─ method PublishAllEventsForEntity [L145]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<FirmSettings>
        └─ method ReadQuery [L111]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<Office>
        └─ method ReadQuery [L86]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<Team>
        └─ method ReadQuery [L87]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<User>
        └─ method WriteQuery [L89]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L141]
          └─ implementation Dataverse.Services.Features.Requests.RequestProcessor.ProcessAsync [L8-L45]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle

[web] POST /api/internal/users/create-or-link  (Dataverse.Api.Controllers.Internal.Core.UsersController.CreateOrLinkUser)  [L144–L150] status=201 [auth=Authentication.MachineToMachinePolicy,Authentication.RequireTenantIdPolicy]
  └─ maps_to UserWithIdentityInfoDto [L149]
  └─ uses_service IMapper
    └─ method Map [L149]
      └─ ... (no implementation details available)
  └─ sends_request CreateOrUpdateUserCommand [L147]
    └─ handled_by Dataverse.ApplicationService.Commands.Users.CreateOrLinkWithDataverseCommandHandler.Handle [L57–L149]
      └─ uses_service UserService
        └─ method IsInRole [L103]
          └─ implementation Dataverse.ApplicationService.Services.UserService.IsInRole [L15-L185]
      └─ uses_service EventPublisher (InstancePerLifetimeScope)
        └─ method PublishAllEventsForEntity [L145]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<FirmSettings>
        └─ method ReadQuery [L111]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<Office>
        └─ method ReadQuery [L86]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<Team>
        └─ method ReadQuery [L87]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<User>
        └─ method WriteQuery [L89]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L141]
          └─ implementation Dataverse.Services.Features.Requests.RequestProcessor.ProcessAsync [L8-L45]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle

[web] GET /api/internal/users/{id}  (Dataverse.Api.Controllers.Internal.Core.UsersController.Get)  [L92–L98] status=200 [auth=Authentication.MachineToMachinePolicy,Authentication.RequireTenantIdPolicy]
  └─ maps_to UserDto [L95]
    └─ automapper.registration ExternalApiMappingProfile (User->UserDto) [L61]
    └─ automapper.registration CirrusMappingProfile (User->UserDto) [L110]
    └─ automapper.registration WorkpapersMappingProfile (User->UserDto) [L106]
    └─ automapper.registration DataverseMappingProfile (User->UserDto) [L77]
  └─ calls UserRepository.ReadQuery [L95]
  └─ query User [L95]
  └─ uses_service IControlledRepository<User>
    └─ method ReadQuery [L95]
      └─ ... (no implementation details available)

[web] GET /api/internal/users  (Dataverse.Api.Controllers.Internal.Core.UsersController.GetAll)  [L83–L90] status=200 [auth=Authentication.MachineToMachinePolicy,Authentication.RequireTenantIdPolicy]
  └─ maps_to UserLightDto [L86]
    └─ automapper.registration CirrusMappingProfile (User->UserLightDto) [L104]
    └─ automapper.registration DataverseMappingProfile (User->UserLightDto) [L84]
    └─ automapper.registration WorkpapersMappingProfile (User->UserLightDto) [L97]
  └─ calls UserRepository.ReadQuery [L86]
  └─ query User [L86]
  └─ uses_service IControlledRepository<User>
    └─ method ReadQuery [L86]
      └─ ... (no implementation details available)

[web] GET /api/internal/users/audit  (Dataverse.Api.Controllers.Internal.Core.UsersController.GetAudit)  [L77–L81] status=200 [auth=Authentication.MachineToMachinePolicy,Authentication.RequireTenantIdPolicy]
  └─ calls UserRepository.ReadQuery [L80]
  └─ query User [L80]
  └─ uses_service IControlledRepository<User>
    └─ method ReadQuery [L80]
      └─ ... (no implementation details available)

[web] GET /api/internal/users/intercom-profile  (Dataverse.Api.Controllers.Internal.Core.UsersController.IntercomProfile)  [L111–L139] status=200 [auth=Authentication.MachineToMachinePolicy,Authentication.RequireTenantIdPolicy]
  └─ uses_service IntercomService
    └─ method GetContactByExternalId [L119]
      └─ implementation Dataverse.Services.ModuleIntegrations.Services.IntercomService.GetContactByExternalId [L17-L124]
  └─ uses_service UserService
    └─ method GetUserAsync [L114]
      └─ implementation Dataverse.ApplicationService.Services.UserService.GetUserAsync [L15-L185]

[web] GET /api/internal/users  (Dataverse.Api.Controllers.Internal.Core.UsersController.PopulateIntegrationAccessFlagsAsync)  [L205–L218] status=200 [auth=Authentication.MachineToMachinePolicy,Authentication.RequireTenantIdPolicy]
  └─ uses_service IDatagetImanageService (AddTransient)
    └─ method TestConnection [L211]
      └─ implementation Dataverse.Connections.DataGet.Services.DataGetImanageService.TestConnection [L19-L225]

[web] POST /api/internal/users/process-expired-trials  (Dataverse.Api.Controllers.Internal.Core.UsersController.ProcessExpiredTrials)  [L199–L203] status=201 [auth=Authentication.MachineToMachinePolicy,Authentication.RequireTenantIdPolicy]
  └─ sends_request ProcessExpiredTrialsCommand [L202]
    └─ handled_by Dataverse.ApplicationService.Commands.Users.ProcessExpiredTrialsCommandHandler.Handle [L22–L47]
      └─ calls TenantRepository.WriteTable [L33]

[web] GET /api/internal/users/profile  (Dataverse.Api.Controllers.Internal.Core.UsersController.Profile)  [L100–L109] status=200 [auth=Authentication.MachineToMachinePolicy,Authentication.RequireTenantIdPolicy]
  └─ sends_request GetUserProfileQuery [L103]
    └─ handled_by Dataverse.ApplicationService.Queries.Firms.Users.GetUserProfileQueryHandler.Handle [L34–L129]
      └─ calls TenantRepository.ReadTable [L79]
      └─ maps_to FirmSettingsDto [L91]
        └─ automapper.registration DataverseMappingProfile (FirmSettings->FirmSettingsDto) [L121]
      └─ maps_to TenantLightDto [L118]
      └─ maps_to IntegrationSettingsDto [L104]
        └─ automapper.registration DataverseMappingProfile (IntegrationSettings->IntegrationSettingsDto) [L294]
      └─ maps_to TenantDto [L112]
      └─ maps_to NotificationDto [L120]
        └─ automapper.registration DataverseMappingProfile (Notification->NotificationDto) [L116]
      └─ maps_to UserProfileDto [L74]
        └─ automapper.registration DataverseMappingProfile (User->UserProfileDto) [L93]
        └─ automapper.registration CirrusMappingProfile (User->UserProfileDto) [L115]
        └─ automapper.registration WorkpapersMappingProfile (User->UserProfileDto) [L109]
      └─ uses_service FirmSettingsService
        └─ method GetCurrentWorkpapersSettingsAsync [L101]
          └─ implementation Dataverse.ApplicationService.Services.FirmSettingsService.GetCurrentWorkpapersSettingsAsync [L18-L97]
      └─ uses_service UserService
        └─ method GetUserId [L73]
          └─ implementation Dataverse.ApplicationService.Services.UserService.GetUserId [L15-L185]
      └─ uses_service TenantService
        └─ method GetCurrentTenantAsync [L77]
          └─ implementation Dataverse.Services.Features.Tenants.TenantService.GetCurrentTenantAsync [L6-L27]
          └─ implementation Dataverse.Services.Features.Tenants.TenantService.GetCurrentTenantAsync [L6-L27]
      └─ uses_service FirmFeatureFlagService
        └─ method GetAvailableFeaturesForFirm [L96]
          └─ implementation Dataverse.ApplicationService.Features.FeatureFlags.FirmFeatureFlagService.GetAvailableFeaturesForFirm [L14-L91]
      └─ uses_service IControlledRepository<FirmSettings>
        └─ method ReadQuery [L91]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<IntegrationSettings>
        └─ method ReadQuery [L104]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<Notification>
        └─ method ReadQuery [L120]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<User>
        └─ method ReadQuery [L74]
          └─ ... (no implementation details available)
      └─ uses_service IMapper
        └─ method ConfigurationProvider [L93]
          └─ ... (no implementation details available)

[web] PUT /api/internal/users/  (Dataverse.Api.Controllers.Internal.Core.UsersController.UpdateDetails)  [L166–L176] status=200 [auth=Authentication.MachineToMachinePolicy,Authentication.RequireTenantIdPolicy]
  └─ sends_request UpdateUserCommand [L173]
    └─ handled_by Dataverse.ApplicationService.Commands.Users.UpdateUserCommandHandler.Handle [L42–L111]
      └─ maps_to UserWithIdentityInfoDto [L95]
      └─ uses_service IControlledRepository<FirmSettings>
        └─ method ReadQuery [L71]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<Office>
        └─ method ReadQuery [L77]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<Team>
        └─ method ReadQuery [L78]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<User>
        └─ method WriteQuery [L68]
          └─ ... (no implementation details available)
      └─ uses_service IMapper
        └─ method Map [L95]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L100]
          └─ implementation Dataverse.Services.Features.Requests.RequestProcessor.ProcessAsync [L8-L45]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle

[web] PUT /api/internal/users/user-updated  (Dataverse.Api.Controllers.Internal.Core.UsersController.UserUpdated)  [L181–L192] status=200 [auth=Authentication.MachineToMachinePolicy,Authentication.RequireTenantIdPolicy]
  └─ maps_to UserWithIdentityInfoDto [L191]
  └─ calls UserRepository.WriteQuery [L186]
  └─ write User [L186]
  └─ uses_service IControlledRepository<User>
    └─ method WriteQuery [L186]
      └─ ... (no implementation details available)
  └─ uses_service IMapper
    └─ method Map [L191]
      └─ ... (no implementation details available)

[web] POST /api/internal/data-cloud/entities  (Dataverse.Api.Controllers.Internal.DataCloudController.GetEntities)  [L74–L90] status=201 [auth=Authentication.MachineToMachinePolicy,Authentication.RequireTenantIdPolicy]

[web] GET /api/internal/data-cloud/tenants  (Dataverse.Api.Controllers.Internal.DataCloudController.GetTenants)  [L55–L59] status=200 [auth=Authentication.MachineToMachinePolicy,Authentication.RequireTenantIdPolicy]

[web] GET /api/internal/data-cloud  (Dataverse.Api.Controllers.Internal.DataCloudController.HandleRequestAsync)  [L92–L104] status=200 [auth=Authentication.MachineToMachinePolicy,Authentication.RequireTenantIdPolicy]
  └─ uses_service UnitOfWork
    └─ method Table [L98]
      └─ ... (no implementation details available)

[web] POST /api/internal/data-cloud/sync  (Dataverse.Api.Controllers.Internal.DataCloudController.SyncDataLake)  [L62–L72] status=201 [auth=Authentication.MachineToMachinePolicy,Authentication.RequireTenantIdPolicy]
  └─ uses_service IDocumentStoreService (AddScoped)
    └─ method GetReadOnlyDocumentStoresWithCredentials [L65]
      └─ implementation Dataverse.ApplicationService.Services.DocumentStoreService.GetReadOnlyDocumentStoresWithCredentials [L17-L89]
  └─ uses_storage IDocumentStoreService.GetReadOnlyDocumentStoresWithCredentials [L65]

[web] POST /api/internal/data-lake/process-data  (Dataverse.Api.Controllers.Internal.DataLakeController.ProcessData)  [L53–L65] status=201 [auth=Authentication.MachineToMachinePolicy,Authentication.RequireTenantIdPolicy]
  └─ uses_service IDocumentStoreService (AddScoped)
    └─ method GetReadOnlyDocumentStoresWithCredentials [L58]
      └─ implementation Dataverse.ApplicationService.Services.DocumentStoreService.GetReadOnlyDocumentStoresWithCredentials [L17-L89]
  └─ uses_storage IDocumentStoreService.GetReadOnlyDocumentStoresWithCredentials [L58]

[web] POST /api/internal/data-lake/process-financial-data  (Dataverse.Api.Controllers.Internal.DataLakeController.ProcessFinancialData)  [L37–L51] status=201 [auth=Authentication.MachineToMachinePolicy,Authentication.RequireTenantIdPolicy]
  └─ uses_service IDocumentStoreService (AddScoped)
    └─ method GetReadOnlyDocumentStoresWithCredentials [L43]
      └─ implementation Dataverse.ApplicationService.Services.DocumentStoreService.GetReadOnlyDocumentStoresWithCredentials [L17-L89]
  └─ uses_storage IDocumentStoreService.GetReadOnlyDocumentStoresWithCredentials [L43]

[web] POST /api/internal/data-lake/security/{storeId:Guid}/sync  (Dataverse.Api.Controllers.Internal.DataLakeController.SyncParentContainerPermissions)  [L80–L93] status=201 [auth=Authentication.MachineToMachinePolicy,Authentication.RequireTenantIdPolicy]
  └─ uses_service IAzureDataLakeService (AddScoped)
    └─ method EnsureParentPermissionsAsync [L92]
      └─ implementation Dataverse.Services.DataLake.Implementations.AzureDataLakeService.EnsureParentPermissionsAsync [L33-L425]
  └─ uses_service IDocumentStoreService (AddScoped)
    └─ method GetReadOnlyDocumentStoresWithCredentials [L86]
      └─ implementation Dataverse.ApplicationService.Services.DocumentStoreService.GetReadOnlyDocumentStoresWithCredentials [L17-L89]
  └─ uses_storage IDocumentStoreService.GetReadOnlyDocumentStoresWithCredentials [L86]

[web] POST /api/internal/data-lake/security/sync  (Dataverse.Api.Controllers.Internal.DataLakeController.SyncParentContainersPermissions)  [L67–L78] status=201 [auth=Authentication.MachineToMachinePolicy,Authentication.RequireTenantIdPolicy]
  └─ uses_service IAzureDataLakeService (AddScoped)
    └─ method EnsureParentPermissionsAsync [L76]
      └─ implementation Dataverse.Services.DataLake.Implementations.AzureDataLakeService.EnsureParentPermissionsAsync [L33-L425]
  └─ uses_service IDocumentStoreService (AddScoped)
    └─ method GetReadOnlyDocumentStoresWithCredentials [L72]
      └─ implementation Dataverse.ApplicationService.Services.DocumentStoreService.GetReadOnlyDocumentStoresWithCredentials [L17-L89]
  └─ uses_storage IDocumentStoreService.GetReadOnlyDocumentStoresWithCredentials [L72]

[web] GET /api/internal/cabinets/default  (Dataverse.Api.Controllers.Internal.Documents.CabinetsController.GetDefault)  [L32–L42] status=200 [auth=Authentication.MachineToMachinePolicy,Authentication.RequireTenantIdPolicy]
  └─ maps_to CabinetDto [L35]
    └─ automapper.registration DataverseMappingProfile (Cabinet->CabinetDto) [L398]
  └─ calls CabinetRepository.ReadQuery [L35]
  └─ query Cabinet [L35]
    └─ reads_from Cabinets
  └─ uses_service IControlledRepository<Cabinet>
    └─ method ReadQuery [L35]
      └─ ... (no implementation details available)

[web] GET /api/internal/document-audit-trail/  (Dataverse.Api.Controllers.Internal.Documents.DocumentAuditLogsController.GetDocumentAuditLogs)  [L42–L55] status=200 [auth=Authentication.UserPolicy]
  └─ maps_to DocumentAuditLogDto [L49]
    └─ automapper.registration DataverseMappingProfile (DocumentAuditLog->DocumentAuditLogDto) [L445]
  └─ calls DocumentAuditLogRepository.ReadQuery [L49]
  └─ query DocumentAuditLog [L49]
    └─ reads_from DVS_DocumentAuditLogs
  └─ uses_service IControlledRepository<DocumentAuditLog>
    └─ method ReadQuery [L49]
      └─ ... (no implementation details available)
  └─ sends_request CanIAccessDocumentQuery [L47]
    └─ handled_by Dataverse.ApplicationService.Queries.Documents.CanIAccessDocumentQueryHandler.Handle [L37–L82]
      └─ uses_service FirmSettingsService
        └─ method GetCurrentSettingsAsync [L66]
          └─ implementation Dataverse.ApplicationService.Services.FirmSettingsService.GetCurrentSettingsAsync [L18-L97]
      └─ uses_service UserService
        └─ method GetUserAsync [L61]
          └─ implementation Dataverse.ApplicationService.Services.UserService.GetUserAsync [L15-L185]
      └─ uses_service RequestInfoService
        └─ method IsValidServiceAccountRequest [L58]
          └─ implementation Dataverse.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L92]
          └─ implementation Dataverse.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L92]
          └─ implementation Dataverse.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L92]
      └─ uses_service IControlledRepository<Document>
        └─ method ReadQuery [L68]
          └─ ... (no implementation details available)

[web] DELETE /api/internal/documents/{id:Guid}/archive  (Dataverse.Api.Controllers.Internal.Documents.DocumentsController.ArchiveDocument)  [L328–L334] status=200 [auth=Authentication.MachineToMachinePolicy,Authentication.RequireTenantIdPolicy]

[web] PUT /api/internal/documents/bulk-associations  (Dataverse.Api.Controllers.Internal.Documents.DocumentsController.BulkUpdateDocumentsAssociations)  [L140–L157] status=204 [auth=Authentication.MachineToMachinePolicy,Authentication.RequireTenantIdPolicy]
  └─ sends_request UpdateDocumentCommand [L153]

[web] POST /api/internal/documents/binder-document  (Dataverse.Api.Controllers.Internal.Documents.DocumentsController.CreateBinderDocument)  [L188–L225] status=201 [auth=Authentication.MachineToMachinePolicy,Authentication.RequireTenantIdPolicy]
  └─ uses_service StorageService
    └─ method UploadFile [L197]
      └─ implementation Dataverse.Services.Features.Storage.StorageService.UploadFile [L18-L331]
  └─ uses_service UserService
    └─ method GetUserId [L214]
      └─ implementation Dataverse.ApplicationService.Services.UserService.GetUserId [L15-L185]
  └─ uses_storage StorageService.UploadFile [L197]
  └─ sends_request CreateAuditHistoryCommand [L221]
    └─ handled_by Dataverse.ApplicationService.Commands.AuditHistories.CreateAuditHistoryCommandHandler.Handle [L21–L49]
      └─ uses_service UserService
        └─ method GetUserIfPresentAsync [L36]
          └─ implementation Dataverse.ApplicationService.Services.UserService.GetUserIfPresentAsync [L15-L185]
      └─ uses_service IControlledRepository<AuditHistory>
        └─ method Add [L46]
          └─ ... (no implementation details available)

[web] POST /api/internal/documents/  (Dataverse.Api.Controllers.Internal.Documents.DocumentsController.CreateDocument)  [L78–L84] status=201 [auth=Authentication.MachineToMachinePolicy,Authentication.RequireTenantIdPolicy]
  └─ sends_request CreateDocumentCommand [L81]
    └─ handled_by DataGet.Integrations.Fyi.Api.Commands.CreateDocumentCommandHandler.Handle [L18–L33]
      └─ uses_service FyiService
        └─ method CreateDocument [L29]
          └─ implementation DataGet.Integrations.Fyi.Api.FyiService.CreateDocument [L30-L166]
  └─ returns FyiDocumentDto [L81]

[web] GET /api/internal/documents  (Dataverse.Api.Controllers.Internal.Documents.DocumentsController.CreateDocumentModelFromBinder)  [L336–L376] status=200 [auth=Authentication.MachineToMachinePolicy,Authentication.RequireTenantIdPolicy]

[web] POST /api/internal/documents/create-document-m2m  (Dataverse.Api.Controllers.Internal.Documents.DocumentsController.CreateDocumentViaM2M)  [L227–L236] status=201 [auth=Authentication.MachineToMachinePolicy,Authentication.RequireTenantIdPolicy]
  └─ uses_service StorageService
    └─ method MoveFile [L232]
      └─ implementation Dataverse.Services.Features.Storage.StorageService.MoveFile [L18-L331]
  └─ uses_storage StorageService.MoveFile [L232]
  └─ sends_request CreateDocumentCommand [L234]
    └─ handled_by DataGet.Integrations.Fyi.Api.Commands.CreateDocumentCommandHandler.Handle [L18–L33]
      └─ uses_service FyiService
        └─ method CreateDocument [L29]
          └─ implementation DataGet.Integrations.Fyi.Api.FyiService.CreateDocument [L30-L166]
  └─ returns FyiDocumentDto [L234]

[web] DELETE /api/internal/documents/{id:guid}  (Dataverse.Api.Controllers.Internal.Documents.DocumentsController.DeleteDocument)  [L106–L121] status=204,404 [auth=Authentication.MachineToMachinePolicy,Authentication.RequireTenantIdPolicy]
  └─ sends_request RecycleDocumentCommand [L113]
    └─ handled_by Dataverse.ApplicationService.Commands.Documents.RecycleDocumentCommandHandler.Handle [L28–L66]
      └─ uses_service IControlledRepository<Document>
        └─ method WriteQuery [L49]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<DocumentVersion>
        └─ method WriteQuery [L51]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L60]
          └─ implementation Dataverse.Services.Features.Requests.RequestProcessor.ProcessAsync [L8-L45]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle
  └─ sends_request CanIAccessDocumentQuery [L112]
    └─ handled_by Dataverse.ApplicationService.Queries.Documents.CanIAccessDocumentQueryHandler.Handle [L37–L82]
      └─ uses_service FirmSettingsService
        └─ method GetCurrentSettingsAsync [L66]
          └─ implementation Dataverse.ApplicationService.Services.FirmSettingsService.GetCurrentSettingsAsync [L18-L97]
      └─ uses_service UserService
        └─ method GetUserAsync [L61]
          └─ implementation Dataverse.ApplicationService.Services.UserService.GetUserAsync [L15-L185]
      └─ uses_service RequestInfoService
        └─ method IsValidServiceAccountRequest [L58]
          └─ implementation Dataverse.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L92]
          └─ implementation Dataverse.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L92]
          └─ implementation Dataverse.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L92]
      └─ uses_service IControlledRepository<Document>
        └─ method ReadQuery [L68]
          └─ ... (no implementation details available)

[web] GET /api/internal/documents/{id:Guid}/download  (Dataverse.Api.Controllers.Internal.Documents.DocumentsController.DownloadDocument)  [L302–L310] status=200 [auth=Authentication.MachineToMachinePolicy,Authentication.RequireTenantIdPolicy]
  └─ sends_request CanIAccessDocumentQuery [L306]
    └─ handled_by Dataverse.ApplicationService.Queries.Documents.CanIAccessDocumentQueryHandler.Handle [L37–L82]
      └─ uses_service FirmSettingsService
        └─ method GetCurrentSettingsAsync [L66]
          └─ implementation Dataverse.ApplicationService.Services.FirmSettingsService.GetCurrentSettingsAsync [L18-L97]
      └─ uses_service UserService
        └─ method GetUserAsync [L61]
          └─ implementation Dataverse.ApplicationService.Services.UserService.GetUserAsync [L15-L185]
      └─ uses_service RequestInfoService
        └─ method IsValidServiceAccountRequest [L58]
          └─ implementation Dataverse.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L92]
          └─ implementation Dataverse.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L92]
          └─ implementation Dataverse.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L92]
      └─ uses_service IControlledRepository<Document>
        └─ method ReadQuery [L68]
          └─ ... (no implementation details available)
  └─ sends_request GetDocumentDownloadLink [L307]
    └─ handled_by Dataverse.ApplicationService.Queries.Documents.GetDocumentDownloadLinkHandler.Handle [L30–L77]
      └─ maps_to SecureDocumentStoreDto [L65]
      └─ uses_service UserService
        └─ method GetUserId [L73]
          └─ implementation Dataverse.ApplicationService.Services.UserService.GetUserId [L15-L185]
      └─ uses_service DocumentServiceFactory
        └─ method GetForStore [L65]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<Document>
        └─ method ReadQuery [L56]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<DocumentAuditLog>
        └─ method Add [L68]
          └─ ... (no implementation details available)
      └─ uses_service IMapper
        └─ method Map [L65]
          └─ ... (no implementation details available)

[web] GET /api/internal/documents/find-documents  (Dataverse.Api.Controllers.Internal.Documents.DocumentsController.FindDocuments)  [L238–L294] status=200 [auth=Authentication.MachineToMachinePolicy,Authentication.RequireTenantIdPolicy]
  └─ sends_request FindDocumentsQuery [L268]
    └─ handled_by Dataverse.ApplicationService.Queries.Documents.FindDocumentsQueryHandler.Handle [L77–L428]
      └─ uses_service FirmSettingsService
        └─ method GetCurrentSettingsAsync [L104]
          └─ implementation Dataverse.ApplicationService.Services.FirmSettingsService.GetCurrentSettingsAsync [L18-L97]
      └─ uses_service UserService
        └─ method GetUserAsync [L104]
          └─ implementation Dataverse.ApplicationService.Services.UserService.GetUserAsync [L15-L185]
      └─ uses_service IControlledRepository<Document>
        └─ method ReadQuery [L103]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<DocumentTag>
        └─ method ReadQuery [L373]
          └─ ... (no implementation details available)

[web] GET /api/internal/documents/{id:Guid}  (Dataverse.Api.Controllers.Internal.Documents.DocumentsController.GetDocumentById)  [L296–L300] status=200 [auth=Authentication.MachineToMachinePolicy,Authentication.RequireTenantIdPolicy]
  └─ sends_request GetDocumentByIdQuery [L299]
    └─ handled_by Dataverse.ApplicationService.Queries.Documents.GetDocumentByIdQueryHandler.Handle [L25–L51]
      └─ maps_to DocumentLightDto [L45]
        └─ automapper.registration DataverseMappingProfile (Document->DocumentLightDto) [L401]
      └─ uses_service IControlledRepository<Document>
        └─ method ReadQuery [L45]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L43]
          └─ implementation Dataverse.Services.Features.Requests.RequestProcessor.ProcessAsync [L8-L45]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle

[web] GET /api/internal/documents/workpapers-creation-defaults  (Dataverse.Api.Controllers.Internal.Documents.DocumentsController.GetWorkpapersDocumentCreationDefaults)  [L159–L186] status=200 [auth=Authentication.MachineToMachinePolicy,Authentication.RequireTenantIdPolicy]
  └─ calls CabinetRepository.ReadQuery [L162]
  └─ calls DocumentStatusRepository.ReadQuery [L173]
  └─ query Cabinet [L162]
    └─ reads_from Cabinets
  └─ query DocumentStatus [L173]
    └─ reads_from DVS_DocumentStatuses
  └─ uses_service IControlledRepository<Cabinet>
    └─ method ReadQuery [L162]
      └─ ... (no implementation details available)
  └─ uses_service IControlledRepository<DocumentStatus>
    └─ method ReadQuery [L173]
      └─ ... (no implementation details available)

[web] GET /api/internal/documents/{id:Guid}/data  (Dataverse.Api.Controllers.Internal.Documents.DocumentsController.ReadDocumentData)  [L322–L326] status=200 [auth=Authentication.MachineToMachinePolicy,Authentication.RequireTenantIdPolicy]
  └─ sends_request GetDocumentDataQuery [L325]
    └─ handled_by Dataverse.ApplicationService.Queries.Documents.GetDocumentDataQueryHandler.Handle [L28–L63]
      └─ uses_service DocumentServiceFactory
        └─ method GetDocumentWithService [L54]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<DocumentVersion>
        └─ method WriteQuery [L43]
          └─ ... (no implementation details available)

[web] PUT /api/internal/documents/{id:guid}/restore-document  (Dataverse.Api.Controllers.Internal.Documents.DocumentsController.RestoreDocument)  [L123–L138] status=204,404 [auth=Authentication.MachineToMachinePolicy,Authentication.RequireTenantIdPolicy]
  └─ sends_request RestoreDocumentCommand [L130]
    └─ handled_by Dataverse.ApplicationService.Commands.Documents.RestoreDocumentCommandHandler.Handle [L23–L46]
  └─ sends_request CanIAccessDocumentQuery [L129]
    └─ handled_by Dataverse.ApplicationService.Queries.Documents.CanIAccessDocumentQueryHandler.Handle [L37–L82]
      └─ uses_service FirmSettingsService
        └─ method GetCurrentSettingsAsync [L66]
          └─ implementation Dataverse.ApplicationService.Services.FirmSettingsService.GetCurrentSettingsAsync [L18-L97]
      └─ uses_service UserService
        └─ method GetUserAsync [L61]
          └─ implementation Dataverse.ApplicationService.Services.UserService.GetUserAsync [L15-L185]
      └─ uses_service RequestInfoService
        └─ method IsValidServiceAccountRequest [L58]
          └─ implementation Dataverse.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L92]
          └─ implementation Dataverse.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L92]
          └─ implementation Dataverse.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L92]
      └─ uses_service IControlledRepository<Document>
        └─ method ReadQuery [L68]
          └─ ... (no implementation details available)

[web] PUT /api/internal/documents/{id:Guid}  (Dataverse.Api.Controllers.Internal.Documents.DocumentsController.UpdateDocument)  [L312–L320] status=200 [auth=Authentication.MachineToMachinePolicy,Authentication.RequireTenantIdPolicy]
  └─ sends_request UpdateDocumentCommand [L317]
  └─ sends_request CanIAccessDocumentQuery [L316]
    └─ handled_by Dataverse.ApplicationService.Queries.Documents.CanIAccessDocumentQueryHandler.Handle [L37–L82]
      └─ uses_service FirmSettingsService
        └─ method GetCurrentSettingsAsync [L66]
          └─ implementation Dataverse.ApplicationService.Services.FirmSettingsService.GetCurrentSettingsAsync [L18-L97]
      └─ uses_service UserService
        └─ method GetUserAsync [L61]
          └─ implementation Dataverse.ApplicationService.Services.UserService.GetUserAsync [L15-L185]
      └─ uses_service RequestInfoService
        └─ method IsValidServiceAccountRequest [L58]
          └─ implementation Dataverse.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L92]
          └─ implementation Dataverse.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L92]
          └─ implementation Dataverse.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L92]
      └─ uses_service IControlledRepository<Document>
        └─ method ReadQuery [L68]
          └─ ... (no implementation details available)

[web] GET /api/internal/document-statuses/default  (Dataverse.Api.Controllers.Internal.Documents.DocumentStatusesController.GetDefault)  [L32–L42] status=200 [auth=Authentication.MachineToMachinePolicy,Authentication.RequireTenantIdPolicy]
  └─ maps_to DocumentStatusDto [L35]
    └─ automapper.registration DataverseMappingProfile (DocumentStatus->DocumentStatusDto) [L415]
  └─ calls DocumentStatusRepository.ReadQuery [L35]
  └─ query DocumentStatus [L35]
    └─ reads_from DVS_DocumentStatuses
  └─ uses_service IControlledRepository<DocumentStatus>
    └─ method ReadQuery [L35]
      └─ ... (no implementation details available)

[web] POST /api/internal/documents/{documentId:guid}/versions/  (Dataverse.Api.Controllers.Internal.Documents.DocumentVersionsController.AddDocumentVersion)  [L29–L34] status=201 [auth=Authentication.MachineToMachinePolicy,Authentication.RequireTenantIdPolicy]
  └─ sends_request AddDocumentVersionCommand [L33]
    └─ handled_by Dataverse.ApplicationService.Commands.Documents.AddDocumentVersionCommandHandler.Handle [L27–L94]
      └─ uses_service UserService
        └─ method GetUserId [L66]
          └─ implementation Dataverse.ApplicationService.Services.UserService.GetUserId [L15-L185]
      └─ uses_service RequestInfoService
        └─ method IsM2MRequest [L67]
          └─ implementation Dataverse.Services.Features.RequestInfoService.IsM2MRequest [L11-L92]
          └─ implementation Dataverse.Services.Features.RequestInfoService.IsM2MRequest [L11-L92]
          └─ implementation Dataverse.Services.Features.RequestInfoService.IsM2MRequest [L11-L92]
      └─ uses_service IControlledRepository<Document>
        └─ method WriteQuery [L57]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<DocumentStatus>
        └─ method WriteQuery [L78]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<DocumentVersion>
        └─ method ReadQuery [L61]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L88]
          └─ implementation Dataverse.Services.Features.Requests.RequestProcessor.ProcessAsync [L8-L45]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle

[web] POST /api/internal/documents/{documentId:guid}/versions/add-document-version-M2M  (Dataverse.Api.Controllers.Internal.Documents.DocumentVersionsController.AddDocumentVersionViaM2M)  [L36–L45] status=201 [auth=Authentication.MachineToMachinePolicy,Authentication.RequireTenantIdPolicy]
  └─ uses_service StorageService
    └─ method MoveFile [L42]
      └─ implementation Dataverse.Services.Features.Storage.StorageService.MoveFile [L18-L331]
  └─ uses_storage StorageService.MoveFile [L42]

[web] GET /api/internal/firm-settings/  (Dataverse.Api.Controllers.Internal.Firm.FirmSettingsController.Get)  [L38–L60] status=200 [auth=Authentication.MachineToMachinePolicy,Authentication.RequireTenantIdPolicy]
  └─ maps_to FirmSettingsDto (var settings) [L53]
  └─ maps_to FirmSettingsDto [L48]
    └─ automapper.registration DataverseMappingProfile (FirmSettings->FirmSettingsDto) [L121]
  └─ maps_to FirmSettingsDto (var defaultSettings) [L44]
  └─ maps_to IntegrationSettingsDto [L55]
    └─ automapper.registration DataverseMappingProfile (IntegrationSettings->IntegrationSettingsDto) [L294]
  └─ calls FirmSettingsRepository.ReadQuery [L48]
  └─ calls IntegrationSettingsRepository.ReadQuery [L55]
  └─ query FirmSettings [L48]
    └─ reads_from FirmSettingss
  └─ query IntegrationSettings [L55]
    └─ reads_from IntegrationSettingss
  └─ uses_service TenantService
    └─ method GetCurrentTenant [L42]
      └─ implementation Dataverse.Services.Features.Tenants.TenantService.GetCurrentTenant [L6-L27]
        └─ uses_service TenantIdentificationService
          └─ method GetCurrentTenant [L20]
            └─ implementation Dataverse.Tenants.Tenants.TenantIdentificationService.GetCurrentTenant [L27-L149]
  └─ uses_service IControlledRepository<FirmSettings>
    └─ method ReadQuery [L48]
      └─ ... (no implementation details available)
  └─ uses_service IControlledRepository<IntegrationSettings>
    └─ method ReadQuery [L55]
      └─ ... (no implementation details available)
  └─ uses_service IMapper
    └─ method Map [L44]
      └─ ... (no implementation details available)

[web] POST /api/internal/identity  (Dataverse.Api.Controllers.Internal.IdentityController.CreateTenantUser)  [L57–L63] status=201 [auth=Authentication.MachineToMachinePolicy]
  └─ sends_request CreateCentralUserCommand [L60]
    └─ handled_by Dataverse.Tenants.Commands.Users.CreateCentralUserCommandHandler.Handle [L25–L61]
      └─ calls TenantRepository.Add [L57]
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L41]
          └─ implementation Dataverse.Services.Features.Requests.RequestProcessor.ProcessAsync [L8-L45]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle

[web] PUT /api/internal/identity  (Dataverse.Api.Controllers.Internal.IdentityController.ProcessIdentityChanges)  [L46–L52] status=200 [auth=Authentication.MachineToMachinePolicy]
  └─ maps_to CentralUserDto [L49]
    └─ automapper.registration IdentityMappingProfile (IdentityAccount->CentralUserDto) [L44]
  └─ uses_service IMapper
    └─ method Map [L49]
      └─ ... (no implementation details available)
  └─ sends_request UpdateCentralUser [L49]
    └─ handled_by Cirrus.Central.Commands.UpdateCentralUserHandler.Handle [L37–L93]
      └─ calls CentralRepository.Commit [L77]
      └─ calls CentralRepository.WriteTable [L66]
      └─ calls CentralRepository.ReadTable [L53]
      └─ uses_service DataverseService
        └─ method GetStandardInviteInfo [L86]
          └─ implementation Cirrus.Central.Features.MachineToMachine.DataverseService.GetStandardInviteInfo [L14-L66]

[web] PUT /api/internal/identity/request-email-change  (Dataverse.Api.Controllers.Internal.IdentityController.RequestEmailChange)  [L68–L93] status=200 [auth=Authentication.MachineToMachinePolicy]
  └─ maps_to CentralUserDto (var dto) [L86]
  └─ calls TenantRepository.ReadTable [L83]
  └─ query Tenant [L83]
    └─ reads_from Tenants
  └─ uses_service IMapper
    └─ method Map [L86]
      └─ ... (no implementation details available)
  └─ uses_service TenantRepository
    └─ method ReadTable [L83]
      └─ implementation Dataverse.Tenants.Data.TenantRepository.ReadTable [L15-L180]
  └─ sends_request UpdateCentralUser [L90]
    └─ handled_by Cirrus.Central.Commands.UpdateCentralUserHandler.Handle [L37–L93]
      └─ calls CentralRepository.Commit [L77]
      └─ calls CentralRepository.WriteTable [L66]
      └─ calls CentralRepository.ReadTable [L53]
      └─ uses_service DataverseService
        └─ method GetStandardInviteInfo [L86]
          └─ implementation Cirrus.Central.Features.MachineToMachine.DataverseService.GetStandardInviteInfo [L14-L66]

[web] POST /api/internal/identity/resend-invite  (Dataverse.Api.Controllers.Internal.IdentityController.ResendInvite)  [L99–L114] status=201 [auth=Authentication.MachineToMachinePolicy]

[web] POST /api/internal/identity/{id}/reset-password  (Dataverse.Api.Controllers.Internal.IdentityController.ResetPassword)  [L119–L126] status=201 [auth=Authentication.MachineToMachinePolicy]
  └─ uses_service IdentityService
    └─ method Post [L123]
      └─ implementation Dataverse.Services.Features.Identity.IdentityService.Post [L14-L67]

[web] PUT /api/internal/intercom/entity-create  (Dataverse.Api.Controllers.Internal.Integration.IntercomController.CreateEntityInIntercom)  [L55–L67] status=200 [auth=Authentication.MachineToMachinePolicy,Authentication.RequireTenantIdPolicy]
  └─ sends_request CreateIntercomEntityCommand [L60]
    └─ handled_by Dataverse.ApplicationService.Commands.Intercom.CreateIntercomEntityCommandHandler.Handle [L41–L117]
      └─ calls TenantRepository.ReadTable [L109]
      └─ maps_to TenantLightDto [L109]
      └─ maps_to UserWithLicensesDto [L67]
        └─ automapper.registration DataverseMappingProfile (User->UserWithLicensesDto) [L90]
      └─ uses_service IntercomService
        └─ method GetContactByExternalId [L79]
          └─ implementation Dataverse.Services.ModuleIntegrations.Services.IntercomService.GetContactByExternalId [L17-L124]
      └─ uses_service IControlledRepository<User>
        └─ method ReadQuery [L67]
          └─ ... (no implementation details available)
      └─ uses_service IMapper
        └─ method ConfigurationProvider [L70]
          └─ ... (no implementation details available)
      └─ uses_service ITenantIdentificationService (AddScoped)
        └─ method AssignActiveTenant [L65]
          └─ implementation Dataverse.Tenants.Tenants.TenantIdentificationService.AssignActiveTenant [L27-L149]

[web] PUT /api/internal/intercom/sync-entity  (Dataverse.Api.Controllers.Internal.Integration.IntercomController.SyncEntityDataToIntercom)  [L41–L53] status=200 [auth=Authentication.MachineToMachinePolicy,Authentication.RequireTenantIdPolicy]
  └─ sends_request UpdateEntityDataToIntercomCommand [L46]
    └─ handled_by Dataverse.ApplicationService.Commands.Intercom.UpdateEntityDataToIntercomCommandHandler.Handle [L40–L113]
      └─ calls TenantRepository.ReadTable [L105]
      └─ maps_to TenantLightDto [L105]
      └─ maps_to UserWithLicensesDto [L81]
        └─ automapper.registration DataverseMappingProfile (User->UserWithLicensesDto) [L90]
      └─ uses_service IntercomService
        └─ method GetContactByExternalId [L89]
          └─ implementation Dataverse.Services.ModuleIntegrations.Services.IntercomService.GetContactByExternalId [L17-L124]
      └─ uses_service IControlledRepository<User>
        └─ method ReadQuery [L81]
          └─ ... (no implementation details available)
      └─ uses_service IMapper
        └─ method ConfigurationProvider [L84]
          └─ ... (no implementation details available)
      └─ uses_service ITenantIdentificationService (AddScoped)
        └─ method AssignActiveTenant [L64]
          └─ implementation Dataverse.Tenants.Tenants.TenantIdentificationService.AssignActiveTenant [L27-L149]

[web] PUT /api/internal/intercom/sync-all  (Dataverse.Api.Controllers.Internal.Integration.IntercomController.SyncTenantDataToIntercom)  [L27–L39] status=200 [auth=Authentication.MachineToMachinePolicy,Authentication.RequireTenantIdPolicy]
  └─ sends_request SyncTenantDataToIntercomCommand [L32]
    └─ handled_by Dataverse.ApplicationService.Commands.Intercom.SyncTenantDataToIntercomCommandHandler.Handle [L38–L161]
      └─ calls TenantRepository.ReadTable [L74]
      └─ maps_to TenantLightDto [L74]
      └─ maps_to UserWithLicensesDto [L93]
        └─ automapper.registration DataverseMappingProfile (User->UserWithLicensesDto) [L90]
      └─ uses_service AsyncRetryPolicy
        └─ method ExecuteAsync [L124]
          └─ ... (no implementation details available)
      └─ uses_service IntercomService
        └─ method CreateOrUpdateCompany [L88]
          └─ implementation Dataverse.Services.ModuleIntegrations.Services.IntercomService.CreateOrUpdateCompany [L17-L124]
      └─ uses_service IControlledRepository<User>
        └─ method ReadQuery [L93]
          └─ ... (no implementation details available)
      └─ uses_service IMapper
        └─ method ConfigurationProvider [L77]
          └─ ... (no implementation details available)
      └─ uses_service ITenantIdentificationService (AddScoped)
        └─ method AssignActiveTenant [L72]
          └─ implementation Dataverse.Tenants.Tenants.TenantIdentificationService.AssignActiveTenant [L27-L149]

[web] PUT /api/internal/messages/{messageId:guid}/bulk-mark-as-sent  (Dataverse.Api.Controllers.Internal.MessagesController.BulkMarkAsSent)  [L56–L69] status=200 [auth=Authentication.MachineToMachinePolicy,Authentication.RequireTenantIdPolicy]
  └─ calls MessageRepository.WriteQuery [L59]
  └─ write Message [L59]
    └─ reads_from Messages
  └─ uses_service IControlledRepository<Message>
    └─ method WriteQuery [L59]
      └─ ... (no implementation details available)

[web] GET /api/internal/messages/  (Dataverse.Api.Controllers.Internal.MessagesController.GetMessages)  [L32–L41] status=200 [auth=Authentication.MachineToMachinePolicy,Authentication.RequireTenantIdPolicy]
  └─ calls MessageRepository.ReadQuery [L35]
  └─ query Message [L35]
    └─ reads_from Messages
  └─ uses_service IControlledRepository<Message>
    └─ method ReadQuery [L35]
      └─ ... (no implementation details available)

[web] PUT /api/internal/messages/{messageId:guid}/mark-as-sent  (Dataverse.Api.Controllers.Internal.MessagesController.MarkAsSent)  [L46–L54] status=200 [auth=Authentication.MachineToMachinePolicy,Authentication.RequireTenantIdPolicy]
  └─ calls MessageRepository.WriteQuery [L49]
  └─ write Message [L49]
    └─ reads_from Messages
  └─ uses_service IControlledRepository<Message>
    └─ method WriteQuery [L49]
      └─ ... (no implementation details available)

[web] POST /api/internal/messages/send-message  (Dataverse.Api.Controllers.Internal.MessagesController.SendMessage)  [L71–L77] status=201 [auth=Authentication.MachineToMachinePolicy,Authentication.RequireTenantIdPolicy]
  └─ sends_request SendMessageCommand [L74]
    └─ handled_by Dataverse.ApplicationService.Commands.Messaging.SendMessageCommandHandler.Handle [L55–L167]
      └─ maps_to UserUltraLightDto [L85]
      └─ uses_service UserService
        └─ method GetUserAsync [L84]
          └─ implementation Dataverse.ApplicationService.Services.UserService.GetUserAsync [L15-L185]
      └─ uses_service TenantService
        └─ method GetCurrentTenantAsync [L86]
          └─ implementation Dataverse.Services.Features.Tenants.TenantService.GetCurrentTenantAsync [L6-L27]
          └─ implementation Dataverse.Services.Features.Tenants.TenantService.GetCurrentTenantAsync [L6-L27]
      └─ uses_service MockMessagingService
        └─ method RequestNotificationMessage [L125]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<Message>
        └─ method Add [L113]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<User>
        └─ method ReadQuery [L83]
          └─ ... (no implementation details available)
      └─ uses_service IMapper
        └─ method Map [L85]
          └─ ... (no implementation details available)

[web] POST /api/internal/notification-subscriptions/{productSubscriptionType}/{emailNotificationFrequency}  (Dataverse.Api.Controllers.Internal.NotificationSubscriptionController.ProcessProductSubscriptionsData)  [L30–L39] status=201 [auth=Authentication.MachineToMachinePolicy,Authentication.RequireTenantIdPolicy]
  └─ sends_request ProcessWorkpapersNotificationSubscriptionCommand [L35]
    └─ handled_by Dataverse.ApplicationService.Commands.NotificationSubscriptions.ProcessWorkpapersNotificationSubscriptionCommandHandler.Handle [L40–L348]
      └─ calls TenantRepository.ReadTable [L287]
      └─ calls TenantRepository.ReadTable [L186]
      └─ uses_client WorkpapersClient [L65]
      └─ uses_service EmailSender
        └─ method SendEmailAsync [L165]
          └─ ... (no implementation details available)
      └─ uses_service WorkpapersClient
        └─ method Get [L65]
          └─ ... (no implementation details available)

[web] POST /api/internal/Propagator/create-failure  (Dataverse.Api.Controllers.Internal.PropagatorController.CreateFailure)  [L65–L83] status=201 [auth=Authentication.MachineToMachinePolicy,Authentication.RequireTenantIdPolicy]
  └─ calls DataverseEntityFailureLogRepository.Add [L82]
  └─ calls DataverseEntityFailureLogRepository.Remove [L79]
  └─ calls DataverseEntityFailureLogRepository.WriteQuery [L75]
  └─ delete DataverseEntityFailureLog [L79]
    └─ reads_from DataverseEntityFailureLogs
  └─ insert DataverseEntityFailureLog [L82]
    └─ reads_from DataverseEntityFailureLogs
  └─ write DataverseEntityFailureLog [L75]
    └─ reads_from DataverseEntityFailureLogs
  └─ uses_service IControlledRepository<DataverseEntityFailureLog>
    └─ method WriteQuery [L75]
      └─ ... (no implementation details available)

[web] GET /api/internal/Propagator/subscriptions  (Dataverse.Api.Controllers.Internal.PropagatorController.GetTenantSubscriptions)  [L122–L128] status=200 [auth=Authentication.MachineToMachinePolicy,Authentication.RequireTenantIdPolicy]
  └─ maps_to SubscriptionLightDto [L125]
  └─ calls TenantRepository.ReadTable [L125]
  └─ query Tenant [L125]
    └─ reads_from Tenants
  └─ uses_service TenantRepository
    └─ method ReadTable [L125]
      └─ implementation Dataverse.Tenants.Data.TenantRepository.ReadTable [L15-L180]

[web] GET /api/internal/Propagator/user/{id:guid}  (Dataverse.Api.Controllers.Internal.PropagatorController.GetUser)  [L113–L117] status=200 [auth=Authentication.MachineToMachinePolicy,Authentication.RequireTenantIdPolicy]
  └─ maps_to UserWithLicensesDto [L116]
    └─ automapper.registration DataverseMappingProfile (User->UserWithLicensesDto) [L90]
  └─ calls UserRepository.ReadQuery [L116]
  └─ query User [L116]
  └─ uses_service IControlledRepository<User>
    └─ method ReadQuery [L116]
      └─ ... (no implementation details available)

[web] GET /api/internal/Propagator/workflow-changed-job-status  (Dataverse.Api.Controllers.Internal.PropagatorController.GetWorkflowJobs)  [L150–L169] status=200 [auth=Authentication.MachineToMachinePolicy,Authentication.RequireTenantIdPolicy]
  └─ calls JobRepository.ReadQuery [L153]
  └─ query Job [L153]
    └─ reads_from Jobs
  └─ uses_service JobRepository
    └─ method ReadQuery [L153]
      └─ implementation Dataverse.Data.Repository.Workflow.JobRepository.ReadQuery [L8-L46]

[web] GET /api/internal/Propagator/workflow-tasks  (Dataverse.Api.Controllers.Internal.PropagatorController.GetWorkflowTasks)  [L133–L148] status=200 [auth=Authentication.MachineToMachinePolicy,Authentication.RequireTenantIdPolicy]
  └─ calls TaskRepository.ReadQuery [L136]
  └─ uses_service TaskRepository
    └─ method ReadQuery [L136]
      └─ implementation Dataverse.Data.Repository.Workflow.TaskRepository.ReadQuery [L8-L40]

[web] PUT /api/internal/Propagator/notify-change  (Dataverse.Api.Controllers.Internal.PropagatorController.NotifyChange)  [L105–L111] status=200 [auth=Authentication.MachineToMachinePolicy,Authentication.RequireTenantIdPolicy]
  └─ sends_request BulkPropagateCommand [L110]
    └─ handled_by Dataverse.ApplicationService.Commands.DataverseEntity.BulkPropagateCommandHandler.Handle [L45–L168]
      └─ calls TenantRepository.ReadTable [L159]
      └─ uses_service TenantService
        └─ method GetCurrentTenantAsync [L72]
          └─ implementation Dataverse.Services.Features.Tenants.TenantService.GetCurrentTenantAsync [L6-L27]
          └─ implementation Dataverse.Services.Features.Tenants.TenantService.GetCurrentTenantAsync [L6-L27]
      └─ uses_service MockMessagingService
        └─ method RequestPropagation [L141]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<DataverseEntityFailureLog>
        └─ method WriteQuery [L145]
          └─ ... (no implementation details available)
      └─ uses_service IMapper
        └─ method ConfigurationProvider [L136]
          └─ ... (no implementation details available)

[web] GET /api/internal/Propagator/request-audit  (Dataverse.Api.Controllers.Internal.PropagatorController.RequestAudit)  [L88–L98] status=200 [auth=Authentication.MachineToMachinePolicy,Authentication.RequireTenantIdPolicy]
  └─ calls TenantRepository.ReadTable [L92]
  └─ query Tenant [L92]
    └─ reads_from Tenants
  └─ uses_service MockMessagingService
    └─ method RequestAudit [L97]
      └─ ... (no implementation details available)
  └─ uses_service TenantRepository
    └─ method ReadTable [L92]
      └─ implementation Dataverse.Tenants.Data.TenantRepository.ReadTable [L15-L180]

[web] PUT /api/internal/sharepoint-security/office-user/{officeId:guid}/{userId:guid}  (Dataverse.Api.Controllers.Internal.SharePointSecurityController.AddOfficeUser)  [L50–L64] status=200 [auth=Authentication.MachineToMachinePolicy,Authentication.RequireTenantIdPolicy]
  └─ uses_service IDocumentStoreService (AddScoped)
    └─ method GetReadOnlyDocumentStoresWithCredentials [L56]
      └─ implementation Dataverse.ApplicationService.Services.DocumentStoreService.GetReadOnlyDocumentStoresWithCredentials [L17-L89]
  └─ uses_storage IDocumentStoreService.GetReadOnlyDocumentStoresWithCredentials [L56]

[web] PUT /api/internal/sharepoint-security/initialise/{id:guid}  (Dataverse.Api.Controllers.Internal.SharePointSecurityController.InitialiseStoreTenant)  [L81–L90] status=200 [auth=Authentication.MachineToMachinePolicy,Authentication.RequireTenantIdPolicy]
  └─ uses_service IDocumentStoreService (AddScoped)
    └─ method GetReadOnlyDocumentStoresWithCredentials [L84]
      └─ implementation Dataverse.ApplicationService.Services.DocumentStoreService.GetReadOnlyDocumentStoresWithCredentials [L17-L89]
  └─ uses_storage IDocumentStoreService.GetReadOnlyDocumentStoresWithCredentials [L84]

[web] DELETE /api/internal/sharepoint-security/office-user/{officeId:guid}/{userId:guid}  (Dataverse.Api.Controllers.Internal.SharePointSecurityController.RemoveOfficeUser)  [L66–L79] status=200 [auth=Authentication.MachineToMachinePolicy,Authentication.RequireTenantIdPolicy]
  └─ uses_service IDocumentStoreService (AddScoped)
    └─ method GetReadOnlyDocumentStoresWithCredentials [L71]
      └─ implementation Dataverse.ApplicationService.Services.DocumentStoreService.GetReadOnlyDocumentStoresWithCredentials [L17-L89]
  └─ uses_storage IDocumentStoreService.GetReadOnlyDocumentStoresWithCredentials [L71]

[web] PUT /api/internal/sharepoint-security/office/{id:guid}  (Dataverse.Api.Controllers.Internal.SharePointSecurityController.SyncOffice)  [L92–L103] status=200 [auth=Authentication.MachineToMachinePolicy,Authentication.RequireTenantIdPolicy]
  └─ uses_service IDocumentStoreService (AddScoped)
    └─ method GetReadOnlyDocumentStoresWithCredentials [L95]
      └─ implementation Dataverse.ApplicationService.Services.DocumentStoreService.GetReadOnlyDocumentStoresWithCredentials [L17-L89]
  └─ uses_storage IDocumentStoreService.GetReadOnlyDocumentStoresWithCredentials [L95]

[web] PUT /api/internal/sharepoint-security/cabinet/{id:guid}  (Dataverse.Api.Controllers.Internal.SharePointSecurityController.UpdateCabinet)  [L126–L145] status=200 [auth=Authentication.MachineToMachinePolicy,Authentication.RequireTenantIdPolicy]
  └─ uses_service IDocumentStoreService (AddScoped)
    └─ method GetReadOnlyDocumentStoresWithCredentials [L132]
      └─ implementation Dataverse.ApplicationService.Services.DocumentStoreService.GetReadOnlyDocumentStoresWithCredentials [L17-L89]
  └─ uses_storage IDocumentStoreService.GetReadOnlyDocumentStoresWithCredentials [L132]

[web] PUT /api/internal/sharepoint-security/client/{id:guid}  (Dataverse.Api.Controllers.Internal.SharePointSecurityController.UpdateClient)  [L105–L124] status=200 [auth=Authentication.MachineToMachinePolicy,Authentication.RequireTenantIdPolicy]
  └─ uses_service IDocumentStoreService (AddScoped)
    └─ method GetReadOnlyDocumentStoresWithCredentials [L111]
      └─ implementation Dataverse.ApplicationService.Services.DocumentStoreService.GetReadOnlyDocumentStoresWithCredentials [L17-L89]
  └─ uses_storage IDocumentStoreService.GetReadOnlyDocumentStoresWithCredentials [L111]

[web] PUT /api/internal/sharepoint-security/user/{id:guid}  (Dataverse.Api.Controllers.Internal.SharePointSecurityController.UpdateUser)  [L30–L48] status=200 [auth=Authentication.MachineToMachinePolicy,Authentication.RequireTenantIdPolicy]
  └─ uses_service IDocumentStoreService (AddScoped)
    └─ method GetReadOnlyDocumentStoresWithCredentials [L37]
      └─ implementation Dataverse.ApplicationService.Services.DocumentStoreService.GetReadOnlyDocumentStoresWithCredentials [L17-L89]
  └─ uses_storage IDocumentStoreService.GetReadOnlyDocumentStoresWithCredentials [L37]

[web] PUT /api/internal/storage/pending-operation  (Dataverse.Api.Controllers.Internal.StorageController.AttemptPendingDocumentVersionOperation)  [L242–L250] status=200 [auth=Authentication.MachineToMachinePolicy,Authentication.RequireTenantIdPolicy]
  └─ sends_request PendingDocumentVersionOperationCommand [L247]
    └─ handled_by Dataverse.Services.DocumentStorage.Commands.PendingDocumentVersionOperationCommandHandler.Handle [L24–L58]
      └─ uses_service IControlledRepository<DocumentVersion>
        └─ method WriteQuery [L39]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L51]
          └─ implementation Dataverse.Services.Features.Requests.RequestProcessor.ProcessAsync [L8-L45]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle

[web] PUT /api/internal/storage/clean-temp-folders  (Dataverse.Api.Controllers.Internal.StorageController.CleanTempFolders)  [L156–L162] status=200 [auth=Authentication.MachineToMachinePolicy,Authentication.RequireTenantIdPolicy]

[web] GET /api/internal/storage/documents/{documentId:guid}/download-url  (Dataverse.Api.Controllers.Internal.StorageController.DownloadColdDocument)  [L88–L94] status=200 [auth=Authentication.MachineToMachinePolicy,Authentication.RequireTenantIdPolicy]
  └─ sends_request GetDocumentColdDownloadLink [L91]
    └─ handled_by Dataverse.ApplicationService.Queries.Documents.GetDocumentColdDownloadLinkHandler.Handle [L28–L74]
      └─ uses_service DocumentServiceFactory
        └─ method GetDefaultColdStorageDocumentWithService [L58]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<DocumentVersion>
        └─ method ReadQuery [L46]
          └─ ... (no implementation details available)

[web] GET /api/internal/storage/all-sites  (Dataverse.Api.Controllers.Internal.StorageController.GetAllSites)  [L222–L228] status=200 [auth=Authentication.MachineToMachinePolicy,Authentication.RequireTenantIdPolicy]
  └─ sends_request GetAllSharePointSitesQuery [L225]
    └─ handled_by Dataverse.ApplicationService.Queries.Documents.GetAllSharePointSitesQueryHandler.Handle [L33–L189]
      └─ calls TenantRepository.ReadTable [L92]
      └─ maps_to SecureDocumentStoreCredentialsDto [L83]
      └─ uses_service IMapper
        └─ method Map [L83]
          └─ ... (no implementation details available)
      └─ uses_service SharePointRestAuthenticationManager
        └─ method GetSharePointCertificate [L111]
          └─ ... (no implementation details available)

[web] GET /api/internal/storage/old-hot-documents/{jobId:Guid}  (Dataverse.Api.Controllers.Internal.StorageController.GetOldHotDocuments)  [L168–L207] status=200 [auth=Authentication.MachineToMachinePolicy,Authentication.RequireTenantIdPolicy]
  └─ uses_cache IDistributedCache.GetRecordAsync [read] [L204]
  └─ uses_cache IDistributedCache.GetRecordAsync [read] [L201]
  └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L171]
  └─ uses_service TenantService
    └─ method GetCurrentTenantAsync [L176]
      └─ implementation Dataverse.Services.Features.Tenants.TenantService.GetCurrentTenantAsync [L6-L27]
  └─ sends_request GetOldHotDocumentsQuery [L188]
    └─ handled_by Dataverse.ApplicationService.Queries.Documents.GetOldHotDocumentsQueryHandler.Handle [L40–L253]
      └─ calls TenantRepository.ReadTable [L196]
      └─ maps_to SecureDocumentStoreCredentialsDto [L187]
      └─ uses_service ActiveDocumentsConfiguration
        └─ method DaysUntilMovedToColdStorage [L79]
          └─ ... (no implementation details available)
      └─ uses_service DocumentStoreService
        └─ method SetCurrentDocumentStoreCredentials [L77]
          └─ implementation Dataverse.ApplicationService.Services.DocumentStoreService.SetCurrentDocumentStoreCredentials [L17-L89]
      └─ uses_service IGraphClientService
        └─ method GetOldDocuments [L84]
          └─ ... (no implementation details available)
      └─ uses_service IMapper
        └─ method Map [L187]
          └─ ... (no implementation details available)
      └─ uses_storage DocumentStoreService.SetCurrentDocumentStoreCredentials [L77]
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L147]
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L143]
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L67]

[web] GET /api/internal/storage/pending-operations  (Dataverse.Api.Controllers.Internal.StorageController.GetPendingDocumentVersionOperations)  [L209–L216] status=200 [auth=Authentication.MachineToMachinePolicy,Authentication.RequireTenantIdPolicy]
  └─ sends_request GetPendingDocumentVersionOperationsQuery [L213]
    └─ handled_by Dataverse.ApplicationService.Queries.Documents.GetPendingDocumentVersionOperationsQueryHandler.Handle [L26–L131]
      └─ calls TenantRepository.ReadTable [L53]

[web] PUT /api/internal/storage/move-to-cold-storage  (Dataverse.Api.Controllers.Internal.StorageController.MoveOldHotDocumentsToColdStorage)  [L234–L240] status=200 [auth=Authentication.MachineToMachinePolicy,Authentication.RequireTenantIdPolicy]
  └─ sends_request MoveDocumentFromHotToColdStorageCommand [L237]
    └─ handled_by Dataverse.Services.DocumentStorage.Commands.MoveDocumentFromHotToColdStorageCommandHandler.Handle [L39–L126]
      └─ uses_service UserService
        └─ method GetUserIdIfPresent [L106]
          └─ implementation Dataverse.ApplicationService.Services.UserService.GetUserIdIfPresent [L15-L185]
      └─ uses_service DocumentServiceFactory
        └─ method GetDocumentWithService [L81]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<DocumentAuditLog>
        └─ method Add [L101]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<DocumentVersion>
        └─ method WriteQuery [L63]
          └─ ... (no implementation details available)

[web] GET /api/internal/storage/process-zip/{contextId}  (Dataverse.Api.Controllers.Internal.StorageController.ProcessZip)  [L144–L150] status=200 [auth=Authentication.MachineToMachinePolicy,Authentication.RequireTenantIdPolicy]

[web] GET /api/internal/storage/refresh-template-storage  (Dataverse.Api.Controllers.Internal.StorageController.RefreshTemplateStorage)  [L256–L262] status=200 [auth=Authentication.MachineToMachinePolicy,Authentication.RequireTenantIdPolicy]
  └─ uses_service ITemplateService (AddSingleton)
    └─ method GetTemplates [L259]
      └─ implementation Dataverse.Templates.TemplateService.GetTemplates [L17-L359]

[web] POST /api/internal/storage/start-zip  (Dataverse.Api.Controllers.Internal.StorageController.StartCreateZipFile)  [L96–L142] status=201 [auth=Authentication.MachineToMachinePolicy,Authentication.RequireTenantIdPolicy]
  └─ uses_service TenantService
    └─ method GetCurrentTenantAsync [L99]
      └─ implementation Dataverse.Services.Features.Tenants.TenantService.GetCurrentTenantAsync [L6-L27]

[web] POST /api/internal/storage/upload  (Dataverse.Api.Controllers.Internal.StorageController.UploadTempFile)  [L75–L86] status=201 [auth=Authentication.MachineToMachinePolicy,Authentication.RequireTenantIdPolicy]
  └─ sends_request UploadChunkCommand [L78]
    └─ handled_by Cirrus.Services.Features.FileUpload.UploadChunkCommandHandler.Handle [L37–L139]
      └─ uses_service IStorageService (InstancePerLifetimeScope)
        └─ method UploadFile [L71]
          └─ implementation IStorageService.UploadFile [L9-L9]
          └─ ... (no implementation details available)
      └─ uses_storage IStorageService.UploadFile [L71]

[web] GET /api/internal/support-users/expired-users  (Dataverse.Api.Controllers.Internal.SupportUsersController.GetExpiredSupportUsers)  [L46–L64] status=200 [auth=Authentication.MachineToMachinePolicy,Authentication.RequireTenantIdPolicy]
  └─ calls TenantRepository.ReadTable [L50]
  └─ query Tenant [L50]
    └─ reads_from Tenants
  └─ uses_service TenantRepository
    └─ method ReadTable [L50]
      └─ implementation Dataverse.Tenants.Data.TenantRepository.ReadTable [L15-L180]

[web] PUT /api/internal/support-users/revoke  (Dataverse.Api.Controllers.Internal.SupportUsersController.RevokeExpiredSupportUser)  [L38–L44] status=200 [auth=Authentication.MachineToMachinePolicy,Authentication.RequireTenantIdPolicy]
  └─ sends_request RevokeExpiredSupportUserCommand [L41]
    └─ handled_by Dataverse.ApplicationService.Commands.Users.RevokeExpiredSupportUserCommandHandler.Handle [L19–L42]
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L33]
          └─ implementation Dataverse.Services.Features.Requests.RequestProcessor.ProcessAsync [L8-L45]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle

[web] PUT /api/internal/sync-configuration/{id:Guid}/error  (Dataverse.Api.Controllers.Internal.SyncConfigurationController.AddOrUpdateError)  [L127–L144] status=200 [auth=Authentication.MachineToMachinePolicy,Authentication.RequireTenantIdPolicy]
  └─ insert SyncConfigurationError [L138]
    └─ reads_from SyncConfigurationErrors
  └─ write SyncConfigurationError [L130]
    └─ reads_from SyncConfigurationErrors
  └─ uses_service IControlledRepository<SyncConfigurationError>
    └─ method WriteQuery [L130]
      └─ ... (no implementation details available)

[web] POST /api/internal/sync-configuration/{id:Guid}/complete  (Dataverse.Api.Controllers.Internal.SyncConfigurationController.Complete)  [L88–L101] status=201 [auth=Authentication.MachineToMachinePolicy,Authentication.RequireTenantIdPolicy]
  └─ calls SyncConfigurationRepository.WriteQuery [L95]
  └─ write SyncConfiguration [L95]
    └─ reads_from SyncConfigurations
  └─ uses_service IControlledRepository<SyncConfiguration>
    └─ method WriteQuery [L95]
      └─ ... (no implementation details available)

[web] DELETE /api/internal/sync-configuration/{id:Guid}/error  (Dataverse.Api.Controllers.Internal.SyncConfigurationController.DeleteErrors)  [L152–L166] status=200 [auth=Authentication.MachineToMachinePolicy,Authentication.RequireTenantIdPolicy]
  └─ write SyncConfigurationError [L160]
    └─ reads_from SyncConfigurationErrors
  └─ uses_service IControlledRepository<SyncConfigurationError>
    └─ method WriteQuery [L160]
      └─ ... (no implementation details available)

[web] POST /api/internal/sync-configuration/{id:Guid}/delete-settings  (Dataverse.Api.Controllers.Internal.SyncConfigurationController.DeleteSettings)  [L115–L125] status=201 [auth=Authentication.MachineToMachinePolicy,Authentication.RequireTenantIdPolicy]
  └─ calls SyncConfigurationRepository.WriteQuery [L118]
  └─ write SyncConfiguration [L118]
    └─ reads_from SyncConfigurations
  └─ uses_service IControlledRepository<SyncConfiguration>
    └─ method WriteQuery [L118]
      └─ ... (no implementation details available)

[web] PUT /api/internal/sync-configuration/sync/{id:Guid}  (Dataverse.Api.Controllers.Internal.SyncConfigurationController.ForceNextSync)  [L78–L86] status=200 [auth=Authentication.MachineToMachinePolicy,Authentication.RequireTenantIdPolicy]
  └─ calls SyncConfigurationRepository.WriteQuery [L81]
  └─ write SyncConfiguration [L81]
    └─ reads_from SyncConfigurations
  └─ uses_service IControlledRepository<SyncConfiguration>
    └─ method WriteQuery [L81]
      └─ ... (no implementation details available)

[web] GET /api/internal/sync-configuration/  (Dataverse.Api.Controllers.Internal.SyncConfigurationController.GetAll)  [L44–L50] status=200 [auth=Authentication.MachineToMachinePolicy,Authentication.RequireTenantIdPolicy]
  └─ maps_to SyncConfigurationInsecureDto [L47]
    └─ automapper.registration DataverseMappingProfile (SyncConfiguration->SyncConfigurationInsecureDto) [L283]
  └─ calls SyncConfigurationRepository.ReadQuery [L47]
  └─ query SyncConfiguration [L47]
    └─ reads_from SyncConfigurations
  └─ uses_service IControlledRepository<SyncConfiguration>
    └─ method ReadQuery [L47]
      └─ ... (no implementation details available)

[web] GET /api/internal/sync-configuration/all  (Dataverse.Api.Controllers.Internal.SyncConfigurationController.GetAllTenants)  [L52–L60] status=200 [auth=Authentication.MachineToMachinePolicy,Authentication.RequireTenantIdPolicy]

[web] GET /api/internal/sync-configuration/{id:Guid}  (Dataverse.Api.Controllers.Internal.SyncConfigurationController.GetById)  [L62–L67] status=200 [auth=Authentication.MachineToMachinePolicy,Authentication.RequireTenantIdPolicy]
  └─ maps_to SyncConfigurationInsecureDto [L65]
    └─ automapper.registration DataverseMappingProfile (SyncConfiguration->SyncConfigurationInsecureDto) [L283]
  └─ calls SyncConfigurationRepository.ReadQuery [L65]
  └─ query SyncConfiguration [L65]
    └─ reads_from SyncConfigurations
  └─ uses_service IControlledRepository<SyncConfiguration>
    └─ method ReadQuery [L65]
      └─ ... (no implementation details available)

[web] POST /api/internal/sync-configuration/{id:Guid}/notification  (Dataverse.Api.Controllers.Internal.SyncConfigurationController.Notification)  [L146–L150] status=201 [auth=Authentication.MachineToMachinePolicy,Authentication.RequireTenantIdPolicy]
  └─ sends_request NotifyUserOfFailedSyncCommand [L149]
    └─ handled_by Dataverse.ApplicationService.Commands.Connections.NotifyUserOfFailedSyncCommandHandler.Handle [L33–L97]
      └─ uses_service BaseUrls
        └─ method Site [L67]
          └─ ... (no implementation details available)
      └─ uses_service EmailSender
        └─ method SendEmailAsync [L90]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<SyncConfiguration>
        └─ method WriteQuery [L57]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<User>
        └─ method ReadQuery [L63]
          └─ ... (no implementation details available)

[web] PUT /api/internal/sync-configuration/{id:Guid}  (Dataverse.Api.Controllers.Internal.SyncConfigurationController.Update)  [L69–L76] status=200 [auth=Authentication.MachineToMachinePolicy,Authentication.RequireTenantIdPolicy]
  └─ calls SyncConfigurationRepository.WriteQuery [L72]
  └─ write SyncConfiguration [L72]
    └─ reads_from SyncConfigurations
  └─ uses_service IControlledRepository<SyncConfiguration>
    └─ method WriteQuery [L72]
      └─ ... (no implementation details available)

[web] PUT /api/internal/sync-configuration/{id:Guid}/settings  (Dataverse.Api.Controllers.Internal.SyncConfigurationController.UpdateSettings)  [L103–L113] status=200 [auth=Authentication.MachineToMachinePolicy,Authentication.RequireTenantIdPolicy]
  └─ calls SyncConfigurationRepository.WriteQuery [L106]
  └─ write SyncConfiguration [L106]
    └─ reads_from SyncConfigurations
  └─ uses_service IControlledRepository<SyncConfiguration>
    └─ method WriteQuery [L106]
      └─ ... (no implementation details available)

[web] POST /api/internal/tenants/  (Dataverse.Api.Controllers.Internal.TenantController.Create)  [L62–L68] status=201 [auth=Authentication.MachineToMachinePolicy]
  └─ sends_request CreateTenantCommand [L65]
    └─ handled_by Dataverse.Tenants.Commands.Tenants.CreateTenantCommandHandler.Handle [L32–L124]
      └─ calls TenantRepository.Add [L60]
      └─ calls TenantRepository.WriteTable [L48]

[web] GET /api/internal/tenants/{id}  (Dataverse.Api.Controllers.Internal.TenantController.Get)  [L53–L60] status=200 [auth=Authentication.MachineToMachinePolicy]
  └─ maps_to TenantDto [L56]
  └─ calls TenantRepository.ReadTable [L56]
  └─ query Tenant [L56]
    └─ reads_from Tenants
  └─ uses_service TenantRepository
    └─ method ReadTable [L56]
      └─ implementation Dataverse.Tenants.Data.TenantRepository.ReadTable [L15-L180]

[web] GET /api/internal/tenants/  (Dataverse.Api.Controllers.Internal.TenantController.Search)  [L42–L51] status=200 [auth=Authentication.MachineToMachinePolicy]
  └─ sends_request FindTenantsQuery [L50]
    └─ handled_by Cirrus.Central.Dataverse.Queries.FindTenantsQueryHandler.Handle [L32–L52]
      └─ uses_service DataverseService
        └─ method Get [L50]
          └─ implementation Cirrus.Central.Features.MachineToMachine.DataverseService.Get [L14-L66]

[web] PUT /api/internal/tenants/{id}  (Dataverse.Api.Controllers.Internal.TenantController.Update)  [L70–L78] status=200 [auth=Authentication.MachineToMachinePolicy]
  └─ calls TenantRepository.WriteTable [L73]
  └─ write Tenant [L73]
    └─ reads_from Tenants
  └─ uses_service TenantRepository
    └─ method WriteTable [L73]
      └─ implementation Dataverse.Tenants.Data.TenantRepository.WriteTable [L15-L180]

[web] POST /api/internal/webhooks/  (Dataverse.Api.Controllers.Internal.Webhooks.WebhooksController.Create)  [L52–L57] status=201 [auth=Authentication.MachineToMachinePolicy,Authentication.RequireTenantIdPolicy]
  └─ sends_request CreateWebhookCommand [L55]
    └─ handled_by Dataverse.ApplicationService.Commands.Webhooks.CreateWebhookCommandHandler.Handle [L15–L46]
      └─ uses_service RequestInfoService
        └─ method IsValidServiceAccountRequest [L30]
          └─ implementation Dataverse.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L92]
          └─ implementation Dataverse.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L92]
          └─ implementation Dataverse.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L92]
      └─ uses_service IControlledRepository<Webhook>
        └─ method Add [L42]
          └─ ... (no implementation details available)

[web] DELETE /api/internal/webhooks/{hookId:Guid}  (Dataverse.Api.Controllers.Internal.Webhooks.WebhooksController.Delete)  [L76–L84] status=200 [auth=Authentication.MachineToMachinePolicy,Authentication.RequireTenantIdPolicy]
  └─ calls WebhookRepository.WriteQuery [L79]
  └─ write Webhook [L79]
    └─ reads_from Webhooks
  └─ uses_service IControlledRepository<Webhook>
    └─ method WriteQuery [L79]
      └─ ... (no implementation details available)

[web] GET /api/internal/webhooks/{hookId:Guid}  (Dataverse.Api.Controllers.Internal.Webhooks.WebhooksController.Get)  [L44–L50] status=200 [auth=Authentication.MachineToMachinePolicy,Authentication.RequireTenantIdPolicy]
  └─ maps_to WebhookDto [L47]
    └─ automapper.registration DataverseMappingProfile (Webhook->WebhookDto) [L458]
    └─ automapper.registration ExternalApiMappingProfile (Webhook->WebhookDto) [L181]
  └─ calls WebhookRepository.ReadQuery [L47]
  └─ query Webhook [L47]
    └─ reads_from Webhooks
  └─ uses_service IControlledRepository<Webhook>
    └─ method ReadQuery [L47]
      └─ ... (no implementation details available)

[web] PUT /api/internal/webhooks/{hookId:guid}/error  (Dataverse.Api.Controllers.Internal.Webhooks.WebhooksController.SetErrorMessage)  [L66–L74] status=200 [auth=Authentication.MachineToMachinePolicy,Authentication.RequireTenantIdPolicy]
  └─ calls WebhookRepository.WriteQuery [L69]
  └─ write Webhook [L69]
    └─ reads_from Webhooks
  └─ uses_service IControlledRepository<Webhook>
    └─ method WriteQuery [L69]
      └─ ... (no implementation details available)

[web] PUT /api/internal/webhooks/{hookId:Guid}  (Dataverse.Api.Controllers.Internal.Webhooks.WebhooksController.Update)  [L59–L64] status=200 [auth=Authentication.MachineToMachinePolicy,Authentication.RequireTenantIdPolicy]

[web] POST /api/internal/deliverables/  (Dataverse.Api.Controllers.Internal.Workflow.DeliverablesController.Create)  [L96–L119] status=201 [auth=Authentication.MachineToMachinePolicy,Authentication.RequireTenantIdPolicy]
  └─ maps_to DeliverableDto [L118]
  └─ calls DeliverableRepository.Add [L116]
  └─ calls DeliverableRepository.WriteQuery [L102]
  └─ insert Deliverable [L116]
    └─ reads_from Deliverables
  └─ write Deliverable [L102]
    └─ reads_from Deliverables
  └─ uses_service JobParamsService
    └─ method GetDeliverableParams [L112]
      └─ implementation Dataverse.ApplicationService.Services.Workflow.JobParamsService.GetDeliverableParams [L24-L215]
  └─ uses_service IControlledRepository<Deliverable>
    └─ method WriteQuery [L102]
      └─ ... (no implementation details available)
  └─ uses_service IMapper
    └─ method Map [L118]
      └─ ... (no implementation details available)
  └─ sends_request CanIAccessJobQuery [L108]
    └─ handled_by Dataverse.ApplicationService.Queries.WorkFlow.CanIAccessJobQueryHandler.Handle [L39–L95]
      └─ uses_service UserService
        └─ method GetUserAsync [L71]
          └─ implementation Dataverse.ApplicationService.Services.UserService.GetUserAsync [L15-L185]
      └─ uses_service TenantService
        └─ method GetCurrentTenantAsync [L73]
          └─ implementation Dataverse.Services.Features.Tenants.TenantService.GetCurrentTenantAsync [L6-L27]
          └─ implementation Dataverse.Services.Features.Tenants.TenantService.GetCurrentTenantAsync [L6-L27]
      └─ uses_service RequestInfoService
        └─ method IsValidServiceAccountRequest [L68]
          └─ implementation Dataverse.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L92]
          └─ implementation Dataverse.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L92]
          └─ implementation Dataverse.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L92]
      └─ uses_service IControlledRepository<Job>
        └─ method ReadQuery [L78]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L82]
          └─ implementation Dataverse.Services.Features.Requests.RequestProcessor.ProcessAsync [L8-L45]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L91]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L75]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L73]

[web] DELETE /api/internal/deliverables/{id}  (Dataverse.Api.Controllers.Internal.Workflow.DeliverablesController.Delete)  [L137–L146] status=200 [auth=Authentication.MachineToMachinePolicy,Authentication.RequireTenantIdPolicy]
  └─ calls DeliverableRepository.WriteQuery [L140]
  └─ write Deliverable [L140]
    └─ reads_from Deliverables
  └─ uses_service IControlledRepository<Deliverable>
    └─ method WriteQuery [L140]
      └─ ... (no implementation details available)
  └─ sends_request CanIAccessJobQuery [L144]
    └─ handled_by Dataverse.ApplicationService.Queries.WorkFlow.CanIAccessJobQueryHandler.Handle [L39–L95]
      └─ uses_service UserService
        └─ method GetUserAsync [L71]
          └─ implementation Dataverse.ApplicationService.Services.UserService.GetUserAsync [L15-L185]
      └─ uses_service TenantService
        └─ method GetCurrentTenantAsync [L73]
          └─ implementation Dataverse.Services.Features.Tenants.TenantService.GetCurrentTenantAsync [L6-L27]
          └─ implementation Dataverse.Services.Features.Tenants.TenantService.GetCurrentTenantAsync [L6-L27]
      └─ uses_service RequestInfoService
        └─ method IsValidServiceAccountRequest [L68]
          └─ implementation Dataverse.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L92]
          └─ implementation Dataverse.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L92]
          └─ implementation Dataverse.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L92]
      └─ uses_service IControlledRepository<Job>
        └─ method ReadQuery [L78]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L82]
          └─ implementation Dataverse.Services.Features.Requests.RequestProcessor.ProcessAsync [L8-L45]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L91]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L75]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L73]

[web] GET /api/internal/deliverables/{id}  (Dataverse.Api.Controllers.Internal.Workflow.DeliverablesController.Get)  [L53–L59] status=200 [auth=Authentication.MachineToMachinePolicy,Authentication.RequireTenantIdPolicy]
  └─ maps_to DeliverableDto [L56]
    └─ automapper.registration ExternalApiMappingProfile (Deliverable->DeliverableDto) [L130]
    └─ automapper.registration DataverseMappingProfile (Deliverable->DeliverableDto) [L353]
  └─ calls DeliverableRepository.ReadQuery [L56]
  └─ query Deliverable [L56]
    └─ reads_from Deliverables
  └─ uses_service IControlledRepository<Deliverable>
    └─ method ReadQuery [L56]
      └─ ... (no implementation details available)

[web] PUT /api/internal/deliverables/synchronise  (Dataverse.Api.Controllers.Internal.Workflow.DeliverablesController.Synchronise)  [L67–L91] status=200 [auth=Authentication.MachineToMachinePolicy,Authentication.RequireTenantIdPolicy]
  └─ calls DeliverableRepository.WriteQuery [L71]
  └─ write Deliverable [L71]
    └─ reads_from Deliverables
  └─ uses_service JobParamsService
    └─ method GetDeliverableParams [L85]
      └─ implementation Dataverse.ApplicationService.Services.Workflow.JobParamsService.GetDeliverableParams [L24-L215]
  └─ uses_service IControlledRepository<Deliverable>
    └─ method WriteQuery [L71]
      └─ ... (no implementation details available)
  └─ sends_request CanIAccessJobQuery [L78]
    └─ handled_by Dataverse.ApplicationService.Queries.WorkFlow.CanIAccessJobQueryHandler.Handle [L39–L95]
      └─ uses_service UserService
        └─ method GetUserAsync [L71]
          └─ implementation Dataverse.ApplicationService.Services.UserService.GetUserAsync [L15-L185]
      └─ uses_service TenantService
        └─ method GetCurrentTenantAsync [L73]
          └─ implementation Dataverse.Services.Features.Tenants.TenantService.GetCurrentTenantAsync [L6-L27]
          └─ implementation Dataverse.Services.Features.Tenants.TenantService.GetCurrentTenantAsync [L6-L27]
      └─ uses_service RequestInfoService
        └─ method IsValidServiceAccountRequest [L68]
          └─ implementation Dataverse.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L92]
          └─ implementation Dataverse.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L92]
          └─ implementation Dataverse.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L92]
      └─ uses_service IControlledRepository<Job>
        └─ method ReadQuery [L78]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L82]
          └─ implementation Dataverse.Services.Features.Requests.RequestProcessor.ProcessAsync [L8-L45]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L91]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L75]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L73]

[web] PUT /api/internal/deliverables/{id:guid}  (Dataverse.Api.Controllers.Internal.Workflow.DeliverablesController.Update)  [L124–L132] status=200 [auth=Authentication.MachineToMachinePolicy,Authentication.RequireTenantIdPolicy]
  └─ maps_to DeliverableDto [L129]
  └─ uses_service IMapper
    └─ method Map [L129]
      └─ ... (no implementation details available)
  └─ sends_request UpdateDeliverableCommand [L127]
    └─ handled_by Dataverse.ApplicationService.Commands.Workflow.UpdateDeliverableCommandHandler.Handle [L25–L51]
      └─ uses_service JobParamsService
        └─ method GetDeliverableParams [L46]
          └─ implementation Dataverse.ApplicationService.Services.Workflow.JobParamsService.GetDeliverableParams [L24-L215]
      └─ uses_service IControlledRepository<Deliverable>
        └─ method WriteQuery [L40]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L44]
          └─ implementation Dataverse.Services.Features.Requests.RequestProcessor.ProcessAsync [L8-L45]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle

[web] POST /api/internal/deliverable-types  (Dataverse.Api.Controllers.Internal.Workflow.DeliverableTypesController.Create)  [L75–L88] status=201 [auth=Authentication.MachineToMachinePolicy,Authentication.RequireTenantIdPolicy]
  └─ maps_to DeliverableTypeDto [L87]
  └─ calls DeliverableTypeRepository.Add [L85]
  └─ calls DeliverableTypeRepository.WriteQuery [L78]
  └─ insert DeliverableType [L85]
    └─ reads_from DeliverableTypes
  └─ write DeliverableType [L78]
    └─ reads_from DeliverableTypes
  └─ uses_service IControlledRepository<DeliverableType>
    └─ method WriteQuery [L78]
      └─ ... (no implementation details available)
  └─ uses_service IMapper
    └─ method Map [L87]
      └─ ... (no implementation details available)

[web] DELETE /api/internal/deliverable-types/{id:Guid}  (Dataverse.Api.Controllers.Internal.Workflow.DeliverableTypesController.Delete)  [L115–L125] status=200 [auth=Authentication.MachineToMachinePolicy,Authentication.RequireTenantIdPolicy]
  └─ calls DeliverableTypeRepository.WriteQuery [L118]
  └─ write DeliverableType [L118]
    └─ reads_from DeliverableTypes
  └─ uses_service IControlledRepository<DeliverableType>
    └─ method WriteQuery [L118]
      └─ ... (no implementation details available)

[web] GET /api/internal/deliverable-types  (Dataverse.Api.Controllers.Internal.Workflow.DeliverableTypesController.GetAll)  [L53–L63] status=200 [auth=Authentication.MachineToMachinePolicy,Authentication.RequireTenantIdPolicy]
  └─ maps_to DeliverableTypeDto [L56]
    └─ automapper.registration ExternalApiMappingProfile (DeliverableType->DeliverableTypeDto) [L137]
    └─ automapper.registration DataverseMappingProfile (DeliverableType->DeliverableTypeDto) [L358]
  └─ calls DeliverableTypeRepository.ReadQuery [L56]
  └─ query DeliverableType [L56]
    └─ reads_from DeliverableTypes
  └─ uses_service IControlledRepository<DeliverableType>
    └─ method ReadQuery [L56]
      └─ ... (no implementation details available)

[web] GET /api/internal/deliverable-types/{id:Guid}  (Dataverse.Api.Controllers.Internal.Workflow.DeliverableTypesController.GetById)  [L65–L73] status=200 [auth=Authentication.MachineToMachinePolicy,Authentication.RequireTenantIdPolicy]
  └─ maps_to DeliverableTypeDto [L68]
    └─ automapper.registration ExternalApiMappingProfile (DeliverableType->DeliverableTypeDto) [L137]
    └─ automapper.registration DataverseMappingProfile (DeliverableType->DeliverableTypeDto) [L358]
  └─ calls DeliverableTypeRepository.ReadQuery [L68]
  └─ query DeliverableType [L68]
    └─ reads_from DeliverableTypes
  └─ uses_service IControlledRepository<DeliverableType>
    └─ method ReadQuery [L68]
      └─ ... (no implementation details available)

[web] PUT /api/internal/deliverable-types/{id:Guid}/reorder  (Dataverse.Api.Controllers.Internal.Workflow.DeliverableTypesController.Reorder)  [L102–L113] status=200 [auth=Authentication.MachineToMachinePolicy,Authentication.RequireTenantIdPolicy]
  └─ calls DeliverableTypeRepository.WriteQuery [L105]
  └─ write DeliverableType [L105]
    └─ reads_from DeliverableTypes
  └─ uses_service IControlledRepository<DeliverableType>
    └─ method WriteQuery [L105]
      └─ ... (no implementation details available)

[web] PUT /api/internal/deliverable-types/{id:Guid}  (Dataverse.Api.Controllers.Internal.Workflow.DeliverableTypesController.Update)  [L90–L100] status=200 [auth=Authentication.MachineToMachinePolicy,Authentication.RequireTenantIdPolicy]
  └─ calls DeliverableTypeRepository.WriteQuery [L93]
  └─ write DeliverableType [L93]
    └─ reads_from DeliverableTypes
  └─ uses_service IControlledRepository<DeliverableType>
    └─ method WriteQuery [L93]
      └─ ... (no implementation details available)

[web] POST /api/internal/jobs/  (Dataverse.Api.Controllers.Internal.Workflow.JobsController.Create)  [L56–L61] status=201 [auth=Authentication.MachineToMachinePolicy,Authentication.RequireTenantIdPolicy]
  └─ sends_request CreateJobCommand [L59]

[web] DELETE /api/internal/jobs/{id:guid}  (Dataverse.Api.Controllers.Internal.Workflow.JobsController.Delete)  [L70–L80] status=200 [auth=Authentication.MachineToMachinePolicy,Authentication.RequireTenantIdPolicy]
  └─ calls JobRepository.WriteQuery [L75]
  └─ write Job [L75]
    └─ reads_from Jobs
  └─ uses_service IControlledRepository<Job>
    └─ method WriteQuery [L75]
      └─ ... (no implementation details available)
  └─ sends_request CanIAccessJobQuery [L73]
    └─ handled_by Dataverse.ApplicationService.Queries.WorkFlow.CanIAccessJobQueryHandler.Handle [L39–L95]
      └─ uses_service UserService
        └─ method GetUserAsync [L71]
          └─ implementation Dataverse.ApplicationService.Services.UserService.GetUserAsync [L15-L185]
      └─ uses_service TenantService
        └─ method GetCurrentTenantAsync [L73]
          └─ implementation Dataverse.Services.Features.Tenants.TenantService.GetCurrentTenantAsync [L6-L27]
          └─ implementation Dataverse.Services.Features.Tenants.TenantService.GetCurrentTenantAsync [L6-L27]
      └─ uses_service RequestInfoService
        └─ method IsValidServiceAccountRequest [L68]
          └─ implementation Dataverse.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L92]
          └─ implementation Dataverse.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L92]
          └─ implementation Dataverse.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L92]
      └─ uses_service IControlledRepository<Job>
        └─ method ReadQuery [L78]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L82]
          └─ implementation Dataverse.Services.Features.Requests.RequestProcessor.ProcessAsync [L8-L45]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L91]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L75]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L73]

[web] GET /api/internal/jobs/{id:guid}  (Dataverse.Api.Controllers.Internal.Workflow.JobsController.Get)  [L45–L54] status=200 [auth=Authentication.MachineToMachinePolicy,Authentication.RequireTenantIdPolicy]
  └─ maps_to JobDto [L50]
    └─ automapper.registration DataverseMappingProfile (Job->JobDto) [L307]
    └─ automapper.registration ExternalApiMappingProfile (Job->JobDto) [L120]
    └─ converts_to JobExportDto [L312]
  └─ calls JobRepository.ReadQuery [L50]
  └─ query Job [L50]
    └─ reads_from Jobs
  └─ uses_service FirmSettingsService
    └─ method GetCurrentSettingsAsync [L52]
      └─ implementation Dataverse.ApplicationService.Services.FirmSettingsService.GetCurrentSettingsAsync [L18-L97]
  └─ uses_service IControlledRepository<Job>
    └─ method ReadQuery [L50]
      └─ ... (no implementation details available)
  └─ uses_service UserService
    └─ method GetUserId [L52]
      └─ implementation Dataverse.ApplicationService.Services.UserService.GetUserId [L15-L185]
  └─ sends_request CanIAccessJobQuery [L48]
    └─ handled_by Dataverse.ApplicationService.Queries.WorkFlow.CanIAccessJobQueryHandler.Handle [L39–L95]
      └─ uses_service UserService
        └─ method GetUserAsync [L71]
          └─ implementation Dataverse.ApplicationService.Services.UserService.GetUserAsync [L15-L185]
      └─ uses_service TenantService
        └─ method GetCurrentTenantAsync [L73]
          └─ implementation Dataverse.Services.Features.Tenants.TenantService.GetCurrentTenantAsync [L6-L27]
          └─ implementation Dataverse.Services.Features.Tenants.TenantService.GetCurrentTenantAsync [L6-L27]
      └─ uses_service RequestInfoService
        └─ method IsValidServiceAccountRequest [L68]
          └─ implementation Dataverse.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L92]
          └─ implementation Dataverse.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L92]
          └─ implementation Dataverse.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L92]
      └─ uses_service IControlledRepository<Job>
        └─ method ReadQuery [L78]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L82]
          └─ implementation Dataverse.Services.Features.Requests.RequestProcessor.ProcessAsync [L8-L45]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L91]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L75]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L73]

[web] PUT /api/internal/jobs/{id:guid}  (Dataverse.Api.Controllers.Internal.Workflow.JobsController.Update)  [L63–L68] status=200 [auth=Authentication.MachineToMachinePolicy,Authentication.RequireTenantIdPolicy]
  └─ maps_to JobDto [L67]
    └─ converts_to JobExportDto [L312]
  └─ uses_service IMapper
    └─ method Map [L67]
      └─ ... (no implementation details available)
  └─ sends_request UpdateJobCommand [L66]

[web] POST /api/internal/job-statuses/create-or-update  (Dataverse.Api.Controllers.Internal.Workflow.JobStatusesController.CreateOrUpdate)  [L59–L66] status=201 [auth=Authentication.MachineToMachinePolicy,Authentication.RequireTenantIdPolicy]
  └─ sends_request CreateOrUpdateJobStatusCommand [L62]
    └─ handled_by Dataverse.ApplicationService.Commands.Workflow.CreateOrUpdateJobStatusCommandHandler.Handle [L38–L92]
      └─ maps_to JobStatusDto [L90]
      └─ uses_service IControlledRepository<JobStatus>
        └─ method WriteQuery [L58]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<KanbanColumn>
        └─ method ReadQuery [L71]
          └─ ... (no implementation details available)
      └─ uses_service IMapper
        └─ method Map [L90]
          └─ ... (no implementation details available)

[web] DELETE /api/internal/job-statuses/{id}  (Dataverse.Api.Controllers.Internal.Workflow.JobStatusesController.Delete)  [L91–L99] status=200 [auth=Authentication.MachineToMachinePolicy,Authentication.RequireTenantIdPolicy]
  └─ calls JobStatusRepository.WriteQuery [L94]
  └─ write JobStatus [L94]
    └─ reads_from DVS_JobStatuses
  └─ uses_service IControlledRepository<JobStatus>
    └─ method WriteQuery [L94]
      └─ ... (no implementation details available)

[web] GET /api/internal/job-statuses/{id}  (Dataverse.Api.Controllers.Internal.Workflow.JobStatusesController.Get)  [L51–L57] status=200 [auth=Authentication.MachineToMachinePolicy,Authentication.RequireTenantIdPolicy]
  └─ maps_to JobStatusDto [L54]
    └─ automapper.registration DataverseMappingProfile (JobStatus->JobStatusDto) [L315]
    └─ automapper.registration ExternalApiMappingProfile (JobStatus->JobStatusDto) [L168]
  └─ calls JobStatusRepository.ReadQuery [L54]
  └─ query JobStatus [L54]
    └─ reads_from DVS_JobStatuses
  └─ uses_service IControlledRepository<JobStatus>
    └─ method ReadQuery [L54]
      └─ ... (no implementation details available)

[web] GET /api/internal/job-statuses/audit  (Dataverse.Api.Controllers.Internal.Workflow.JobStatusesController.GetAll)  [L45–L49] status=200 [auth=Authentication.MachineToMachinePolicy,Authentication.RequireTenantIdPolicy]
  └─ calls JobStatusRepository.ReadQuery [L48]
  └─ query JobStatus [L48]
    └─ reads_from DVS_JobStatuses
  └─ uses_service IControlledRepository<JobStatus>
    └─ method ReadQuery [L48]
      └─ ... (no implementation details available)

[web] PUT /api/internal/job-statuses/{id}  (Dataverse.Api.Controllers.Internal.Workflow.JobStatusesController.UpdateDetails)  [L68–L76] status=200 [auth=Authentication.MachineToMachinePolicy,Authentication.RequireTenantIdPolicy]
  └─ sends_request CreateOrUpdateJobStatusCommand [L72]
    └─ handled_by Dataverse.ApplicationService.Commands.Workflow.CreateOrUpdateJobStatusCommandHandler.Handle [L38–L92]
      └─ maps_to JobStatusDto [L90]
      └─ uses_service IControlledRepository<JobStatus>
        └─ method WriteQuery [L58]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<KanbanColumn>
        └─ method ReadQuery [L71]
          └─ ... (no implementation details available)
      └─ uses_service IMapper
        └─ method Map [L90]
          └─ ... (no implementation details available)

[web] PUT /api/internal/job-statuses/{id:Guid}/reorder  (Dataverse.Api.Controllers.Internal.Workflow.JobStatusesController.UpdateOrder)  [L78–L89] status=200 [auth=Authentication.MachineToMachinePolicy,Authentication.RequireTenantIdPolicy]
  └─ calls JobStatusRepository.WriteQuery [L81]
  └─ write JobStatus [L81]
    └─ reads_from DVS_JobStatuses
  └─ uses_service IControlledRepository<JobStatus>
    └─ method WriteQuery [L81]
      └─ ... (no implementation details available)
  └─ uses_service IMapper
    └─ method Map [L88]
      └─ ... (no implementation details available)

[web] POST /api/internal/job-types  (Dataverse.Api.Controllers.Internal.Workflow.JobTypesController.Create)  [L75–L88] status=201 [auth=Authentication.MachineToMachinePolicy,Authentication.RequireTenantIdPolicy]
  └─ maps_to JobTypeDto [L87]
  └─ calls JobTypeRepository.Add [L85]
  └─ calls JobTypeRepository.WriteQuery [L78]
  └─ insert JobType [L85]
    └─ reads_from JobTypes
  └─ write JobType [L78]
    └─ reads_from JobTypes
  └─ uses_service IControlledRepository<JobType>
    └─ method WriteQuery [L78]
      └─ ... (no implementation details available)
  └─ uses_service IMapper
    └─ method Map [L87]
      └─ ... (no implementation details available)

[web] DELETE /api/internal/job-types/{id:Guid}  (Dataverse.Api.Controllers.Internal.Workflow.JobTypesController.Delete)  [L115–L125] status=200 [auth=Authentication.MachineToMachinePolicy,Authentication.RequireTenantIdPolicy]
  └─ calls JobTypeRepository.WriteQuery [L118]
  └─ write JobType [L118]
    └─ reads_from JobTypes
  └─ uses_service IControlledRepository<JobType>
    └─ method WriteQuery [L118]
      └─ ... (no implementation details available)

[web] GET /api/internal/job-types  (Dataverse.Api.Controllers.Internal.Workflow.JobTypesController.GetAll)  [L53–L63] status=200 [auth=Authentication.MachineToMachinePolicy,Authentication.RequireTenantIdPolicy]
  └─ maps_to JobTypeDto [L56]
    └─ automapper.registration WorkpapersMappingProfile (JobType->JobTypeDto) [L867]
    └─ automapper.registration ExternalApiMappingProfile (JobType->JobTypeDto) [L175]
    └─ automapper.registration DataverseMappingProfile (JobType->JobTypeDto) [L318]
  └─ calls JobTypeRepository.ReadQuery [L56]
  └─ query JobType [L56]
    └─ reads_from JobTypes
  └─ uses_service IControlledRepository<JobType>
    └─ method ReadQuery [L56]
      └─ ... (no implementation details available)

[web] GET /api/internal/job-types/{id:Guid}  (Dataverse.Api.Controllers.Internal.Workflow.JobTypesController.GetById)  [L65–L73] status=200 [auth=Authentication.MachineToMachinePolicy,Authentication.RequireTenantIdPolicy]
  └─ maps_to JobTypeDto [L68]
    └─ automapper.registration WorkpapersMappingProfile (JobType->JobTypeDto) [L867]
    └─ automapper.registration ExternalApiMappingProfile (JobType->JobTypeDto) [L175]
    └─ automapper.registration DataverseMappingProfile (JobType->JobTypeDto) [L318]
  └─ calls JobTypeRepository.ReadQuery [L68]
  └─ query JobType [L68]
    └─ reads_from JobTypes
  └─ uses_service IControlledRepository<JobType>
    └─ method ReadQuery [L68]
      └─ ... (no implementation details available)

[web] PUT /api/internal/job-types/{id:Guid}/reorder  (Dataverse.Api.Controllers.Internal.Workflow.JobTypesController.Reorder)  [L102–L113] status=200 [auth=Authentication.MachineToMachinePolicy,Authentication.RequireTenantIdPolicy]
  └─ calls JobTypeRepository.WriteQuery [L105]
  └─ write JobType [L105]
    └─ reads_from JobTypes
  └─ uses_service IControlledRepository<JobType>
    └─ method WriteQuery [L105]
      └─ ... (no implementation details available)

[web] PUT /api/internal/job-types/{id:Guid}  (Dataverse.Api.Controllers.Internal.Workflow.JobTypesController.Update)  [L90–L100] status=200 [auth=Authentication.MachineToMachinePolicy,Authentication.RequireTenantIdPolicy]
  └─ calls JobTypeRepository.WriteQuery [L93]
  └─ write JobType [L93]
    └─ reads_from JobTypes
  └─ uses_service IControlledRepository<JobType>
    └─ method WriteQuery [L93]
      └─ ... (no implementation details available)

[web] POST /api/internal/kanban-columns  (Dataverse.Api.Controllers.Internal.Workflow.KanbanColumnsController.Create)  [L59–L72] status=201 [auth=Authentication.MachineToMachinePolicy,Authentication.RequireTenantIdPolicy]
  └─ calls KanbanColumnRepository.Add [L69]
  └─ calls KanbanColumnRepository.WriteQuery [L62]
  └─ insert KanbanColumn [L69]
    └─ reads_from KanbanColumns
  └─ write KanbanColumn [L62]
    └─ reads_from KanbanColumns
  └─ uses_service IControlledRepository<KanbanColumn>
    └─ method WriteQuery [L62]
      └─ ... (no implementation details available)

[web] DELETE /api/internal/kanban-columns/{id:Guid}  (Dataverse.Api.Controllers.Internal.Workflow.KanbanColumnsController.Delete)  [L99–L109] status=200 [auth=Authentication.MachineToMachinePolicy,Authentication.RequireTenantIdPolicy]
  └─ calls KanbanColumnRepository.Remove [L106]
  └─ calls KanbanColumnRepository.WriteQuery [L102]
  └─ delete KanbanColumn [L106]
    └─ reads_from KanbanColumns
  └─ write KanbanColumn [L102]
    └─ reads_from KanbanColumns
  └─ uses_service IControlledRepository<KanbanColumn>
    └─ method WriteQuery [L102]
      └─ ... (no implementation details available)

[web] GET /api/internal/kanban-columns  (Dataverse.Api.Controllers.Internal.Workflow.KanbanColumnsController.GetAll)  [L37–L47] status=200 [auth=Authentication.MachineToMachinePolicy,Authentication.RequireTenantIdPolicy]
  └─ maps_to KanbanColumnDto [L40]
    └─ automapper.registration DataverseMappingProfile (KanbanColumn->KanbanColumnDto) [L379]
    └─ automapper.registration ExternalApiMappingProfile (KanbanColumn->KanbanColumnDto) [L161]
  └─ calls KanbanColumnRepository.ReadQuery [L40]
  └─ query KanbanColumn [L40]
    └─ reads_from KanbanColumns
  └─ uses_service IControlledRepository<KanbanColumn>
    └─ method ReadQuery [L40]
      └─ ... (no implementation details available)

[web] GET /api/internal/kanban-columns/{id:Guid}  (Dataverse.Api.Controllers.Internal.Workflow.KanbanColumnsController.GetById)  [L49–L57] status=200 [auth=Authentication.MachineToMachinePolicy,Authentication.RequireTenantIdPolicy]
  └─ maps_to KanbanColumnDto [L52]
    └─ automapper.registration DataverseMappingProfile (KanbanColumn->KanbanColumnDto) [L379]
    └─ automapper.registration ExternalApiMappingProfile (KanbanColumn->KanbanColumnDto) [L161]
  └─ calls KanbanColumnRepository.ReadQuery [L52]
  └─ query KanbanColumn [L52]
    └─ reads_from KanbanColumns
  └─ uses_service IControlledRepository<KanbanColumn>
    └─ method ReadQuery [L52]
      └─ ... (no implementation details available)

[web] PUT /api/internal/kanban-columns/{id:Guid}/reorder  (Dataverse.Api.Controllers.Internal.Workflow.KanbanColumnsController.Reorder)  [L86–L97] status=200 [auth=Authentication.MachineToMachinePolicy,Authentication.RequireTenantIdPolicy]
  └─ calls KanbanColumnRepository.WriteQuery [L89]
  └─ write KanbanColumn [L89]
    └─ reads_from KanbanColumns
  └─ uses_service IControlledRepository<KanbanColumn>
    └─ method WriteQuery [L89]
      └─ ... (no implementation details available)

[web] PUT /api/internal/kanban-columns/{id:Guid}  (Dataverse.Api.Controllers.Internal.Workflow.KanbanColumnsController.Update)  [L74–L84] status=200 [auth=Authentication.MachineToMachinePolicy,Authentication.RequireTenantIdPolicy]
  └─ calls KanbanColumnRepository.WriteQuery [L77]
  └─ write KanbanColumn [L77]
    └─ reads_from KanbanColumns
  └─ uses_service IControlledRepository<KanbanColumn>
    └─ method WriteQuery [L77]
      └─ ... (no implementation details available)

[web] POST /api/internal/task-template-groups  (Dataverse.Api.Controllers.Internal.Workflow.TaskTemplateGroupsController.Create)  [L55–L62] status=201 [auth=Authentication.MachineToMachinePolicy,Authentication.RequireTenantIdPolicy]
  └─ maps_to TaskTemplateGroupLightDto [L61]
  └─ calls TaskTemplateGroupRepository.Add [L59]
  └─ insert TaskTemplateGroup [L59]
    └─ reads_from TaskTemplateGroups
  └─ uses_service IControlledRepository<TaskTemplateGroup>
    └─ method Add [L59]
      └─ ... (no implementation details available)
  └─ uses_service IMapper
    └─ method Map [L61]
      └─ ... (no implementation details available)

[web] DELETE /api/internal/task-template-groups/{id:Guid}  (Dataverse.Api.Controllers.Internal.Workflow.TaskTemplateGroupsController.Delete)  [L76–L86] status=200 [auth=Authentication.MachineToMachinePolicy,Authentication.RequireTenantIdPolicy]
  └─ calls TaskTemplateGroupRepository.Remove [L83]
  └─ calls TaskTemplateGroupRepository.WriteQuery [L79]
  └─ delete TaskTemplateGroup [L83]
    └─ reads_from TaskTemplateGroups
  └─ write TaskTemplateGroup [L79]
    └─ reads_from TaskTemplateGroups
  └─ uses_service IControlledRepository<TaskTemplateGroup>
    └─ method WriteQuery [L79]
      └─ ... (no implementation details available)

[web] GET /api/internal/task-template-groups  (Dataverse.Api.Controllers.Internal.Workflow.TaskTemplateGroupsController.GetAll)  [L34–L43] status=200 [auth=Authentication.MachineToMachinePolicy,Authentication.RequireTenantIdPolicy]
  └─ maps_to TaskTemplateGroupDto [L37]
    └─ automapper.registration DataverseMappingProfile (TaskTemplateGroup->TaskTemplateGroupDto) [L373]
    └─ automapper.registration ExternalApiMappingProfile (TaskTemplateGroup->TaskTemplateGroupDto) [L155]
  └─ calls TaskTemplateGroupRepository.ReadQuery [L37]
  └─ query TaskTemplateGroup [L37]
    └─ reads_from TaskTemplateGroups
  └─ uses_service IControlledRepository<TaskTemplateGroup>
    └─ method ReadQuery [L37]
      └─ ... (no implementation details available)

[web] GET /api/internal/task-template-groups/{id:Guid}  (Dataverse.Api.Controllers.Internal.Workflow.TaskTemplateGroupsController.GetById)  [L45–L53] status=200 [auth=Authentication.MachineToMachinePolicy,Authentication.RequireTenantIdPolicy]
  └─ maps_to TaskTemplateGroupDto [L48]
    └─ automapper.registration DataverseMappingProfile (TaskTemplateGroup->TaskTemplateGroupDto) [L373]
    └─ automapper.registration ExternalApiMappingProfile (TaskTemplateGroup->TaskTemplateGroupDto) [L155]
  └─ calls TaskTemplateGroupRepository.ReadQuery [L48]
  └─ query TaskTemplateGroup [L48]
    └─ reads_from TaskTemplateGroups
  └─ uses_service IControlledRepository<TaskTemplateGroup>
    └─ method ReadQuery [L48]
      └─ ... (no implementation details available)

[web] PUT /api/internal/task-template-groups/{id:Guid}  (Dataverse.Api.Controllers.Internal.Workflow.TaskTemplateGroupsController.Update)  [L64–L74] status=200 [auth=Authentication.MachineToMachinePolicy,Authentication.RequireTenantIdPolicy]
  └─ calls TaskTemplateGroupRepository.WriteQuery [L67]
  └─ write TaskTemplateGroup [L67]
    └─ reads_from TaskTemplateGroups
  └─ uses_service IControlledRepository<TaskTemplateGroup>
    └─ method WriteQuery [L67]
      └─ ... (no implementation details available)

[web] POST /api/internal/task-templates  (Dataverse.Api.Controllers.Internal.Workflow.TaskTemplatesController.Create)  [L55–L69] status=201 [auth=Authentication.MachineToMachinePolicy,Authentication.RequireTenantIdPolicy]
  └─ maps_to TaskTemplateDto [L68]
  └─ calls TaskTemplateRepository.Add [L66]
  └─ calls TaskTemplateRepository.WriteQuery [L58]
  └─ insert TaskTemplate [L66]
    └─ reads_from TaskTemplates
  └─ write TaskTemplate [L58]
    └─ reads_from TaskTemplates
  └─ uses_service IControlledRepository<TaskTemplate>
    └─ method WriteQuery [L58]
      └─ ... (no implementation details available)
  └─ uses_service IMapper
    └─ method Map [L68]
      └─ ... (no implementation details available)

[web] DELETE /api/internal/task-templates/{id:Guid}  (Dataverse.Api.Controllers.Internal.Workflow.TaskTemplatesController.Delete)  [L101–L111] status=200 [auth=Authentication.MachineToMachinePolicy,Authentication.RequireTenantIdPolicy]
  └─ calls TaskTemplateRepository.Remove [L108]
  └─ calls TaskTemplateRepository.WriteQuery [L104]
  └─ delete TaskTemplate [L108]
    └─ reads_from TaskTemplates
  └─ write TaskTemplate [L104]
    └─ reads_from TaskTemplates
  └─ uses_service IControlledRepository<TaskTemplate>
    └─ method WriteQuery [L104]
      └─ ... (no implementation details available)

[web] GET /api/internal/task-templates  (Dataverse.Api.Controllers.Internal.Workflow.TaskTemplatesController.Get)  [L33–L43] status=200 [auth=Authentication.MachineToMachinePolicy,Authentication.RequireTenantIdPolicy]
  └─ maps_to TaskTemplateDto [L36]
    └─ automapper.registration ExternalApiMappingProfile (TaskTemplate->TaskTemplateDto) [L149]
    └─ automapper.registration DataverseMappingProfile (TaskTemplate->TaskTemplateDto) [L376]
  └─ calls TaskTemplateRepository.ReadQuery [L36]
  └─ query TaskTemplate [L36]
    └─ reads_from TaskTemplates
  └─ uses_service IControlledRepository<TaskTemplate>
    └─ method ReadQuery [L36]
      └─ ... (no implementation details available)

[web] GET /api/internal/task-templates/{id:Guid}  (Dataverse.Api.Controllers.Internal.Workflow.TaskTemplatesController.GetById)  [L45–L53] status=200 [auth=Authentication.MachineToMachinePolicy,Authentication.RequireTenantIdPolicy]
  └─ maps_to TaskTemplateDto [L48]
    └─ automapper.registration ExternalApiMappingProfile (TaskTemplate->TaskTemplateDto) [L149]
    └─ automapper.registration DataverseMappingProfile (TaskTemplate->TaskTemplateDto) [L376]
  └─ calls TaskTemplateRepository.ReadQuery [L48]
  └─ query TaskTemplate [L48]
    └─ reads_from TaskTemplates
  └─ uses_service IControlledRepository<TaskTemplate>
    └─ method ReadQuery [L48]
      └─ ... (no implementation details available)

[web] PUT /api/internal/task-templates/{id:Guid}/reorder  (Dataverse.Api.Controllers.Internal.Workflow.TaskTemplatesController.Reorder)  [L83–L99] status=200 [auth=Authentication.MachineToMachinePolicy,Authentication.RequireTenantIdPolicy]
  └─ calls TaskTemplateRepository.WriteQuery [L86]
  └─ write TaskTemplate [L86]
    └─ reads_from TaskTemplates
  └─ uses_service IControlledRepository<TaskTemplate>
    └─ method WriteQuery [L86]
      └─ ... (no implementation details available)

[web] PUT /api/internal/task-templates/{id:Guid}  (Dataverse.Api.Controllers.Internal.Workflow.TaskTemplatesController.Update)  [L71–L81] status=200 [auth=Authentication.MachineToMachinePolicy,Authentication.RequireTenantIdPolicy]
  └─ calls TaskTemplateRepository.WriteQuery [L74]
  └─ write TaskTemplate [L74]
    └─ reads_from TaskTemplates
  └─ uses_service IControlledRepository<TaskTemplate>
    └─ method WriteQuery [L74]
      └─ ... (no implementation details available)

[web] PUT /api/internal/tasks/for-job/{jobId}/default-tasks  (Dataverse.Api.Controllers.Internal.Workflow.WorkflowTaskController.BuildDefaultTasksFromTemplate)  [L113–L118] status=200 [auth=Authentication.MachineToMachinePolicy,Authentication.RequireTenantIdPolicy]
  └─ sends_request SeedJobTasksFromTemplateCommand [L117]

[web] PUT /api/internal/tasks/{id:guid}/complete  (Dataverse.Api.Controllers.Internal.Workflow.WorkflowTaskController.CompleteTask)  [L74–L83] status=200 [auth=Authentication.MachineToMachinePolicy,Authentication.RequireTenantIdPolicy]

[web] POST /api/internal/tasks/  (Dataverse.Api.Controllers.Internal.Workflow.WorkflowTaskController.CreateTask)  [L48–L58] status=201 [auth=Authentication.MachineToMachinePolicy,Authentication.RequireTenantIdPolicy]
  └─ maps_to WorkflowTaskDto [L57]
  └─ insert WorkflowTask [L55]
    └─ reads_from DVS_Tasks
  └─ uses_service IControlledRepository<WorkflowTask>
    └─ method Add [L55]
      └─ ... (no implementation details available)
  └─ uses_service IMapper
    └─ method Map [L57]
      └─ ... (no implementation details available)

[web] DELETE /api/internal/tasks/{id:Guid}  (Dataverse.Api.Controllers.Internal.Workflow.WorkflowTaskController.Delete)  [L120–L130] status=200 [auth=Authentication.MachineToMachinePolicy,Authentication.RequireTenantIdPolicy]
  └─ delete WorkflowTask [L127]
    └─ reads_from DVS_Tasks
  └─ write WorkflowTask [L123]
    └─ reads_from DVS_Tasks
  └─ uses_service IControlledRepository<WorkflowTask>
    └─ method WriteQuery [L123]
      └─ ... (no implementation details available)

[web] GET /api/internal/tasks/{id:guid}  (Dataverse.Api.Controllers.Internal.Workflow.WorkflowTaskController.GetTask)  [L40–L46] status=200 [auth=Authentication.MachineToMachinePolicy,Authentication.RequireTenantIdPolicy]
  └─ maps_to WorkflowTaskDto [L43]
    └─ automapper.registration DataverseMappingProfile (WorkflowTask->WorkflowTaskDto) [L371]
    └─ automapper.registration ExternalApiMappingProfile (WorkflowTask->WorkflowTaskDto) [L143]
  └─ query WorkflowTask [L43]
    └─ reads_from DVS_Tasks
  └─ uses_service IControlledRepository<WorkflowTask>
    └─ method ReadQuery [L43]
      └─ ... (no implementation details available)

[web] GET /api/internal/tasks  (Dataverse.Api.Controllers.Internal.Workflow.WorkflowTaskController.GetTaskManager)  [L151–L162] status=200 [auth=Authentication.MachineToMachinePolicy,Authentication.RequireTenantIdPolicy]
  └─ write WorkflowTask [L153]
    └─ reads_from DVS_Tasks
  └─ uses_service IControlledRepository<WorkflowTask>
    └─ method WriteQuery [L153]
      └─ ... (no implementation details available)

[web] PUT /api/internal/tasks/{id:Guid}/reorder  (Dataverse.Api.Controllers.Internal.Workflow.WorkflowTaskController.Reorder)  [L96–L104] status=200 [auth=Authentication.MachineToMachinePolicy,Authentication.RequireTenantIdPolicy]

[web] PUT /api/internal/tasks/{id:guid}/uncomplete  (Dataverse.Api.Controllers.Internal.Workflow.WorkflowTaskController.UncompleteTask)  [L85–L94] status=200 [auth=Authentication.MachineToMachinePolicy,Authentication.RequireTenantIdPolicy]

[web] PUT /api/internal/tasks/{id:guid}  (Dataverse.Api.Controllers.Internal.Workflow.WorkflowTaskController.UpdateTask)  [L60–L72] status=200 [auth=Authentication.MachineToMachinePolicy,Authentication.RequireTenantIdPolicy]
  └─ maps_to WorkflowTaskDto [L69]
  └─ uses_service IMapper
    └─ method Map [L69]
      └─ ... (no implementation details available)

[web] GET /api/internal/binder-data/tax  (Dataverse.Api.Controllers.Internal.Workpapers.BinderDataController.ReadTaxDataFromDocument)  [L27–L31] status=200 [auth=Authentication.MachineToMachinePolicy,Authentication.RequireTenantIdPolicy]
  └─ sends_request GetDocumentDataQuery [L30]
    └─ handled_by Dataverse.ApplicationService.Queries.Documents.GetDocumentDataQueryHandler.Handle [L28–L63]
      └─ uses_service DocumentServiceFactory
        └─ method GetDocumentWithService [L54]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<DocumentVersion>
        └─ method WriteQuery [L43]
          └─ ... (no implementation details available)

[web] POST /api/public/sync-services/  (Dataverse.Api.Controllers.Public.SyncServicesController.Create)  [L52–L57] status=201 [auth=Authentication.AdminPolicy]
  └─ maps_to SyncServiceDto [L56]
  └─ uses_service IMapper
    └─ method Map [L56]
      └─ ... (no implementation details available)

[web] DELETE /api/public/sync-services/{id}  (Dataverse.Api.Controllers.Public.SyncServicesController.Delete)  [L66–L71] status=200 [auth=Authentication.AdminPolicy]
  └─ calls SyncServiceRepository.Remove [L70]
  └─ calls SyncServiceRepository.WriteQuery [L69]
  └─ delete SyncService [L70]
    └─ reads_from SyncServices
  └─ write SyncService [L69]
    └─ reads_from SyncServices
  └─ uses_service IControlledRepository<SyncService>
    └─ method WriteQuery [L69]
      └─ ... (no implementation details available)

[web] GET /api/public/sync-services/{id}  (Dataverse.Api.Controllers.Public.SyncServicesController.Get)  [L45–L50] status=200 [auth=Authentication.AdminPolicy]
  └─ maps_to SyncServiceDto [L48]
    └─ automapper.registration DataverseMappingProfile (SyncService->SyncServiceDto) [L260]
  └─ calls SyncServiceRepository.ReadQuery [L48]
  └─ query SyncService [L48]
    └─ reads_from SyncServices
  └─ uses_service IControlledRepository<SyncService>
    └─ method ReadQuery [L48]
      └─ ... (no implementation details available)

[web] GET /api/public/sync-services/  (Dataverse.Api.Controllers.Public.SyncServicesController.GetAll)  [L37–L43] status=200 [auth=Authentication.AdminPolicy]
  └─ maps_to SyncServiceDto [L40]
    └─ automapper.registration DataverseMappingProfile (SyncService->SyncServiceDto) [L260]
  └─ calls SyncServiceRepository.ReadQuery [L40]
  └─ query SyncService [L40]
    └─ reads_from SyncServices
  └─ uses_service IControlledRepository<SyncService>
    └─ method ReadQuery [L40]
      └─ ... (no implementation details available)

[web] PUT /api/public/sync-services/{id}  (Dataverse.Api.Controllers.Public.SyncServicesController.Update)  [L59–L64] status=200 [auth=Authentication.AdminPolicy]
  └─ calls SyncServiceRepository.WriteQuery [L62]
  └─ write SyncService [L62]
    └─ reads_from SyncServices
  └─ uses_service IControlledRepository<SyncService>
    └─ method WriteQuery [L62]
      └─ ... (no implementation details available)

[web] POST /api/super/cirrus/{tenantId}/subscription  (Dataverse.Api.Controllers.Super.Cirrus.CirrusController.CreateSubscription)  [L64–L102] status=201 [auth=Authentication.MasterPolicy,Authentication.RequireTenantIdPolicy]
  └─ uses_client CirrusClient [L96]
  └─ uses_client CirrusClient [L81]
  └─ calls TenantRepository.WriteTable [L71]
  └─ write Tenant [L71]
    └─ reads_from Tenants
  └─ uses_service TenantRepository
    └─ method WriteTable [L71]
      └─ implementation Dataverse.Tenants.Data.TenantRepository.WriteTable [L15-L180]
  └─ sends_request CreateOrUpdateSubscriptionCommand [L99]
    └─ handled_by Dataverse.ApplicationService.Commands.Subscriptions.CreateOrUpdateSubscriptionCommandHandler.Handle [L40–L86]
      └─ calls TenantRepository.WriteTable [L55]
      └─ uses_service IControlledRepository<DocumentStore>
        └─ method ReadQuery [L79]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L74]
          └─ implementation Dataverse.Services.Features.Requests.RequestProcessor.ProcessAsync [L8-L45]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle

[web] GET /api/super/cirrus/databases  (Dataverse.Api.Controllers.Super.Cirrus.CirrusController.GetAllDatabases)  [L122–L126] status=200 [auth=Authentication.MasterPolicy]
  └─ uses_client CirrusClient [L125]

[web] GET /api/super/cirrus/storage-accounts  (Dataverse.Api.Controllers.Super.Cirrus.CirrusController.GetAllStorageAccounts)  [L128–L132] status=200 [auth=Authentication.MasterPolicy]
  └─ uses_client CirrusClient [L131]

[web] GET /api/super/cirrus/{tenantId}/subscription  (Dataverse.Api.Controllers.Super.Cirrus.CirrusController.GetSubscription)  [L44–L62] status=200 [auth=Authentication.MasterPolicy,Authentication.RequireTenantIdPolicy]
  └─ maps_to SubscriptionDto [L48]
  └─ uses_client CirrusClient [L60]
  └─ calls TenantRepository.ReadTable [L48]
  └─ query Tenant [L48]
    └─ reads_from Tenants
  └─ uses_service TenantRepository
    └─ method ReadTable [L48]
      └─ implementation Dataverse.Tenants.Data.TenantRepository.ReadTable [L15-L180]

[web] PUT /api/super/cirrus/{tenantId}/subscription  (Dataverse.Api.Controllers.Super.Cirrus.CirrusController.UpdateSubscription)  [L104–L120] status=200 [auth=Authentication.MasterPolicy,Authentication.RequireTenantIdPolicy]
  └─ uses_client CirrusClient [L117]
  └─ calls TenantRepository.WriteTable [L112]
  └─ write Tenant [L112]
    └─ reads_from Tenants
  └─ uses_service TenantRepository
    └─ method WriteTable [L112]
      └─ implementation Dataverse.Tenants.Data.TenantRepository.WriteTable [L15-L180]
  └─ sends_request CreateOrUpdateSubscriptionCommand [L119]
    └─ handled_by Dataverse.ApplicationService.Commands.Subscriptions.CreateOrUpdateSubscriptionCommandHandler.Handle [L40–L86]
      └─ calls TenantRepository.WriteTable [L55]
      └─ uses_service IControlledRepository<DocumentStore>
        └─ method ReadQuery [L79]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L74]
          └─ implementation Dataverse.Services.Features.Requests.RequestProcessor.ProcessAsync [L8-L45]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle

[web] POST /api/super/offices/{officeId:Guid}/share-point-sync  (Dataverse.Api.Controllers.Super.Core.OfficesController.ForceSyncSharePoint)  [L132–L146] status=201 [auth=Authentication.MasterPolicy,Authentication.RequireTenantIdPolicy]
  └─ calls DataverseEntityFailureLogRepository.Remove [L145]
  └─ calls DataverseEntityFailureLogRepository.WriteQuery [L143]
  └─ delete DataverseEntityFailureLog [L145]
    └─ reads_from DataverseEntityFailureLogs
  └─ write DataverseEntityFailureLog [L143]
    └─ reads_from DataverseEntityFailureLogs
  └─ uses_service MockMessagingService
    └─ method RequestSharePointSiteUpdate [L137]
      └─ ... (no implementation details available)
  └─ uses_service TenantService
    └─ method GetCurrentTenantAsync [L135]
      └─ implementation Dataverse.Services.Features.Tenants.TenantService.GetCurrentTenantAsync [L6-L27]
  └─ uses_service IControlledRepository<DataverseEntityFailureLog>
    └─ method WriteQuery [L143]
      └─ ... (no implementation details available)

[web] GET /api/super/offices/{id:Guid}  (Dataverse.Api.Controllers.Super.Core.OfficesController.Get)  [L65–L70] status=200 [auth=Authentication.MasterPolicy,Authentication.RequireTenantIdPolicy]
  └─ maps_to OfficeDto [L68]
    └─ automapper.registration ExternalApiMappingProfile (Office->OfficeDto) [L54]
    └─ automapper.registration WorkpapersMappingProfile (Office->OfficeDto) [L181]
    └─ automapper.registration DataverseMappingProfile (Office->OfficeDto) [L138]
    └─ automapper.registration CirrusMappingProfile (Office->OfficeDto) [L128]
  └─ calls OfficeRepository.ReadQuery [L68]
  └─ query Office [L68]
    └─ reads_from Offices
  └─ uses_service IControlledRepository<Office>
    └─ method ReadQuery [L68]
      └─ ... (no implementation details available)

[web] GET /api/super/offices/  (Dataverse.Api.Controllers.Super.Core.OfficesController.GetAll)  [L56–L63] status=200 [auth=Authentication.MasterPolicy,Authentication.RequireTenantIdPolicy]
  └─ maps_to OfficeLightDto [L59]
    └─ automapper.registration WorkpapersMappingProfile (Office->OfficeLightDto) [L179]
    └─ automapper.registration DataverseMappingProfile (Office->OfficeLightDto) [L141]
    └─ automapper.registration CirrusMappingProfile (Office->OfficeLightDto) [L129]
  └─ calls OfficeRepository.ReadQuery [L59]
  └─ query Office [L59]
    └─ reads_from Offices
  └─ uses_service IControlledRepository<Office>
    └─ method ReadQuery [L59]
      └─ ... (no implementation details available)

[web] GET /api/super/offices/{officeId:Guid}/audit  (Dataverse.Api.Controllers.Super.Core.OfficesController.GetUserAudit)  [L102–L127] status=200 [auth=Authentication.MasterPolicy,Authentication.RequireTenantIdPolicy]
  └─ calls OfficeRepository.ReadQuery [L105]
  └─ query Office [L105]
    └─ reads_from Offices
  └─ uses_service IControlledRepository<Office>
    └─ method ReadQuery [L105]
      └─ ... (no implementation details available)

[web] POST /api/super/offices/{officeId:Guid}/sync  (Dataverse.Api.Controllers.Super.Core.OfficesController.SyncToAllProducts)  [L75–L100] status=201 [auth=Authentication.MasterPolicy,Authentication.RequireTenantIdPolicy]
  └─ calls DataverseEntityFailureLogRepository.Remove [L95]
  └─ calls DataverseEntityFailureLogRepository.WriteQuery [L93]
  └─ calls OfficeRepository.ReadQuery [L78]
  └─ query Office [L78]
    └─ reads_from Offices
  └─ delete DataverseEntityFailureLog [L95]
    └─ reads_from DataverseEntityFailureLogs
  └─ write DataverseEntityFailureLog [L93]
    └─ reads_from DataverseEntityFailureLogs
  └─ uses_service MockMessagingService
    └─ method RequestSharePointSiteUpdate [L87]
      └─ ... (no implementation details available)
  └─ uses_service TenantService
    └─ method GetCurrentTenantAsync [L85]
      └─ implementation Dataverse.Services.Features.Tenants.TenantService.GetCurrentTenantAsync [L6-L27]
  └─ uses_service IControlledRepository<DataverseEntityFailureLog>
    └─ method WriteQuery [L93]
      └─ ... (no implementation details available)
  └─ uses_service IControlledRepository<Office>
    └─ method ReadQuery [L78]
      └─ ... (no implementation details available)
  └─ sends_request BulkPropagateCommand [L98]
    └─ handled_by Dataverse.ApplicationService.Commands.DataverseEntity.BulkPropagateCommandHandler.Handle [L45–L168]
      └─ calls TenantRepository.ReadTable [L159]
      └─ uses_service TenantService
        └─ method GetCurrentTenantAsync [L72]
          └─ implementation Dataverse.Services.Features.Tenants.TenantService.GetCurrentTenantAsync [L6-L27]
          └─ implementation Dataverse.Services.Features.Tenants.TenantService.GetCurrentTenantAsync [L6-L27]
      └─ uses_service MockMessagingService
        └─ method RequestPropagation [L141]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<DataverseEntityFailureLog>
        └─ method WriteQuery [L145]
          └─ ... (no implementation details available)
      └─ uses_service IMapper
        └─ method ConfigurationProvider [L136]
          └─ ... (no implementation details available)

[web] POST /api/super/support-users  (Dataverse.Api.Controllers.Super.Core.SupportUsersController.AddNewSupportUserForFirmAsync)  [L36–L41] status=201 [auth=Authentication.MasterPolicy,Authentication.RequireTenantIdPolicy]
  └─ sends_request AddSupportUserCommand [L39]
    └─ handled_by Dataverse.ApplicationService.Commands.Users.AddSupportUserCommandHandler.Handle [L34–L149]
      └─ calls UserRepository.ReadQuery [L77]
      └─ calls TenantRepository.ReadTable [L64]
      └─ uses_service TenantService
        └─ method GetCurrentTenantAsync [L61]
          └─ implementation Dataverse.Services.Features.Tenants.TenantService.GetCurrentTenantAsync [L6-L27]
          └─ implementation Dataverse.Services.Features.Tenants.TenantService.GetCurrentTenantAsync [L6-L27]
      └─ uses_service TenantLicenseService
        └─ method GetFirmSubscriptions [L113]
          └─ implementation Dataverse.ApplicationService.Services.TenantLicenseService.GetFirmSubscriptions [L22-L185]
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L62]
          └─ implementation Dataverse.Services.Features.Requests.RequestProcessor.ProcessAsync [L8-L45]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle
      └─ uses_service UnitOfWork
        └─ method Table [L129]
          └─ ... (no implementation details available)

[web] GET /api/super/support-users/active-users  (Dataverse.Api.Controllers.Super.Core.SupportUsersController.GetActiveSupportUsers)  [L57–L62] status=200 [auth=Authentication.MasterPolicy,Authentication.RequireTenantIdPolicy]

[web] GET /api/super/support-users  (Dataverse.Api.Controllers.Super.Core.SupportUsersController.GetSupportUsersAsync)  [L26–L34] status=200 [auth=Authentication.MasterPolicy,Authentication.RequireTenantIdPolicy]
  └─ sends_request GetSupportUsersQuery [L32]
    └─ handled_by Dataverse.ApplicationService.Queries.Firms.Users.GetSupportUsersQueryHandler.Handle [L29–L61]
      └─ calls TenantRepository.ReadTable [L49]
      └─ uses_service TenantService
        └─ method GetCurrentTenantAsync [L47]
          └─ implementation Dataverse.Services.Features.Tenants.TenantService.GetCurrentTenantAsync [L6-L27]
          └─ implementation Dataverse.Services.Features.Tenants.TenantService.GetCurrentTenantAsync [L6-L27]

[web] PUT /api/super/support-users/revoke  (Dataverse.Api.Controllers.Super.Core.SupportUsersController.RevokeSupportUserAccess)  [L43–L48] status=200 [auth=Authentication.MasterPolicy,Authentication.RequireTenantIdPolicy]
  └─ sends_request RevokeSupportUserCommand [L46]
    └─ handled_by Dataverse.ApplicationService.Commands.Users.RevokeSupportUserCommandHanlder.Handle [L34–L85]
      └─ calls TenantRepository.WriteTable [L55]
      └─ calls TenantRepository.WriteTable [L53]
      └─ uses_service IControlledRepository<User>
        └─ method ReadQuery [L69]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L81]
          └─ implementation Dataverse.Services.Features.Requests.RequestProcessor.ProcessAsync [L8-L45]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle

[web] PUT /api/super/support-users  (Dataverse.Api.Controllers.Super.Core.SupportUsersController.UpdateSupportUserAccess)  [L50–L55] status=200 [auth=Authentication.MasterPolicy,Authentication.RequireTenantIdPolicy]
  └─ sends_request UpdateSupportUserAccessCommand [L53]
    └─ handled_by Dataverse.ApplicationService.Commands.Users.UpdateSupportUserAccessCommandHandler.Handle [L22–L45]
      └─ calls TenantRepository.WriteTable [L33]

[web] GET /api/super/teams/{id}  (Dataverse.Api.Controllers.Super.Core.TeamsController.Get)  [L38–L43] status=200 [auth=Authentication.MasterPolicy,Authentication.RequireTenantIdPolicy]
  └─ maps_to TeamDto [L41]
    └─ automapper.registration DataverseMappingProfile (Team->TeamDto) [L149]
    └─ automapper.registration ExternalApiMappingProfile (Team->TeamDto) [L75]
    └─ automapper.registration CirrusMappingProfile (Team->TeamDto) [L138]
    └─ automapper.registration WorkpapersMappingProfile (Team->TeamDto) [L190]
  └─ calls TeamRepository.ReadQuery [L41]
  └─ query Team [L41]
    └─ reads_from Teams
  └─ uses_service IControlledRepository<Team>
    └─ method ReadQuery [L41]
      └─ ... (no implementation details available)

[web] GET /api/super/teams/  (Dataverse.Api.Controllers.Super.Core.TeamsController.GetAll)  [L30–L36] status=200 [auth=Authentication.MasterPolicy,Authentication.RequireTenantIdPolicy]
  └─ maps_to TeamLightDto [L33]
    └─ automapper.registration CirrusMappingProfile (Team->TeamLightDto) [L139]
    └─ automapper.registration WorkpapersMappingProfile (Team->TeamLightDto) [L188]
    └─ automapper.registration DataverseMappingProfile (Team->TeamLightDto) [L150]
  └─ calls TeamRepository.ReadQuery [L33]
  └─ query Team [L33]
    └─ reads_from Teams
  └─ uses_service IControlledRepository<Team>
    └─ method ReadQuery [L33]
      └─ ... (no implementation details available)

[web] PUT /api/super/users/bulk/licenses  (Dataverse.Api.Controllers.Super.Core.UsersController.BulkUpdateLicenses)  [L149–L160] status=200 [auth=Authentication.MasterPolicy,Authentication.RequireTenantIdPolicy]
  └─ sends_request UpdateUserCommand [L156]
    └─ handled_by Dataverse.ApplicationService.Commands.Users.UpdateUserCommandHandler.Handle [L42–L111]
      └─ maps_to UserWithIdentityInfoDto [L95]
      └─ uses_service IControlledRepository<FirmSettings>
        └─ method ReadQuery [L71]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<Office>
        └─ method ReadQuery [L77]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<Team>
        └─ method ReadQuery [L78]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<User>
        └─ method WriteQuery [L68]
          └─ ... (no implementation details available)
      └─ uses_service IMapper
        └─ method Map [L95]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L100]
          └─ implementation Dataverse.Services.Features.Requests.RequestProcessor.ProcessAsync [L8-L45]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle

[web] POST /api/super/users/  (Dataverse.Api.Controllers.Super.Core.UsersController.CreateUser)  [L115–L121] status=201 [auth=Authentication.MasterPolicy,Authentication.RequireTenantIdPolicy]
  └─ maps_to UserWithIdentityInfoDto [L120]
  └─ uses_service IMapper
    └─ method Map [L120]
      └─ ... (no implementation details available)
  └─ sends_request CreateOrUpdateUserCommand [L119]
    └─ handled_by Dataverse.ApplicationService.Commands.Users.CreateOrLinkWithDataverseCommandHandler.Handle [L57–L149]
      └─ uses_service UserService
        └─ method IsInRole [L103]
          └─ implementation Dataverse.ApplicationService.Services.UserService.IsInRole [L15-L185]
      └─ uses_service EventPublisher (InstancePerLifetimeScope)
        └─ method PublishAllEventsForEntity [L145]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<FirmSettings>
        └─ method ReadQuery [L111]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<Office>
        └─ method ReadQuery [L86]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<Team>
        └─ method ReadQuery [L87]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<User>
        └─ method WriteQuery [L89]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L141]
          └─ implementation Dataverse.Services.Features.Requests.RequestProcessor.ProcessAsync [L8-L45]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle

[web] GET /api/super/users/export/excel/download  (Dataverse.Api.Controllers.Super.Core.UsersController.ExportToExcel)  [L281–L296] status=200 [auth=Authentication.MasterPolicy,Authentication.RequireTenantIdPolicy]
  └─ maps_to UserExportProfileDto [L285]
    └─ automapper.registration DataverseMappingProfile (User->UserExportProfileDto) [L109]
  └─ calls UserRepository.ReadQuery [L285]
  └─ query User [L285]
  └─ uses_service TenantService
    └─ method GetCurrentTenantAsync [L291]
      └─ implementation Dataverse.Services.Features.Tenants.TenantService.GetCurrentTenantAsync [L6-L27]
  └─ uses_service IControlledRepository<User>
    └─ method ReadQuery [L285]
      └─ ... (no implementation details available)
  └─ sends_request CreateDownloadCommand [L294]
    └─ handled_by Cirrus.ApplicationService.Services.Commands.CreateDownloadCommandHandler.Handle [L48–L73]
      └─ uses_service IStorageService (InstancePerLifetimeScope)
        └─ method CreateDownloadUrl [L60]
          └─ implementation IStorageService.CreateDownloadUrl [L9-L9]
          └─ ... (no implementation details available)
      └─ uses_storage IStorageService.CreateDownloadUrl [L60]
  └─ sends_request ExportUsersToExcelCommand [L292]
    └─ handled_by Dataverse.ApplicationService.Commands.Users.ExportUsersToExcelCommandHandler.Handle [L24–L42]
      └─ uses_service UserExcelWriter
        └─ method WriteAsync [L38]
          └─ ... (no implementation details available)

[web] POST /api/super/users/{userId:Guid}/share-point-sync  (Dataverse.Api.Controllers.Super.Core.UsersController.ForceSyncSharePoint)  [L250–L279] status=201 [auth=Authentication.MasterPolicy,Authentication.RequireTenantIdPolicy]
  └─ calls DataverseEntityFailureLogRepository.Remove [L278]
  └─ calls DataverseEntityFailureLogRepository.WriteQuery [L276]
  └─ delete DataverseEntityFailureLog [L278]
    └─ reads_from DataverseEntityFailureLogs
  └─ write DataverseEntityFailureLog [L276]
    └─ reads_from DataverseEntityFailureLogs
  └─ uses_service MockMessagingService
    └─ method RequestSharePointSiteUpdate [L261]
      └─ ... (no implementation details available)
  └─ uses_service TenantService
    └─ method GetCurrentTenantAsync [L257]
      └─ implementation Dataverse.Services.Features.Tenants.TenantService.GetCurrentTenantAsync [L6-L27]
  └─ uses_service IControlledRepository<DataverseEntityFailureLog>
    └─ method WriteQuery [L276]
      └─ ... (no implementation details available)

[web] GET /api/super/users/all/{id:guid}  (Dataverse.Api.Controllers.Super.Core.UsersController.Get)  [L98–L102] status=200 [auth=Authentication.MasterPolicy]
  └─ sends_request GetCentralUserQuery [L101]
    └─ handled_by Dataverse.ApplicationService.Queries.Firms.Users.GetCentralUserQueryHandler.Handle [L32–L144]
      └─ calls TenantRepository.WriteTable [L77]
      └─ calls TenantRepository.ReadTable [L50]
      └─ maps_to CentralUserWithTenantsDto [L50]

[web] GET /api/super/users/getAll  (Dataverse.Api.Controllers.Super.Core.UsersController.GetAll)  [L104–L113] status=200 [auth=Authentication.MasterPolicy,Authentication.RequireTenantIdPolicy]
  └─ maps_to UserLightDto [L108]
    └─ automapper.registration CirrusMappingProfile (User->UserLightDto) [L104]
    └─ automapper.registration DataverseMappingProfile (User->UserLightDto) [L84]
    └─ automapper.registration WorkpapersMappingProfile (User->UserLightDto) [L97]
  └─ calls UserRepository.ReadQuery [L108]
  └─ query User [L108]
  └─ uses_service IControlledRepository<User>
    └─ method ReadQuery [L108]
      └─ ... (no implementation details available)

[web] GET /api/super/users/{id:guid}  (Dataverse.Api.Controllers.Super.Core.UsersController.GetByTenant)  [L91–L96] status=200 [auth=Authentication.MasterPolicy,Authentication.RequireTenantIdPolicy]
  └─ maps_to UserDto [L95]
    └─ automapper.registration ExternalApiMappingProfile (User->UserDto) [L61]
    └─ automapper.registration CirrusMappingProfile (User->UserDto) [L110]
    └─ automapper.registration WorkpapersMappingProfile (User->UserDto) [L106]
    └─ automapper.registration DataverseMappingProfile (User->UserDto) [L77]
  └─ calls UserRepository.ReadQuery [L95]
  └─ query User [L95]
  └─ uses_service IControlledRepository<User>
    └─ method ReadQuery [L95]
      └─ ... (no implementation details available)

[web] GET /api/super/users/{id:Guid}/audit  (Dataverse.Api.Controllers.Super.Core.UsersController.GetUserAudit)  [L184–L210] status=200 [auth=Authentication.MasterPolicy,Authentication.RequireTenantIdPolicy]
  └─ calls UserRepository.ReadQuery [L188]
  └─ query User [L188]
  └─ uses_service IControlledRepository<User>
    └─ method ReadQuery [L188]
      └─ ... (no implementation details available)

[web] POST /api/super/users/{userId:Guid}/request-identity-account  (Dataverse.Api.Controllers.Super.Core.UsersController.Invite)  [L162–L170] status=201 [auth=Authentication.MasterPolicy,Authentication.RequireTenantIdPolicy]
  └─ calls UserRepository.WriteQuery [L166]
  └─ write User [L166]
  └─ uses_service IControlledRepository<User>
    └─ method WriteQuery [L166]
      └─ ... (no implementation details available)

[web] POST /api/super/users/{userId:Guid}/resend-invite  (Dataverse.Api.Controllers.Super.Core.UsersController.ResendInvite)  [L172–L182] status=201 [auth=Authentication.MasterPolicy,Authentication.RequireTenantIdPolicy]
  └─ calls UserRepository.ReadQuery [L176]
  └─ query User [L176]
  └─ uses_service IControlledRepository<User>
    └─ method ReadQuery [L176]
      └─ ... (no implementation details available)
  └─ sends_request ResendInviteCommand [L180]
    └─ handled_by Cirrus.Central.Commands.ResendInviteCommandHandler.Handle [L33–L74]
      └─ calls CentralRepository.Commit [L68]
      └─ calls CentralRepository.WriteTable [L50]
      └─ uses_service DataverseService
        └─ method Post [L59]
          └─ implementation Cirrus.Central.Features.MachineToMachine.DataverseService.Post [L14-L66]
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L64]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)

[web] GET /api/super/users/all  (Dataverse.Api.Controllers.Super.Core.UsersController.Search)  [L78–L89] status=200 [auth=Authentication.MasterPolicy]
  └─ sends_request FindCentralUsersQuery [L88]
    └─ handled_by Dataverse.ApplicationService.Queries.Firms.Users.FindCentralUsersQueryHandler.Handle [L48–L116]
      └─ calls TenantRepository.ReadTable [L69]
      └─ calls TenantRepository.ReadTable [L63]
      └─ uses_service UserService
        └─ method GetIdentityId [L73]
          └─ implementation Dataverse.ApplicationService.Services.UserService.GetIdentityId [L15-L185]

[web] GET /api/super/users/  (Dataverse.Api.Controllers.Super.Core.UsersController.SearchByTenant)  [L62–L76] status=200 [auth=Authentication.MasterPolicy,Authentication.RequireTenantIdPolicy]
  └─ sends_request FindUsersWithLicensesQuery [L74]

[web] POST /api/super/users/{userId:Guid}/sync  (Dataverse.Api.Controllers.Super.Core.UsersController.SyncToAllProducts)  [L215–L241] status=201 [auth=Authentication.MasterPolicy,Authentication.RequireTenantIdPolicy]
  └─ calls UserRepository.ReadQuery [L219]
  └─ calls DataverseEntityFailureLogRepository.Remove [L236]
  └─ calls DataverseEntityFailureLogRepository.WriteQuery [L234]
  └─ delete DataverseEntityFailureLog [L236]
    └─ reads_from DataverseEntityFailureLogs
  └─ write DataverseEntityFailureLog [L234]
    └─ reads_from DataverseEntityFailureLogs
  └─ query User [L219]
  └─ uses_service MockMessagingService
    └─ method RequestSharePointSiteUpdate [L228]
      └─ ... (no implementation details available)
  └─ uses_service TenantService
    └─ method GetCurrentTenantAsync [L226]
      └─ implementation Dataverse.Services.Features.Tenants.TenantService.GetCurrentTenantAsync [L6-L27]
  └─ uses_service IControlledRepository<DataverseEntityFailureLog>
    └─ method WriteQuery [L234]
      └─ ... (no implementation details available)
  └─ uses_service IControlledRepository<User>
    └─ method ReadQuery [L219]
      └─ ... (no implementation details available)
  └─ sends_request BulkPropagateCommand [L239]
    └─ handled_by Dataverse.ApplicationService.Commands.DataverseEntity.BulkPropagateCommandHandler.Handle [L45–L168]
      └─ calls TenantRepository.ReadTable [L159]
      └─ uses_service TenantService
        └─ method GetCurrentTenantAsync [L72]
          └─ implementation Dataverse.Services.Features.Tenants.TenantService.GetCurrentTenantAsync [L6-L27]
          └─ implementation Dataverse.Services.Features.Tenants.TenantService.GetCurrentTenantAsync [L6-L27]
      └─ uses_service MockMessagingService
        └─ method RequestPropagation [L141]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<DataverseEntityFailureLog>
        └─ method WriteQuery [L145]
          └─ ... (no implementation details available)
      └─ uses_service IMapper
        └─ method ConfigurationProvider [L136]
          └─ ... (no implementation details available)

[web] PUT /api/super/users/  (Dataverse.Api.Controllers.Super.Core.UsersController.UpdateDetails)  [L126–L132] status=200 [auth=Authentication.MasterPolicy,Authentication.RequireTenantIdPolicy]
  └─ sends_request UpdateUserCommand [L130]
    └─ handled_by Dataverse.ApplicationService.Commands.Users.UpdateUserCommandHandler.Handle [L42–L111]
      └─ maps_to UserWithIdentityInfoDto [L95]
      └─ uses_service IControlledRepository<FirmSettings>
        └─ method ReadQuery [L71]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<Office>
        └─ method ReadQuery [L77]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<Team>
        └─ method ReadQuery [L78]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<User>
        └─ method WriteQuery [L68]
          └─ ... (no implementation details available)
      └─ uses_service IMapper
        └─ method Map [L95]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L100]
          └─ implementation Dataverse.Services.Features.Requests.RequestProcessor.ProcessAsync [L8-L45]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle

[web] PUT /api/super/users/licenses  (Dataverse.Api.Controllers.Super.Core.UsersController.UpdateLicenses)  [L137–L144] status=200 [auth=Authentication.MasterPolicy,Authentication.RequireTenantIdPolicy]
  └─ sends_request UpdateUserCommand [L142]
    └─ handled_by Dataverse.ApplicationService.Commands.Users.UpdateUserCommandHandler.Handle [L42–L111]
      └─ maps_to UserWithIdentityInfoDto [L95]
      └─ uses_service IControlledRepository<FirmSettings>
        └─ method ReadQuery [L71]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<Office>
        └─ method ReadQuery [L77]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<Team>
        └─ method ReadQuery [L78]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<User>
        └─ method WriteQuery [L68]
          └─ ... (no implementation details available)
      └─ uses_service IMapper
        └─ method Map [L95]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L100]
          └─ implementation Dataverse.Services.Features.Requests.RequestProcessor.ProcessAsync [L8-L45]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle

[web] POST /api/super/data-cloud/{tenantId}/subscription  (Dataverse.Api.Controllers.Super.DataCloud.DataCloudSubscriptionController.CreateSubscription)  [L57–L74] status=201 [auth=Authentication.MasterPolicy,Authentication.RequireTenantIdPolicy]
  └─ calls TenantRepository.WriteTable [L64]
  └─ write Tenant [L64]
    └─ reads_from Tenants
  └─ uses_service TenantRepository
    └─ method WriteTable [L64]
      └─ implementation Dataverse.Tenants.Data.TenantRepository.WriteTable [L15-L180]
  └─ sends_request CreateOrUpdateSubscriptionCommand [L71]
    └─ handled_by Dataverse.ApplicationService.Commands.Subscriptions.CreateOrUpdateSubscriptionCommandHandler.Handle [L40–L86]
      └─ calls TenantRepository.WriteTable [L55]
      └─ uses_service IControlledRepository<DocumentStore>
        └─ method ReadQuery [L79]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L74]
          └─ implementation Dataverse.Services.Features.Requests.RequestProcessor.ProcessAsync [L8-L45]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle

[web] GET /api/super/data-cloud/{tenantId}/subscription  (Dataverse.Api.Controllers.Super.DataCloud.DataCloudSubscriptionController.GetSubscription)  [L42–L55] status=200 [auth=Authentication.MasterPolicy,Authentication.RequireTenantIdPolicy]
  └─ maps_to SubscriptionDto [L47]
  └─ calls TenantRepository.ReadTable [L47]
  └─ query Tenant [L47]
    └─ reads_from Tenants
  └─ uses_service TenantRepository
    └─ method ReadTable [L47]
      └─ implementation Dataverse.Tenants.Data.TenantRepository.ReadTable [L15-L180]

[web] PUT /api/super/data-cloud/{tenantId}/subscription  (Dataverse.Api.Controllers.Super.DataCloud.DataCloudSubscriptionController.UpdateSubscription)  [L76–L84] status=200 [auth=Authentication.MasterPolicy,Authentication.RequireTenantIdPolicy]
  └─ sends_request CreateOrUpdateSubscriptionCommand [L83]
    └─ handled_by Dataverse.ApplicationService.Commands.Subscriptions.CreateOrUpdateSubscriptionCommandHandler.Handle [L40–L86]
      └─ calls TenantRepository.WriteTable [L55]
      └─ uses_service IControlledRepository<DocumentStore>
        └─ method ReadQuery [L79]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L74]
          └─ implementation Dataverse.Services.Features.Requests.RequestProcessor.ProcessAsync [L8-L45]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle

[web] POST /api/super/documents/{tenantId}/subscription  (Dataverse.Api.Controllers.Super.Documents.DocumentSubscriptionController.CreateSubscription)  [L57–L74] status=201 [auth=Authentication.MasterPolicy,Authentication.RequireTenantIdPolicy]
  └─ calls TenantRepository.WriteTable [L64]
  └─ write Tenant [L64]
    └─ reads_from Tenants
  └─ uses_service TenantRepository
    └─ method WriteTable [L64]
      └─ implementation Dataverse.Tenants.Data.TenantRepository.WriteTable [L15-L180]
  └─ sends_request CreateOrUpdateSubscriptionCommand [L71]
    └─ handled_by Dataverse.ApplicationService.Commands.Subscriptions.CreateOrUpdateSubscriptionCommandHandler.Handle [L40–L86]
      └─ calls TenantRepository.WriteTable [L55]
      └─ uses_service IControlledRepository<DocumentStore>
        └─ method ReadQuery [L79]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L74]
          └─ implementation Dataverse.Services.Features.Requests.RequestProcessor.ProcessAsync [L8-L45]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle

[web] GET /api/super/documents/{tenantId}/subscription  (Dataverse.Api.Controllers.Super.Documents.DocumentSubscriptionController.GetSubscription)  [L42–L55] status=200 [auth=Authentication.MasterPolicy,Authentication.RequireTenantIdPolicy]
  └─ maps_to SubscriptionDto [L47]
  └─ calls TenantRepository.ReadTable [L47]
  └─ query Tenant [L47]
    └─ reads_from Tenants
  └─ uses_service TenantRepository
    └─ method ReadTable [L47]
      └─ implementation Dataverse.Tenants.Data.TenantRepository.ReadTable [L15-L180]

[web] PUT /api/super/documents/{tenantId}/subscription  (Dataverse.Api.Controllers.Super.Documents.DocumentSubscriptionController.UpdateSubscription)  [L76–L84] status=200 [auth=Authentication.MasterPolicy,Authentication.RequireTenantIdPolicy]
  └─ sends_request CreateOrUpdateSubscriptionCommand [L83]
    └─ handled_by Dataverse.ApplicationService.Commands.Subscriptions.CreateOrUpdateSubscriptionCommandHandler.Handle [L40–L86]
      └─ calls TenantRepository.WriteTable [L55]
      └─ uses_service IControlledRepository<DocumentStore>
        └─ method ReadQuery [L79]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L74]
          └─ implementation Dataverse.Services.Features.Requests.RequestProcessor.ProcessAsync [L8-L45]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle

[web] GET /api/super/friction-map/findAll  (Dataverse.Api.Controllers.Super.FrictionMapController.FindFrictionMap)  [L24–L28] status=200 [auth=Authentication.MasterPolicy]

[web] PUT /api/super/intercom/sync-all  (Dataverse.Api.Controllers.Super.IntercomController.SyncAllTenantToIntercom)  [L36–L45] status=200 [auth=Authentication.MasterPolicy]
  └─ calls TenantRepository.ReadTable [L39]
  └─ query Tenant [L39]
    └─ reads_from Tenants
  └─ uses_service MockMessagingService
    └─ method RequestAllTenantsIntercomSync [L44]
      └─ ... (no implementation details available)
  └─ uses_service TenantRepository
    └─ method ReadTable [L39]
      └─ implementation Dataverse.Tenants.Data.TenantRepository.ReadTable [L15-L180]

[web] PUT /api/super/intercom/{tenantId}  (Dataverse.Api.Controllers.Super.IntercomController.SyncTenantInformationToIntercom)  [L30–L34] status=200 [auth=Authentication.MasterPolicy]
  └─ uses_service MockMessagingService
    └─ method RequestTenantIntercomSync [L33]
      └─ ... (no implementation details available)

[web] POST /api/super/tenants/{tenantId}/sso/open-id/configs/  (Dataverse.Api.Controllers.Super.SSO.OpenIdController.AddNewOpenIdConfig)  [L24–L29] status=201 [auth=Authentication.MasterPolicy,Authentication.RequireTenantIdPolicy]
  └─ uses_service IOpenIdService (AddScoped)
    └─ method AddOpenIdConfigAsync [L27]
      └─ implementation Dataverse.Services.Features.SSO.OpenIdService.AddOpenIdConfigAsync [L9-L53]

[web] DELETE /api/super/tenants/{tenantId}/sso/open-id/configs/{configId}  (Dataverse.Api.Controllers.Super.SSO.OpenIdController.DeleteOpenIdConfigById)  [L52–L57] status=200 [auth=Authentication.MasterPolicy,Authentication.RequireTenantIdPolicy]
  └─ uses_service IOpenIdService (AddScoped)
    └─ method DeleteOpenIdConfigByIdAsync [L55]
      └─ implementation Dataverse.Services.Features.SSO.OpenIdService.DeleteOpenIdConfigByIdAsync [L9-L53]

[web] GET /api/super/tenants/{tenantId}/sso/open-id/configs/  (Dataverse.Api.Controllers.Super.SSO.OpenIdController.GetAllOpenIdConfig)  [L31–L36] status=200 [auth=Authentication.MasterPolicy,Authentication.RequireTenantIdPolicy]
  └─ uses_service IOpenIdService (AddScoped)
    └─ method GetAllOpenIdConfigAsync [L34]
      └─ implementation Dataverse.Services.Features.SSO.OpenIdService.GetAllOpenIdConfigAsync [L9-L53]

[web] GET /api/super/tenants/{tenantId}/sso/open-id/configs/{configId}  (Dataverse.Api.Controllers.Super.SSO.OpenIdController.GetOpenIdConfigById)  [L38–L43] status=200 [auth=Authentication.MasterPolicy,Authentication.RequireTenantIdPolicy]
  └─ uses_service IOpenIdService (AddScoped)
    └─ method GetOpenIdConfigByIdAsync [L41]
      └─ implementation Dataverse.Services.Features.SSO.OpenIdService.GetOpenIdConfigByIdAsync [L9-L53]

[web] PUT /api/super/tenants/{tenantId}/sso/open-id/configs/{configId}  (Dataverse.Api.Controllers.Super.SSO.OpenIdController.UpdateOpenIdConfigById)  [L45–L50] status=200 [auth=Authentication.MasterPolicy,Authentication.RequireTenantIdPolicy]
  └─ uses_service IOpenIdService (AddScoped)
    └─ method UpdateOpenIdConfigByIdAsync [L48]
      └─ implementation Dataverse.Services.Features.SSO.OpenIdService.UpdateOpenIdConfigByIdAsync [L9-L53]

[web] GET /api/super/storage/repair-document/{documentId:Guid}/job/{jobId:Guid}  (Dataverse.Api.Controllers.Super.StorageController.RepairDocument)  [L69–L170] status=200 [auth=Authentication.MasterPolicy,Authentication.RequireTenantIdPolicy]
  └─ uses_cache IDistributedCache.GetRecordAsync [read] [L149]
  └─ uses_cache IDistributedCache.GetRecordAsync [read] [L145]
  └─ uses_cache IDistributedCache.SetRecordAsync [write] [L133]
  └─ uses_cache IDistributedCache.SetRecordAsync [write] [L122]
  └─ uses_cache IDistributedCache.SetRecordAsync [write] [L91]
  └─ uses_cache IDistributedCache.SetRecordAsync [write] [L80]
  └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L76]
  └─ calls DocumentVersionRepository.WriteQuery [L155]
  └─ write DocumentVersion [L155]
    └─ reads_from DocumentVersions
  └─ uses_service TenantService
    └─ method GetCurrentTenantAsync [L104]
      └─ implementation Dataverse.Services.Features.Tenants.TenantService.GetCurrentTenantAsync [L6-L27]
  └─ uses_service IControlledRepository<DocumentVersion>
    └─ method WriteQuery [L155]
      └─ ... (no implementation details available)
  └─ sends_request CopyDocumentVersionCommand [L106]
    └─ handled_by Dataverse.Services.DocumentStorage.Commands.CopyDocumentVersionCommandHandler.Handle [L30–L124]
      └─ uses_service UserService
        └─ method GetUserId [L79]
          └─ implementation Dataverse.ApplicationService.Services.UserService.GetUserId [L15-L185]
      └─ uses_service DocumentServiceFactory
        └─ method GetDocumentWithService [L89]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<DocumentVersion>
        └─ method WriteQuery [L54]
          └─ ... (no implementation details available)
  └─ sends_request RepairDocumentVersionCommand [L120]
    └─ handled_by Dataverse.Services.DocumentStorage.Commands.RepairDocumentVersionCommandHandler.Handle [L25–L101]
      └─ uses_service DocumentServiceFactory
        └─ method GetDefaultColdStorage [L41]
          └─ ... (no implementation details available)
  └─ sends_request UpdateDocumentVersionFileSizeCommand [L160]
    └─ handled_by Dataverse.Services.DocumentStorage.Commands.UpdateDocumentVersionFileSizeCommandHandler.Handle [L18–L40]
      └─ uses_service DocumentServiceFactory
        └─ method GetDocumentWithService [L30]
          └─ ... (no implementation details available)
  └─ sends_request ValidateDocumentCommand [L85]
    └─ handled_by Dataverse.Services.DocumentStorage.Commands.ValidateDocumentCommandHandler.Handle [L26–L80]
      └─ uses_service DocumentServiceFactory
        └─ method GetDefaultColdStorage [L52]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<DocumentVersion>
        └─ method ReadQuery [L41]
          └─ ... (no implementation details available)

[web] GET /api/super/storage/validate-document/{documentId:Guid}  (Dataverse.Api.Controllers.Super.StorageController.ValidateDocument)  [L57–L63] status=200 [auth=Authentication.MasterPolicy,Authentication.RequireTenantIdPolicy]
  └─ sends_request ValidateDocumentCommand [L60]
    └─ handled_by Dataverse.Services.DocumentStorage.Commands.ValidateDocumentCommandHandler.Handle [L26–L80]
      └─ uses_service DocumentServiceFactory
        └─ method GetDefaultColdStorage [L52]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<DocumentVersion>
        └─ method ReadQuery [L41]
          └─ ... (no implementation details available)

[web] POST /api/super/sync-configuration/  (Dataverse.Api.Controllers.Super.SyncConfigurationController.Create)  [L118–L126] status=201 [auth=Authentication.MasterPolicy,Authentication.RequireTenantIdPolicy]
  └─ maps_to SyncConfigurationLightDto (var syncConfigDto) [L124]
  └─ calls SyncConfigurationRepository.Add [L122]
  └─ insert SyncConfiguration [L122]
    └─ reads_from SyncConfigurations
  └─ uses_service IControlledRepository<SyncConfiguration>
    └─ method Add [L122]
      └─ ... (no implementation details available)
  └─ uses_service IMapper
    └─ method Map [L124]
      └─ ... (no implementation details available)

[web] POST /api/super/sync-configuration/default  (Dataverse.Api.Controllers.Super.SyncConfigurationController.CreateDefault)  [L128–L140] status=201 [auth=Authentication.MasterPolicy,Authentication.RequireTenantIdPolicy]
  └─ maps_to SyncConfigurationLightDto (var syncConfigDto) [L138]
  └─ calls SyncConfigurationRepository.Add [L137]
  └─ insert SyncConfiguration [L137]
    └─ reads_from SyncConfigurations
  └─ uses_service IControlledRepository<SyncConfiguration>
    └─ method Add [L137]
      └─ ... (no implementation details available)
  └─ uses_service IMapper
    └─ method Map [L138]
      └─ ... (no implementation details available)

[web] DELETE /api/super/sync-configuration/{id:Guid}  (Dataverse.Api.Controllers.Super.SyncConfigurationController.Delete)  [L190–L196] status=200 [auth=Authentication.MasterPolicy,Authentication.RequireTenantIdPolicy]
  └─ sends_request DeleteSyncConfigurationQuery [L193]
    └─ handled_by Dataverse.ApplicationService.Queries.SyncConfigurations.DeleteSyncConfigurationQueryHandler.Handle [L28–L68]
      └─ uses_service DataGetService
        └─ method DisconnectToken [L51]
          └─ implementation Dataverse.Services.Features.DataGet.DataGetService.DisconnectToken [L19-L182]
      └─ uses_service IControlledRepository<SyncConfiguration>
        └─ method WriteQuery [L43]
          └─ ... (no implementation details available)

[web] PUT /api/super/sync-configuration/sync/{id:Guid}  (Dataverse.Api.Controllers.Super.SyncConfigurationController.ForceNextSync)  [L154–L164] status=200 [auth=Authentication.MasterPolicy,Authentication.RequireTenantIdPolicy]
  └─ calls SyncConfigurationRepository.WriteQuery [L157]
  └─ write SyncConfiguration [L157]
    └─ reads_from SyncConfigurations
  └─ uses_service IControlledRepository<SyncConfiguration>
    └─ method WriteQuery [L157]
      └─ ... (no implementation details available)

[web] PUT /api/super/sync-configuration/sync-all-existing/{id:Guid}  (Dataverse.Api.Controllers.Super.SyncConfigurationController.ForceSyncAllExisting)  [L166–L176] status=200 [auth=Authentication.MasterPolicy,Authentication.RequireTenantIdPolicy]
  └─ calls SyncConfigurationRepository.WriteQuery [L169]
  └─ write SyncConfiguration [L169]
    └─ reads_from SyncConfigurations
  └─ uses_service RequestRegionService
    └─ method GetTimeZone [L173]
      └─ implementation Dataverse.Services.Features.Localisation.RequestRegionService.GetTimeZone [L10-L74]
      └─ implementation Dataverse.Services.Features.Localisation.RequestRegionService.GetTimeZone [L10-L74]
  └─ uses_service IControlledRepository<SyncConfiguration>
    └─ method WriteQuery [L169]
      └─ ... (no implementation details available)

[web] GET /api/super/sync-configuration/{id:Guid}  (Dataverse.Api.Controllers.Super.SyncConfigurationController.Get)  [L50–L54] status=200 [auth=Authentication.MasterPolicy,Authentication.RequireTenantIdPolicy]
  └─ sends_request GetSyncConfigurationQuery [L53]
    └─ handled_by Dataverse.ApplicationService.Queries.SyncConfigurations.GetSyncConfigurationQueryHandler.Handle [L34–L90]
      └─ maps_to SyncConfigurationDto [L54]
      └─ uses_service IControlledRepository<SyncConfiguration>
        └─ method ReadQuery [L49]
          └─ ... (no implementation details available)
      └─ uses_service IMapper
        └─ method Map [L54]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L65]
          └─ implementation Dataverse.Services.Features.Requests.RequestProcessor.ProcessAsync [L8-L45]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle

[web] GET /api/super/sync-configuration/  (Dataverse.Api.Controllers.Super.SyncConfigurationController.GetAll)  [L65–L69] status=200 [auth=Authentication.MasterPolicy,Authentication.RequireTenantIdPolicy]
  └─ sends_request GetSyncConfigurationsQuery [L68]
    └─ handled_by Dataverse.ApplicationService.Queries.SyncConfigurations.GetSyncConfigurationsQueryHandler.Handle [L32–L97]
      └─ maps_to SyncConfigurationDto [L56]
      └─ maps_to SyncConfigurationLightDto [L60]
      └─ uses_service IControlledRepository<SyncConfiguration>
        └─ method ReadQuery [L49]
          └─ ... (no implementation details available)
      └─ uses_service IMapper
        └─ method Map [L56]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L69]
          └─ implementation Dataverse.Services.Features.Requests.RequestProcessor.ProcessAsync [L8-L45]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle

[web] GET /api/super/sync-configuration/type/{type}  (Dataverse.Api.Controllers.Super.SyncConfigurationController.GetAllByType)  [L71–L83] status=200 [auth=Authentication.MasterPolicy,Authentication.RequireTenantIdPolicy]
  └─ maps_to SyncConfigurationUltraLightDto [L76]
    └─ automapper.registration DataverseMappingProfile (SyncConfiguration->SyncConfigurationUltraLightDto) [L265]
  └─ calls SyncConfigurationRepository.ReadQuery [L76]
  └─ query SyncConfiguration [L76]
    └─ reads_from SyncConfigurations
  └─ uses_service IControlledRepository<SyncConfiguration>
    └─ method ReadQuery [L76]
      └─ ... (no implementation details available)

[web] GET /api/super/sync-configuration/all  (Dataverse.Api.Controllers.Super.SyncConfigurationController.GetAllTenants)  [L56–L63] status=200 [auth=Authentication.MasterPolicy]

[web] GET /api/super/sync-configuration/{id:Guid}/errors  (Dataverse.Api.Controllers.Super.SyncConfigurationController.GetErrors)  [L85–L116] status=200 [auth=Authentication.MasterPolicy,Authentication.RequireTenantIdPolicy]
  └─ calls SyncConfigurationRepository.ReadQuery [L95]
  └─ query SyncConfiguration [L95]
    └─ reads_from SyncConfigurations
  └─ uses_service IControlledRepository<SyncConfiguration>
    └─ method ReadQuery [L95]
      └─ ... (no implementation details available)

[web] PUT /api/super/sync-configuration/{id:Guid}/start  (Dataverse.Api.Controllers.Super.SyncConfigurationController.StartSync)  [L178–L188] status=200 [auth=Authentication.MasterPolicy,Authentication.RequireTenantIdPolicy]
  └─ calls SyncConfigurationRepository.WriteQuery [L181]
  └─ write SyncConfiguration [L181]
    └─ reads_from SyncConfigurations
  └─ uses_service RequestRegionService
    └─ method GetTimeZone [L185]
      └─ implementation Dataverse.Services.Features.Localisation.RequestRegionService.GetTimeZone [L10-L74]
      └─ implementation Dataverse.Services.Features.Localisation.RequestRegionService.GetTimeZone [L10-L74]
  └─ uses_service IControlledRepository<SyncConfiguration>
    └─ method WriteQuery [L181]
      └─ ... (no implementation details available)

[web] PUT /api/super/sync-configuration/{id:Guid}  (Dataverse.Api.Controllers.Super.SyncConfigurationController.Update)  [L142–L152] status=200 [auth=Authentication.MasterPolicy,Authentication.RequireTenantIdPolicy]
  └─ calls SyncConfigurationRepository.WriteQuery [L145]
  └─ write SyncConfiguration [L145]
    └─ reads_from SyncConfigurations
  └─ uses_service IControlledRepository<SyncConfiguration>
    └─ method WriteQuery [L145]
      └─ ... (no implementation details available)

[web] GET /api/super/sync-monitor/count  (Dataverse.Api.Controllers.Super.SyncMonitorController.GetCount)  [L84–L91] status=200 [auth=Authentication.MasterPolicy,Authentication.RequireTenantIdPolicy]
  └─ calls DataverseEntityFailureLogRepository.ReadQuery [L90]
  └─ calls SyncConfigurationRepository.ReadQuery [L87]
  └─ query DataverseEntityFailureLog [L90]
    └─ reads_from DataverseEntityFailureLogs
  └─ query SyncConfiguration [L87]
    └─ reads_from SyncConfigurations
  └─ uses_service IControlledRepository<DataverseEntityFailureLog>
    └─ method ReadQuery [L90]
      └─ ... (no implementation details available)
  └─ uses_service IControlledRepository<SyncConfiguration>
    └─ method ReadQuery [L87]
      └─ ... (no implementation details available)

[web] GET /api/super/sync-monitor/summary  (Dataverse.Api.Controllers.Super.SyncMonitorController.GetSummary)  [L93–L117] status=200 [auth=Authentication.MasterPolicy,Authentication.RequireTenantIdPolicy]
  └─ calls DataverseEntityFailureLogRepository.ReadQuery [L96]
  └─ calls SyncConfigurationRepository.ReadQuery [L98]
  └─ query DataverseEntityFailureLog [L96]
    └─ reads_from DataverseEntityFailureLogs
  └─ query SyncConfiguration [L98]
    └─ reads_from SyncConfigurations
  └─ uses_service IControlledRepository<DataverseEntityFailureLog>
    └─ method ReadQuery [L96]
      └─ ... (no implementation details available)
  └─ uses_service IControlledRepository<SyncConfiguration>
    └─ method ReadQuery [L98]
      └─ ... (no implementation details available)

[web] GET /api/super/sync-monitor/failures  (Dataverse.Api.Controllers.Super.SyncMonitorController.Search)  [L57–L82] status=200 [auth=Authentication.MasterPolicy,Authentication.RequireTenantIdPolicy]
  └─ calls DataverseEntityFailureLogRepository.ReadQuery [L67]
  └─ query DataverseEntityFailureLog [L67]
    └─ reads_from DataverseEntityFailureLogs
  └─ uses_service IControlledRepository<DataverseEntityFailureLog>
    └─ method ReadQuery [L67]
      └─ ... (no implementation details available)

[web] POST /api/super/sync-monitor/{id}/sync  (Dataverse.Api.Controllers.Super.SyncMonitorController.Sync)  [L119–L159] status=201 [auth=Authentication.MasterPolicy,Authentication.RequireTenantIdPolicy]
  └─ calls DataverseEntityFailureLogRepository.Remove [L155]
  └─ calls DataverseEntityFailureLogRepository.WriteQuery [L152]
  └─ calls DataverseEntityFailureLogRepository.ReadQuery [L124]
  └─ delete DataverseEntityFailureLog [L155]
    └─ reads_from DataverseEntityFailureLogs
  └─ query DataverseEntityFailureLog [L124]
    └─ reads_from DataverseEntityFailureLogs
  └─ write DataverseEntityFailureLog [L152]
    └─ reads_from DataverseEntityFailureLogs
  └─ uses_service MockMessagingService
    └─ method RequestSharePointSiteUpdate [L136]
      └─ ... (no implementation details available)
  └─ uses_service TenantService
    └─ method GetCurrentTenantAsync [L122]
      └─ implementation Dataverse.Services.Features.Tenants.TenantService.GetCurrentTenantAsync [L6-L27]
  └─ uses_service IControlledRepository<DataverseEntityFailureLog>
    └─ method ReadQuery [L124]
      └─ ... (no implementation details available)
  └─ sends_request BulkPropagateCommand [L158]
    └─ handled_by Dataverse.ApplicationService.Commands.DataverseEntity.BulkPropagateCommandHandler.Handle [L45–L168]
      └─ calls TenantRepository.ReadTable [L159]
      └─ uses_service TenantService
        └─ method GetCurrentTenantAsync [L72]
          └─ implementation Dataverse.Services.Features.Tenants.TenantService.GetCurrentTenantAsync [L6-L27]
          └─ implementation Dataverse.Services.Features.Tenants.TenantService.GetCurrentTenantAsync [L6-L27]
      └─ uses_service MockMessagingService
        └─ method RequestPropagation [L141]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<DataverseEntityFailureLog>
        └─ method WriteQuery [L145]
          └─ ... (no implementation details available)
      └─ uses_service IMapper
        └─ method ConfigurationProvider [L136]
          └─ ... (no implementation details available)

[web] POST /api/super/templates/{tenantId}/subscription  (Dataverse.Api.Controllers.Super.Templates.TemplatesSubscriptionController.CreateSubscription)  [L57–L74] status=201 [auth=Authentication.MasterPolicy,Authentication.RequireTenantIdPolicy]
  └─ calls TenantRepository.WriteTable [L64]
  └─ write Tenant [L64]
    └─ reads_from Tenants
  └─ uses_service TenantRepository
    └─ method WriteTable [L64]
      └─ implementation Dataverse.Tenants.Data.TenantRepository.WriteTable [L15-L180]
  └─ sends_request CreateOrUpdateSubscriptionCommand [L71]
    └─ handled_by Dataverse.ApplicationService.Commands.Subscriptions.CreateOrUpdateSubscriptionCommandHandler.Handle [L40–L86]
      └─ calls TenantRepository.WriteTable [L55]
      └─ uses_service IControlledRepository<DocumentStore>
        └─ method ReadQuery [L79]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L74]
          └─ implementation Dataverse.Services.Features.Requests.RequestProcessor.ProcessAsync [L8-L45]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle

[web] GET /api/super/templates/{tenantId}/subscription  (Dataverse.Api.Controllers.Super.Templates.TemplatesSubscriptionController.GetSubscription)  [L42–L55] status=200 [auth=Authentication.MasterPolicy,Authentication.RequireTenantIdPolicy]
  └─ maps_to SubscriptionDto [L47]
  └─ calls TenantRepository.ReadTable [L47]
  └─ query Tenant [L47]
    └─ reads_from Tenants
  └─ uses_service TenantRepository
    └─ method ReadTable [L47]
      └─ implementation Dataverse.Tenants.Data.TenantRepository.ReadTable [L15-L180]

[web] PUT /api/super/templates/{tenantId}/subscription  (Dataverse.Api.Controllers.Super.Templates.TemplatesSubscriptionController.UpdateSubscription)  [L76–L84] status=200 [auth=Authentication.MasterPolicy,Authentication.RequireTenantIdPolicy]
  └─ sends_request CreateOrUpdateSubscriptionCommand [L83]
    └─ handled_by Dataverse.ApplicationService.Commands.Subscriptions.CreateOrUpdateSubscriptionCommandHandler.Handle [L40–L86]
      └─ calls TenantRepository.WriteTable [L55]
      └─ uses_service IControlledRepository<DocumentStore>
        └─ method ReadQuery [L79]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L74]
          └─ implementation Dataverse.Services.Features.Requests.RequestProcessor.ProcessAsync [L8-L45]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle

[web] POST /api/super/tenants/  (Dataverse.Api.Controllers.Super.TenantController.Create)  [L182–L188] status=201 [auth=Authentication.MasterPolicy]
  └─ sends_request CreateTenantCommand [L185]
    └─ handled_by Dataverse.Tenants.Commands.Tenants.CreateTenantCommandHandler.Handle [L32–L124]
      └─ calls TenantRepository.Add [L60]
      └─ calls TenantRepository.WriteTable [L48]

[web] DELETE /api/super/tenants/{id}  (Dataverse.Api.Controllers.Super.TenantController.Delete)  [L200–L208] status=200 [auth=Authentication.MasterPolicy]
  └─ calls TenantRepository.WriteTable [L203]
  └─ write Tenant [L203]
    └─ reads_from Tenants
  └─ uses_service TenantRepository
    └─ method WriteTable [L203]
      └─ implementation Dataverse.Tenants.Data.TenantRepository.WriteTable [L15-L180]

[web] GET /api/super/tenants/{id}  (Dataverse.Api.Controllers.Super.TenantController.Get)  [L90–L110] status=200 [auth=Authentication.MasterPolicy]
  └─ maps_to TenantDto [L93]
  └─ calls TenantRepository.ReadTable [L93]
  └─ query Tenant [L93]
    └─ reads_from Tenants
  └─ uses_service TenantRepository
    └─ method ReadTable [L93]
      └─ implementation Dataverse.Tenants.Data.TenantRepository.ReadTable [L15-L180]
  └─ uses_service UserService
    └─ method GetIdentityId [L103]
      └─ implementation Dataverse.ApplicationService.Services.UserService.GetIdentityId [L15-L185]

[web] GET /api/super/tenants/license-summary  (Dataverse.Api.Controllers.Super.TenantController.GetLicenseSummary)  [L122–L151] status=200 [auth=Authentication.MasterPolicy,Authentication.RequireTenantIdPolicy]
  └─ maps_to LicenseSummaryDto [L126]
  └─ calls UserRepository.ReadQuery [L133]
  └─ calls TenantRepository.ReadTable [L126]
  └─ query User [L133]
  └─ query Tenant [L126]
    └─ reads_from Tenants
  └─ uses_service IControlledRepository<User>
    └─ method ReadQuery [L133]
      └─ ... (no implementation details available)
  └─ uses_service TenantRepository
    └─ method ReadTable [L126]
      └─ implementation Dataverse.Tenants.Data.TenantRepository.ReadTable [L15-L180]

[web] GET /api/super/tenants/{id}/subscriptions  (Dataverse.Api.Controllers.Super.TenantController.GetSubscriptions)  [L112–L120] status=200 [auth=Authentication.MasterPolicy]
  └─ maps_to SubscriptionDto [L115]
  └─ calls TenantRepository.ReadTable [L115]
  └─ query Tenant [L115]
    └─ reads_from Tenants
  └─ uses_service TenantRepository
    └─ method ReadTable [L115]
      └─ implementation Dataverse.Tenants.Data.TenantRepository.ReadTable [L15-L180]

[web] POST /api/super/tenants/refresh-template-storage  (Dataverse.Api.Controllers.Super.TenantController.RefreshTemplateStorage)  [L175–L180] status=201 [auth=Authentication.MasterPolicy]
  └─ uses_service ITemplateService (AddSingleton)
    └─ method GetTemplates [L178]
      └─ implementation Dataverse.Templates.TemplateService.GetTemplates [L17-L359]

[web] POST /api/super/tenants/{id}/audit-sync  (Dataverse.Api.Controllers.Super.TenantController.RequestAuditSync)  [L153–L157] status=201 [auth=Authentication.MasterPolicy]
  └─ sends_request RequestTenantAuditSyncCommand [L156]
    └─ handled_by Dataverse.ApplicationService.Commands.Tenants.RequestTenantAuditSyncCommandHandler.Handle [L37–L117]
      └─ calls TenantRepository.WriteTable [L61]
      └─ uses_service TenantService
        └─ method GetCurrentTenantAsync [L66]
          └─ implementation Dataverse.Services.Features.Tenants.TenantService.GetCurrentTenantAsync [L6-L27]
          └─ implementation Dataverse.Services.Features.Tenants.TenantService.GetCurrentTenantAsync [L6-L27]
      └─ uses_service MockMessagingService
        └─ method RequestSharePointSiteUpdate [L82]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<DataverseEntityFailureLog>
        └─ method ReadQuery [L70]
          └─ ... (no implementation details available)

[web] POST /api/super/tenants/friction-map-resync  (Dataverse.Api.Controllers.Super.TenantController.RequestDataCloudFrictionMapResync)  [L210–L216] status=201 [auth=Authentication.MasterPolicy]
  └─ uses_service IDataCloudService (AddScoped)
    └─ method ActionFrictionMapSyncAsync [L213]
      └─ implementation Dataverse.Utilities.ApiCaller.Services.DataCloudService.ActionFrictionMapSyncAsync [L7-L35]

[web] POST /api/super/tenants/{id}/data-lake-sync  (Dataverse.Api.Controllers.Super.TenantController.RequestDataLakeAuditSync)  [L159–L169] status=201 [auth=Authentication.MasterPolicy]
  └─ calls TenantRepository.ReadTable [L162]
  └─ query Tenant [L162]
    └─ reads_from Tenants
  └─ uses_service MockMessagingService
    └─ method RequestDataLakeSecurityUpdate [L168]
      └─ ... (no implementation details available)
  └─ uses_service TenantRepository
    └─ method ReadTable [L162]
      └─ implementation Dataverse.Tenants.Data.TenantRepository.ReadTable [L15-L180]

[web] GET /api/super/tenants/  (Dataverse.Api.Controllers.Super.TenantController.Search)  [L74–L88] status=200 [auth=Authentication.MasterPolicy]
  └─ sends_request FindTenantsQuery [L86]
    └─ handled_by Cirrus.Central.Dataverse.Queries.FindTenantsQueryHandler.Handle [L32–L52]
      └─ uses_service DataverseService
        └─ method Get [L50]
          └─ implementation Cirrus.Central.Features.MachineToMachine.DataverseService.Get [L14-L66]

[web] PUT /api/super/tenants/{id}  (Dataverse.Api.Controllers.Super.TenantController.Update)  [L190–L198] status=200 [auth=Authentication.MasterPolicy]
  └─ calls TenantRepository.WriteTable [L193]
  └─ write Tenant [L193]
    └─ reads_from Tenants
  └─ uses_service TenantRepository
    └─ method WriteTable [L193]
      └─ implementation Dataverse.Tenants.Data.TenantRepository.WriteTable [L15-L180]

[web] DELETE /api/super/firm/settings/  (Dataverse.Api.Controllers.Super.TenantFirmSettingsController.Delete)  [L69–L74] status=200 [auth=Authentication.MasterPolicy,Authentication.RequireTenantIdPolicy]
  └─ calls FirmSettingsRepository.Remove [L73]
  └─ calls FirmSettingsRepository.WriteQuery [L72]
  └─ delete FirmSettings [L73]
    └─ reads_from FirmSettingss
  └─ write FirmSettings [L72]
    └─ reads_from FirmSettingss
  └─ uses_service IControlledRepository<FirmSettings>
    └─ method WriteQuery [L72]
      └─ ... (no implementation details available)

[web] GET /api/super/firm/settings/  (Dataverse.Api.Controllers.Super.TenantFirmSettingsController.Get)  [L38–L44] status=200 [auth=Authentication.MasterPolicy,Authentication.RequireTenantIdPolicy]
  └─ maps_to FirmSettingsDto [L41]
    └─ automapper.registration DataverseMappingProfile (FirmSettings->FirmSettingsDto) [L121]
  └─ calls FirmSettingsRepository.ReadQuery [L41]
  └─ query FirmSettings [L41]
    └─ reads_from FirmSettingss
  └─ uses_service IControlledRepository<FirmSettings>
    └─ method ReadQuery [L41]
      └─ ... (no implementation details available)

[web] PUT /api/super/firm/settings/  (Dataverse.Api.Controllers.Super.TenantFirmSettingsController.Save)  [L49–L64] status=200 [auth=Authentication.MasterPolicy,Authentication.RequireTenantIdPolicy]
  └─ calls FirmSettingsRepository.Add [L57]
  └─ calls FirmSettingsRepository.WriteQuery [L52]
  └─ insert FirmSettings [L57]
    └─ reads_from FirmSettingss
  └─ write FirmSettings [L52]
    └─ reads_from FirmSettingss
  └─ uses_service IControlledRepository<FirmSettings>
    └─ method WriteQuery [L52]
      └─ ... (no implementation details available)
  └─ sends_request UpdateUsersSupportTicketCreationPermissionCommand [L62]
    └─ handled_by Dataverse.ApplicationService.Commands.Firms.UpdateUsersSupportTicketCreationPermissionCommandHandler.Handle [L26–L69]
      └─ uses_service IControlledRepository<User>
        └─ method WriteQuery [L47]
          └─ ... (no implementation details available)

[web] GET /api/super/tenant-reports/region-report/{regionId:int}  (Dataverse.Api.Controllers.Super.TenantReportsController.GetRegionReport)  [L48–L62] status=200 [auth=Authentication.MasterPolicy]
  └─ sends_request RegionReportBaseQuery [L60]

[web] GET /api/super/tenant-reports/tenant-report/{tenantId:guid}  (Dataverse.Api.Controllers.Super.TenantReportsController.GetTenantReport)  [L31–L46] status=200 [auth=Authentication.MasterPolicy,Authentication.RequireTenantIdPolicy]
  └─ sends_request TenantReportBaseQuery [L44]

[web] POST /api/super/workflow/{tenantId}/subscription  (Dataverse.Api.Controllers.Super.Workflow.WorkflowsSubscriptionController.CreateSubscription)  [L57–L74] status=201 [auth=Authentication.MasterPolicy,Authentication.RequireTenantIdPolicy]
  └─ calls TenantRepository.WriteTable [L64]
  └─ write Tenant [L64]
    └─ reads_from Tenants
  └─ uses_service TenantRepository
    └─ method WriteTable [L64]
      └─ implementation Dataverse.Tenants.Data.TenantRepository.WriteTable [L15-L180]
  └─ sends_request CreateOrUpdateSubscriptionCommand [L71]
    └─ handled_by Dataverse.ApplicationService.Commands.Subscriptions.CreateOrUpdateSubscriptionCommandHandler.Handle [L40–L86]
      └─ calls TenantRepository.WriteTable [L55]
      └─ uses_service IControlledRepository<DocumentStore>
        └─ method ReadQuery [L79]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L74]
          └─ implementation Dataverse.Services.Features.Requests.RequestProcessor.ProcessAsync [L8-L45]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle

[web] GET /api/super/workflow/{tenantId}/subscription  (Dataverse.Api.Controllers.Super.Workflow.WorkflowsSubscriptionController.GetSubscription)  [L42–L55] status=200 [auth=Authentication.MasterPolicy,Authentication.RequireTenantIdPolicy]
  └─ maps_to SubscriptionDto [L47]
  └─ calls TenantRepository.ReadTable [L47]
  └─ query Tenant [L47]
    └─ reads_from Tenants
  └─ uses_service TenantRepository
    └─ method ReadTable [L47]
      └─ implementation Dataverse.Tenants.Data.TenantRepository.ReadTable [L15-L180]

[web] PUT /api/super/workflow/{tenantId}/subscription  (Dataverse.Api.Controllers.Super.Workflow.WorkflowsSubscriptionController.UpdateSubscription)  [L76–L84] status=200 [auth=Authentication.MasterPolicy,Authentication.RequireTenantIdPolicy]
  └─ sends_request CreateOrUpdateSubscriptionCommand [L83]
    └─ handled_by Dataverse.ApplicationService.Commands.Subscriptions.CreateOrUpdateSubscriptionCommandHandler.Handle [L40–L86]
      └─ calls TenantRepository.WriteTable [L55]
      └─ uses_service IControlledRepository<DocumentStore>
        └─ method ReadQuery [L79]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L74]
          └─ implementation Dataverse.Services.Features.Requests.RequestProcessor.ProcessAsync [L8-L45]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle

[web] POST /api/super/smart-workpapers/{tenantId}/subscription  (Dataverse.Api.Controllers.Super.Workpapers.SmartWorkpapersController.CreateSubscription)  [L80–L118] status=201 [auth=Authentication.MasterPolicy,Authentication.RequireTenantIdPolicy]
  └─ maps_to TenantLightDto [L111]
  └─ maps_to TenantLightDto [L101]
  └─ uses_client WorkpapersClient [L112]
  └─ uses_client WorkpapersClient [L102]
  └─ uses_client WorkpapersClient [L96]
  └─ calls TenantRepository.WriteTable [L87]
  └─ write Tenant [L87]
    └─ reads_from Tenants
  └─ uses_service IMapper
    └─ method Map [L101]
      └─ ... (no implementation details available)
  └─ uses_service TenantRepository
    └─ method WriteTable [L87]
      └─ implementation Dataverse.Tenants.Data.TenantRepository.WriteTable [L15-L180]
  └─ sends_request CreateOrUpdateSubscriptionCommand [L115]
    └─ handled_by Dataverse.ApplicationService.Commands.Subscriptions.CreateOrUpdateSubscriptionCommandHandler.Handle [L40–L86]
      └─ calls TenantRepository.WriteTable [L55]
      └─ uses_service IControlledRepository<DocumentStore>
        └─ method ReadQuery [L79]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L74]
          └─ implementation Dataverse.Services.Features.Requests.RequestProcessor.ProcessAsync [L8-L45]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle

[web] GET /api/super/smart-workpapers  (Dataverse.Api.Controllers.Super.Workpapers.SmartWorkpapersController.GetRegionCodeAsync)  [L143–L146] status=200 [auth=Authentication.MasterPolicy]
  └─ uses_service TenantService
    └─ method GetCurrentTenantAsync [L145]
      └─ implementation Dataverse.Services.Features.Tenants.TenantService.GetCurrentTenantAsync [L6-L27]

[web] GET /api/super/smart-workpapers/{tenantId}/subscription  (Dataverse.Api.Controllers.Super.Workpapers.SmartWorkpapersController.GetSubscription)  [L63–L78] status=200 [auth=Authentication.MasterPolicy,Authentication.RequireTenantIdPolicy]
  └─ maps_to SubscriptionDto [L68]
  └─ uses_client WorkpapersClient [L75]
  └─ calls TenantRepository.ReadTable [L68]
  └─ query Tenant [L68]
    └─ reads_from Tenants
  └─ uses_service TenantRepository
    └─ method ReadTable [L68]
      └─ implementation Dataverse.Tenants.Data.TenantRepository.ReadTable [L15-L180]

[web] GET /api/super/smart-workpapers/{tenantId}/tenant-creation-info  (Dataverse.Api.Controllers.Super.Workpapers.SmartWorkpapersController.GetTenantCreationInfo)  [L51–L61] status=200 [auth=Authentication.MasterPolicy,Authentication.RequireTenantIdPolicy]
  └─ uses_client WorkpapersClient [L60]

[web] PUT /api/super/smart-workpapers/{tenantId}/subscription  (Dataverse.Api.Controllers.Super.Workpapers.SmartWorkpapersController.UpdateSubscription)  [L120–L141] status=200 [auth=Authentication.MasterPolicy,Authentication.RequireTenantIdPolicy]
  └─ maps_to TenantLightDto [L134]
  └─ uses_client WorkpapersClient [L135]
  └─ calls TenantRepository.WriteTable [L127]
  └─ write Tenant [L127]
    └─ reads_from Tenants
  └─ uses_service IMapper
    └─ method Map [L134]
      └─ ... (no implementation details available)
  └─ uses_service TenantRepository
    └─ method WriteTable [L127]
      └─ implementation Dataverse.Tenants.Data.TenantRepository.WriteTable [L15-L180]
  └─ sends_request CreateOrUpdateSubscriptionCommand [L137]
    └─ handled_by Dataverse.ApplicationService.Commands.Subscriptions.CreateOrUpdateSubscriptionCommandHandler.Handle [L40–L86]
      └─ calls TenantRepository.WriteTable [L55]
      └─ uses_service IControlledRepository<DocumentStore>
        └─ method ReadQuery [L79]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L74]
          └─ implementation Dataverse.Services.Features.Requests.RequestProcessor.ProcessAsync [L8-L45]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle

[web] POST /api/super/workpapers/{tenantId:Guid}/subscription  (Dataverse.Api.Controllers.Super.Workpapers.WorkpapersController.CreateSubscription)  [L75–L116] status=201 [auth=Authentication.MasterPolicy,Authentication.RequireTenantIdPolicy]
  └─ maps_to TenantLightDto [L109]
  └─ maps_to TenantLightDto [L99]
  └─ uses_client WorkpapersClient [L110]
  └─ uses_client WorkpapersClient [L100]
  └─ uses_client WorkpapersClient [L94]
  └─ calls TenantRepository.WriteTable [L82]
  └─ write Tenant [L82]
    └─ reads_from Tenants
  └─ uses_service IMapper
    └─ method Map [L99]
      └─ ... (no implementation details available)
  └─ uses_service TenantRepository
    └─ method WriteTable [L82]
      └─ implementation Dataverse.Tenants.Data.TenantRepository.WriteTable [L15-L180]
  └─ sends_request CreateOrUpdateSubscriptionCommand [L113]
    └─ handled_by Dataverse.ApplicationService.Commands.Subscriptions.CreateOrUpdateSubscriptionCommandHandler.Handle [L40–L86]
      └─ calls TenantRepository.WriteTable [L55]
      └─ uses_service IControlledRepository<DocumentStore>
        └─ method ReadQuery [L79]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L74]
          └─ implementation Dataverse.Services.Features.Requests.RequestProcessor.ProcessAsync [L8-L45]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle

[web] GET /api/super/workpapers  (Dataverse.Api.Controllers.Super.Workpapers.WorkpapersController.GetRegionCodeAsync)  [L145–L148] status=200 [auth=Authentication.MasterPolicy]
  └─ uses_service TenantService
    └─ method GetCurrentTenantAsync [L147]
      └─ implementation Dataverse.Services.Features.Tenants.TenantService.GetCurrentTenantAsync [L6-L27]

[web] GET /api/super/workpapers/{tenantId:Guid}/subscription  (Dataverse.Api.Controllers.Super.Workpapers.WorkpapersController.GetSubscription)  [L60–L73] status=200 [auth=Authentication.MasterPolicy,Authentication.RequireTenantIdPolicy]
  └─ maps_to SubscriptionDto [L65]
  └─ calls TenantRepository.ReadTable [L65]
  └─ query Tenant [L65]
    └─ reads_from Tenants
  └─ uses_service TenantRepository
    └─ method ReadTable [L65]
      └─ implementation Dataverse.Tenants.Data.TenantRepository.ReadTable [L15-L180]

[web] GET /api/super/workpapers/{tenantId:Guid}/tenant-creation-info  (Dataverse.Api.Controllers.Super.Workpapers.WorkpapersController.GetTenantCreationInfo)  [L53–L58] status=200 [auth=Authentication.MasterPolicy,Authentication.RequireTenantIdPolicy]
  └─ sends_request GetTenantCreateInfoQuery [L57]
    └─ handled_by Dataverse.ApplicationService.Queries.Workpapers.GetTenantCreateInfoQueryHandler.Handle [L38–L81]
      └─ calls TenantRepository.ReadTable [L60]
      └─ uses_client WorkpapersClient [L73]
      └─ uses_service TenantService
        └─ method GetCurrentTenantAsync [L79]
          └─ implementation Dataverse.Services.Features.Tenants.TenantService.GetCurrentTenantAsync [L6-L27]
          └─ implementation Dataverse.Services.Features.Tenants.TenantService.GetCurrentTenantAsync [L6-L27]
      └─ uses_service WorkpapersClient
        └─ method Get [L73]
          └─ ... (no implementation details available)

[web] PUT /api/super/workpapers/{tenantId}/subscription  (Dataverse.Api.Controllers.Super.Workpapers.WorkpapersController.UpdateSubscription)  [L118–L143] status=200 [auth=Authentication.MasterPolicy,Authentication.RequireTenantIdPolicy]
  └─ maps_to TenantLightDto [L135]
  └─ uses_client WorkpapersClient [L137]
  └─ calls TenantRepository.WriteTable [L125]
  └─ write Tenant [L125]
    └─ reads_from Tenants
  └─ uses_service IMapper
    └─ method Map [L135]
      └─ ... (no implementation details available)
  └─ uses_service TenantRepository
    └─ method WriteTable [L125]
      └─ implementation Dataverse.Tenants.Data.TenantRepository.WriteTable [L15-L180]
  └─ sends_request CreateOrUpdateSubscriptionCommand [L139]
    └─ handled_by Dataverse.ApplicationService.Commands.Subscriptions.CreateOrUpdateSubscriptionCommandHandler.Handle [L40–L86]
      └─ calls TenantRepository.WriteTable [L55]
      └─ uses_service IControlledRepository<DocumentStore>
        └─ method ReadQuery [L79]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L74]
          └─ implementation Dataverse.Services.Features.Requests.RequestProcessor.ProcessAsync [L8-L45]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle

[web] GET /api/claims/{identityId}  (Dataverse.Api.Controllers.Tenants.ClaimsController.GetClaims)  [L54–L113] status=200 [auth=Authentication.MachineToMachinePolicy]
  └─ calls TenantRepository.ReadTable [L57]
  └─ query Tenant [L57]
    └─ reads_from Tenants
  └─ uses_service IMapper
    └─ method Map [L106]
      └─ ... (no implementation details available)
  └─ uses_service ITenantIdentificationService (AddScoped)
    └─ method AssignActiveTenant [L68]
      └─ implementation Dataverse.Tenants.Tenants.TenantIdentificationService.AssignActiveTenant [L27-L149]
  └─ uses_service TenantRepository
    └─ method ReadTable [L57]
      └─ implementation Dataverse.Tenants.Data.TenantRepository.ReadTable [L15-L180]
  └─ sends_request GetTenantsForUserQuery [L64]
    └─ handled_by Dataverse.Tenants.Queries.GetTenantsForUserQueryHandler.Handle [L31–L55]
      └─ calls TenantRepository.ReadTable [L47]
      └─ calls TenantRepository.ReadTable [L44]
      └─ maps_to TenantWithUserInfoDto [L47]
      └─ uses_service IMapper
        └─ method ConfigurationProvider [L51]
          └─ ... (no implementation details available)

[web] GET /api/claims/isTrial/{tenantId}/product/{productType}  (Dataverse.Api.Controllers.Tenants.ClaimsController.GetIsTrialClaim)  [L115–L125] status=200 [auth=Authentication.MachineToMachinePolicy]
  └─ calls TenantRepository.ReadTable [L118]
  └─ query Tenant [L118]
    └─ reads_from Tenants
  └─ uses_service TenantRepository
    └─ method ReadTable [L118]
      └─ implementation Dataverse.Tenants.Data.TenantRepository.ReadTable [L15-L180]

[web] GET /api/claims  (Dataverse.Api.Controllers.Tenants.ClaimsController.GetUserInfo)  [L127–L146] status=200 [auth=Authentication.MachineToMachinePolicy]

[web] GET /api/tenant/databases/{databaseId}  (Dataverse.Api.Controllers.Tenants.DatabaseController.Get)  [L45–L52] status=200 [auth=master]
  └─ maps_to DatabaseDto [L48]
  └─ calls TenantRepository.ReadTable [L48]
  └─ query Tenant [L48]
    └─ reads_from Tenants
  └─ uses_service TenantRepository
    └─ method ReadTable [L48]
      └─ implementation Dataverse.Tenants.Data.TenantRepository.ReadTable [L15-L180]

[web] GET /api/tenant/databases/  (Dataverse.Api.Controllers.Tenants.DatabaseController.GetAll)  [L33–L43] status=200 [auth=master]
  └─ maps_to DatabaseLightDto [L36]
  └─ calls TenantRepository.ReadTable [L36]
  └─ query Tenant [L36]
    └─ reads_from Tenants
  └─ uses_service TenantRepository
    └─ method ReadTable [L36]
      └─ implementation Dataverse.Tenants.Data.TenantRepository.ReadTable [L15-L180]

[web] GET /api/tenant/databases/regions  (Dataverse.Api.Controllers.Tenants.DatabaseController.GetRegions)  [L54–L68] status=200 [auth=master]
  └─ calls TenantRepository.ReadTable [L57]
  └─ query Tenant [L57]
    └─ reads_from Tenants
  └─ uses_service TenantRepository
    └─ method ReadTable [L57]
      └─ implementation Dataverse.Tenants.Data.TenantRepository.ReadTable [L15-L180]
  └─ uses_service UserService
    └─ method GetIdentityId [L61]
      └─ implementation Dataverse.ApplicationService.Services.UserService.GetIdentityId [L15-L185]

[web] POST /api/ui/account-mapping/benchmark-code-sets/benchmark-codes/{benchmarkCodeSetId:guid}  (Dataverse.Api.Controllers.UI.AccountMapping.BenchmarkCodesController.CreateBenchmarkCode)  [L62–L69] status=201 [auth=Authentication.AdminPolicy]
  └─ sends_request CreateBenchmarkCodeCommand [L66]
    └─ handled_by Dataverse.ApplicationService.Commands.AccountMapping.BenchmarkCodes.CreateBenchmarkCodeCommandHandler.Handle [L26–L46]
      └─ uses_service UserService
        └─ method IsMaster [L39]
          └─ implementation Dataverse.ApplicationService.Services.UserService.IsMaster [L15-L185]
      └─ uses_service IControlledRepository<BenchmarkCode>
        └─ method Add [L42]
          └─ ... (no implementation details available)

[web] DELETE /api/ui/account-mapping/benchmark-code-sets/benchmark-codes/{benchmarkCodeSetId:guid}/{id:guid}  (Dataverse.Api.Controllers.UI.AccountMapping.BenchmarkCodesController.DeleteBenchmarkCodeSet)  [L91–L98] status=200 [auth=Authentication.AdminPolicy]
  └─ sends_request DeleteBenchmarkCodeCommand [L95]
    └─ handled_by Dataverse.ApplicationService.Commands.AccountMapping.BenchmarkCodes.DeleteBenchmarkCodeCommandHandler.Handle [L27–L58]
      └─ uses_service UserService
        └─ method IsMaster [L44]
          └─ implementation Dataverse.ApplicationService.Services.UserService.IsMaster [L15-L185]
      └─ uses_service IControlledRepository<BenchmarkCode>
        └─ method WriteQuery [L40]
          └─ ... (no implementation details available)

[web] GET /api/ui/account-mapping/benchmark-code-sets/benchmark-codes/{benchmarkCodeSetId:guid}/{id:guid}  (Dataverse.Api.Controllers.UI.AccountMapping.BenchmarkCodesController.GetBenchmarkCode)  [L32–L37] status=200 [auth=Authentication.UserPolicy]
  └─ sends_request GetBenchmarkCodeQuery [L36]
    └─ handled_by Dataverse.ApplicationService.Queries.AccountMapping.BenchmarkCodes.GetBenchmarkCodeQueryHandler.Handle [L28–L47]
      └─ maps_to BenchmarkCodeDto [L41]
        └─ automapper.registration DataverseMappingProfile (BenchmarkCode->BenchmarkCodeDto) [L245]
      └─ uses_service IControlledRepository<BenchmarkCode>
        └─ method ReadQuery [L41]
          └─ ... (no implementation details available)

[web] GET /api/ui/account-mapping/benchmark-code-sets/benchmark-codes  (Dataverse.Api.Controllers.UI.AccountMapping.BenchmarkCodesController.GetBenchmarkCodes)  [L46–L53] status=200 [auth=Authentication.UserPolicy]
  └─ sends_request GetBenchmarkCodesQuery [L52]
    └─ handled_by Dataverse.ApplicationService.Queries.AccountMapping.BenchmarkCodes.GetBenchmarkCodesQueryHandler.Handle [L30–L60]
      └─ maps_to BenchmarkCodeDto [L55]
      └─ uses_service IControlledRepository<BenchmarkCode>
        └─ method ReadQuery [L43]
          └─ ... (no implementation details available)
      └─ uses_service IMapper
        └─ method ConfigurationProvider [L55]
          └─ ... (no implementation details available)

[web] PUT /api/ui/account-mapping/benchmark-code-sets/benchmark-codes/{benchmarkCodeSetId:guid}/{id:guid}  (Dataverse.Api.Controllers.UI.AccountMapping.BenchmarkCodesController.UpdateBenchmarkCode)  [L78–L83] status=200 [auth=Authentication.AdminPolicy]
  └─ sends_request UpdateBenchmarkCodeCommand [L82]
    └─ handled_by Dataverse.ApplicationService.Commands.AccountMapping.BenchmarkCodes.UpdateBenchmarkCodeCommandHandler.Handle [L30–L60]
      └─ uses_service UserService
        └─ method IsMaster [L43]
          └─ implementation Dataverse.ApplicationService.Services.UserService.IsMaster [L15-L185]
      └─ uses_service IControlledRepository<BenchmarkCode>
        └─ method WriteQuery [L44]
          └─ ... (no implementation details available)

[web] POST /api/ui/account-mapping/benchmark-code-sets  (Dataverse.Api.Controllers.UI.AccountMapping.BenchmarkCodeSetsController.CreateBenchmarkCodeSet)  [L55–L62] status=201 [auth=Authentication.AdminPolicy]
  └─ sends_request CreateBenchmarkCodeSetCommand [L59]
    └─ handled_by Dataverse.ApplicationService.Commands.AccountMapping.BenchmarkCodeSets.CreateBenchmarkCodeSetCommandHandler.Handle [L19–L39]
      └─ uses_service UserService
        └─ method IsMaster [L32]
          └─ implementation Dataverse.ApplicationService.Services.UserService.IsMaster [L15-L185]
      └─ uses_service IControlledRepository<BenchmarkCodeSet>
        └─ method Add [L35]
          └─ ... (no implementation details available)

[web] DELETE /api/ui/account-mapping/benchmark-code-sets/{id:guid}  (Dataverse.Api.Controllers.UI.AccountMapping.BenchmarkCodeSetsController.DeleteBenchmarkCodeSet)  [L82–L89] status=200 [auth=Authentication.AdminPolicy]
  └─ sends_request DeleteBenchmarkCodeSetCommand [L86]
    └─ handled_by Dataverse.ApplicationService.Commands.AccountMapping.BenchmarkCodeSets.DeleteBenchmarkCodeSetCommandHandler.Handle [L24–L53]
      └─ uses_service UserService
        └─ method IsMaster [L39]
          └─ implementation Dataverse.ApplicationService.Services.UserService.IsMaster [L15-L185]
      └─ uses_service IControlledRepository<BenchmarkCodeSet>
        └─ method WriteQuery [L37]
          └─ ... (no implementation details available)

[web] GET /api/ui/account-mapping/benchmark-code-sets/{id:guid}  (Dataverse.Api.Controllers.UI.AccountMapping.BenchmarkCodeSetsController.GetBenchmarkCodeSet)  [L31–L36] status=200 [auth=Authentication.UserPolicy]
  └─ sends_request GetBenchmarkCodeSetLightQuery [L35]
    └─ handled_by Dataverse.ApplicationService.Queries.AccountMapping.BenchmarkCodeSets.GetBenchmarkCodeSetQueryHandler.Handle [L37–L64]
      └─ maps_to BenchmarkCodeSetDto [L59]
        └─ automapper.registration DataverseMappingProfile (BenchmarkCodeSet->BenchmarkCodeSetDto) [L248]
      └─ maps_to BenchmarkCodeSetLightDto [L51]
        └─ automapper.registration DataverseMappingProfile (BenchmarkCodeSet->BenchmarkCodeSetLightDto) [L247]
      └─ uses_service IControlledRepository<BenchmarkCodeSet>
        └─ method ReadQuery [L51]
          └─ ... (no implementation details available)

[web] GET /api/ui/account-mapping/benchmark-code-sets  (Dataverse.Api.Controllers.UI.AccountMapping.BenchmarkCodeSetsController.GetBenchmarkCodeSets)  [L43–L48] status=200 [auth=Authentication.UserPolicy]
  └─ sends_request GetBenchmarkCodeSetsQuery [L47]
    └─ handled_by Dataverse.ApplicationService.Queries.AccountMapping.BenchmarkCodeSets.GetBenchmarkCodeSetsQueryHandler.Handle [L24–L43]
      └─ maps_to BenchmarkCodeSetLightDto [L37]
        └─ automapper.registration DataverseMappingProfile (BenchmarkCodeSet->BenchmarkCodeSetLightDto) [L247]
      └─ uses_service IControlledRepository<BenchmarkCodeSet>
        └─ method ReadQuery [L37]
          └─ ... (no implementation details available)
      └─ uses_service IMapper
        └─ method ConfigurationProvider [L38]
          └─ ... (no implementation details available)

[web] PUT /api/ui/account-mapping/benchmark-code-sets/{id:guid}  (Dataverse.Api.Controllers.UI.AccountMapping.BenchmarkCodeSetsController.UpdateBenchmarkCodeSet)  [L70–L75] status=200 [auth=Authentication.AdminPolicy]
  └─ sends_request UpdateBenchmarkCodeSetCommand [L74]
    └─ handled_by Dataverse.ApplicationService.Commands.AccountMapping.BenchmarkCodeSets.UpdateBenchmarkCodeSetCommandHandler.Handle [L27–L55]
      └─ uses_service UserService
        └─ method IsMaster [L40]
          └─ implementation Dataverse.ApplicationService.Services.UserService.IsMaster [L15-L185]
      └─ uses_service IControlledRepository<BenchmarkCodeSet>
        └─ method WriteQuery [L41]
          └─ ... (no implementation details available)

[web] POST /api/ui/account-mapping/external-reporting-systems  (Dataverse.Api.Controllers.UI.AccountMapping.ExternalReportingSystemsController.CreateExternalReportingSystem)  [L58–L65] status=201 [auth=Authentication.AdminPolicy]
  └─ sends_request CreateExternalReportingSystemCommand [L62]
    └─ handled_by Dataverse.ApplicationService.Commands.AccountMapping.ExternalReportingSystems.CreateExternalReportingSystemCommandHandler.Handle [L41–L70]
      └─ maps_to ExternalReportingSystemDto [L68]
      └─ uses_service UserService
        └─ method IsMaster [L56]
          └─ implementation Dataverse.ApplicationService.Services.UserService.IsMaster [L15-L185]
      └─ uses_service IControlledRepository<ExternalReportingSystem>
        └─ method ReadQuery [L58]
          └─ ... (no implementation details available)
      └─ uses_service IMapper
        └─ method Map [L68]
          └─ ... (no implementation details available)

[web] DELETE /api/ui/account-mapping/external-reporting-systems/{id:guid}  (Dataverse.Api.Controllers.UI.AccountMapping.ExternalReportingSystemsController.DeleteExternalReportingSystem)  [L85–L92] status=200 [auth=Authentication.AdminPolicy]
  └─ sends_request DeleteExternalReportingSystemCommand [L89]
    └─ handled_by Dataverse.ApplicationService.Commands.AccountMapping.ExternalReportingSystems.DeleteExternalReportingSystemCommandHandler.Handle [L23–L54]
      └─ uses_service UserService
        └─ method IsMaster [L38]
          └─ implementation Dataverse.ApplicationService.Services.UserService.IsMaster [L15-L185]
      └─ uses_service IControlledRepository<ExternalReportingSystem>
        └─ method WriteQuery [L36]
          └─ ... (no implementation details available)

[web] GET /api/ui/account-mapping/external-reporting-systems/{id:guid}  (Dataverse.Api.Controllers.UI.AccountMapping.ExternalReportingSystemsController.GetExternalReportingSystem)  [L32–L37] status=200 [auth=Authentication.UserPolicy]
  └─ sends_request GetExternalReportingSystemQuery [L36]
    └─ handled_by Dataverse.ApplicationService.Queries.AccountMapping.ExternalReportingSystems.GetExternalReportingSystemQueryHandler.Handle [L28–L47]
      └─ maps_to ExternalReportingSystemDto [L43]
        └─ automapper.registration DataverseMappingProfile (ExternalReportingSystem->ExternalReportingSystemDto) [L241]
      └─ uses_service UserService
        └─ method IsMaster [L44]
          └─ implementation Dataverse.ApplicationService.Services.UserService.IsMaster [L15-L185]
      └─ uses_service IControlledRepository<ExternalReportingSystem>
        └─ method ReadQuery [L43]
          └─ ... (no implementation details available)

[web] GET /api/ui/account-mapping/external-reporting-systems  (Dataverse.Api.Controllers.UI.AccountMapping.ExternalReportingSystemsController.GetExternalReportingSystems)  [L45–L50] status=200 [auth=Authentication.UserPolicy]
  └─ sends_request GetExternalReportingSystemsQuery [L49]
    └─ handled_by Dataverse.ApplicationService.Queries.AccountMapping.ExternalReportingSystems.GetExternalReportingSystemsQueryHandler.Handle [L29–L56]
      └─ maps_to ExternalReportingSystemLightDto [L52]
      └─ uses_service UserService
        └─ method IsMaster [L46]
          └─ implementation Dataverse.ApplicationService.Services.UserService.IsMaster [L15-L185]
      └─ uses_service IControlledRepository<ExternalReportingSystem>
        └─ method ReadQuery [L44]
          └─ ... (no implementation details available)
      └─ uses_service IMapper
        └─ method ConfigurationProvider [L53]
          └─ ... (no implementation details available)

[web] GET /api/ui/account-mapping/external-reporting-systems/{id:guid}/mapping-codes/{mappingCodeId:guid}  (Dataverse.Api.Controllers.UI.AccountMapping.ExternalReportingSystemsController.GetMappingCode)  [L94–L99] status=200 [auth=Authentication.UserPolicy]
  └─ sends_request GetExternalReportingSystemMappingCodeQuery [L98]
    └─ handled_by Dataverse.ApplicationService.Queries.AccountMapping.ExternalReportingSystems.GetExternalReportingSystemMappingCodeQueryHandler.Handle [L30–L50]
      └─ maps_to ExternalReportingSystemMappingCodeDto [L46]
        └─ automapper.registration DataverseMappingProfile (ExternalReportingSystemMappingCode->ExternalReportingSystemMappingCodeDto) [L243]
      └─ uses_service IControlledRepository<ExternalReportingSystemMappingCode>
        └─ method ReadQuery [L46]
          └─ ... (no implementation details available)

[web] GET /api/ui/account-mapping/external-reporting-systems/{id:guid}/mapping-codes  (Dataverse.Api.Controllers.UI.AccountMapping.ExternalReportingSystemsController.GetMappingCodes)  [L101–L106] status=200 [auth=Authentication.UserPolicy]
  └─ sends_request GetExternalReportingSystemMappingCodesQuery [L105]
    └─ handled_by Dataverse.ApplicationService.Queries.AccountMapping.ExternalReportingSystems.GetExternalReportingSystemMappingCodesQueryHandler.Handle [L33–L72]
      └─ maps_to ExternalReportingSystemMappingCodeDto [L54]
        └─ automapper.registration DataverseMappingProfile (ExternalReportingSystemMappingCode->ExternalReportingSystemMappingCodeDto) [L243]
      └─ uses_service UserService
        └─ method IsMaster [L53]
          └─ implementation Dataverse.ApplicationService.Services.UserService.IsMaster [L15-L185]
      └─ uses_service IControlledRepository<ExternalReportingSystemMappingCode>
        └─ method ReadQuery [L54]
          └─ ... (no implementation details available)
      └─ uses_service IMapper
        └─ method ConfigurationProvider [L57]
          └─ ... (no implementation details available)

[web] GET /api/ui/account-mapping/external-reporting-systems/mapping-codes  (Dataverse.Api.Controllers.UI.AccountMapping.ExternalReportingSystemsController.GetMappingCodesByCode)  [L108–L114] status=200 [auth=Authentication.UserPolicy]
  └─ sends_request GetExternalReportingSystemMappingCodesByCodeQuery [L112]
    └─ handled_by Dataverse.ApplicationService.Queries.AccountMapping.ExternalReportingSystems.GetExternalReportingSystemMappingCodesByCodeQueryHandler.Handle [L32–L61]
      └─ maps_to ExternalReportingSystemMappingCodeDto [L49]
        └─ automapper.registration DataverseMappingProfile (ExternalReportingSystemMappingCode->ExternalReportingSystemMappingCodeDto) [L243]
      └─ uses_service IControlledRepository<ExternalReportingSystemMappingCode>
        └─ method ReadQuery [L49]
          └─ ... (no implementation details available)
      └─ uses_service IMapper
        └─ method ConfigurationProvider [L52]
          └─ ... (no implementation details available)

[web] PUT /api/ui/account-mapping/external-reporting-systems/{id:guid}  (Dataverse.Api.Controllers.UI.AccountMapping.ExternalReportingSystemsController.UpdateExternalReportingSystem)  [L73–L78] status=200 [auth=Authentication.AdminPolicy]
  └─ sends_request UpdateExternalReportingSystemCommand [L77]
    └─ handled_by Dataverse.ApplicationService.Commands.AccountMapping.ExternalReportingSystems.UpdateExternalReportingSystemCommandHandler.Handle [L49–L79]
      └─ maps_to ExternalReportingSystemDto [L76]
      └─ uses_service UserService
        └─ method IsMaster [L67]
          └─ implementation Dataverse.ApplicationService.Services.UserService.IsMaster [L15-L185]
      └─ uses_service IControlledRepository<ExternalReportingSystem>
        └─ method WriteQuery [L64]
          └─ ... (no implementation details available)
      └─ uses_service IMapper
        └─ method Map [L76]
          └─ ... (no implementation details available)

[web] POST /api/ui/account-mapping/mapping-codes/for-client-group/{clientGroupId:guid}  (Dataverse.Api.Controllers.UI.AccountMapping.MappingCodesController.CreateMappingCode)  [L92–L100] status=201 [auth=Authentication.UserPolicy,Authentication.UserPolicy]
  └─ sends_request CreateMappingCodeCommand [L97]
    └─ handled_by Dataverse.ApplicationService.Commands.AccountMapping.MappingCodes.CreateMappingCodeCommandHandler.Handle [L41–L75]
      └─ maps_to MappingCodeDto [L73]
      └─ uses_service UserService
        └─ method IsMaster [L58]
          └─ implementation Dataverse.ApplicationService.Services.UserService.IsMaster [L15-L185]
      └─ uses_service IControlledRepository<MappingCode>
        └─ method ReadQuery [L60]
          └─ ... (no implementation details available)
      └─ uses_service IMapper
        └─ method Map [L73]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L69]
          └─ implementation Dataverse.Services.Features.Requests.RequestProcessor.ProcessAsync [L8-L45]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle

[web] DELETE /api/ui/account-mapping/mapping-codes/for-client-group/{clientGroupId:guid}/{id:guid}  (Dataverse.Api.Controllers.UI.AccountMapping.MappingCodesController.DeleteMappingCode)  [L198–L205] status=200 [auth=Authentication.UserPolicy,Authentication.UserPolicy]
  └─ sends_request DeleteMappingCodeCommand [L202]
    └─ handled_by Dataverse.ApplicationService.Commands.AccountMapping.MappingCodes.DeleteMappingCodeCommandHandler.Handle [L34–L65]
      └─ uses_service UserService
        └─ method IsMaster [L47]
          └─ implementation Dataverse.ApplicationService.Services.UserService.IsMaster [L15-L185]
      └─ uses_service IControlledRepository<MappingCode>
        └─ method WriteQuery [L48]
          └─ ... (no implementation details available)

[web] PUT /api/ui/account-mapping/mapping-codes/{id:guid}/disable  (Dataverse.Api.Controllers.UI.AccountMapping.MappingCodesController.DisableMappingCode)  [L116–L123] status=200 [auth=Authentication.UserPolicy,Authentication.AdminPolicy]
  └─ sends_request DisableMappingCodeCommand [L120]

[web] PUT /api/ui/account-mapping/mapping-codes/{id:guid}/enable  (Dataverse.Api.Controllers.UI.AccountMapping.MappingCodesController.EnableMappingCode)  [L125–L132] status=200 [auth=Authentication.UserPolicy,Authentication.AdminPolicy]
  └─ sends_request EnableMappingCodeCommand [L129]
    └─ handled_by Dataverse.ApplicationService.Commands.AccountMapping.MappingCodes.EnableDisableMappingCodeCommandHandler.Handle [L37–L89]
      └─ uses_service IControlledRepository<ExcludedMappingCode>
        └─ method ReadQuery [L72]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<MappingCode>
        └─ method ReadQuery [L67]
          └─ ... (no implementation details available)

[web] GET /api/ui/account-mapping/mapping-codes/{code}  (Dataverse.Api.Controllers.UI.AccountMapping.MappingCodesController.GetMappingCodeByCode)  [L44–L48] status=200 [auth=Authentication.UserPolicy]
  └─ sends_request GetMappingCodeQuery [L47]
    └─ handled_by Dataverse.ApplicationService.Queries.AccountMapping.MappingCodes.GetMappingCodeQueryHandler.Handle [L38–L75]
      └─ maps_to MappingCodeDto [L68]
      └─ uses_service UserService
        └─ method IsMaster [L59]
          └─ implementation Dataverse.ApplicationService.Services.UserService.IsMaster [L15-L185]
      └─ uses_service IControlledRepository<ExcludedMappingCode>
        └─ method ReadQuery [L62]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<MappingCode>
        └─ method ReadQuery [L56]
          └─ ... (no implementation details available)
      └─ uses_service IMapper
        └─ method ConfigurationProvider [L69]
          └─ ... (no implementation details available)

[web] GET /api/ui/account-mapping/mapping-codes/{id:guid}  (Dataverse.Api.Controllers.UI.AccountMapping.MappingCodesController.GetMappingCodeById)  [L32–L36] status=200 [auth=Authentication.UserPolicy]
  └─ sends_request GetMappingCodeQuery [L35]
    └─ handled_by Dataverse.ApplicationService.Queries.AccountMapping.MappingCodes.GetMappingCodeQueryHandler.Handle [L38–L75]
      └─ maps_to MappingCodeDto [L68]
      └─ uses_service UserService
        └─ method IsMaster [L59]
          └─ implementation Dataverse.ApplicationService.Services.UserService.IsMaster [L15-L185]
      └─ uses_service IControlledRepository<ExcludedMappingCode>
        └─ method ReadQuery [L62]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<MappingCode>
        └─ method ReadQuery [L56]
          └─ ... (no implementation details available)
      └─ uses_service IMapper
        └─ method ConfigurationProvider [L69]
          └─ ... (no implementation details available)

[web] GET /api/ui/account-mapping/mapping-codes  (Dataverse.Api.Controllers.UI.AccountMapping.MappingCodesController.GetMappingCodes)  [L59–L68] status=200 [auth=Authentication.UserPolicy]
  └─ sends_request GetMappingCodesQuery [L67]
    └─ handled_by Dataverse.ApplicationService.Queries.AccountMapping.MappingCodes.GetMappingCodesQueryHandler.Handle [L36–L107]
      └─ maps_to MappingCodeDto [L89]
      └─ maps_to MappingCodeDto [L76]
      └─ uses_service UserService
        └─ method IsMaster [L58]
          └─ implementation Dataverse.ApplicationService.Services.UserService.IsMaster [L15-L185]
      └─ uses_service IControlledRepository<ExcludedMappingCode>
        └─ method ReadQuery [L65]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<MappingCode>
        └─ method ReadQuery [L53]
          └─ ... (no implementation details available)
      └─ uses_service IMapper
        └─ method ConfigurationProvider [L79]
          └─ ... (no implementation details available)

[web] PUT /api/ui/account-mapping/mapping-codes/for-client-group/{clientGroupId:guid}/{code}/mappings  (Dataverse.Api.Controllers.UI.AccountMapping.MappingCodesController.UpdateMappingCode)  [L171–L176] status=200 [auth=Authentication.UserPolicy,Authentication.UserPolicy]
  └─ sends_request CreateOrUpdateMappingCodeMappingsCommand [L175]
    └─ handled_by Dataverse.ApplicationService.Commands.AccountMapping.MappingCodes.CreateOrUpdateMappingCodeMappingsCommandHandler.Handle [L39–L94]
      └─ uses_service UserService
        └─ method IsMaster [L54]
          └─ implementation Dataverse.ApplicationService.Services.UserService.IsMaster [L15-L185]
      └─ uses_service IControlledRepository<ExternalReportingSystemMappingCode>
        └─ method WriteQuery [L56]
          └─ ... (no implementation details available)

[web] GET /api/ui/audit-histories/search  (Dataverse.Api.Controllers.UI.AuditHistories.AuditHistoriesController.Search)  [L26–L55] status=200 [auth=Authentication.UserPolicy]
  └─ sends_request FindAuditHistoriesQuery [L40]
    └─ handled_by Dataverse.ApplicationService.Queries.AuditHistories.FindAuditHistoriesQueryHandler.Handle [L55–L89]
      └─ uses_service IControlledRepository<AuditHistory>
        └─ method ReadQuery [L70]
          └─ ... (no implementation details available)

[web] PUT /api/ui/cloud-capcha/access-info  (Dataverse.Api.Controllers.UI.CloudCapchaController.Authenticate)  [L31–L36] status=200 [auth=Authentication.AdminPolicy,Authentication.AdminPolicy]
  └─ uses_service IDataGetCloudCapchaService (AddTransient)
    └─ method Authenticate [L35]
      └─ implementation Dataverse.Connections.DataGet.Services.DataGetCloudCapchaService.Authenticate [L13-L49]

[web] DELETE /api/ui/cloud-capcha/disconnect  (Dataverse.Api.Controllers.UI.CloudCapchaController.Disconnect)  [L38–L43] status=200 [auth=Authentication.AdminPolicy,Authentication.AdminPolicy]
  └─ uses_service IDataGetCloudCapchaService (AddTransient)
    └─ method Disconnect [L42]
      └─ implementation Dataverse.Connections.DataGet.Services.DataGetCloudCapchaService.Disconnect [L13-L49]

[web] GET /api/ui/cloud-capcha/access-info  (Dataverse.Api.Controllers.UI.CloudCapchaController.GetAccessInfo)  [L24–L29] status=200 [auth=Authentication.AdminPolicy,Authentication.AdminPolicy]
  └─ uses_service IDataGetCloudCapchaService (AddTransient)
    └─ method GetAccessInfo [L28]
      └─ implementation Dataverse.Connections.DataGet.Services.DataGetCloudCapchaService.GetAccessInfo [L13-L49]

[web] GET /api/ui/cloud-capcha/test-connection  (Dataverse.Api.Controllers.UI.CloudCapchaController.TestConnection)  [L45–L50] status=200 [auth=Authentication.AdminPolicy,Authentication.AdminPolicy]
  └─ uses_service IDataGetCloudCapchaService (AddTransient)
    └─ method TestConnection [L49]
      └─ implementation Dataverse.Connections.DataGet.Services.DataGetCloudCapchaService.TestConnection [L13-L49]

[web] GET /api/ui/configurations/friction-map-refresh/{userEmail}  (Dataverse.Api.Controllers.UI.Configuration.ConfigurationController.IsUserAllowedForFrictionMapRefresh)  [L31–L35] status=200 [auth=Authentication.MasterPolicy]

[web] GET /api/ui/configurations/intercom-sync/{userEmail}  (Dataverse.Api.Controllers.UI.Configuration.ConfigurationController.IsUserAllowedForIntercomSync)  [L25–L29] status=200 [auth=Authentication.MasterPolicy]

[web] DELETE /api/ui/connections/{apiType}  (Dataverse.Api.Controllers.UI.ConnectionsController.DeleteConnection)  [L26–L32] status=200 [auth=Authentication.UserPolicy]

[web] GET /api/ui/connections/has-connection  (Dataverse.Api.Controllers.UI.ConnectionsController.HasConnection)  [L42–L58] status=200 [auth=Authentication.UserPolicy]
  └─ sends_request GetConnectionSummaryQuery [L47]
    └─ handled_by Cirrus.Connections.DataGet.Queries.GetConnectionSummaryQueryHandler.Handle [L22–L93]
      └─ maps_to ActiveConnectionDto [L55]
        └─ automapper.registration CirrusMappingProfile (SourceType->ActiveConnectionDto) [L208]
        └─ automapper.registration WorkpapersMappingProfile (SourceType->ActiveConnectionDto) [L86]
      └─ uses_client DataGetClient [L64]
      └─ uses_service ApiService (SingleInstance)
        └─ method GetFeatures [L69]
          └─ implementation Cirrus.ApplicationService.Accounting.Services.ApiService.GetFeatures [L14-L75]
      └─ uses_service UserService
        └─ method GetUserId [L54]
          └─ implementation Cirrus.ApplicationService.Services.UserService.GetUserId [L14-L122]
      └─ uses_service DataGetClient
        └─ method GetConnectionsAsync [L64]
          └─ implementation Cirrus.Connections.DataGet.Client.DataGetClient.GetConnectionsAsync [L15-L302]
      └─ uses_service IControlledRepository<FileToken>
        └─ method ReadQuery [L61]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<SourceType>
        └─ method ReadQuery [L55]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<UserToken>
        └─ method ReadQuery [L62]
          └─ ... (no implementation details available)
      └─ uses_service IMapper
        └─ method ConfigurationProvider [L57]
          └─ ... (no implementation details available)

[web] DELETE /api/ui/connections/{apiType}/files/{id}  (Dataverse.Api.Controllers.UI.ConnectionsController.RemoveFile)  [L34–L40] status=200 [auth=Authentication.UserPolicy]

[web] GET /api/ui/clients/exist-for-firm  (Dataverse.Api.Controllers.UI.Core.ClientsController.CheckForClients)  [L129–L137] status=200 [auth=Authentication.UserPolicy]
  └─ calls ClientRepository.ReadQuery [L132]
  └─ query Client [L132]
  └─ uses_service IControlledRepository<Client>
    └─ method ReadQuery [L132]
      └─ ... (no implementation details available)

[web] GET /api/ui/clients/{id:guid}/has-dependencies  (Dataverse.Api.Controllers.UI.Core.ClientsController.CheckForExternalDependencies)  [L139–L145] status=200 [auth=Authentication.UserPolicy]
  └─ sends_request CheckClientExternalDependenciesQuery [L142]
    └─ handled_by Dataverse.ApplicationService.Queries.Clients.CheckClientExternalDependenciesQueryHandler.Handle [L35–L158]
      └─ uses_client CirrusClient [L115]
      └─ uses_client WorkpapersClient [L100]
      └─ uses_service TenantService
        └─ method GetCurrentTenantAsync [L62]
          └─ implementation Dataverse.Services.Features.Tenants.TenantService.GetCurrentTenantAsync [L6-L27]
          └─ implementation Dataverse.Services.Features.Tenants.TenantService.GetCurrentTenantAsync [L6-L27]
      └─ uses_service CirrusClient
        └─ method Get [L115]
          └─ ... (no implementation details available)
      └─ uses_service TenantLicenseService
        └─ method GetFirmSubscriptions [L153]
          └─ implementation Dataverse.ApplicationService.Services.TenantLicenseService.GetFirmSubscriptions [L22-L185]
      └─ uses_service IControlledRepository<Document>
        └─ method ReadQuery [L130]
          └─ ... (no implementation details available)
      └─ uses_service WorkpapersClient
        └─ method Get [L100]
          └─ ... (no implementation details available)
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L155]
      └─ uses_cache IDistributedCache.GetRecordAsync [read] [L146]

[web] POST /api/ui/clients/  (Dataverse.Api.Controllers.UI.Core.ClientsController.Create)  [L229–L271] status=201 [auth=Authentication.UserPolicy]
  └─ calls ClientRepository.Add [L268]
  └─ calls ClientRepository.WriteQuery [L253]
  └─ calls OfficeRepository.ReadQuery [L237]
  └─ query Office [L237]
    └─ reads_from Offices
  └─ insert Client [L268]
  └─ write Client [L253]
  └─ uses_service FirmSettingsService
    └─ method GetCurrentSettingsAsync [L248]
      └─ implementation Dataverse.ApplicationService.Services.FirmSettingsService.GetCurrentSettingsAsync [L18-L97]
  └─ uses_service TenantService
    └─ method GetCurrentTenantAsync [L261]
      └─ implementation Dataverse.Services.Features.Tenants.TenantService.GetCurrentTenantAsync [L6-L27]
  └─ uses_service IControlledRepository<Client>
    └─ method WriteQuery [L253]
      └─ ... (no implementation details available)
  └─ uses_service IControlledRepository<Office>
    └─ method ReadQuery [L237]
      └─ ... (no implementation details available)
  └─ sends_request CanIAccessOfficeQuery [L236]
    └─ handled_by Cirrus.ApplicationService.Firm.Queries.CanIAccessOfficeQueryHandler.Handle [L39–L110]
      └─ uses_service TenantService
        └─ method GetCurrentTenant [L66]
          └─ implementation Cirrus.Central.Tenants.TenantService.GetCurrentTenant [L26-L139]
          └─ implementation Cirrus.Central.Tenants.TenantService.GetCurrentTenant [L26-L139]
      └─ uses_service IControlledRepository<OfficeUser>
        └─ method ReadQuery [L86]
          └─ ... (no implementation details available)
      └─ uses_service IRequestInfoService (AddScoped)
        └─ method IsValidServiceAccountRequest [L60]
          └─ implementation IRequestInfoService.IsValidServiceAccountRequest [L20-L20]
          └─ ... (no implementation details available)
      └─ uses_service IUserService (InstancePerLifetimeScope)
        └─ method GetUserId [L65]
          └─ implementation IUserService.GetUserId [L18-L18]
          └─ ... (no implementation details available)
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L103]
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L79]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L69]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L66]
  └─ sends_request CanIAccessTeamQuery [L245]
    └─ handled_by Cirrus.ApplicationService.Firm.Queries.CanIAccessTeamQueryHandler.Handle [L39–L110]
      └─ uses_service TenantService
        └─ method GetCurrentTenant [L66]
          └─ implementation Cirrus.Central.Tenants.TenantService.GetCurrentTenant [L26-L139]
          └─ implementation Cirrus.Central.Tenants.TenantService.GetCurrentTenant [L26-L139]
      └─ uses_service IControlledRepository<TeamUser>
        └─ method ReadQuery [L86]
          └─ ... (no implementation details available)
      └─ uses_service IRequestInfoService (AddScoped)
        └─ method IsValidServiceAccountRequest [L60]
          └─ implementation IRequestInfoService.IsValidServiceAccountRequest [L20-L20]
          └─ ... (no implementation details available)
      └─ uses_service IUserService (InstancePerLifetimeScope)
        └─ method GetUserId [L65]
          └─ implementation IUserService.GetUserId [L18-L18]
          └─ ... (no implementation details available)
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L103]
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L79]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L69]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L66]

[web] DELETE /api/ui/clients/{id}  (Dataverse.Api.Controllers.UI.Core.ClientsController.Delete)  [L359–L367] status=200 [auth=Authentication.UserPolicy]
  └─ calls ClientRepository.WriteQuery [L362]
  └─ write Client [L362]
  └─ uses_service IControlledRepository<Client>
    └─ method WriteQuery [L362]
      └─ ... (no implementation details available)
  └─ sends_request CanIAccessClientQuery [L365]
    └─ handled_by Cirrus.ApplicationService.Firm.Queries.CanIAccessClientQueryHandler.Handle [L41–L104]
      └─ uses_service FirmSettingsService
        └─ method GetCurrentSettings [L83]
          └─ implementation Cirrus.ApplicationService.Firm.FirmSettingsService.GetCurrentSettings [L15-L112]
      └─ uses_service TenantService
        └─ method GetCurrentTenant [L71]
          └─ implementation Cirrus.Central.Tenants.TenantService.GetCurrentTenant [L26-L139]
          └─ implementation Cirrus.Central.Tenants.TenantService.GetCurrentTenant [L26-L139]
      └─ uses_service IControlledRepository<Client>
        └─ method ReadQuery [L85]
          └─ ... (no implementation details available)
      └─ uses_service IRequestInfoService (AddScoped)
        └─ method IsValidServiceAccountRequest [L64]
          └─ implementation IRequestInfoService.IsValidServiceAccountRequest [L20-L20]
          └─ ... (no implementation details available)
      └─ uses_service IUserService (InstancePerLifetimeScope)
        └─ method GetUserId [L71]
          └─ implementation IUserService.GetUserId [L18-L18]
          └─ ... (no implementation details available)
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L98]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L73]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L71]

[web] POST /api/ui/clients/{clientId:Guid}/share-point-sync  (Dataverse.Api.Controllers.UI.Core.ClientsController.ForceSyncSharePoint)  [L343–L357] status=201 [auth=Authentication.UserPolicy]
  └─ calls DataverseEntityFailureLogRepository.Remove [L356]
  └─ calls DataverseEntityFailureLogRepository.WriteQuery [L354]
  └─ delete DataverseEntityFailureLog [L356]
    └─ reads_from DataverseEntityFailureLogs
  └─ write DataverseEntityFailureLog [L354]
    └─ reads_from DataverseEntityFailureLogs
  └─ uses_service MockMessagingService
    └─ method RequestSharePointSiteUpdate [L348]
      └─ ... (no implementation details available)
  └─ uses_service TenantService
    └─ method GetCurrentTenantAsync [L346]
      └─ implementation Dataverse.Services.Features.Tenants.TenantService.GetCurrentTenantAsync [L6-L27]
  └─ uses_service IControlledRepository<DataverseEntityFailureLog>
    └─ method WriteQuery [L354]
      └─ ... (no implementation details available)

[web] GET /api/ui/clients/{id}  (Dataverse.Api.Controllers.UI.Core.ClientsController.Get)  [L111–L122] status=200 [auth=Authentication.UserPolicy]
  └─ maps_to ClientDto [L116]
    └─ automapper.registration DataverseMappingProfile (Client->ClientDto) [L165]
    └─ automapper.registration WorkpapersMappingProfile (Client->ClientDto) [L69]
    └─ automapper.registration CirrusMappingProfile (Client->ClientDto) [L146]
  └─ calls ClientRepository.ReadQuery [L116]
  └─ query Client [L116]
  └─ uses_service FirmSettingsService
    └─ method GetCurrentSettingsAsync [L118]
      └─ implementation Dataverse.ApplicationService.Services.FirmSettingsService.GetCurrentSettingsAsync [L18-L97]
  └─ uses_service IControlledRepository<Client>
    └─ method ReadQuery [L116]
      └─ ... (no implementation details available)
  └─ uses_service UserService
    └─ method GetUserId [L118]
      └─ implementation Dataverse.ApplicationService.Services.UserService.GetUserId [L15-L185]
  └─ sends_request CanIAccessClientQuery [L114]
    └─ handled_by Cirrus.ApplicationService.Firm.Queries.CanIAccessClientQueryHandler.Handle [L41–L104]
      └─ uses_service FirmSettingsService
        └─ method GetCurrentSettings [L83]
          └─ implementation Cirrus.ApplicationService.Firm.FirmSettingsService.GetCurrentSettings [L15-L112]
      └─ uses_service TenantService
        └─ method GetCurrentTenant [L71]
          └─ implementation Cirrus.Central.Tenants.TenantService.GetCurrentTenant [L26-L139]
          └─ implementation Cirrus.Central.Tenants.TenantService.GetCurrentTenant [L26-L139]
      └─ uses_service IControlledRepository<Client>
        └─ method ReadQuery [L85]
          └─ ... (no implementation details available)
      └─ uses_service IRequestInfoService (AddScoped)
        └─ method IsValidServiceAccountRequest [L64]
          └─ implementation IRequestInfoService.IsValidServiceAccountRequest [L20-L20]
          └─ ... (no implementation details available)
      └─ uses_service IUserService (InstancePerLifetimeScope)
        └─ method GetUserId [L71]
          └─ implementation IUserService.GetUserId [L18-L18]
          └─ ... (no implementation details available)
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L98]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L73]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L71]

[web] GET /api/ui/clients/{id}/children  (Dataverse.Api.Controllers.UI.Core.ClientsController.GetChildClients)  [L147–L159] status=200 [auth=Authentication.UserPolicy]
  └─ maps_to ClientSearchLightDto [L150]
    └─ automapper.registration DataverseMappingProfile (Client->ClientSearchLightDto) [L182]
  └─ calls ClientRepository.ReadQuery [L150]
  └─ query Client [L150]
  └─ uses_service FirmSettingsService
    └─ method GetCurrentSettingsAsync [L152]
      └─ implementation Dataverse.ApplicationService.Services.FirmSettingsService.GetCurrentSettingsAsync [L18-L97]
  └─ uses_service IControlledRepository<Client>
    └─ method ReadQuery [L150]
      └─ ... (no implementation details available)
  └─ uses_service UserService
    └─ method GetUserId [L152]
      └─ implementation Dataverse.ApplicationService.Services.UserService.GetUserId [L15-L185]

[web] GET /api/ui/clients/{id}/children/summary  (Dataverse.Api.Controllers.UI.Core.ClientsController.GetChildClientsSummary)  [L179–L207] status=200 [auth=Authentication.UserPolicy]
  └─ maps_to ClientSummaryDto [L182]
    └─ automapper.registration DataverseMappingProfile (Client->ClientSummaryDto) [L189]
  └─ calls ClientRepository.ReadQuery [L182]
  └─ calls DocumentRepository.ReadQuery [L197]
  └─ query Document [L197]
    └─ reads_from Documents
  └─ query Client [L182]
  └─ uses_service FirmSettingsService
    └─ method GetCurrentSettingsAsync [L184]
      └─ implementation Dataverse.ApplicationService.Services.FirmSettingsService.GetCurrentSettingsAsync [L18-L97]
  └─ uses_service IControlledRepository<Client>
    └─ method ReadQuery [L182]
      └─ ... (no implementation details available)
  └─ uses_service IControlledRepository<Document>
    └─ method ReadQuery [L197]
      └─ ... (no implementation details available)
  └─ uses_service UserService
    └─ method GetUserId [L184]
      └─ implementation Dataverse.ApplicationService.Services.UserService.GetUserId [L15-L185]

[web] GET /api/ui/clients/{id}/audit  (Dataverse.Api.Controllers.UI.Core.ClientsController.GetClientAudit)  [L209–L220] status=200 [auth=Authentication.UserPolicy]
  └─ calls ClientRepository.ReadQuery [L214]
  └─ query Client [L214]
  └─ uses_service IControlledRepository<Client>
    └─ method ReadQuery [L214]
      └─ ... (no implementation details available)
  └─ sends_request CanIAccessClientQuery [L212]
    └─ handled_by Cirrus.ApplicationService.Firm.Queries.CanIAccessClientQueryHandler.Handle [L41–L104]
      └─ uses_service FirmSettingsService
        └─ method GetCurrentSettings [L83]
          └─ implementation Cirrus.ApplicationService.Firm.FirmSettingsService.GetCurrentSettings [L15-L112]
      └─ uses_service TenantService
        └─ method GetCurrentTenant [L71]
          └─ implementation Cirrus.Central.Tenants.TenantService.GetCurrentTenant [L26-L139]
          └─ implementation Cirrus.Central.Tenants.TenantService.GetCurrentTenant [L26-L139]
      └─ uses_service IControlledRepository<Client>
        └─ method ReadQuery [L85]
          └─ ... (no implementation details available)
      └─ uses_service IRequestInfoService (AddScoped)
        └─ method IsValidServiceAccountRequest [L64]
          └─ implementation IRequestInfoService.IsValidServiceAccountRequest [L20-L20]
          └─ ... (no implementation details available)
      └─ uses_service IUserService (InstancePerLifetimeScope)
        └─ method GetUserId [L71]
          └─ implementation IUserService.GetUserId [L18-L18]
          └─ ... (no implementation details available)
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L98]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L73]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L71]

[web] GET /api/ui/clients/{id}/group/summary  (Dataverse.Api.Controllers.UI.Core.ClientsController.GetClientGroupSummary)  [L161–L177] status=200 [auth=Authentication.UserPolicy]
  └─ maps_to ClientSummaryAsParentDto [L164]
    └─ automapper.registration DataverseMappingProfile (Client->ClientSummaryAsParentDto) [L210]
  └─ calls ClientRepository.ReadQuery [L164]
  └─ calls DocumentRepository.ReadQuery [L171]
  └─ query Document [L171]
    └─ reads_from Documents
  └─ query Client [L164]
  └─ uses_service FirmSettingsService
    └─ method GetCurrentSettingsAsync [L166]
      └─ implementation Dataverse.ApplicationService.Services.FirmSettingsService.GetCurrentSettingsAsync [L18-L97]
  └─ uses_service IControlledRepository<Client>
    └─ method ReadQuery [L164]
      └─ ... (no implementation details available)
  └─ uses_service IControlledRepository<Document>
    └─ method ReadQuery [L171]
      └─ ... (no implementation details available)
  └─ uses_service UserService
    └─ method GetUserId [L166]
      └─ implementation Dataverse.ApplicationService.Services.UserService.GetUserId [L15-L185]

[web] GET /api/ui/clients/{id:guid}/tax-agent-info  (Dataverse.Api.Controllers.UI.Core.ClientsController.GetTaxAgentInfo)  [L222–L227] status=200 [auth=Authentication.UserPolicy]
  └─ maps_to TaxAgentInfoDto [L225]
    └─ automapper.registration DataverseMappingProfile (Client->TaxAgentInfoDto) [L229]
  └─ calls ClientRepository.ReadQuery [L225]
  └─ query Client [L225]
  └─ uses_service IControlledRepository<Client>
    └─ method ReadQuery [L225]
      └─ ... (no implementation details available)

[web] GET /api/ui/clients/  (Dataverse.Api.Controllers.UI.Core.ClientsController.Search)  [L86–L109] status=200 [auth=Authentication.UserPolicy]
  └─ sends_request FindClientsQuery [L108]
    └─ handled_by Cirrus.ApplicationService.Firm.Queries.FindClientsQueryHandler.Handle [L76–L187]
      └─ uses_service FirmSettingsService
        └─ method GetCurrentSettings [L108]
          └─ implementation Cirrus.ApplicationService.Firm.FirmSettingsService.GetCurrentSettings [L15-L112]
      └─ uses_service IControlledRepository<Client>
        └─ method ReadQuery [L96]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<Office>
        └─ method ReadQuery [L115]
          └─ ... (no implementation details available)
      └─ uses_service IUserService (InstancePerLifetimeScope)
        └─ method GetUserId [L99]
          └─ implementation IUserService.GetUserId [L18-L18]
          └─ ... (no implementation details available)
  └─ sends_request FindClientsLightQuery [L107]

[web] POST /api/ui/clients/{clientId:Guid}/sync  (Dataverse.Api.Controllers.UI.Core.ClientsController.SyncToAllProducts)  [L313–L338] status=201 [auth=Authentication.UserPolicy]
  └─ calls DataverseEntityFailureLogRepository.Remove [L333]
  └─ calls DataverseEntityFailureLogRepository.WriteQuery [L331]
  └─ calls ClientRepository.ReadQuery [L316]
  └─ delete DataverseEntityFailureLog [L333]
    └─ reads_from DataverseEntityFailureLogs
  └─ write DataverseEntityFailureLog [L331]
    └─ reads_from DataverseEntityFailureLogs
  └─ query Client [L316]
  └─ uses_service MockMessagingService
    └─ method RequestSharePointSiteUpdate [L325]
      └─ ... (no implementation details available)
  └─ uses_service TenantService
    └─ method GetCurrentTenantAsync [L323]
      └─ implementation Dataverse.Services.Features.Tenants.TenantService.GetCurrentTenantAsync [L6-L27]
  └─ uses_service IControlledRepository<Client>
    └─ method ReadQuery [L316]
      └─ ... (no implementation details available)
  └─ uses_service IControlledRepository<DataverseEntityFailureLog>
    └─ method WriteQuery [L331]
      └─ ... (no implementation details available)
  └─ sends_request BulkPropagateCommand [L336]
    └─ handled_by Dataverse.ApplicationService.Commands.DataverseEntity.BulkPropagateCommandHandler.Handle [L45–L168]
      └─ calls TenantRepository.ReadTable [L159]
      └─ uses_service TenantService
        └─ method GetCurrentTenantAsync [L72]
          └─ implementation Dataverse.Services.Features.Tenants.TenantService.GetCurrentTenantAsync [L6-L27]
          └─ implementation Dataverse.Services.Features.Tenants.TenantService.GetCurrentTenantAsync [L6-L27]
      └─ uses_service MockMessagingService
        └─ method RequestPropagation [L141]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<DataverseEntityFailureLog>
        └─ method WriteQuery [L145]
          └─ ... (no implementation details available)
      └─ uses_service IMapper
        └─ method ConfigurationProvider [L136]
          └─ ... (no implementation details available)

[web] PUT /api/ui/clients/{id}  (Dataverse.Api.Controllers.UI.Core.ClientsController.Update)  [L273–L310] status=200 [auth=Authentication.UserPolicy]
  └─ calls ClientRepository.WriteQuery [L276]
  └─ calls OfficeRepository.ReadQuery [L291]
  └─ query Office [L291]
    └─ reads_from Offices
  └─ write Client [L276]
  └─ uses_service FirmSettingsService
    └─ method GetCurrentSettingsAsync [L281]
      └─ implementation Dataverse.ApplicationService.Services.FirmSettingsService.GetCurrentSettingsAsync [L18-L97]
  └─ uses_service TenantService
    └─ method GetCurrentTenantAsync [L301]
      └─ implementation Dataverse.Services.Features.Tenants.TenantService.GetCurrentTenantAsync [L6-L27]
  └─ uses_service IControlledRepository<Client>
    └─ method WriteQuery [L276]
      └─ ... (no implementation details available)
  └─ uses_service IControlledRepository<Office>
    └─ method ReadQuery [L291]
      └─ ... (no implementation details available)
  └─ sends_request CanIAccessClientQuery [L280]
    └─ handled_by Cirrus.ApplicationService.Firm.Queries.CanIAccessClientQueryHandler.Handle [L41–L104]
      └─ uses_service FirmSettingsService
        └─ method GetCurrentSettings [L83]
          └─ implementation Cirrus.ApplicationService.Firm.FirmSettingsService.GetCurrentSettings [L15-L112]
      └─ uses_service TenantService
        └─ method GetCurrentTenant [L71]
          └─ implementation Cirrus.Central.Tenants.TenantService.GetCurrentTenant [L26-L139]
          └─ implementation Cirrus.Central.Tenants.TenantService.GetCurrentTenant [L26-L139]
      └─ uses_service IControlledRepository<Client>
        └─ method ReadQuery [L85]
          └─ ... (no implementation details available)
      └─ uses_service IRequestInfoService (AddScoped)
        └─ method IsValidServiceAccountRequest [L64]
          └─ implementation IRequestInfoService.IsValidServiceAccountRequest [L20-L20]
          └─ ... (no implementation details available)
      └─ uses_service IUserService (InstancePerLifetimeScope)
        └─ method GetUserId [L71]
          └─ implementation IUserService.GetUserId [L18-L18]
          └─ ... (no implementation details available)
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L98]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L73]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L71]

[web] POST /api/ui/contacts/  (Dataverse.Api.Controllers.UI.Core.ContactsController.Create)  [L110–L124] status=201 [auth=Authentication.UserPolicy]
  └─ calls ContactRepository.Add [L121]
  └─ insert Contact [L121]
    └─ reads_from DVS_Clients
  └─ uses_service FirmSettingsService
    └─ method GetCurrentSettingsAsync [L118]
      └─ implementation Dataverse.ApplicationService.Services.FirmSettingsService.GetCurrentSettingsAsync [L18-L97]
  └─ uses_service IControlledRepository<Contact>
    └─ method Add [L121]
      └─ ... (no implementation details available)
  └─ sends_request CanIAccessOfficeQuery [L115]
    └─ handled_by Cirrus.ApplicationService.Firm.Queries.CanIAccessOfficeQueryHandler.Handle [L39–L110]
      └─ uses_service TenantService
        └─ method GetCurrentTenant [L66]
          └─ implementation Cirrus.Central.Tenants.TenantService.GetCurrentTenant [L26-L139]
          └─ implementation Cirrus.Central.Tenants.TenantService.GetCurrentTenant [L26-L139]
      └─ uses_service IControlledRepository<OfficeUser>
        └─ method ReadQuery [L86]
          └─ ... (no implementation details available)
      └─ uses_service IRequestInfoService (AddScoped)
        └─ method IsValidServiceAccountRequest [L60]
          └─ implementation IRequestInfoService.IsValidServiceAccountRequest [L20-L20]
          └─ ... (no implementation details available)
      └─ uses_service IUserService (InstancePerLifetimeScope)
        └─ method GetUserId [L65]
          └─ implementation IUserService.GetUserId [L18-L18]
          └─ ... (no implementation details available)
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L103]
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L79]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L69]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L66]

[web] DELETE /api/ui/contacts/{id:guid}  (Dataverse.Api.Controllers.UI.Core.ContactsController.Delete)  [L144–L153] status=200 [auth=Authentication.UserPolicy]
  └─ calls ContactRepository.WriteQuery [L147]
  └─ write Contact [L147]
    └─ reads_from DVS_Clients
  └─ uses_service IControlledRepository<Contact>
    └─ method WriteQuery [L147]
      └─ ... (no implementation details available)
  └─ sends_request CanIAccessContactQuery [L151]
    └─ handled_by Dataverse.ApplicationService.Queries.Contacts.CanIAccessContactQueryHandler.Handle [L36–L90]
      └─ uses_service FirmSettingsService
        └─ method GetCurrentSettingsAsync [L76]
          └─ implementation Dataverse.ApplicationService.Services.FirmSettingsService.GetCurrentSettingsAsync [L18-L97]
      └─ uses_service UserService
        └─ method GetUserId [L68]
          └─ implementation Dataverse.ApplicationService.Services.UserService.GetUserId [L15-L185]
      └─ uses_service TenantService
        └─ method GetCurrentTenantAsync [L69]
          └─ implementation Dataverse.Services.Features.Tenants.TenantService.GetCurrentTenantAsync [L6-L27]
          └─ implementation Dataverse.Services.Features.Tenants.TenantService.GetCurrentTenantAsync [L6-L27]
      └─ uses_service RequestInfoService
        └─ method IsValidServiceAccountRequest [L65]
          └─ implementation Dataverse.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L92]
          └─ implementation Dataverse.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L92]
          └─ implementation Dataverse.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L92]
      └─ uses_service IControlledRepository<Contact>
        └─ method ReadQuery [L74]
          └─ ... (no implementation details available)
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L86]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L72]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L70]

[web] GET /api/ui/contacts/{id}  (Dataverse.Api.Controllers.UI.Core.ContactsController.Get)  [L83–L93] status=200 [auth=Authentication.UserPolicy]
  └─ maps_to ContactDto [L88]
    └─ automapper.registration DataverseMappingProfile (Contact->ContactDto) [L158]
  └─ calls ContactRepository.ReadQuery [L88]
  └─ query Contact [L88]
    └─ reads_from DVS_Clients
  └─ uses_service IControlledRepository<Contact>
    └─ method ReadQuery [L88]
      └─ ... (no implementation details available)
  └─ sends_request CanIAccessContactQuery [L86]
    └─ handled_by Dataverse.ApplicationService.Queries.Contacts.CanIAccessContactQueryHandler.Handle [L36–L90]
      └─ uses_service FirmSettingsService
        └─ method GetCurrentSettingsAsync [L76]
          └─ implementation Dataverse.ApplicationService.Services.FirmSettingsService.GetCurrentSettingsAsync [L18-L97]
      └─ uses_service UserService
        └─ method GetUserId [L68]
          └─ implementation Dataverse.ApplicationService.Services.UserService.GetUserId [L15-L185]
      └─ uses_service TenantService
        └─ method GetCurrentTenantAsync [L69]
          └─ implementation Dataverse.Services.Features.Tenants.TenantService.GetCurrentTenantAsync [L6-L27]
          └─ implementation Dataverse.Services.Features.Tenants.TenantService.GetCurrentTenantAsync [L6-L27]
      └─ uses_service RequestInfoService
        └─ method IsValidServiceAccountRequest [L65]
          └─ implementation Dataverse.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L92]
          └─ implementation Dataverse.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L92]
          └─ implementation Dataverse.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L92]
      └─ uses_service IControlledRepository<Contact>
        └─ method ReadQuery [L74]
          └─ ... (no implementation details available)
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L86]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L72]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L70]

[web] GET /api/ui/contacts/{id}/children  (Dataverse.Api.Controllers.UI.Core.ContactsController.GetChildContacts)  [L95–L108] status=200 [auth=Authentication.UserPolicy]
  └─ maps_to ContactSearchDto [L98]
    └─ automapper.registration DataverseMappingProfile (Contact->ContactSearchDto) [L160]
  └─ calls ContactRepository.ReadQuery [L98]
  └─ query Contact [L98]
    └─ reads_from DVS_Clients
  └─ uses_service FirmSettingsService
    └─ method GetCurrentSettingsAsync [L100]
      └─ implementation Dataverse.ApplicationService.Services.FirmSettingsService.GetCurrentSettingsAsync [L18-L97]
  └─ uses_service IControlledRepository<Contact>
    └─ method ReadQuery [L98]
      └─ ... (no implementation details available)
  └─ uses_service UserService
    └─ method GetUserId [L100]
      └─ implementation Dataverse.ApplicationService.Services.UserService.GetUserId [L15-L185]

[web] GET /api/ui/contacts/  (Dataverse.Api.Controllers.UI.Core.ContactsController.Search)  [L55–L81] status=200 [auth=Authentication.UserPolicy]
  └─ sends_request FindContactsQuery [L69]
    └─ handled_by Dataverse.ApplicationService.Queries.Contacts.FindContactsQueryHandler.Handle [L62–L131]
      └─ uses_service FirmSettingsService
        └─ method GetCurrentSettingsAsync [L85]
          └─ implementation Dataverse.ApplicationService.Services.FirmSettingsService.GetCurrentSettingsAsync [L18-L97]
      └─ uses_service UserService
        └─ method GetUserId [L85]
          └─ implementation Dataverse.ApplicationService.Services.UserService.GetUserId [L15-L185]
      └─ uses_service IControlledRepository<Contact>
        └─ method ReadQuery [L83]
          └─ ... (no implementation details available)

[web] PUT /api/ui/contacts/{id:guid}  (Dataverse.Api.Controllers.UI.Core.ContactsController.Update)  [L126–L142] status=200 [auth=Authentication.UserPolicy]
  └─ calls ContactRepository.WriteQuery [L132]
  └─ write Contact [L132]
    └─ reads_from DVS_Clients
  └─ uses_service FirmSettingsService
    └─ method GetCurrentSettingsAsync [L137]
      └─ implementation Dataverse.ApplicationService.Services.FirmSettingsService.GetCurrentSettingsAsync [L18-L97]
  └─ uses_service IControlledRepository<Contact>
    └─ method WriteQuery [L132]
      └─ ... (no implementation details available)
  └─ sends_request CanIAccessContactQuery [L136]
    └─ handled_by Dataverse.ApplicationService.Queries.Contacts.CanIAccessContactQueryHandler.Handle [L36–L90]
      └─ uses_service FirmSettingsService
        └─ method GetCurrentSettingsAsync [L76]
          └─ implementation Dataverse.ApplicationService.Services.FirmSettingsService.GetCurrentSettingsAsync [L18-L97]
      └─ uses_service UserService
        └─ method GetUserId [L68]
          └─ implementation Dataverse.ApplicationService.Services.UserService.GetUserId [L15-L185]
      └─ uses_service TenantService
        └─ method GetCurrentTenantAsync [L69]
          └─ implementation Dataverse.Services.Features.Tenants.TenantService.GetCurrentTenantAsync [L6-L27]
          └─ implementation Dataverse.Services.Features.Tenants.TenantService.GetCurrentTenantAsync [L6-L27]
      └─ uses_service RequestInfoService
        └─ method IsValidServiceAccountRequest [L65]
          └─ implementation Dataverse.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L92]
          └─ implementation Dataverse.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L92]
          └─ implementation Dataverse.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L92]
      └─ uses_service IControlledRepository<Contact>
        └─ method ReadQuery [L74]
          └─ ... (no implementation details available)
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L86]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L72]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L70]

[web] POST /api/ui/offices/  (Dataverse.Api.Controllers.UI.Core.OfficesController.Create)  [L212–L219] status=201 [auth=Authentication.UserPolicy,Authentication.AdminPolicy]
  └─ calls OfficeRepository.Add [L217]
  └─ insert Office [L217]
    └─ reads_from Offices
  └─ uses_service FirmSettingsService
    └─ method GetCurrentSettingsAsync [L215]
      └─ implementation Dataverse.ApplicationService.Services.FirmSettingsService.GetCurrentSettingsAsync [L18-L97]
  └─ uses_service IControlledRepository<Office>
    └─ method Add [L217]
      └─ ... (no implementation details available)

[web] DELETE /api/ui/offices/{id:Guid}  (Dataverse.Api.Controllers.UI.Core.OfficesController.Delete)  [L234–L239] status=200 [auth=Authentication.UserPolicy,Authentication.AdminPolicy]
  └─ calls OfficeRepository.WriteQuery [L237]
  └─ write Office [L237]
    └─ reads_from Offices
  └─ uses_service IControlledRepository<Office>
    └─ method WriteQuery [L237]
      └─ ... (no implementation details available)

[web] GET /api/ui/offices/{id}/find-office-users  (Dataverse.Api.Controllers.UI.Core.OfficesController.FindOfficeUsers)  [L109–L130] status=200 [auth=Authentication.UserPolicy]
  └─ calls OfficeRepository.ReadQuery [L116]
  └─ query Office [L116]
    └─ reads_from Offices
  └─ uses_service IControlledRepository<Office>
    └─ method ReadQuery [L116]
      └─ ... (no implementation details available)

[web] POST /api/ui/offices/{officeId:Guid}/share-point-sync  (Dataverse.Api.Controllers.UI.Core.OfficesController.ForceSyncSharePoint)  [L274–L288] status=201 [auth=Authentication.UserPolicy]
  └─ calls DataverseEntityFailureLogRepository.Remove [L287]
  └─ calls DataverseEntityFailureLogRepository.WriteQuery [L285]
  └─ delete DataverseEntityFailureLog [L287]
    └─ reads_from DataverseEntityFailureLogs
  └─ write DataverseEntityFailureLog [L285]
    └─ reads_from DataverseEntityFailureLogs
  └─ uses_service MockMessagingService
    └─ method RequestSharePointSiteUpdate [L279]
      └─ ... (no implementation details available)
  └─ uses_service TenantService
    └─ method GetCurrentTenantAsync [L277]
      └─ implementation Dataverse.Services.Features.Tenants.TenantService.GetCurrentTenantAsync [L6-L27]
  └─ uses_service IControlledRepository<DataverseEntityFailureLog>
    └─ method WriteQuery [L285]
      └─ ... (no implementation details available)

[web] GET /api/ui/offices/{id}  (Dataverse.Api.Controllers.UI.Core.OfficesController.Get)  [L77–L83] status=200 [auth=Authentication.UserPolicy]
  └─ maps_to OfficeDto [L80]
    └─ automapper.registration ExternalApiMappingProfile (Office->OfficeDto) [L54]
    └─ automapper.registration WorkpapersMappingProfile (Office->OfficeDto) [L181]
    └─ automapper.registration DataverseMappingProfile (Office->OfficeDto) [L138]
    └─ automapper.registration CirrusMappingProfile (Office->OfficeDto) [L128]
  └─ calls OfficeRepository.ReadQuery [L80]
  └─ query Office [L80]
    └─ reads_from Offices
  └─ uses_service IControlledRepository<Office>
    └─ method ReadQuery [L80]
      └─ ... (no implementation details available)

[web] GET /api/ui/offices/  (Dataverse.Api.Controllers.UI.Core.OfficesController.GetAll)  [L159–L179] status=200 [auth=Authentication.UserPolicy]
  └─ maps_to OfficeLightDto [L173]
    └─ automapper.registration WorkpapersMappingProfile (Office->OfficeLightDto) [L179]
    └─ automapper.registration DataverseMappingProfile (Office->OfficeLightDto) [L141]
    └─ automapper.registration CirrusMappingProfile (Office->OfficeLightDto) [L129]
  └─ calls OfficeRepository.ReadQuery [L173]
  └─ query Office [L173]
    └─ reads_from Offices
  └─ uses_service FirmSettingsService
    └─ method GetCurrentSettingsAsync [L167]
      └─ implementation Dataverse.ApplicationService.Services.FirmSettingsService.GetCurrentSettingsAsync [L18-L97]
  └─ uses_service IControlledRepository<Office>
    └─ method ReadQuery [L173]
      └─ ... (no implementation details available)
  └─ uses_service UserService
    └─ method IsInRole [L162]
      └─ implementation Dataverse.ApplicationService.Services.UserService.IsInRole [L15-L185]

[web] GET /api/ui/offices/code/{code}  (Dataverse.Api.Controllers.UI.Core.OfficesController.GetByCode)  [L92–L100] status=200 [auth=Authentication.UserPolicy]
  └─ maps_to OfficeDto [L95]
    └─ automapper.registration ExternalApiMappingProfile (Office->OfficeDto) [L54]
    └─ automapper.registration WorkpapersMappingProfile (Office->OfficeDto) [L181]
    └─ automapper.registration DataverseMappingProfile (Office->OfficeDto) [L138]
    └─ automapper.registration CirrusMappingProfile (Office->OfficeDto) [L128]
  └─ calls OfficeRepository.ReadQuery [L95]
  └─ query Office [L95]
    └─ reads_from Offices
  └─ uses_service IControlledRepository<Office>
    └─ method ReadQuery [L95]
      └─ ... (no implementation details available)

[web] GET /api/ui/offices/{id:Guid}/audit  (Dataverse.Api.Controllers.UI.Core.OfficesController.GetOfficeAudit)  [L181–L206] status=200 [auth=Authentication.UserPolicy]
  └─ calls OfficeRepository.ReadQuery [L184]
  └─ query Office [L184]
    └─ reads_from Offices
  └─ uses_service IControlledRepository<Office>
    └─ method ReadQuery [L184]
      └─ ... (no implementation details available)

[web] GET /api/ui/offices/{id}/office-users  (Dataverse.Api.Controllers.UI.Core.OfficesController.GetOfficeUsers)  [L139–L150] status=200 [auth=Authentication.UserPolicy]
  └─ maps_to OfficeUserWithUserDto [L142]
  └─ calls OfficeRepository.ReadQuery [L142]
  └─ query Office [L142]
    └─ reads_from Offices
  └─ uses_service IControlledRepository<Office>
    └─ method ReadQuery [L142]
      └─ ... (no implementation details available)

[web] POST /api/ui/offices/{officeId:Guid}/sync  (Dataverse.Api.Controllers.UI.Core.OfficesController.SyncToAllProducts)  [L244–L269] status=201 [auth=Authentication.UserPolicy]
  └─ calls DataverseEntityFailureLogRepository.Remove [L264]
  └─ calls DataverseEntityFailureLogRepository.WriteQuery [L262]
  └─ calls OfficeRepository.ReadQuery [L247]
  └─ query Office [L247]
    └─ reads_from Offices
  └─ delete DataverseEntityFailureLog [L264]
    └─ reads_from DataverseEntityFailureLogs
  └─ write DataverseEntityFailureLog [L262]
    └─ reads_from DataverseEntityFailureLogs
  └─ uses_service MockMessagingService
    └─ method RequestSharePointSiteUpdate [L256]
      └─ ... (no implementation details available)
  └─ uses_service TenantService
    └─ method GetCurrentTenantAsync [L254]
      └─ implementation Dataverse.Services.Features.Tenants.TenantService.GetCurrentTenantAsync [L6-L27]
  └─ uses_service IControlledRepository<DataverseEntityFailureLog>
    └─ method WriteQuery [L262]
      └─ ... (no implementation details available)
  └─ uses_service IControlledRepository<Office>
    └─ method ReadQuery [L247]
      └─ ... (no implementation details available)
  └─ sends_request BulkPropagateCommand [L267]
    └─ handled_by Dataverse.ApplicationService.Commands.DataverseEntity.BulkPropagateCommandHandler.Handle [L45–L168]
      └─ calls TenantRepository.ReadTable [L159]
      └─ uses_service TenantService
        └─ method GetCurrentTenantAsync [L72]
          └─ implementation Dataverse.Services.Features.Tenants.TenantService.GetCurrentTenantAsync [L6-L27]
          └─ implementation Dataverse.Services.Features.Tenants.TenantService.GetCurrentTenantAsync [L6-L27]
      └─ uses_service MockMessagingService
        └─ method RequestPropagation [L141]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<DataverseEntityFailureLog>
        └─ method WriteQuery [L145]
          └─ ... (no implementation details available)
      └─ uses_service IMapper
        └─ method ConfigurationProvider [L136]
          └─ ... (no implementation details available)

[web] PUT /api/ui/offices/{id}  (Dataverse.Api.Controllers.UI.Core.OfficesController.Update)  [L224–L229] status=200 [auth=Authentication.UserPolicy,Authentication.AdminPolicy]
  └─ sends_request UpdateOfficeWithUsersCommand [L227]
    └─ handled_by Dataverse.ApplicationService.Commands.Offices.UpdateOfficeWithUsersCommandHandler.Handle [L30–L127]
      └─ uses_service FirmSettingsService
        └─ method GetCurrentSettingsAsync [L51]
          └─ implementation Dataverse.ApplicationService.Services.FirmSettingsService.GetCurrentSettingsAsync [L18-L97]
      └─ uses_service IControlledRepository<Office>
        └─ method WriteQuery [L52]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<User>
        └─ method ReadQuery [L62]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L74]
          └─ implementation Dataverse.Services.Features.Requests.RequestProcessor.ProcessAsync [L8-L45]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle

[web] POST /api/ui/support-users  (Dataverse.Api.Controllers.UI.Core.SupportUsersController.AddNewSupportUserForFirmAsync)  [L59–L64] status=201 [auth=Authentication.AdminPolicy]
  └─ sends_request AddSupportUserCommand [L62]
    └─ handled_by Dataverse.ApplicationService.Commands.Users.AddSupportUserCommandHandler.Handle [L34–L149]
      └─ calls UserRepository.ReadQuery [L77]
      └─ calls TenantRepository.ReadTable [L64]
      └─ uses_service TenantService
        └─ method GetCurrentTenantAsync [L61]
          └─ implementation Dataverse.Services.Features.Tenants.TenantService.GetCurrentTenantAsync [L6-L27]
          └─ implementation Dataverse.Services.Features.Tenants.TenantService.GetCurrentTenantAsync [L6-L27]
      └─ uses_service TenantLicenseService
        └─ method GetFirmSubscriptions [L113]
          └─ implementation Dataverse.ApplicationService.Services.TenantLicenseService.GetFirmSubscriptions [L22-L185]
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L62]
          └─ implementation Dataverse.Services.Features.Requests.RequestProcessor.ProcessAsync [L8-L45]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle
      └─ uses_service UnitOfWork
        └─ method Table [L129]
          └─ ... (no implementation details available)

[web] GET /api/ui/support-users/available-users  (Dataverse.Api.Controllers.UI.Core.SupportUsersController.GetAvailableSupportUsersAsync)  [L46–L57] status=200 [auth=Authentication.AdminPolicy]
  └─ calls TenantRepository.ReadTable [L51]
  └─ query Tenant [L51]
    └─ reads_from Tenants
  └─ uses_service TenantRepository
    └─ method ReadTable [L51]
      └─ implementation Dataverse.Tenants.Data.TenantRepository.ReadTable [L15-L180]

[web] GET /api/ui/support-users  (Dataverse.Api.Controllers.UI.Core.SupportUsersController.GetSupportUsersAsync)  [L36–L44] status=200 [auth=Authentication.AdminPolicy]
  └─ sends_request GetSupportUsersQuery [L42]
    └─ handled_by Dataverse.ApplicationService.Queries.Firms.Users.GetSupportUsersQueryHandler.Handle [L29–L61]
      └─ calls TenantRepository.ReadTable [L49]
      └─ uses_service TenantService
        └─ method GetCurrentTenantAsync [L47]
          └─ implementation Dataverse.Services.Features.Tenants.TenantService.GetCurrentTenantAsync [L6-L27]
          └─ implementation Dataverse.Services.Features.Tenants.TenantService.GetCurrentTenantAsync [L6-L27]

[web] PUT /api/ui/support-users/revoke/{userId:guid}  (Dataverse.Api.Controllers.UI.Core.SupportUsersController.RevokeSupportUserAccess)  [L73–L78] status=200 [auth=Authentication.AdminPolicy]
  └─ sends_request RevokeSupportUserCommand [L76]
    └─ handled_by Dataverse.ApplicationService.Commands.Users.RevokeSupportUserCommandHanlder.Handle [L34–L85]
      └─ calls TenantRepository.WriteTable [L55]
      └─ calls TenantRepository.WriteTable [L53]
      └─ uses_service IControlledRepository<User>
        └─ method ReadQuery [L69]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L81]
          └─ implementation Dataverse.Services.Features.Requests.RequestProcessor.ProcessAsync [L8-L45]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle

[web] PUT /api/ui/support-users  (Dataverse.Api.Controllers.UI.Core.SupportUsersController.UpdateSupportUserAccess)  [L66–L71] status=200 [auth=Authentication.AdminPolicy]
  └─ sends_request UpdateSupportUserAccessCommand [L69]
    └─ handled_by Dataverse.ApplicationService.Commands.Users.UpdateSupportUserAccessCommandHandler.Handle [L22–L45]
      └─ calls TenantRepository.WriteTable [L33]

[web] POST /api/ui/tax-agents/  (Dataverse.Api.Controllers.UI.Core.TaxAgentController.Create)  [L50–L57] status=201 [auth=Authentication.UserPolicy,Authentication.AdminPolicy]
  └─ calls TaxAgentRepository.Add [L54]
  └─ insert TaxAgent [L54]
    └─ reads_from TaxAgents
  └─ uses_service IControlledRepository<TaxAgent>
    └─ method Add [L54]
      └─ ... (no implementation details available)

[web] DELETE /api/ui/tax-agents/{id}  (Dataverse.Api.Controllers.UI.Core.TaxAgentController.Delete)  [L71–L81] status=200 [auth=Authentication.UserPolicy,Authentication.AdminPolicy]
  └─ calls TaxAgentRepository.Remove [L78]
  └─ calls TaxAgentRepository.WriteQuery [L74]
  └─ delete TaxAgent [L78]
    └─ reads_from TaxAgents
  └─ write TaxAgent [L74]
    └─ reads_from TaxAgents
  └─ uses_service IControlledRepository<TaxAgent>
    └─ method WriteQuery [L74]
      └─ ... (no implementation details available)

[web] GET /api/ui/tax-agents/{id}  (Dataverse.Api.Controllers.UI.Core.TaxAgentController.Get)  [L40–L48] status=200 [auth=Authentication.UserPolicy]
  └─ maps_to TaxAgentDto [L43]
    └─ automapper.registration DataverseMappingProfile (TaxAgent->TaxAgentDto) [L253]
    └─ automapper.registration ExternalApiMappingProfile (TaxAgent->TaxAgentDto) [L79]
  └─ calls TaxAgentRepository.ReadQuery [L43]
  └─ query TaxAgent [L43]
    └─ reads_from TaxAgents
  └─ uses_service IControlledRepository<TaxAgent>
    └─ method ReadQuery [L43]
      └─ ... (no implementation details available)

[web] GET /api/ui/tax-agents/  (Dataverse.Api.Controllers.UI.Core.TaxAgentController.GetAll)  [L32–L38] status=200 [auth=Authentication.UserPolicy]
  └─ calls TaxAgentRepository.ReadQuery [L35]
  └─ query TaxAgent [L35]
    └─ reads_from TaxAgents
  └─ uses_service IControlledRepository<TaxAgent>
    └─ method ReadQuery [L35]
      └─ ... (no implementation details available)

[web] PUT /api/ui/tax-agents/{id}  (Dataverse.Api.Controllers.UI.Core.TaxAgentController.Update)  [L59–L69] status=200 [auth=Authentication.UserPolicy,Authentication.AdminPolicy]
  └─ calls TaxAgentRepository.WriteQuery [L62]
  └─ write TaxAgent [L62]
    └─ reads_from TaxAgents
  └─ uses_service IControlledRepository<TaxAgent>
    └─ method WriteQuery [L62]
      └─ ... (no implementation details available)

[web] POST /api/ui/teams/  (Dataverse.Api.Controllers.UI.Core.TeamsController.Create)  [L110–L117] status=201 [auth=Authentication.UserPolicy,Authentication.AdminPolicy]
  └─ calls TeamRepository.Add [L115]
  └─ insert Team [L115]
    └─ reads_from Teams
  └─ uses_service FirmSettingsService
    └─ method GetCurrentSettingsAsync [L113]
      └─ implementation Dataverse.ApplicationService.Services.FirmSettingsService.GetCurrentSettingsAsync [L18-L97]
  └─ uses_service IControlledRepository<Team>
    └─ method Add [L115]
      └─ ... (no implementation details available)

[web] DELETE /api/ui/teams/{id:Guid}  (Dataverse.Api.Controllers.UI.Core.TeamsController.Delete)  [L132–L137] status=200 [auth=Authentication.UserPolicy,Authentication.AdminPolicy]
  └─ calls TeamRepository.WriteQuery [L135]
  └─ write Team [L135]
    └─ reads_from Teams
  └─ uses_service IControlledRepository<Team>
    └─ method WriteQuery [L135]
      └─ ... (no implementation details available)

[web] GET /api/ui/teams/{id}  (Dataverse.Api.Controllers.UI.Core.TeamsController.Get)  [L51–L57] status=200 [auth=Authentication.UserPolicy]
  └─ maps_to TeamDto [L54]
    └─ automapper.registration DataverseMappingProfile (Team->TeamDto) [L149]
    └─ automapper.registration ExternalApiMappingProfile (Team->TeamDto) [L75]
    └─ automapper.registration CirrusMappingProfile (Team->TeamDto) [L138]
    └─ automapper.registration WorkpapersMappingProfile (Team->TeamDto) [L190]
  └─ calls TeamRepository.ReadQuery [L54]
  └─ query Team [L54]
    └─ reads_from Teams
  └─ uses_service IControlledRepository<Team>
    └─ method ReadQuery [L54]
      └─ ... (no implementation details available)

[web] GET /api/ui/teams/  (Dataverse.Api.Controllers.UI.Core.TeamsController.GetAll)  [L84–L104] status=200 [auth=Authentication.UserPolicy]
  └─ maps_to TeamLightDto [L98]
    └─ automapper.registration CirrusMappingProfile (Team->TeamLightDto) [L139]
    └─ automapper.registration WorkpapersMappingProfile (Team->TeamLightDto) [L188]
    └─ automapper.registration DataverseMappingProfile (Team->TeamLightDto) [L150]
  └─ calls TeamRepository.ReadQuery [L98]
  └─ query Team [L98]
    └─ reads_from Teams
  └─ uses_service IControlledRepository<Team>
    └─ method ReadQuery [L98]
      └─ ... (no implementation details available)
  └─ uses_service UserService
    └─ method IsInRole [L90]
      └─ implementation Dataverse.ApplicationService.Services.UserService.IsInRole [L15-L185]

[web] GET /api/ui/teams/{id}/team-users  (Dataverse.Api.Controllers.UI.Core.TeamsController.GetTeamUsers)  [L66–L75] status=200 [auth=Authentication.UserPolicy]
  └─ maps_to TeamUserWithUserDto [L69]
  └─ calls TeamRepository.ReadQuery [L69]
  └─ query Team [L69]
    └─ reads_from Teams
  └─ uses_service IControlledRepository<Team>
    └─ method ReadQuery [L69]
      └─ ... (no implementation details available)

[web] PUT /api/ui/teams/{id}  (Dataverse.Api.Controllers.UI.Core.TeamsController.Update)  [L122–L127] status=200 [auth=Authentication.UserPolicy,Authentication.AdminPolicy]
  └─ sends_request UpdateTeamWithUsersCommand [L125]
    └─ handled_by Dataverse.ApplicationService.Commands.Teams.UpdateTeamWithUsersCommandHandler.Handle [L30–L127]
      └─ uses_service FirmSettingsService
        └─ method GetCurrentSettingsAsync [L51]
          └─ implementation Dataverse.ApplicationService.Services.FirmSettingsService.GetCurrentSettingsAsync [L18-L97]
      └─ uses_service IControlledRepository<Team>
        └─ method WriteQuery [L52]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<User>
        └─ method ReadQuery [L65]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L77]
          └─ implementation Dataverse.Services.Features.Requests.RequestProcessor.ProcessAsync [L8-L45]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle

[web] POST /api/ui/users/bulk/invite  (Dataverse.Api.Controllers.UI.Core.UsersController.BulkResendInvite)  [L292–L305] status=201 [auth=Authentication.UserPolicy,Authentication.AdminPolicy]
  └─ sends_request ProcessInviteCommand [L300]
    └─ handled_by Dataverse.ApplicationService.Commands.Users.ProcessInviteCommandHandler.Handle [L29–L65]
      └─ uses_service IControlledRepository<User>
        └─ method ReadQuery [L46]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L53]
          └─ implementation Dataverse.Services.Features.Requests.RequestProcessor.ProcessAsync [L8-L45]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle

[web] PUT /api/ui/users/bulk/licenses  (Dataverse.Api.Controllers.UI.Core.UsersController.BulkUpdateLicenses)  [L264–L275] status=200 [auth=Authentication.UserPolicy,Authentication.AdminPolicy]
  └─ sends_request UpdateUserCommand [L271]
    └─ handled_by Dataverse.ApplicationService.Commands.Users.UpdateUserCommandHandler.Handle [L42–L111]
      └─ maps_to UserWithIdentityInfoDto [L95]
      └─ uses_service IControlledRepository<FirmSettings>
        └─ method ReadQuery [L71]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<Office>
        └─ method ReadQuery [L77]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<Team>
        └─ method ReadQuery [L78]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<User>
        └─ method WriteQuery [L68]
          └─ ... (no implementation details available)
      └─ uses_service IMapper
        └─ method Map [L95]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L100]
          └─ implementation Dataverse.Services.Features.Requests.RequestProcessor.ProcessAsync [L8-L45]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle

[web] PUT /api/ui/users/bulk  (Dataverse.Api.Controllers.UI.Core.UsersController.BulkUpdateUsers)  [L277–L290] status=200 [auth=Authentication.UserPolicy,Authentication.AdminPolicy]
  └─ sends_request UpdateUserCommand [L285]
    └─ handled_by Dataverse.ApplicationService.Commands.Users.UpdateUserCommandHandler.Handle [L42–L111]
      └─ maps_to UserWithIdentityInfoDto [L95]
      └─ uses_service IControlledRepository<FirmSettings>
        └─ method ReadQuery [L71]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<Office>
        └─ method ReadQuery [L77]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<Team>
        └─ method ReadQuery [L78]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<User>
        └─ method WriteQuery [L68]
          └─ ... (no implementation details available)
      └─ uses_service IMapper
        └─ method Map [L95]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L100]
          └─ implementation Dataverse.Services.Features.Requests.RequestProcessor.ProcessAsync [L8-L45]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle

[web] POST /api/ui/users/  (Dataverse.Api.Controllers.UI.Core.UsersController.CreateUser)  [L221–L227] status=201 [auth=Authentication.UserPolicy,Authentication.AdminPolicy]
  └─ sends_request CreateOrUpdateUserCommand [L225]
    └─ handled_by Dataverse.ApplicationService.Commands.Users.CreateOrLinkWithDataverseCommandHandler.Handle [L57–L149]
      └─ uses_service UserService
        └─ method IsInRole [L103]
          └─ implementation Dataverse.ApplicationService.Services.UserService.IsInRole [L15-L185]
      └─ uses_service EventPublisher (InstancePerLifetimeScope)
        └─ method PublishAllEventsForEntity [L145]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<FirmSettings>
        └─ method ReadQuery [L111]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<Office>
        └─ method ReadQuery [L86]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<Team>
        └─ method ReadQuery [L87]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<User>
        └─ method WriteQuery [L89]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L141]
          └─ implementation Dataverse.Services.Features.Requests.RequestProcessor.ProcessAsync [L8-L45]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle

[web] GET /api/ui/users/export/excel/download  (Dataverse.Api.Controllers.UI.Core.UsersController.ExportToExcel)  [L179–L192] status=200 [auth=Authentication.UserPolicy]
  └─ maps_to UserExportProfileDto [L182]
    └─ automapper.registration DataverseMappingProfile (User->UserExportProfileDto) [L109]
  └─ calls UserRepository.ReadQuery [L182]
  └─ query User [L182]
  └─ uses_service TenantService
    └─ method GetCurrentTenantAsync [L188]
      └─ implementation Dataverse.Services.Features.Tenants.TenantService.GetCurrentTenantAsync [L6-L27]
  └─ uses_service IControlledRepository<User>
    └─ method ReadQuery [L182]
      └─ ... (no implementation details available)
  └─ sends_request CreateDownloadCommand [L190]
    └─ handled_by Cirrus.ApplicationService.Services.Commands.CreateDownloadCommandHandler.Handle [L48–L73]
      └─ uses_service IStorageService (InstancePerLifetimeScope)
        └─ method CreateDownloadUrl [L60]
          └─ implementation IStorageService.CreateDownloadUrl [L9-L9]
          └─ ... (no implementation details available)
      └─ uses_storage IStorageService.CreateDownloadUrl [L60]
  └─ sends_request ExportUsersToExcelCommand [L189]
    └─ handled_by Dataverse.ApplicationService.Commands.Users.ExportUsersToExcelCommandHandler.Handle [L24–L42]
      └─ uses_service UserExcelWriter
        └─ method WriteAsync [L38]
          └─ ... (no implementation details available)

[web] POST /api/ui/users/{userId:Guid}/share-point-sync  (Dataverse.Api.Controllers.UI.Core.UsersController.ForceSyncSharePoint)  [L369–L383] status=201 [auth=Authentication.UserPolicy]
  └─ calls DataverseEntityFailureLogRepository.Remove [L382]
  └─ calls DataverseEntityFailureLogRepository.WriteQuery [L380]
  └─ delete DataverseEntityFailureLog [L382]
    └─ reads_from DataverseEntityFailureLogs
  └─ write DataverseEntityFailureLog [L380]
    └─ reads_from DataverseEntityFailureLogs
  └─ uses_service MockMessagingService
    └─ method RequestSharePointSiteUpdate [L374]
      └─ ... (no implementation details available)
  └─ uses_service TenantService
    └─ method GetCurrentTenantAsync [L372]
      └─ implementation Dataverse.Services.Features.Tenants.TenantService.GetCurrentTenantAsync [L6-L27]
  └─ uses_service IControlledRepository<DataverseEntityFailureLog>
    └─ method WriteQuery [L380]
      └─ ... (no implementation details available)

[web] GET /api/ui/users/getAll  (Dataverse.Api.Controllers.UI.Core.UsersController.GetAll)  [L169–L177] status=200 [auth=Authentication.UserPolicy]
  └─ maps_to UserLightDto [L172]
    └─ automapper.registration CirrusMappingProfile (User->UserLightDto) [L104]
    └─ automapper.registration DataverseMappingProfile (User->UserLightDto) [L84]
    └─ automapper.registration WorkpapersMappingProfile (User->UserLightDto) [L97]
  └─ calls UserRepository.ReadQuery [L172]
  └─ query User [L172]
  └─ uses_service IControlledRepository<User>
    └─ method ReadQuery [L172]
      └─ ... (no implementation details available)

[web] GET /api/ui/users/{id:guid}  (Dataverse.Api.Controllers.UI.Core.UsersController.GetUser)  [L78–L85] status=200 [auth=Authentication.UserPolicy]
  └─ sends_request GetUserQuery [L82]
    └─ handled_by Dataverse.ApplicationService.Queries.Firms.Users.GetUserQueryHandler.Handle [L22–L40]
      └─ maps_to UserDto [L35]
        └─ automapper.registration ExternalApiMappingProfile (User->UserDto) [L61]
        └─ automapper.registration CirrusMappingProfile (User->UserDto) [L110]
        └─ automapper.registration WorkpapersMappingProfile (User->UserDto) [L106]
        └─ automapper.registration DataverseMappingProfile (User->UserDto) [L77]
      └─ uses_service IControlledRepository<User>
        └─ method ReadQuery [L35]
          └─ ... (no implementation details available)

[web] GET /api/ui/users/{id:Guid}/audit  (Dataverse.Api.Controllers.UI.Core.UsersController.GetUserAudit)  [L194–L219] status=200 [auth=Authentication.UserPolicy]
  └─ calls UserRepository.ReadQuery [L197]
  └─ query User [L197]
  └─ uses_service IControlledRepository<User>
    └─ method ReadQuery [L197]
      └─ ... (no implementation details available)

[web] GET /api/ui/users/intercom-profile  (Dataverse.Api.Controllers.UI.Core.UsersController.IntercomProfile)  [L95–L123] status=200 [auth=Authentication.UserPolicy]
  └─ uses_service IntercomService
    └─ method GetContactByExternalId [L103]
      └─ implementation Dataverse.Services.ModuleIntegrations.Services.IntercomService.GetContactByExternalId [L17-L124]
  └─ uses_service UserService
    └─ method GetUserAsync [L98]
      └─ implementation Dataverse.ApplicationService.Services.UserService.GetUserAsync [L15-L185]

[web] POST /api/ui/users/{userId:guid}/request-identity-account  (Dataverse.Api.Controllers.UI.Core.UsersController.Invite)  [L326–L334] status=201 [auth=Authentication.UserPolicy,Authentication.AdminPolicy]
  └─ calls UserRepository.WriteQuery [L330]
  └─ write User [L330]
  └─ uses_service IControlledRepository<User>
    └─ method WriteQuery [L330]
      └─ ... (no implementation details available)

[web] GET /api/ui/users/profile  (Dataverse.Api.Controllers.UI.Core.UsersController.Profile)  [L87–L93] status=200 [auth=Authentication.UserPolicy]
  └─ sends_request GetUserProfileQuery [L90]
    └─ handled_by Dataverse.ApplicationService.Queries.Firms.Users.GetUserProfileQueryHandler.Handle [L34–L129]
      └─ calls TenantRepository.ReadTable [L79]
      └─ maps_to FirmSettingsDto [L91]
        └─ automapper.registration DataverseMappingProfile (FirmSettings->FirmSettingsDto) [L121]
      └─ maps_to TenantLightDto [L118]
      └─ maps_to IntegrationSettingsDto [L104]
        └─ automapper.registration DataverseMappingProfile (IntegrationSettings->IntegrationSettingsDto) [L294]
      └─ maps_to TenantDto [L112]
      └─ maps_to NotificationDto [L120]
        └─ automapper.registration DataverseMappingProfile (Notification->NotificationDto) [L116]
      └─ maps_to UserProfileDto [L74]
        └─ automapper.registration DataverseMappingProfile (User->UserProfileDto) [L93]
        └─ automapper.registration CirrusMappingProfile (User->UserProfileDto) [L115]
        └─ automapper.registration WorkpapersMappingProfile (User->UserProfileDto) [L109]
      └─ uses_service FirmSettingsService
        └─ method GetCurrentWorkpapersSettingsAsync [L101]
          └─ implementation Dataverse.ApplicationService.Services.FirmSettingsService.GetCurrentWorkpapersSettingsAsync [L18-L97]
      └─ uses_service UserService
        └─ method GetUserId [L73]
          └─ implementation Dataverse.ApplicationService.Services.UserService.GetUserId [L15-L185]
      └─ uses_service TenantService
        └─ method GetCurrentTenantAsync [L77]
          └─ implementation Dataverse.Services.Features.Tenants.TenantService.GetCurrentTenantAsync [L6-L27]
          └─ implementation Dataverse.Services.Features.Tenants.TenantService.GetCurrentTenantAsync [L6-L27]
      └─ uses_service FirmFeatureFlagService
        └─ method GetAvailableFeaturesForFirm [L96]
          └─ implementation Dataverse.ApplicationService.Features.FeatureFlags.FirmFeatureFlagService.GetAvailableFeaturesForFirm [L14-L91]
      └─ uses_service IControlledRepository<FirmSettings>
        └─ method ReadQuery [L91]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<IntegrationSettings>
        └─ method ReadQuery [L104]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<Notification>
        └─ method ReadQuery [L120]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<User>
        └─ method ReadQuery [L74]
          └─ ... (no implementation details available)
      └─ uses_service IMapper
        └─ method ConfigurationProvider [L93]
          └─ ... (no implementation details available)

[web] POST /api/ui/users/{userId:guid}/resend-invite  (Dataverse.Api.Controllers.UI.Core.UsersController.ResendInvite)  [L307–L324] status=201 [auth=Authentication.UserPolicy,Authentication.AdminPolicy]
  └─ calls UserRepository.WriteQuery [L318]
  └─ calls UserRepository.ReadQuery [L311]
  └─ query User [L311]
  └─ write User [L318]
  └─ uses_service IControlledRepository<User>
    └─ method ReadQuery [L311]
      └─ ... (no implementation details available)
  └─ sends_request ResendInviteCommand [L316]
    └─ handled_by Cirrus.Central.Commands.ResendInviteCommandHandler.Handle [L33–L74]
      └─ calls CentralRepository.Commit [L68]
      └─ calls CentralRepository.WriteTable [L50]
      └─ uses_service DataverseService
        └─ method Post [L59]
          └─ implementation Cirrus.Central.Features.MachineToMachine.DataverseService.Post [L14-L66]
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L64]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)

[web] GET /api/ui/users  (Dataverse.Api.Controllers.UI.Core.UsersController.Search)  [L125–L167] status=200 [auth=Authentication.UserPolicy]
  └─ sends_request FindUsersLightQuery [L164]
  └─ sends_request FindUsersUltraLightQuery [L154]
    └─ handled_by Dataverse.ApplicationService.Queries.Firms.Users.FindSingleTenantCentralUsersQueryHandler.Handle [L85–L194]
      └─ uses_service IControlledRepository<User>
        └─ method ReadQuery [L125]
          └─ ... (no implementation details available)
  └─ sends_request FindUsersUltraLightWithStandardHoursQuery [L160]
  └─ sends_request FindUsersWithLicensesQuery [L148]

[web] POST /api/ui/users/{userId:Guid}/sync  (Dataverse.Api.Controllers.UI.Core.UsersController.SyncToAllProducts)  [L339–L364] status=201 [auth=Authentication.UserPolicy]
  └─ calls UserRepository.ReadQuery [L342]
  └─ calls DataverseEntityFailureLogRepository.Remove [L359]
  └─ calls DataverseEntityFailureLogRepository.WriteQuery [L357]
  └─ delete DataverseEntityFailureLog [L359]
    └─ reads_from DataverseEntityFailureLogs
  └─ write DataverseEntityFailureLog [L357]
    └─ reads_from DataverseEntityFailureLogs
  └─ query User [L342]
  └─ uses_service MockMessagingService
    └─ method RequestSharePointSiteUpdate [L351]
      └─ ... (no implementation details available)
  └─ uses_service TenantService
    └─ method GetCurrentTenantAsync [L349]
      └─ implementation Dataverse.Services.Features.Tenants.TenantService.GetCurrentTenantAsync [L6-L27]
  └─ uses_service IControlledRepository<DataverseEntityFailureLog>
    └─ method WriteQuery [L357]
      └─ ... (no implementation details available)
  └─ uses_service IControlledRepository<User>
    └─ method ReadQuery [L342]
      └─ ... (no implementation details available)
  └─ sends_request BulkPropagateCommand [L362]
    └─ handled_by Dataverse.ApplicationService.Commands.DataverseEntity.BulkPropagateCommandHandler.Handle [L45–L168]
      └─ calls TenantRepository.ReadTable [L159]
      └─ uses_service TenantService
        └─ method GetCurrentTenantAsync [L72]
          └─ implementation Dataverse.Services.Features.Tenants.TenantService.GetCurrentTenantAsync [L6-L27]
          └─ implementation Dataverse.Services.Features.Tenants.TenantService.GetCurrentTenantAsync [L6-L27]
      └─ uses_service MockMessagingService
        └─ method RequestPropagation [L141]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<DataverseEntityFailureLog>
        └─ method WriteQuery [L145]
          └─ ... (no implementation details available)
      └─ uses_service IMapper
        └─ method ConfigurationProvider [L136]
          └─ ... (no implementation details available)

[web] PUT /api/ui/users/{id}  (Dataverse.Api.Controllers.UI.Core.UsersController.Update)  [L242–L247] status=200 [auth=Authentication.UserPolicy]
  └─ uses_service UserService
    └─ method GetUserId [L245]
      └─ implementation Dataverse.ApplicationService.Services.UserService.GetUserId [L15-L185]
  └─ sends_request UpdateUserCommand [L246]
    └─ handled_by Dataverse.ApplicationService.Commands.Users.UpdateUserCommandHandler.Handle [L42–L111]
      └─ maps_to UserWithIdentityInfoDto [L95]
      └─ uses_service IControlledRepository<FirmSettings>
        └─ method ReadQuery [L71]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<Office>
        └─ method ReadQuery [L77]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<Team>
        └─ method ReadQuery [L78]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<User>
        └─ method WriteQuery [L68]
          └─ ... (no implementation details available)
      └─ uses_service IMapper
        └─ method Map [L95]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L100]
          └─ implementation Dataverse.Services.Features.Requests.RequestProcessor.ProcessAsync [L8-L45]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle

[web] PUT /api/ui/users/{id:guid}/licenses  (Dataverse.Api.Controllers.UI.Core.UsersController.UpdateLicenses)  [L252–L259] status=200 [auth=Authentication.UserPolicy,Authentication.AdminPolicy]
  └─ sends_request UpdateUserCommand [L257]
    └─ handled_by Dataverse.ApplicationService.Commands.Users.UpdateUserCommandHandler.Handle [L42–L111]
      └─ maps_to UserWithIdentityInfoDto [L95]
      └─ uses_service IControlledRepository<FirmSettings>
        └─ method ReadQuery [L71]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<Office>
        └─ method ReadQuery [L77]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<Team>
        └─ method ReadQuery [L78]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<User>
        └─ method WriteQuery [L68]
          └─ ... (no implementation details available)
      └─ uses_service IMapper
        └─ method Map [L95]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L100]
          └─ implementation Dataverse.Services.Features.Requests.RequestProcessor.ProcessAsync [L8-L45]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle

[web] POST /api/ui/documents/cabinets  (Dataverse.Api.Controllers.UI.Documents.CabinetsController.Create)  [L48–L56] status=201 [auth=Authentication.UserPolicy,Authentication.AdminPolicy]
  └─ maps_to CabinetDto (var cabinetDto) [L53]
  └─ calls CabinetRepository.Add [L52]
  └─ insert Cabinet [L52]
    └─ reads_from Cabinets
  └─ uses_service IControlledRepository<Cabinet>
    └─ method Add [L52]
      └─ ... (no implementation details available)
  └─ uses_service IMapper
    └─ method Map [L53]
      └─ ... (no implementation details available)

[web] DELETE /api/ui/documents/cabinets/{id:Guid}  (Dataverse.Api.Controllers.UI.Documents.CabinetsController.Delete)  [L70–L80] status=200 [auth=Authentication.UserPolicy,Authentication.AdminPolicy]
  └─ calls CabinetRepository.Remove [L77]
  └─ calls CabinetRepository.WriteQuery [L73]
  └─ delete Cabinet [L77]
    └─ reads_from Cabinets
  └─ write Cabinet [L73]
    └─ reads_from Cabinets
  └─ uses_service IControlledRepository<Cabinet>
    └─ method WriteQuery [L73]
      └─ ... (no implementation details available)

[web] GET /api/ui/documents/cabinets  (Dataverse.Api.Controllers.UI.Documents.CabinetsController.GetAll)  [L34–L46] status=200 [auth=Authentication.UserPolicy]
  └─ maps_to CabinetDto [L39]
    └─ automapper.registration DataverseMappingProfile (Cabinet->CabinetDto) [L398]
  └─ calls CabinetRepository.ReadQuery [L39]
  └─ query Cabinet [L39]
    └─ reads_from Cabinets
  └─ uses_service IControlledRepository<Cabinet>
    └─ method ReadQuery [L39]
      └─ ... (no implementation details available)

[web] PUT /api/ui/documents/cabinets/{id:Guid}  (Dataverse.Api.Controllers.UI.Documents.CabinetsController.Update)  [L58–L68] status=200 [auth=Authentication.UserPolicy,Authentication.AdminPolicy]
  └─ calls CabinetRepository.WriteQuery [L61]
  └─ write Cabinet [L61]
    └─ reads_from Cabinets
  └─ uses_service IControlledRepository<Cabinet>
    └─ method WriteQuery [L61]
      └─ ... (no implementation details available)

[web] DELETE /api/ui/documents/documents/  (Dataverse.Api.Controllers.UI.Documents.DocumentsController.BulkDeleteDocuments)  [L350–L371] status=200 [auth=Authentication.UserPolicy]
  └─ calls DocumentRepository.WriteQuery [L354]
  └─ write Document [L354]
    └─ reads_from Documents
  └─ uses_service IControlledRepository<Document>
    └─ method WriteQuery [L354]
      └─ ... (no implementation details available)
  └─ sends_request RecycleDocumentCommand [L369]
    └─ handled_by Dataverse.ApplicationService.Commands.Documents.RecycleDocumentCommandHandler.Handle [L28–L66]
      └─ uses_service IControlledRepository<Document>
        └─ method WriteQuery [L49]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<DocumentVersion>
        └─ method WriteQuery [L51]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L60]
          └─ implementation Dataverse.Services.Features.Requests.RequestProcessor.ProcessAsync [L8-L45]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle
  └─ sends_request CanIAccessDocumentQuery [L368]
    └─ handled_by Dataverse.ApplicationService.Queries.Documents.CanIAccessDocumentQueryHandler.Handle [L37–L82]
      └─ uses_service FirmSettingsService
        └─ method GetCurrentSettingsAsync [L66]
          └─ implementation Dataverse.ApplicationService.Services.FirmSettingsService.GetCurrentSettingsAsync [L18-L97]
      └─ uses_service UserService
        └─ method GetUserAsync [L61]
          └─ implementation Dataverse.ApplicationService.Services.UserService.GetUserAsync [L15-L185]
      └─ uses_service RequestInfoService
        └─ method IsValidServiceAccountRequest [L58]
          └─ implementation Dataverse.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L92]
          └─ implementation Dataverse.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L92]
          └─ implementation Dataverse.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L92]
      └─ uses_service IControlledRepository<Document>
        └─ method ReadQuery [L68]
          └─ ... (no implementation details available)

[web] PUT /api/ui/documents/documents/bulk  (Dataverse.Api.Controllers.UI.Documents.DocumentsController.BulkUpdateDocuments)  [L301–L308] status=200 [auth=Authentication.UserPolicy]
  └─ sends_request UpdateDocumentCommand [L306]

[web] PUT /api/ui/documents/documents/bulk-associations  (Dataverse.Api.Controllers.UI.Documents.DocumentsController.BulkUpdateDocumentsAssociations)  [L310–L323] status=200 [auth=Authentication.UserPolicy]
  └─ sends_request UpdateDocumentCommand [L321]

[web] GET /api/ui/documents/documents/{id}/can-i-check-in  (Dataverse.Api.Controllers.UI.Documents.DocumentsController.CanICheckInDocument)  [L225–L232] status=200 [auth=Authentication.UserPolicy]
  └─ sends_request CanIAccessDocumentQuery [L228]
    └─ handled_by Dataverse.ApplicationService.Queries.Documents.CanIAccessDocumentQueryHandler.Handle [L37–L82]
      └─ uses_service FirmSettingsService
        └─ method GetCurrentSettingsAsync [L66]
          └─ implementation Dataverse.ApplicationService.Services.FirmSettingsService.GetCurrentSettingsAsync [L18-L97]
      └─ uses_service UserService
        └─ method GetUserAsync [L61]
          └─ implementation Dataverse.ApplicationService.Services.UserService.GetUserAsync [L15-L185]
      └─ uses_service RequestInfoService
        └─ method IsValidServiceAccountRequest [L58]
          └─ implementation Dataverse.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L92]
          └─ implementation Dataverse.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L92]
          └─ implementation Dataverse.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L92]
      └─ uses_service IControlledRepository<Document>
        └─ method ReadQuery [L68]
          └─ ... (no implementation details available)
  └─ sends_request CanICheckInDocumentQuery [L229]
    └─ handled_by Dataverse.ApplicationService.Queries.Documents.CanICheckInDocumentQueryHandler.Handle [L29–L74]
      └─ uses_service UserService
        └─ method IsInRole [L47]
          └─ implementation Dataverse.ApplicationService.Services.UserService.IsInRole [L15-L185]
      └─ uses_service IControlledRepository<Document>
        └─ method ReadQuery [L49]
          └─ ... (no implementation details available)

[web] GET /api/ui/documents/documents/{documentId}/check-external-version  (Dataverse.Api.Controllers.UI.Documents.DocumentsController.CheckDocumentExternalVersion)  [L460–L465] status=200 [auth=Authentication.UserPolicy]
  └─ sends_request CheckNewVersionFromExternalSourceCommand [L463]
    └─ handled_by Dataverse.Connections.DataGet.Commands.CheckNewVersionFromExternalSourceCommandHandler.Handle [L36–L161]
      └─ maps_to IntegrationSettingsDto [L118]
        └─ automapper.registration DataverseMappingProfile (IntegrationSettings->IntegrationSettingsDto) [L294]
      └─ uses_service DataGetFyiService
        └─ method GetExternalDocumentAsync [L104]
          └─ implementation Dataverse.Connections.DataGet.Services.DataGetFyiService.GetExternalDocumentAsync [L19-L291]
      └─ uses_service DataGetImanageService
        └─ method GetDocumentVersion [L125]
          └─ implementation Dataverse.Connections.DataGet.Services.DataGetImanageService.GetDocumentVersion [L19-L225]
      └─ uses_service IControlledRepository<ExternalEntityVersion>
        └─ method ReadQuery [L73]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<IntegrationSettings>
        └─ method ReadQuery [L118]
          └─ ... (no implementation details available)
      └─ uses_service IMapper
        └─ method ConfigurationProvider [L119]
          └─ ... (no implementation details available)
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L90]
      └─ uses_cache IDistributedCache.TryGetRecordAsync [read] [L68]

[web] POST /api/ui/documents/documents/{id}/check-in  (Dataverse.Api.Controllers.UI.Documents.DocumentsController.CheckInDocument)  [L234–L244] status=201 [auth=Authentication.UserPolicy]
  └─ sends_request CheckInDocumentCommand [L241]
    └─ handled_by Dataverse.ApplicationService.Commands.Documents.CheckInDocumentCommandHandler.Handle [L35–L109]
      └─ uses_service UserService
        └─ method GetUserId [L83]
          └─ implementation Dataverse.ApplicationService.Services.UserService.GetUserId [L15-L185]
      └─ uses_service UploadStorageService
        └─ method CopyDocument [L81]
          └─ implementation Dataverse.Services.DocumentStorage.UploadStorageService.CopyDocument [L17-L87]
      └─ uses_service DocumentServiceFactory
        └─ method GetDefaultColdStorage [L93]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<Contact>
        └─ method ReadQuery [L101]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<DocumentVersion>
        └─ method WriteQuery [L67]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L65]
          └─ implementation Dataverse.Services.Features.Requests.RequestProcessor.ProcessAsync [L8-L45]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle
      └─ uses_storage UploadStorageService.CopyDocument [L81]
  └─ sends_request CanIAccessDocumentQuery [L240]
    └─ handled_by Dataverse.ApplicationService.Queries.Documents.CanIAccessDocumentQueryHandler.Handle [L37–L82]
      └─ uses_service FirmSettingsService
        └─ method GetCurrentSettingsAsync [L66]
          └─ implementation Dataverse.ApplicationService.Services.FirmSettingsService.GetCurrentSettingsAsync [L18-L97]
      └─ uses_service UserService
        └─ method GetUserAsync [L61]
          └─ implementation Dataverse.ApplicationService.Services.UserService.GetUserAsync [L15-L185]
      └─ uses_service RequestInfoService
        └─ method IsValidServiceAccountRequest [L58]
          └─ implementation Dataverse.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L92]
          └─ implementation Dataverse.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L92]
          └─ implementation Dataverse.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L92]
      └─ uses_service IControlledRepository<Document>
        └─ method ReadQuery [L68]
          └─ ... (no implementation details available)

[web] POST /api/ui/documents/documents/{id}/check-out  (Dataverse.Api.Controllers.UI.Documents.DocumentsController.CheckOutDocument)  [L216–L223] status=201 [auth=Authentication.UserPolicy]
  └─ sends_request CheckOutDocumentCommand [L220]
    └─ handled_by Dataverse.ApplicationService.Commands.Documents.CheckOutDocumentCommandHandler.Handle [L27–L67]
      └─ uses_service UserService
        └─ method GetUserId [L54]
          └─ implementation Dataverse.ApplicationService.Services.UserService.GetUserId [L15-L185]
      └─ uses_service IControlledRepository<DocumentVersion>
        └─ method WriteQuery [L48]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L57]
          └─ implementation Dataverse.Services.Features.Requests.RequestProcessor.ProcessAsync [L8-L45]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle
  └─ sends_request CanIAccessDocumentQuery [L219]
    └─ handled_by Dataverse.ApplicationService.Queries.Documents.CanIAccessDocumentQueryHandler.Handle [L37–L82]
      └─ uses_service FirmSettingsService
        └─ method GetCurrentSettingsAsync [L66]
          └─ implementation Dataverse.ApplicationService.Services.FirmSettingsService.GetCurrentSettingsAsync [L18-L97]
      └─ uses_service UserService
        └─ method GetUserAsync [L61]
          └─ implementation Dataverse.ApplicationService.Services.UserService.GetUserAsync [L15-L185]
      └─ uses_service RequestInfoService
        └─ method IsValidServiceAccountRequest [L58]
          └─ implementation Dataverse.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L92]
          └─ implementation Dataverse.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L92]
          └─ implementation Dataverse.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L92]
      └─ uses_service IControlledRepository<Document>
        └─ method ReadQuery [L68]
          └─ ... (no implementation details available)

[web] POST /api/ui/documents/documents/  (Dataverse.Api.Controllers.UI.Documents.DocumentsController.CreateDocument)  [L246–L253] status=201 [auth=Authentication.UserPolicy]
  └─ sends_request CreateDocumentCommand [L250]
    └─ handled_by DataGet.Integrations.Fyi.Api.Commands.CreateDocumentCommandHandler.Handle [L18–L33]
      └─ uses_service FyiService
        └─ method CreateDocument [L29]
          └─ implementation DataGet.Integrations.Fyi.Api.FyiService.CreateDocument [L30-L166]
  └─ returns FyiDocumentDto [L250]

[web] DELETE /api/ui/documents/documents/{id:guid}/hard  (Dataverse.Api.Controllers.UI.Documents.DocumentsController.DeleteDocument)  [L343–L348] status=200 [auth=Authentication.UserPolicy,Authentication.AdminPolicy]
  └─ sends_request DeleteDocumentCommand [L347]
    └─ handled_by Dataverse.ApplicationService.Commands.Documents.DeleteDocumentCommandHandler.Handle [L22–L45]
      └─ uses_service IControlledRepository<Document>
        └─ method WriteQuery [L37]
          └─ ... (no implementation details available)
  └─ sends_request CanIAccessDocumentQuery [L346]
    └─ handled_by Dataverse.ApplicationService.Queries.Documents.CanIAccessDocumentQueryHandler.Handle [L37–L82]
      └─ uses_service FirmSettingsService
        └─ method GetCurrentSettingsAsync [L66]
          └─ implementation Dataverse.ApplicationService.Services.FirmSettingsService.GetCurrentSettingsAsync [L18-L97]
      └─ uses_service UserService
        └─ method GetUserAsync [L61]
          └─ implementation Dataverse.ApplicationService.Services.UserService.GetUserAsync [L15-L185]
      └─ uses_service RequestInfoService
        └─ method IsValidServiceAccountRequest [L58]
          └─ implementation Dataverse.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L92]
          └─ implementation Dataverse.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L92]
          └─ implementation Dataverse.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L92]
      └─ uses_service IControlledRepository<Document>
        └─ method ReadQuery [L68]
          └─ ... (no implementation details available)

[web] POST /api/ui/documents/documents/download-and-validate  (Dataverse.Api.Controllers.UI.Documents.DocumentsController.DownloadAndValidateDocuments)  [L255–L283] status=201 [auth=Authentication.UserPolicy]
  └─ maps_to IntegrationSettingsDto [L263]
    └─ automapper.registration DataverseMappingProfile (IntegrationSettings->IntegrationSettingsDto) [L294]
  └─ calls IntegrationSettingsRepository.ReadQuery [L263]
  └─ query IntegrationSettings [L263]
    └─ reads_from IntegrationSettingss
  └─ uses_service IControlledRepository<IntegrationSettings>
    └─ method ReadQuery [L263]
      └─ ... (no implementation details available)
  └─ uses_service IDatagetImanageService (AddTransient)
    └─ method GetDocumentDownloadUrlAsync [L270]
      └─ implementation Dataverse.Connections.DataGet.Services.DataGetImanageService.GetDocumentDownloadUrlAsync [L19-L225]
  └─ sends_request IManageDocumentDownloadAndUploadCommand [L273]
    └─ handled_by Dataverse.ApplicationService.Commands.IManage.IManageDocumentDownloadAndUploadCommandHandler.Handle [L25–L108]
      └─ uses_service StorageService
        └─ method UploadFile [L58]
          └─ implementation Dataverse.Services.Features.Storage.StorageService.UploadFile [L18-L331]
      └─ uses_storage StorageService.UploadFile [L58]
  └─ sends_request FileDownloadAndUploadFromUriCommand [L277]
    └─ handled_by Dataverse.Services.Features.FileUpload.FileDownloadAndUploadFromUriCommandHandler.Handle [L25–L124]
      └─ uses_client HttpClient [L40]
      └─ uses_service StorageService
        └─ method UploadFile [L60]
          └─ implementation Dataverse.Services.Features.Storage.StorageService.UploadFile [L18-L331]
      └─ uses_service HttpClient (SingleInstance)
        └─ method GetAsync [L40]
          └─ ... (no implementation details available)
      └─ uses_storage StorageService.UploadFile [L60]

[web] GET /api/ui/documents/documents/{id}/download  (Dataverse.Api.Controllers.UI.Documents.DocumentsController.DownloadDocument)  [L189–L196] status=200 [auth=Authentication.UserPolicy]
  └─ sends_request CanIAccessDocumentQuery [L192]
    └─ handled_by Dataverse.ApplicationService.Queries.Documents.CanIAccessDocumentQueryHandler.Handle [L37–L82]
      └─ uses_service FirmSettingsService
        └─ method GetCurrentSettingsAsync [L66]
          └─ implementation Dataverse.ApplicationService.Services.FirmSettingsService.GetCurrentSettingsAsync [L18-L97]
      └─ uses_service UserService
        └─ method GetUserAsync [L61]
          └─ implementation Dataverse.ApplicationService.Services.UserService.GetUserAsync [L15-L185]
      └─ uses_service RequestInfoService
        └─ method IsValidServiceAccountRequest [L58]
          └─ implementation Dataverse.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L92]
          └─ implementation Dataverse.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L92]
          └─ implementation Dataverse.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L92]
      └─ uses_service IControlledRepository<Document>
        └─ method ReadQuery [L68]
          └─ ... (no implementation details available)
  └─ sends_request GetDocumentDownloadLink [L193]
    └─ handled_by Dataverse.ApplicationService.Queries.Documents.GetDocumentDownloadLinkHandler.Handle [L30–L77]
      └─ maps_to SecureDocumentStoreDto [L65]
      └─ uses_service UserService
        └─ method GetUserId [L73]
          └─ implementation Dataverse.ApplicationService.Services.UserService.GetUserId [L15-L185]
      └─ uses_service DocumentServiceFactory
        └─ method GetForStore [L65]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<Document>
        └─ method ReadQuery [L56]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<DocumentAuditLog>
        └─ method Add [L68]
          └─ ... (no implementation details available)
      └─ uses_service IMapper
        └─ method Map [L65]
          └─ ... (no implementation details available)

[web] POST /api/ui/documents/documents/duplicate-check  (Dataverse.Api.Controllers.UI.Documents.DocumentsController.DuplicateCheck)  [L373–L428] status=201 [auth=Authentication.UserPolicy]
  └─ calls DocumentRepository.ReadQuery [L403]
  └─ query Document [L403]
    └─ reads_from Documents
  └─ uses_service IControlledRepository<Document>
    └─ method ReadQuery [L403]
      └─ ... (no implementation details available)

[web] GET /api/ui/documents/documents/{id}/edit  (Dataverse.Api.Controllers.UI.Documents.DocumentsController.EditDocument)  [L292–L299] status=200 [auth=Authentication.UserPolicy]
  └─ sends_request EditDocumentCommand [L296]
    └─ handled_by Dataverse.ApplicationService.Commands.Documents.EditDocumentCommandHandler.Handle [L41–L125]
      └─ uses_service UserService
        └─ method GetUserId [L111]
          └─ implementation Dataverse.ApplicationService.Services.UserService.GetUserId [L15-L185]
      └─ uses_service DocumentServiceFactory
        └─ method GetDocumentWithService [L83]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<DocumentAuditLog>
        └─ method Add [L106]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<DocumentVersion>
        └─ method WriteQuery [L71]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L82]
          └─ implementation Dataverse.Services.Features.Requests.RequestProcessor.ProcessAsync [L8-L45]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle
  └─ sends_request CanIAccessDocumentQuery [L295]
    └─ handled_by Dataverse.ApplicationService.Queries.Documents.CanIAccessDocumentQueryHandler.Handle [L37–L82]
      └─ uses_service FirmSettingsService
        └─ method GetCurrentSettingsAsync [L66]
          └─ implementation Dataverse.ApplicationService.Services.FirmSettingsService.GetCurrentSettingsAsync [L18-L97]
      └─ uses_service UserService
        └─ method GetUserAsync [L61]
          └─ implementation Dataverse.ApplicationService.Services.UserService.GetUserAsync [L15-L185]
      └─ uses_service RequestInfoService
        └─ method IsValidServiceAccountRequest [L58]
          └─ implementation Dataverse.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L92]
          └─ implementation Dataverse.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L92]
          └─ implementation Dataverse.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L92]
      └─ uses_service IControlledRepository<Document>
        └─ method ReadQuery [L68]
          └─ ... (no implementation details available)

[web] GET /api/ui/documents/documents/  (Dataverse.Api.Controllers.UI.Documents.DocumentsController.FindDocuments)  [L80–L136] status=200 [auth=Authentication.UserPolicy]
  └─ sends_request FindDocumentsQuery [L110]
    └─ handled_by Dataverse.ApplicationService.Queries.Documents.FindDocumentsQueryHandler.Handle [L77–L428]
      └─ uses_service FirmSettingsService
        └─ method GetCurrentSettingsAsync [L104]
          └─ implementation Dataverse.ApplicationService.Services.FirmSettingsService.GetCurrentSettingsAsync [L18-L97]
      └─ uses_service UserService
        └─ method GetUserAsync [L104]
          └─ implementation Dataverse.ApplicationService.Services.UserService.GetUserAsync [L15-L185]
      └─ uses_service IControlledRepository<Document>
        └─ method ReadQuery [L103]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<DocumentTag>
        └─ method ReadQuery [L373]
          └─ ... (no implementation details available)

[web] GET /api/ui/documents/documents/{id}  (Dataverse.Api.Controllers.UI.Documents.DocumentsController.GetDocument)  [L138–L147] status=200 [auth=Authentication.UserPolicy]
  └─ maps_to DocumentDto [L142]
    └─ automapper.registration DataverseMappingProfile (Document->DocumentDto) [L405]
  └─ calls DocumentRepository.ReadQuery [L142]
  └─ query Document [L142]
    └─ reads_from Documents
  └─ uses_service IControlledRepository<Document>
    └─ method ReadQuery [L142]
      └─ ... (no implementation details available)
  └─ sends_request CanIAccessDocumentQuery [L141]
    └─ handled_by Dataverse.ApplicationService.Queries.Documents.CanIAccessDocumentQueryHandler.Handle [L37–L82]
      └─ uses_service FirmSettingsService
        └─ method GetCurrentSettingsAsync [L66]
          └─ implementation Dataverse.ApplicationService.Services.FirmSettingsService.GetCurrentSettingsAsync [L18-L97]
      └─ uses_service UserService
        └─ method GetUserAsync [L61]
          └─ implementation Dataverse.ApplicationService.Services.UserService.GetUserAsync [L15-L185]
      └─ uses_service RequestInfoService
        └─ method IsValidServiceAccountRequest [L58]
          └─ implementation Dataverse.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L92]
          └─ implementation Dataverse.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L92]
          └─ implementation Dataverse.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L92]
      └─ uses_service IControlledRepository<Document>
        └─ method ReadQuery [L68]
          └─ ... (no implementation details available)

[web] GET /api/ui/documents/documents/associations  (Dataverse.Api.Controllers.UI.Documents.DocumentsController.GetDocumentAssociations)  [L149–L167] status=200 [auth=Authentication.UserPolicy]
  └─ sends_request CanIAccessDocumentQuery [L159]
    └─ handled_by Dataverse.ApplicationService.Queries.Documents.CanIAccessDocumentQueryHandler.Handle [L37–L82]
      └─ uses_service FirmSettingsService
        └─ method GetCurrentSettingsAsync [L66]
          └─ implementation Dataverse.ApplicationService.Services.FirmSettingsService.GetCurrentSettingsAsync [L18-L97]
      └─ uses_service UserService
        └─ method GetUserAsync [L61]
          └─ implementation Dataverse.ApplicationService.Services.UserService.GetUserAsync [L15-L185]
      └─ uses_service RequestInfoService
        └─ method IsValidServiceAccountRequest [L58]
          └─ implementation Dataverse.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L92]
          └─ implementation Dataverse.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L92]
          └─ implementation Dataverse.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L92]
      └─ uses_service IControlledRepository<Document>
        └─ method ReadQuery [L68]
          └─ ... (no implementation details available)
  └─ sends_request GetDocumentAssociations [L163]
    └─ handled_by Dataverse.ApplicationService.Queries.Documents.GetDocumentAssociationsHandler.Handle [L39–L148]
      └─ maps_to DeliverableUltraLightDto [L98]
        └─ automapper.registration DataverseMappingProfile (Deliverable->DeliverableUltraLightDto) [L355]
      └─ maps_to JobUltraLightDto [L86]
        └─ automapper.registration DataverseMappingProfile (Job->JobUltraLightDto) [L306]
      └─ uses_client WorkpapersClient [L119]
      └─ uses_service UserService
        └─ method GetUserId [L117]
          └─ implementation Dataverse.ApplicationService.Services.UserService.GetUserId [L15-L185]
      └─ uses_service TenantService
        └─ method GetCurrentTenantAsync [L114]
          └─ implementation Dataverse.Services.Features.Tenants.TenantService.GetCurrentTenantAsync [L6-L27]
          └─ implementation Dataverse.Services.Features.Tenants.TenantService.GetCurrentTenantAsync [L6-L27]
      └─ uses_service IControlledRepository<Deliverable>
        └─ method ReadQuery [L98]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<Document>
        └─ method ReadQuery [L74]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<Job>
        └─ method ReadQuery [L86]
          └─ ... (no implementation details available)
      └─ uses_service IMapper
        └─ method ConfigurationProvider [L88]
          └─ ... (no implementation details available)
      └─ uses_service WorkpapersClient
        └─ method Get [L119]
          └─ ... (no implementation details available)

[web] GET /api/ui/documents/documents/external/{externalId}  (Dataverse.Api.Controllers.UI.Documents.DocumentsController.GetDocumentByExternalId)  [L431–L450] status=200 [auth=Authentication.UserPolicy]
  └─ maps_to DocumentDto [L442]
    └─ automapper.registration DataverseMappingProfile (Document->DocumentDto) [L405]
  └─ calls DocumentRepository.ReadQuery [L434]
  └─ query Document [L434]
    └─ reads_from Documents
  └─ uses_service IControlledRepository<Document>
    └─ method ReadQuery [L434]
      └─ ... (no implementation details available)

[web] GET /api/ui/documents/documents/{id}/meta-data  (Dataverse.Api.Controllers.UI.Documents.DocumentsController.GetMetaData)  [L169–L187] status=200 [auth=Authentication.UserPolicy]
  └─ calls DocumentVersionRepository.ReadQuery [L174]
  └─ query DocumentVersion [L174]
    └─ reads_from DocumentVersions
  └─ uses_service IControlledRepository<DocumentVersion>
    └─ method ReadQuery [L174]
      └─ ... (no implementation details available)
  └─ sends_request CanIAccessDocumentQuery [L172]
    └─ handled_by Dataverse.ApplicationService.Queries.Documents.CanIAccessDocumentQueryHandler.Handle [L37–L82]
      └─ uses_service FirmSettingsService
        └─ method GetCurrentSettingsAsync [L66]
          └─ implementation Dataverse.ApplicationService.Services.FirmSettingsService.GetCurrentSettingsAsync [L18-L97]
      └─ uses_service UserService
        └─ method GetUserAsync [L61]
          └─ implementation Dataverse.ApplicationService.Services.UserService.GetUserAsync [L15-L185]
      └─ uses_service RequestInfoService
        └─ method IsValidServiceAccountRequest [L58]
          └─ implementation Dataverse.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L92]
          └─ implementation Dataverse.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L92]
          └─ implementation Dataverse.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L92]
      └─ uses_service IControlledRepository<Document>
        └─ method ReadQuery [L68]
          └─ ... (no implementation details available)

[web] GET /api/ui/documents/documents/{id}/{fileExtension}/preview  (Dataverse.Api.Controllers.UI.Documents.DocumentsController.PreviewDocument)  [L198–L205] status=200 [auth=Authentication.UserPolicy]
  └─ sends_request CanIAccessDocumentQuery [L201]
    └─ handled_by Dataverse.ApplicationService.Queries.Documents.CanIAccessDocumentQueryHandler.Handle [L37–L82]
      └─ uses_service FirmSettingsService
        └─ method GetCurrentSettingsAsync [L66]
          └─ implementation Dataverse.ApplicationService.Services.FirmSettingsService.GetCurrentSettingsAsync [L18-L97]
      └─ uses_service UserService
        └─ method GetUserAsync [L61]
          └─ implementation Dataverse.ApplicationService.Services.UserService.GetUserAsync [L15-L185]
      └─ uses_service RequestInfoService
        └─ method IsValidServiceAccountRequest [L58]
          └─ implementation Dataverse.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L92]
          └─ implementation Dataverse.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L92]
          └─ implementation Dataverse.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L92]
      └─ uses_service IControlledRepository<Document>
        └─ method ReadQuery [L68]
          └─ ... (no implementation details available)
  └─ sends_request GetDocumentPreviewLink [L202]
    └─ handled_by Dataverse.ApplicationService.Queries.Documents.GetDocumentPreviewLinkHandler.Handle [L34–L119]
      └─ maps_to SecureDocumentStoreDto [L107]
      └─ uses_service DocumentServiceFactory
        └─ method GetDefaultColdStorageDocumentWithService [L90]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<Document>
        └─ method ReadQuery [L98]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<DocumentVersion>
        └─ method WriteQuery [L69]
          └─ ... (no implementation details available)
      └─ uses_service IMapper
        └─ method Map [L107]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L114]
          └─ implementation Dataverse.Services.Features.Requests.RequestProcessor.ProcessAsync [L8-L45]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle
      └─ uses_service string[]
        └─ method Contains [L67]
          └─ ... (no implementation details available)

[web] GET /api/ui/documents/documents/{id}/{versionId}/preview-by-version  (Dataverse.Api.Controllers.UI.Documents.DocumentsController.PreviewDocumentByVersion)  [L207–L214] status=200 [auth=Authentication.UserPolicy]
  └─ sends_request CanIAccessDocumentQuery [L210]
    └─ handled_by Dataverse.ApplicationService.Queries.Documents.CanIAccessDocumentQueryHandler.Handle [L37–L82]
      └─ uses_service FirmSettingsService
        └─ method GetCurrentSettingsAsync [L66]
          └─ implementation Dataverse.ApplicationService.Services.FirmSettingsService.GetCurrentSettingsAsync [L18-L97]
      └─ uses_service UserService
        └─ method GetUserAsync [L61]
          └─ implementation Dataverse.ApplicationService.Services.UserService.GetUserAsync [L15-L185]
      └─ uses_service RequestInfoService
        └─ method IsValidServiceAccountRequest [L58]
          └─ implementation Dataverse.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L92]
          └─ implementation Dataverse.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L92]
          └─ implementation Dataverse.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L92]
      └─ uses_service IControlledRepository<Document>
        └─ method ReadQuery [L68]
          └─ ... (no implementation details available)
  └─ sends_request GetDocumentPreviewLinkByVersionQuery [L211]
    └─ handled_by Dataverse.ApplicationService.Queries.Documents.GetDocumentPreviewLinkByVersionQueryHandler.Handle [L35–L135]
      └─ maps_to SecureDocumentStoreDto [L86]
      └─ maps_to DocumentVersionLightDto [L125]
        └─ automapper.registration DataverseMappingProfile (DocumentVersion->DocumentVersionLightDto) [L421]
      └─ uses_service DocumentServiceFactory
        └─ method GetForStore [L86]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<Document>
        └─ method ReadQuery [L77]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<DocumentVersion>
        └─ method WriteQuery [L64]
          └─ ... (no implementation details available)
      └─ uses_service IMapper
        └─ method Map [L86]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L131]
          └─ implementation Dataverse.Services.Features.Requests.RequestProcessor.ProcessAsync [L8-L45]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle
      └─ uses_service string[]
        └─ method Contains [L72]
          └─ ... (no implementation details available)

[web] DELETE /api/ui/documents/documents/{id:guid}  (Dataverse.Api.Controllers.UI.Documents.DocumentsController.RecycleDocument)  [L325–L341] status=200 [auth=Authentication.UserPolicy]
  └─ calls DocumentRepository.WriteQuery [L329]
  └─ write Document [L329]
    └─ reads_from Documents
  └─ uses_service IControlledRepository<Document>
    └─ method WriteQuery [L329]
      └─ ... (no implementation details available)
  └─ sends_request RecycleDocumentCommand [L340]
    └─ handled_by Dataverse.ApplicationService.Commands.Documents.RecycleDocumentCommandHandler.Handle [L28–L66]
      └─ uses_service IControlledRepository<Document>
        └─ method WriteQuery [L49]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<DocumentVersion>
        └─ method WriteQuery [L51]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L60]
          └─ implementation Dataverse.Services.Features.Requests.RequestProcessor.ProcessAsync [L8-L45]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle
  └─ sends_request CanIAccessDocumentQuery [L339]
    └─ handled_by Dataverse.ApplicationService.Queries.Documents.CanIAccessDocumentQueryHandler.Handle [L37–L82]
      └─ uses_service FirmSettingsService
        └─ method GetCurrentSettingsAsync [L66]
          └─ implementation Dataverse.ApplicationService.Services.FirmSettingsService.GetCurrentSettingsAsync [L18-L97]
      └─ uses_service UserService
        └─ method GetUserAsync [L61]
          └─ implementation Dataverse.ApplicationService.Services.UserService.GetUserAsync [L15-L185]
      └─ uses_service RequestInfoService
        └─ method IsValidServiceAccountRequest [L58]
          └─ implementation Dataverse.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L92]
          └─ implementation Dataverse.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L92]
          └─ implementation Dataverse.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L92]
      └─ uses_service IControlledRepository<Document>
        └─ method ReadQuery [L68]
          └─ ... (no implementation details available)

[web] PUT /api/ui/documents/documents/{id}  (Dataverse.Api.Controllers.UI.Documents.DocumentsController.UpdateDocument)  [L285–L290] status=200 [auth=Authentication.UserPolicy]
  └─ sends_request UpdateDocumentCommand [L289]
  └─ sends_request CanIAccessDocumentQuery [L288]
    └─ handled_by Dataverse.ApplicationService.Queries.Documents.CanIAccessDocumentQueryHandler.Handle [L37–L82]
      └─ uses_service FirmSettingsService
        └─ method GetCurrentSettingsAsync [L66]
          └─ implementation Dataverse.ApplicationService.Services.FirmSettingsService.GetCurrentSettingsAsync [L18-L97]
      └─ uses_service UserService
        └─ method GetUserAsync [L61]
          └─ implementation Dataverse.ApplicationService.Services.UserService.GetUserAsync [L15-L185]
      └─ uses_service RequestInfoService
        └─ method IsValidServiceAccountRequest [L58]
          └─ implementation Dataverse.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L92]
          └─ implementation Dataverse.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L92]
          └─ implementation Dataverse.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L92]
      └─ uses_service IControlledRepository<Document>
        └─ method ReadQuery [L68]
          └─ ... (no implementation details available)

[web] POST /api/ui/documents/documents/upload-new-external-version  (Dataverse.Api.Controllers.UI.Documents.DocumentsController.UploadNewExternalVersion)  [L452–L458] status=201 [auth=Authentication.UserPolicy]
  └─ sends_request UploadNewExternalVersionCommand [L456]
    └─ handled_by Dataverse.Connections.DataGet.Commands.UploadNewExternalVersionCommandHandler.Handle [L57–L223]
      └─ maps_to IntegrationSettingsDto [L168]
        └─ automapper.registration DataverseMappingProfile (IntegrationSettings->IntegrationSettingsDto) [L294]
      └─ uses_service DataGetFyiService
        └─ method GetDocumentAsync [L142]
          └─ implementation Dataverse.Connections.DataGet.Services.DataGetFyiService.GetDocumentAsync [L19-L291]
      └─ uses_service DataGetImanageService
        └─ method GetDocumentVersion [L175]
          └─ implementation Dataverse.Connections.DataGet.Services.DataGetImanageService.GetDocumentVersion [L19-L225]
      └─ uses_service IControlledRepository<Document>
        └─ method ReadQuery [L112]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<IntegrationSettings>
        └─ method ReadQuery [L168]
          └─ ... (no implementation details available)
      └─ uses_service IMapper
        └─ method ConfigurationProvider [L169]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L129]
          └─ implementation Dataverse.Services.Features.Requests.RequestProcessor.ProcessAsync [L8-L45]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle

[web] POST /api/ui/documents/statuses  (Dataverse.Api.Controllers.UI.Documents.DocumentStatusesController.Create)  [L77–L90] status=201 [auth=Authentication.UserPolicy,Authentication.AdminPolicy]
  └─ maps_to DocumentStatusDto [L89]
  └─ calls DocumentStatusRepository.Add [L87]
  └─ calls DocumentStatusRepository.WriteQuery [L80]
  └─ insert DocumentStatus [L87]
    └─ reads_from DVS_DocumentStatuses
  └─ write DocumentStatus [L80]
    └─ reads_from DVS_DocumentStatuses
  └─ uses_service IControlledRepository<DocumentStatus>
    └─ method WriteQuery [L80]
      └─ ... (no implementation details available)
  └─ uses_service IMapper
    └─ method Map [L89]
      └─ ... (no implementation details available)

[web] DELETE /api/ui/documents/statuses/{id:Guid}  (Dataverse.Api.Controllers.UI.Documents.DocumentStatusesController.Delete)  [L116–L126] status=200 [auth=Authentication.UserPolicy,Authentication.AdminPolicy]
  └─ calls DocumentStatusRepository.Remove [L123]
  └─ calls DocumentStatusRepository.WriteQuery [L119]
  └─ delete DocumentStatus [L123]
    └─ reads_from DVS_DocumentStatuses
  └─ write DocumentStatus [L119]
    └─ reads_from DVS_DocumentStatuses
  └─ uses_service IControlledRepository<DocumentStatus>
    └─ method WriteQuery [L119]
      └─ ... (no implementation details available)

[web] GET /api/ui/documents/statuses  (Dataverse.Api.Controllers.UI.Documents.DocumentStatusesController.GetAll)  [L33–L42] status=200 [auth=Authentication.UserPolicy]
  └─ maps_to DocumentStatusDto [L36]
    └─ automapper.registration DataverseMappingProfile (DocumentStatus->DocumentStatusDto) [L415]
  └─ calls DocumentStatusRepository.ReadQuery [L36]
  └─ query DocumentStatus [L36]
    └─ reads_from DVS_DocumentStatuses
  └─ uses_service IControlledRepository<DocumentStatus>
    └─ method ReadQuery [L36]
      └─ ... (no implementation details available)

[web] GET /api/ui/documents/statuses/list  (Dataverse.Api.Controllers.UI.Documents.DocumentStatusesController.GetAllLight)  [L44–L53] status=200 [auth=Authentication.UserPolicy]
  └─ maps_to DocumentStatusLightDto [L47]
    └─ automapper.registration DataverseMappingProfile (DocumentStatus->DocumentStatusLightDto) [L413]
  └─ calls DocumentStatusRepository.ReadQuery [L47]
  └─ query DocumentStatus [L47]
    └─ reads_from DVS_DocumentStatuses
  └─ uses_service IControlledRepository<DocumentStatus>
    └─ method ReadQuery [L47]
      └─ ... (no implementation details available)

[web] GET /api/ui/documents/statuses/{id:Guid}  (Dataverse.Api.Controllers.UI.Documents.DocumentStatusesController.GetById)  [L67–L75] status=200 [auth=Authentication.UserPolicy]
  └─ maps_to DocumentStatusDto [L70]
    └─ automapper.registration DataverseMappingProfile (DocumentStatus->DocumentStatusDto) [L415]
  └─ calls DocumentStatusRepository.ReadQuery [L70]
  └─ query DocumentStatus [L70]
    └─ reads_from DVS_DocumentStatuses
  └─ uses_service IControlledRepository<DocumentStatus>
    └─ method ReadQuery [L70]
      └─ ... (no implementation details available)

[web] GET /api/ui/documents/statuses/many  (Dataverse.Api.Controllers.UI.Documents.DocumentStatusesController.GetMany)  [L55–L65] status=200 [auth=Authentication.UserPolicy]
  └─ maps_to DocumentStatusDto [L58]
    └─ automapper.registration DataverseMappingProfile (DocumentStatus->DocumentStatusDto) [L415]
  └─ calls DocumentStatusRepository.ReadQuery [L58]
  └─ query DocumentStatus [L58]
    └─ reads_from DVS_DocumentStatuses
  └─ uses_service IControlledRepository<DocumentStatus>
    └─ method ReadQuery [L58]
      └─ ... (no implementation details available)

[web] PUT /api/ui/documents/statuses/{id:Guid}/reorder  (Dataverse.Api.Controllers.UI.Documents.DocumentStatusesController.Reorder)  [L104–L114] status=200 [auth=Authentication.UserPolicy,Authentication.AdminPolicy]
  └─ calls DocumentStatusRepository.WriteQuery [L107]
  └─ write DocumentStatus [L107]
    └─ reads_from DVS_DocumentStatuses
  └─ uses_service IControlledRepository<DocumentStatus>
    └─ method WriteQuery [L107]
      └─ ... (no implementation details available)

[web] PUT /api/ui/documents/statuses/{id:Guid}  (Dataverse.Api.Controllers.UI.Documents.DocumentStatusesController.Update)  [L92–L102] status=200 [auth=Authentication.UserPolicy,Authentication.AdminPolicy]
  └─ calls DocumentStatusRepository.WriteQuery [L95]
  └─ write DocumentStatus [L95]
    └─ reads_from DVS_DocumentStatuses
  └─ uses_service IControlledRepository<DocumentStatus>
    └─ method WriteQuery [L95]
      └─ ... (no implementation details available)

[web] GET /api/ui/document-store-users/{userId:guid}/invite  (Dataverse.Api.Controllers.UI.Documents.DocumentStoreUserController.GetInvite)  [L35–L55] status=200 [auth=Authentication.UserPolicy]
  └─ calls DocumentStoreUserRepository.ReadQuery [L38]
  └─ query DocumentStoreUser [L38]
    └─ reads_from DocumentStoreUsers
  └─ uses_service IControlledRepository<DocumentStoreUser>
    └─ method ReadQuery [L38]
      └─ ... (no implementation details available)
  └─ sends_request CreateNewDocumentInviteCommand [L51]
    └─ handled_by Dataverse.ApplicationService.Commands.Documents.CreateNewDocumentInviteCommandHandler.Handle [L28–L70]
      └─ uses_service DocumentSecurityServiceFactory
        └─ method CreateInstance [L63]
          └─ ... (no implementation details available)
      └─ uses_service IDocumentStoreService (AddScoped)
        └─ method GetReadOnlyDocumentStoresWithCredentials [L49]
          └─ implementation Dataverse.ApplicationService.Services.DocumentStoreService.GetReadOnlyDocumentStoresWithCredentials [L17-L89]
      └─ uses_storage IDocumentStoreService.GetReadOnlyDocumentStoresWithCredentials [L49]
  └─ sends_request CreateNewDocumentInviteCommand [L48]
    └─ handled_by Dataverse.ApplicationService.Commands.Documents.CreateNewDocumentInviteCommandHandler.Handle [L28–L70]
      └─ uses_service DocumentSecurityServiceFactory
        └─ method CreateInstance [L63]
          └─ ... (no implementation details available)
      └─ uses_service IDocumentStoreService (AddScoped)
        └─ method GetReadOnlyDocumentStoresWithCredentials [L49]
          └─ implementation Dataverse.ApplicationService.Services.DocumentStoreService.GetReadOnlyDocumentStoresWithCredentials [L17-L89]
      └─ uses_storage IDocumentStoreService.GetReadOnlyDocumentStoresWithCredentials [L49]

[web] GET /api/ui/documents/tags/  (Dataverse.Api.Controllers.UI.Documents.DocumentTagsController.Find)  [L26–L37] status=200 [auth=Authentication.UserPolicy]
  └─ calls DocumentTagRepository.ReadQuery [L33]
  └─ query DocumentTag [L33]
    └─ reads_from DocumentTags
  └─ uses_service IControlledRepository<DocumentTag>
    └─ method ReadQuery [L33]
      └─ ... (no implementation details available)

[web] POST /api/ui/documents/templates/{templateId:guid}/versions/{templateDocumentVersionId:guid}/field-groups/sort  (Dataverse.Api.Controllers.UI.Documents.DocumentTemplatesController.BulkUpdateTemplateFieldGroupsSortOrder)  [L236–L246] status=201 [auth=Authentication.UserPolicy]
  └─ sends_request CanIAuthorDocumentTemplatesQuery [L242]
    └─ handled_by Dataverse.ApplicationService.Queries.Documents.CanIAuthorDocumentTemplatesQueryHandler.Handle [L18–L40]
      └─ uses_service UserService
        └─ method GetUserAsync [L29]
          └─ implementation Dataverse.ApplicationService.Services.UserService.GetUserAsync [L15-L185]

[web] POST /api/ui/documents/templates/{templateId:guid}/versions/{templateDocumentVersionId:guid}/fields/sort  (Dataverse.Api.Controllers.UI.Documents.DocumentTemplatesController.BulkUpdateTemplateFieldsSortOrder)  [L212–L222] status=201 [auth=Authentication.UserPolicy]
  └─ sends_request CanIAuthorDocumentTemplatesQuery [L218]
    └─ handled_by Dataverse.ApplicationService.Queries.Documents.CanIAuthorDocumentTemplatesQueryHandler.Handle [L18–L40]
      └─ uses_service UserService
        └─ method GetUserAsync [L29]
          └─ implementation Dataverse.ApplicationService.Services.UserService.GetUserAsync [L15-L185]

[web] POST /api/ui/documents/templates/  (Dataverse.Api.Controllers.UI.Documents.DocumentTemplatesController.CreateTemplate)  [L151–L158] status=201 [auth=Authentication.UserPolicy]
  └─ sends_request CanIAuthorDocumentTemplatesQuery [L154]
    └─ handled_by Dataverse.ApplicationService.Queries.Documents.CanIAuthorDocumentTemplatesQueryHandler.Handle [L18–L40]
      └─ uses_service UserService
        └─ method GetUserAsync [L29]
          └─ implementation Dataverse.ApplicationService.Services.UserService.GetUserAsync [L15-L185]

[web] POST /api/ui/documents/templates/{templateId:guid}/versions/{templateDocumentVersionId:guid}/fields  (Dataverse.Api.Controllers.UI.Documents.DocumentTemplatesController.CreateTemplateField)  [L160–L174] status=201 [auth=Authentication.UserPolicy]
  └─ sends_request CanIAuthorDocumentTemplatesQuery [L166]
    └─ handled_by Dataverse.ApplicationService.Queries.Documents.CanIAuthorDocumentTemplatesQueryHandler.Handle [L18–L40]
      └─ uses_service UserService
        └─ method GetUserAsync [L29]
          └─ implementation Dataverse.ApplicationService.Services.UserService.GetUserAsync [L15-L185]

[web] POST /api/ui/documents/templates/{templateId:guid}/versions/{templateDocumentVersionId:guid}/field-groups  (Dataverse.Api.Controllers.UI.Documents.DocumentTemplatesController.CreateTemplateFieldGroup)  [L176–L190] status=201 [auth=Authentication.UserPolicy]
  └─ sends_request CanIAuthorDocumentTemplatesQuery [L182]
    └─ handled_by Dataverse.ApplicationService.Queries.Documents.CanIAuthorDocumentTemplatesQueryHandler.Handle [L18–L40]
      └─ uses_service UserService
        └─ method GetUserAsync [L29]
          └─ implementation Dataverse.ApplicationService.Services.UserService.GetUserAsync [L15-L185]

[web] DELETE /api/ui/documents/templates/{id:guid}  (Dataverse.Api.Controllers.UI.Documents.DocumentTemplatesController.DeleteTemplate)  [L248–L254] status=200 [auth=Authentication.UserPolicy,Authentication.AdminPolicy]
  └─ sends_request CanIAuthorDocumentTemplatesQuery [L251]
    └─ handled_by Dataverse.ApplicationService.Queries.Documents.CanIAuthorDocumentTemplatesQueryHandler.Handle [L18–L40]
      └─ uses_service UserService
        └─ method GetUserAsync [L29]
          └─ implementation Dataverse.ApplicationService.Services.UserService.GetUserAsync [L15-L185]

[web] DELETE /api/ui/documents/templates/{templateId:guid}/versions/{templateDocumentVersionId:guid}/fields/{id:guid}  (Dataverse.Api.Controllers.UI.Documents.DocumentTemplatesController.DeleteTemplateField)  [L256–L267] status=200 [auth=Authentication.UserPolicy]
  └─ sends_request CanIAuthorDocumentTemplatesQuery [L262]
    └─ handled_by Dataverse.ApplicationService.Queries.Documents.CanIAuthorDocumentTemplatesQueryHandler.Handle [L18–L40]
      └─ uses_service UserService
        └─ method GetUserAsync [L29]
          └─ implementation Dataverse.ApplicationService.Services.UserService.GetUserAsync [L15-L185]

[web] DELETE /api/ui/documents/templates/{templateId:guid}/versions/{templateDocumentVersionId:guid}/field-groups/{id:guid}  (Dataverse.Api.Controllers.UI.Documents.DocumentTemplatesController.DeleteTemplateFieldGroup)  [L269–L280] status=200 [auth=Authentication.UserPolicy]
  └─ sends_request CanIAuthorDocumentTemplatesQuery [L275]
    └─ handled_by Dataverse.ApplicationService.Queries.Documents.CanIAuthorDocumentTemplatesQueryHandler.Handle [L18–L40]
      └─ uses_service UserService
        └─ method GetUserAsync [L29]
          └─ implementation Dataverse.ApplicationService.Services.UserService.GetUserAsync [L15-L185]

[web] GET /api/ui/documents/templates/{templateId:guid}/download  (Dataverse.Api.Controllers.UI.Documents.DocumentTemplatesController.DownloadTemplateData)  [L282–L288] status=200 [auth=Authentication.UserPolicy]
  └─ sends_request CanIAuthorDocumentTemplatesQuery [L285]
    └─ handled_by Dataverse.ApplicationService.Queries.Documents.CanIAuthorDocumentTemplatesQueryHandler.Handle [L18–L40]
      └─ uses_service UserService
        └─ method GetUserAsync [L29]
          └─ implementation Dataverse.ApplicationService.Services.UserService.GetUserAsync [L15-L185]
  └─ sends_request GetDocumentTemplateDataQuery [L287]
    └─ handled_by Dataverse.ApplicationService.Queries.Documents.GetDocumentTemplateDataQueryHandler.Handle [L30–L95]
      └─ uses_service DocumentServiceFactory
        └─ method GetDocumentWithService [L75]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<DocumentTemplate>
        └─ method ReadQuery [L50]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<DocumentVersion>
        └─ method WriteQuery [L63]
          └─ ... (no implementation details available)

[web] GET /api/ui/documents/templates/  (Dataverse.Api.Controllers.UI.Documents.DocumentTemplatesController.FindTemplates)  [L53–L87] status=200 [auth=Authentication.UserPolicy]
  └─ sends_request FindDocumentTemplatesQuery [L69]
    └─ handled_by Dataverse.ApplicationService.Queries.Documents.FindDocumentTemplatesQueryHandler.Handle [L57–L235]
      └─ uses_service UserService
        └─ method GetUserAsync [L80]
          └─ implementation Dataverse.ApplicationService.Services.UserService.GetUserAsync [L15-L185]
      └─ uses_service IControlledRepository<DocumentTemplate>
        └─ method ReadQuery [L79]
          └─ ... (no implementation details available)

[web] GET /api/ui/documents/templates/{id:guid}  (Dataverse.Api.Controllers.UI.Documents.DocumentTemplatesController.GetTemplate)  [L89–L98] status=200 [auth=Authentication.UserPolicy]
  └─ maps_to DocumentTemplateDto [L93]
    └─ automapper.registration DataverseMappingProfile (DocumentTemplate->DocumentTemplateDto) [L432]
  └─ calls DocumentTemplateRepository.ReadQuery [L93]
  └─ query DocumentTemplate [L93]
    └─ reads_from DocumentTemplates
  └─ uses_service IControlledRepository<DocumentTemplate>
    └─ method ReadQuery [L93]
      └─ ... (no implementation details available)

[web] GET /api/ui/documents/templates/{templateId:guid}/versions/{templateDocumentVersionId:guid}/fields/{id:guid}  (Dataverse.Api.Controllers.UI.Documents.DocumentTemplatesController.GetTemplateField)  [L117–L132] status=200 [auth=Authentication.UserPolicy]
  └─ maps_to DocumentTemplateFieldDto [L125]
    └─ automapper.registration DataverseMappingProfile (DocumentTemplateField->DocumentTemplateFieldDto) [L435]
  └─ calls DocumentTemplateFieldRepository.ReadQuery [L125]
  └─ query DocumentTemplateField [L125]
    └─ reads_from DocumentTemplateFields
  └─ uses_service IControlledRepository<DocumentTemplateField>
    └─ method ReadQuery [L125]
      └─ ... (no implementation details available)

[web] GET /api/ui/documents/templates/{templateId:guid}/versions/{templateDocumentVersionId:guid}/field-groups  (Dataverse.Api.Controllers.UI.Documents.DocumentTemplatesController.GetTemplateFieldGroups)  [L134–L149] status=200 [auth=Authentication.UserPolicy]
  └─ maps_to DocumentTemplateFieldGroupDto [L141]
    └─ automapper.registration DataverseMappingProfile (DocumentTemplateFieldGroup->DocumentTemplateFieldGroupDto) [L436]
  └─ calls DocumentTemplateFieldGroupRepository.ReadQuery [L141]
  └─ query DocumentTemplateFieldGroup [L141]
    └─ reads_from DocumentTemplateFieldGroups
  └─ uses_service IControlledRepository<DocumentTemplateFieldGroup>
    └─ method ReadQuery [L141]
      └─ ... (no implementation details available)

[web] GET /api/ui/documents/templates/{templateId:guid}/versions/{templateDocumentVersionId:guid}/fields  (Dataverse.Api.Controllers.UI.Documents.DocumentTemplatesController.GetTemplateFields)  [L100–L115] status=200 [auth=Authentication.UserPolicy]
  └─ maps_to DocumentTemplateFieldLightDto [L107]
    └─ automapper.registration DataverseMappingProfile (DocumentTemplateField->DocumentTemplateFieldLightDto) [L434]
  └─ calls DocumentTemplateFieldRepository.ReadQuery [L107]
  └─ query DocumentTemplateField [L107]
    └─ reads_from DocumentTemplateFields
  └─ uses_service IControlledRepository<DocumentTemplateField>
    └─ method ReadQuery [L107]
      └─ ... (no implementation details available)

[web] PUT /api/ui/documents/templates/{id:guid}  (Dataverse.Api.Controllers.UI.Documents.DocumentTemplatesController.UpdateTemplate)  [L192–L198] status=200 [auth=Authentication.UserPolicy]
  └─ sends_request CanIAuthorDocumentTemplatesQuery [L195]
    └─ handled_by Dataverse.ApplicationService.Queries.Documents.CanIAuthorDocumentTemplatesQueryHandler.Handle [L18–L40]
      └─ uses_service UserService
        └─ method GetUserAsync [L29]
          └─ implementation Dataverse.ApplicationService.Services.UserService.GetUserAsync [L15-L185]

[web] PUT /api/ui/documents/templates/{templateId:guid}/versions/{templateDocumentVersionId:guid}/fields/{id:guid}  (Dataverse.Api.Controllers.UI.Documents.DocumentTemplatesController.UpdateTemplateField)  [L200–L210] status=200 [auth=Authentication.UserPolicy]
  └─ sends_request CanIAuthorDocumentTemplatesQuery [L207]
    └─ handled_by Dataverse.ApplicationService.Queries.Documents.CanIAuthorDocumentTemplatesQueryHandler.Handle [L18–L40]
      └─ uses_service UserService
        └─ method GetUserAsync [L29]
          └─ implementation Dataverse.ApplicationService.Services.UserService.GetUserAsync [L15-L185]

[web] PUT /api/ui/documents/templates/{templateId:guid}/versions/{templateDocumentVersionId:guid}/field-groups/{id:guid}  (Dataverse.Api.Controllers.UI.Documents.DocumentTemplatesController.UpdateTemplateFieldGroup)  [L224–L234] status=200 [auth=Authentication.UserPolicy]
  └─ sends_request CanIAuthorDocumentTemplatesQuery [L231]
    └─ handled_by Dataverse.ApplicationService.Queries.Documents.CanIAuthorDocumentTemplatesQueryHandler.Handle [L18–L40]
      └─ uses_service UserService
        └─ method GetUserAsync [L29]
          └─ implementation Dataverse.ApplicationService.Services.UserService.GetUserAsync [L15-L185]

[web] POST /api/ui/documents/templates/{templateId:guid}/upload  (Dataverse.Api.Controllers.UI.Documents.DocumentTemplatesController.UploadTemplateData)  [L290–L296] status=201 [auth=Authentication.UserPolicy]
  └─ sends_request CanIAuthorDocumentTemplatesQuery [L293]
    └─ handled_by Dataverse.ApplicationService.Queries.Documents.CanIAuthorDocumentTemplatesQueryHandler.Handle [L18–L40]
      └─ uses_service UserService
        └─ method GetUserAsync [L29]
          └─ implementation Dataverse.ApplicationService.Services.UserService.GetUserAsync [L15-L185]

[web] POST /api/ui/documents/types  (Dataverse.Api.Controllers.UI.Documents.DocumentTypesController.Create)  [L58–L66] status=201 [auth=Authentication.UserPolicy,Authentication.AdminPolicy]
  └─ maps_to DocumentTypeDto [L65]
  └─ calls DocumentTypeRepository.Add [L63]
  └─ insert DocumentType [L63]
    └─ reads_from DocumentTypes
  └─ uses_service IControlledRepository<DocumentType>
    └─ method Add [L63]
      └─ ... (no implementation details available)
  └─ uses_service IMapper
    └─ method Map [L65]
      └─ ... (no implementation details available)

[web] DELETE /api/ui/documents/types/{id:Guid}  (Dataverse.Api.Controllers.UI.Documents.DocumentTypesController.Delete)  [L80–L90] status=200 [auth=Authentication.UserPolicy,Authentication.AdminPolicy]
  └─ calls DocumentTypeRepository.Remove [L87]
  └─ calls DocumentTypeRepository.WriteQuery [L83]
  └─ delete DocumentType [L87]
    └─ reads_from DocumentTypes
  └─ write DocumentType [L83]
    └─ reads_from DocumentTypes
  └─ uses_service IControlledRepository<DocumentType>
    └─ method WriteQuery [L83]
      └─ ... (no implementation details available)

[web] GET /api/ui/documents/types  (Dataverse.Api.Controllers.UI.Documents.DocumentTypesController.GetAll)  [L36–L48] status=200 [auth=Authentication.UserPolicy]
  └─ maps_to DocumentTypeDto [L41]
    └─ automapper.registration DataverseMappingProfile (DocumentType->DocumentTypeDto) [L420]
  └─ calls DocumentTypeRepository.ReadQuery [L41]
  └─ query DocumentType [L41]
    └─ reads_from DocumentTypes
  └─ uses_service IControlledRepository<DocumentType>
    └─ method ReadQuery [L41]
      └─ ... (no implementation details available)

[web] GET /api/ui/documents/types/{id}  (Dataverse.Api.Controllers.UI.Documents.DocumentTypesController.GetDocument)  [L50–L56] status=200 [auth=Authentication.UserPolicy]
  └─ maps_to DocumentTypeDto [L53]
    └─ automapper.registration DataverseMappingProfile (DocumentType->DocumentTypeDto) [L420]
  └─ calls DocumentTypeRepository.ReadQuery [L53]
  └─ query DocumentType [L53]
    └─ reads_from DocumentTypes
  └─ uses_service IControlledRepository<DocumentType>
    └─ method ReadQuery [L53]
      └─ ... (no implementation details available)

[web] PUT /api/ui/documents/types/{id:Guid}  (Dataverse.Api.Controllers.UI.Documents.DocumentTypesController.Update)  [L68–L78] status=200 [auth=Authentication.UserPolicy,Authentication.AdminPolicy]
  └─ calls DocumentTypeRepository.WriteQuery [L71]
  └─ write DocumentType [L71]
    └─ reads_from DocumentTypes
  └─ uses_service IControlledRepository<DocumentType>
    └─ method WriteQuery [L71]
      └─ ... (no implementation details available)

[web] GET /api/documents/upload  (Dataverse.Api.Controllers.UI.Documents.DocumentUploadController.UploadFileGet)  [L22–L30] status=200
  └─ sends_request UploadChunkExistsQuery [L25]
    └─ handled_by Cirrus.Services.Features.FileUpload.UploadChunkExistsQueryHandler.Handle [L24–L62]
      └─ uses_service IStorageService (InstancePerLifetimeScope)
        └─ method BlockExists [L50]
          └─ implementation IStorageService.BlockExists [L9-L9]
          └─ ... (no implementation details available)
      └─ uses_storage IStorageService.BlockExists [L50]

[web] POST /api/documents/upload  (Dataverse.Api.Controllers.UI.Documents.DocumentUploadController.UploadFilePost)  [L32–L44] status=201
  └─ sends_request UploadChunkCommand [L36]
    └─ handled_by Cirrus.Services.Features.FileUpload.UploadChunkCommandHandler.Handle [L37–L139]
      └─ uses_service IStorageService (InstancePerLifetimeScope)
        └─ method UploadFile [L71]
          └─ implementation IStorageService.UploadFile [L9-L9]
          └─ ... (no implementation details available)
      └─ uses_storage IStorageService.UploadFile [L71]

[web] POST /api/ui/documents/{documentId:guid}/versions/  (Dataverse.Api.Controllers.UI.Documents.DocumentVersionsController.AddDocumentVersion)  [L67–L73] status=201 [auth=Authentication.UserPolicy]
  └─ sends_request AddDocumentVersionCommand [L72]
    └─ handled_by Dataverse.ApplicationService.Commands.Documents.AddDocumentVersionCommandHandler.Handle [L27–L94]
      └─ uses_service UserService
        └─ method GetUserId [L66]
          └─ implementation Dataverse.ApplicationService.Services.UserService.GetUserId [L15-L185]
      └─ uses_service RequestInfoService
        └─ method IsM2MRequest [L67]
          └─ implementation Dataverse.Services.Features.RequestInfoService.IsM2MRequest [L11-L92]
          └─ implementation Dataverse.Services.Features.RequestInfoService.IsM2MRequest [L11-L92]
          └─ implementation Dataverse.Services.Features.RequestInfoService.IsM2MRequest [L11-L92]
      └─ uses_service IControlledRepository<Document>
        └─ method WriteQuery [L57]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<DocumentStatus>
        └─ method WriteQuery [L78]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<DocumentVersion>
        └─ method ReadQuery [L61]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L88]
          └─ implementation Dataverse.Services.Features.Requests.RequestProcessor.ProcessAsync [L8-L45]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle
  └─ sends_request CanIAccessDocumentQuery [L71]
    └─ handled_by Dataverse.ApplicationService.Queries.Documents.CanIAccessDocumentQueryHandler.Handle [L37–L82]
      └─ uses_service FirmSettingsService
        └─ method GetCurrentSettingsAsync [L66]
          └─ implementation Dataverse.ApplicationService.Services.FirmSettingsService.GetCurrentSettingsAsync [L18-L97]
      └─ uses_service UserService
        └─ method GetUserAsync [L61]
          └─ implementation Dataverse.ApplicationService.Services.UserService.GetUserAsync [L15-L185]
      └─ uses_service RequestInfoService
        └─ method IsValidServiceAccountRequest [L58]
          └─ implementation Dataverse.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L92]
          └─ implementation Dataverse.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L92]
          └─ implementation Dataverse.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L92]
      └─ uses_service IControlledRepository<Document>
        └─ method ReadQuery [L68]
          └─ ... (no implementation details available)

[web] POST /api/ui/documents/{documentId:guid}/versions/copy  (Dataverse.Api.Controllers.UI.Documents.DocumentVersionsController.CopyDocumentVersion)  [L75–L81] status=201 [auth=Authentication.UserPolicy]
  └─ sends_request CanIAccessDocumentQuery [L79]
    └─ handled_by Dataverse.ApplicationService.Queries.Documents.CanIAccessDocumentQueryHandler.Handle [L37–L82]
      └─ uses_service FirmSettingsService
        └─ method GetCurrentSettingsAsync [L66]
          └─ implementation Dataverse.ApplicationService.Services.FirmSettingsService.GetCurrentSettingsAsync [L18-L97]
      └─ uses_service UserService
        └─ method GetUserAsync [L61]
          └─ implementation Dataverse.ApplicationService.Services.UserService.GetUserAsync [L15-L185]
      └─ uses_service RequestInfoService
        └─ method IsValidServiceAccountRequest [L58]
          └─ implementation Dataverse.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L92]
          └─ implementation Dataverse.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L92]
          └─ implementation Dataverse.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L92]
      └─ uses_service IControlledRepository<Document>
        └─ method ReadQuery [L68]
          └─ ... (no implementation details available)
  └─ sends_request CopyDocumentVersionCommand [L80]
    └─ handled_by Dataverse.Services.DocumentStorage.Commands.CopyDocumentVersionCommandHandler.Handle [L30–L124]
      └─ uses_service UserService
        └─ method GetUserId [L79]
          └─ implementation Dataverse.ApplicationService.Services.UserService.GetUserId [L15-L185]
      └─ uses_service DocumentServiceFactory
        └─ method GetDocumentWithService [L89]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<DocumentVersion>
        └─ method WriteQuery [L54]
          └─ ... (no implementation details available)

[web] DELETE /api/ui/documents/{documentId:guid}/versions/{documentVersionId:guid}/hard  (Dataverse.Api.Controllers.UI.Documents.DocumentVersionsController.DeleteDocumentVersion)  [L99–L106] status=200 [auth=Authentication.UserPolicy,Authentication.AdminPolicy]
  └─ sends_request DeleteDocumentVersionCommand [L105]
    └─ handled_by Dataverse.ApplicationService.Commands.Documents.DeleteDocumentVersionCommandHandler.Handle [L25–L50]
      └─ uses_service IControlledRepository<DocumentVersion>
        └─ method WriteQuery [L40]
          └─ ... (no implementation details available)
  └─ sends_request CanIAccessDocumentQuery [L104]
    └─ handled_by Dataverse.ApplicationService.Queries.Documents.CanIAccessDocumentQueryHandler.Handle [L37–L82]
      └─ uses_service FirmSettingsService
        └─ method GetCurrentSettingsAsync [L66]
          └─ implementation Dataverse.ApplicationService.Services.FirmSettingsService.GetCurrentSettingsAsync [L18-L97]
      └─ uses_service UserService
        └─ method GetUserAsync [L61]
          └─ implementation Dataverse.ApplicationService.Services.UserService.GetUserAsync [L15-L185]
      └─ uses_service RequestInfoService
        └─ method IsValidServiceAccountRequest [L58]
          └─ implementation Dataverse.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L92]
          └─ implementation Dataverse.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L92]
          └─ implementation Dataverse.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L92]
      └─ uses_service IControlledRepository<Document>
        └─ method ReadQuery [L68]
          └─ ... (no implementation details available)

[web] GET /api/ui/documents/{documentId:guid}/versions/all  (Dataverse.Api.Controllers.UI.Documents.DocumentVersionsController.GetAll)  [L43–L56] status=200 [auth=Authentication.UserPolicy]
  └─ maps_to DocumentVersionDto [L47]
    └─ automapper.registration DataverseMappingProfile (DocumentVersion->DocumentVersionDto) [L424]
  └─ calls DocumentVersionRepository.ReadQuery [L47]
  └─ query DocumentVersion [L47]
    └─ reads_from DocumentVersions
  └─ uses_service IControlledRepository<DocumentVersion>
    └─ method ReadQuery [L47]
      └─ ... (no implementation details available)

[web] GET /api/ui/documents/{documentId:guid}/versions/  (Dataverse.Api.Controllers.UI.Documents.DocumentVersionsController.GetById)  [L58–L65] status=200 [auth=Authentication.UserPolicy]
  └─ maps_to DocumentVersionDto [L62]
    └─ automapper.registration DataverseMappingProfile (DocumentVersion->DocumentVersionDto) [L424]
  └─ calls DocumentVersionRepository.ReadQuery [L62]
  └─ query DocumentVersion [L62]
    └─ reads_from DocumentVersions
  └─ uses_service IControlledRepository<DocumentVersion>
    └─ method ReadQuery [L62]
      └─ ... (no implementation details available)

[web] DELETE /api/ui/documents/{documentId:guid}/versions/{documentVersionId:guid}  (Dataverse.Api.Controllers.UI.Documents.DocumentVersionsController.RecycleDocumentVersion)  [L91–L97] status=200 [auth=Authentication.UserPolicy]
  └─ sends_request RecycleDocumentVersionCommand [L96]
    └─ handled_by Dataverse.ApplicationService.Commands.Documents.RecycleDocumentVersionCommandHandler.Handle [L26–L51]
      └─ uses_service IControlledRepository<DocumentVersion>
        └─ method WriteQuery [L41]
          └─ ... (no implementation details available)
  └─ sends_request CanIAccessDocumentQuery [L95]
    └─ handled_by Dataverse.ApplicationService.Queries.Documents.CanIAccessDocumentQueryHandler.Handle [L37–L82]
      └─ uses_service FirmSettingsService
        └─ method GetCurrentSettingsAsync [L66]
          └─ implementation Dataverse.ApplicationService.Services.FirmSettingsService.GetCurrentSettingsAsync [L18-L97]
      └─ uses_service UserService
        └─ method GetUserAsync [L61]
          └─ implementation Dataverse.ApplicationService.Services.UserService.GetUserAsync [L15-L185]
      └─ uses_service RequestInfoService
        └─ method IsValidServiceAccountRequest [L58]
          └─ implementation Dataverse.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L92]
          └─ implementation Dataverse.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L92]
          └─ implementation Dataverse.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L92]
      └─ uses_service IControlledRepository<Document>
        └─ method ReadQuery [L68]
          └─ ... (no implementation details available)

[web] PUT /api/ui/documents/{documentId:guid}/versions/{documentVersionId:guid}  (Dataverse.Api.Controllers.UI.Documents.DocumentVersionsController.SetVersionToActive)  [L83–L89] status=200 [auth=Authentication.UserPolicy]
  └─ sends_request SetDocumentVersionToActiveCommand [L88]
    └─ handled_by Dataverse.ApplicationService.Commands.Documents.SetDocumentVersionToActiveCommandHandler.Handle [L25–L49]
      └─ uses_service IControlledRepository<DocumentVersion>
        └─ method WriteQuery [L40]
          └─ ... (no implementation details available)
  └─ sends_request CanIAccessDocumentQuery [L87]
    └─ handled_by Dataverse.ApplicationService.Queries.Documents.CanIAccessDocumentQueryHandler.Handle [L37–L82]
      └─ uses_service FirmSettingsService
        └─ method GetCurrentSettingsAsync [L66]
          └─ implementation Dataverse.ApplicationService.Services.FirmSettingsService.GetCurrentSettingsAsync [L18-L97]
      └─ uses_service UserService
        └─ method GetUserAsync [L61]
          └─ implementation Dataverse.ApplicationService.Services.UserService.GetUserAsync [L15-L185]
      └─ uses_service RequestInfoService
        └─ method IsValidServiceAccountRequest [L58]
          └─ implementation Dataverse.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L92]
          └─ implementation Dataverse.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L92]
          └─ implementation Dataverse.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L92]
      └─ uses_service IControlledRepository<Document>
        └─ method ReadQuery [L68]
          └─ ... (no implementation details available)

[web] DELETE /api/ui/firm/settings/  (Dataverse.Api.Controllers.UI.Firm.FirmSettingsController.Delete)  [L69–L74] status=200 [auth=Authentication.AdminPolicy]
  └─ calls FirmSettingsRepository.Remove [L73]
  └─ calls FirmSettingsRepository.WriteQuery [L72]
  └─ delete FirmSettings [L73]
    └─ reads_from FirmSettingss
  └─ write FirmSettings [L72]
    └─ reads_from FirmSettingss
  └─ uses_service IControlledRepository<FirmSettings>
    └─ method WriteQuery [L72]
      └─ ... (no implementation details available)

[web] GET /api/ui/firm/settings/  (Dataverse.Api.Controllers.UI.Firm.FirmSettingsController.Get)  [L38–L44] status=200 [auth=Authentication.AdminPolicy]
  └─ maps_to FirmSettingsDto [L41]
    └─ automapper.registration DataverseMappingProfile (FirmSettings->FirmSettingsDto) [L121]
  └─ calls FirmSettingsRepository.ReadQuery [L41]
  └─ query FirmSettings [L41]
    └─ reads_from FirmSettingss
  └─ uses_service IControlledRepository<FirmSettings>
    └─ method ReadQuery [L41]
      └─ ... (no implementation details available)

[web] PUT /api/ui/firm/settings/  (Dataverse.Api.Controllers.UI.Firm.FirmSettingsController.Save)  [L49–L64] status=200 [auth=Authentication.AdminPolicy]
  └─ calls FirmSettingsRepository.Add [L57]
  └─ calls FirmSettingsRepository.WriteQuery [L52]
  └─ insert FirmSettings [L57]
    └─ reads_from FirmSettingss
  └─ write FirmSettings [L52]
    └─ reads_from FirmSettingss
  └─ uses_service IControlledRepository<FirmSettings>
    └─ method WriteQuery [L52]
      └─ ... (no implementation details available)
  └─ sends_request UpdateUsersSupportTicketCreationPermissionCommand [L62]
    └─ handled_by Dataverse.ApplicationService.Commands.Firms.UpdateUsersSupportTicketCreationPermissionCommandHandler.Handle [L26–L69]
      └─ uses_service IControlledRepository<User>
        └─ method WriteQuery [L47]
          └─ ... (no implementation details available)

[web] DELETE /api/ui/integration-settings/{id:guid}  (Dataverse.Api.Controllers.UI.Firm.IntegrationSettingsController.Delete)  [L89–L94] status=200 [auth=Authentication.AdminPolicy]
  └─ calls IntegrationSettingsRepository.Remove [L93]
  └─ calls IntegrationSettingsRepository.WriteQuery [L92]
  └─ delete IntegrationSettings [L93]
    └─ reads_from IntegrationSettingss
  └─ write IntegrationSettings [L92]
    └─ reads_from IntegrationSettingss
  └─ uses_service IControlledRepository<IntegrationSettings>
    └─ method WriteQuery [L92]
      └─ ... (no implementation details available)

[web] GET /api/ui/integration-settings/{apiType}  (Dataverse.Api.Controllers.UI.Firm.IntegrationSettingsController.Get)  [L48–L56] status=200 [auth=Authentication.AdminPolicy]
  └─ maps_to IntegrationSettingsDto [L51]
    └─ automapper.registration DataverseMappingProfile (IntegrationSettings->IntegrationSettingsDto) [L294]
  └─ calls IntegrationSettingsRepository.ReadQuery [L51]
  └─ query IntegrationSettings [L51]
    └─ reads_from IntegrationSettingss
  └─ uses_service IControlledRepository<IntegrationSettings>
    └─ method ReadQuery [L51]
      └─ ... (no implementation details available)

[web] GET /api/ui/integration-settings/  (Dataverse.Api.Controllers.UI.Firm.IntegrationSettingsController.GetAll)  [L37–L43] status=200 [auth=Authentication.AdminPolicy]
  └─ maps_to IntegrationSettingsDto [L40]
    └─ automapper.registration DataverseMappingProfile (IntegrationSettings->IntegrationSettingsDto) [L294]
  └─ calls IntegrationSettingsRepository.ReadQuery [L40]
  └─ query IntegrationSettings [L40]
    └─ reads_from IntegrationSettingss
  └─ uses_service IControlledRepository<IntegrationSettings>
    └─ method ReadQuery [L40]
      └─ ... (no implementation details available)

[web] POST /api/ui/integration-settings/  (Dataverse.Api.Controllers.UI.Firm.IntegrationSettingsController.Post)  [L61–L74] status=201 [auth=Authentication.AdminPolicy]
  └─ calls IntegrationSettingsRepository.Add [L68]
  └─ calls IntegrationSettingsRepository.WriteQuery [L64]
  └─ insert IntegrationSettings [L68]
    └─ reads_from IntegrationSettingss
  └─ write IntegrationSettings [L64]
    └─ reads_from IntegrationSettingss
  └─ uses_service IControlledRepository<IntegrationSettings>
    └─ method WriteQuery [L64]
      └─ ... (no implementation details available)

[web] PUT /api/ui/integration-settings/{id:guid}  (Dataverse.Api.Controllers.UI.Firm.IntegrationSettingsController.Put)  [L79–L84] status=200 [auth=Authentication.AdminPolicy]
  └─ calls IntegrationSettingsRepository.WriteQuery [L82]
  └─ write IntegrationSettings [L82]
    └─ reads_from IntegrationSettingss
  └─ uses_service IControlledRepository<IntegrationSettings>
    └─ method WriteQuery [L82]
      └─ ... (no implementation details available)

[web] PUT /api/ui/fyi/access-info  (Dataverse.Api.Controllers.UI.FyiController.Authenticate)  [L191–L196] status=200 [auth=Authentication.UserPolicy,Authentication.AdminPolicy]
  └─ uses_service IDatagetFyiService (AddTransient)
    └─ method Authenticate [L195]
      └─ implementation Dataverse.Connections.DataGet.Services.DataGetFyiService.Authenticate [L19-L291]

[web] GET /api/ui/fyi/documents/{documentVersionId:guid}/authorise-upload  (Dataverse.Api.Controllers.UI.FyiController.AuthoriseUpload)  [L114–L120] status=200 [auth=Authentication.UserPolicy]
  └─ uses_service IDatagetFyiService (AddTransient)
    └─ method AuthoriseUploadAsync [L117]
      └─ implementation Dataverse.Connections.DataGet.Services.DataGetFyiService.AuthoriseUploadAsync [L19-L291]

[web] POST /api/ui/fyi/documents  (Dataverse.Api.Controllers.UI.FyiController.CreateDocument)  [L122–L128] status=201 [auth=Authentication.UserPolicy]
  └─ uses_service IDatagetFyiService (AddTransient)
    └─ method PostDocument [L125]
      └─ implementation Dataverse.Connections.DataGet.Services.DataGetFyiService.PostDocument [L19-L291]

[web] DELETE /api/ui/fyi/disconnect  (Dataverse.Api.Controllers.UI.FyiController.Disconnect)  [L198–L203] status=200 [auth=Authentication.UserPolicy,Authentication.AdminPolicy]
  └─ uses_service IDatagetFyiService (AddTransient)
    └─ method Disconnect [L202]
      └─ implementation Dataverse.Connections.DataGet.Services.DataGetFyiService.Disconnect [L19-L291]

[web] POST /api/ui/fyi/download-document  (Dataverse.Api.Controllers.UI.FyiController.DownloadFyiDocument)  [L246–L263] status=201 [auth=Authentication.UserPolicy]
  └─ uses_service IDatagetFyiService (AddTransient)
    └─ method GetDocumentDownloadUrlAsync [L251]
      └─ implementation Dataverse.Connections.DataGet.Services.DataGetFyiService.GetDocumentDownloadUrlAsync [L19-L291]

[web] POST /api/ui/fyi/download-documents  (Dataverse.Api.Controllers.UI.FyiController.DownloadFyiDocuments)  [L223–L244] status=201 [auth=Authentication.UserPolicy]
  └─ uses_service IDatagetFyiService (AddTransient)
    └─ method GetDocumentDownloadUrlAsync [L232]
      └─ implementation Dataverse.Connections.DataGet.Services.DataGetFyiService.GetDocumentDownloadUrlAsync [L19-L291]

[web] GET /api/ui/fyi/access-info  (Dataverse.Api.Controllers.UI.FyiController.GetAccessInfo)  [L182–L189] status=200 [auth=Authentication.UserPolicy,Authentication.AdminPolicy]
  └─ uses_service IDatagetFyiService (AddTransient)
    └─ method GetAccessInfo [L186]
      └─ implementation Dataverse.Connections.DataGet.Services.DataGetFyiService.GetAccessInfo [L19-L291]

[web] GET /api/ui/fyi/cabinets/{cabinetId:long}  (Dataverse.Api.Controllers.UI.FyiController.GetCabinet)  [L55–L61] status=200 [auth=Authentication.UserPolicy]
  └─ uses_service IDatagetFyiService (AddTransient)
    └─ method GetCabinetAsync [L58]
      └─ implementation Dataverse.Connections.DataGet.Services.DataGetFyiService.GetCabinetAsync [L19-L291]

[web] GET /api/ui/fyi/cabinets  (Dataverse.Api.Controllers.UI.FyiController.GetCabinets)  [L47–L53] status=200 [auth=Authentication.UserPolicy]
  └─ uses_service IDatagetFyiService (AddTransient)
    └─ method GetCabinetsAsync [L50]
      └─ implementation Dataverse.Connections.DataGet.Services.DataGetFyiService.GetCabinetsAsync [L19-L291]

[web] GET /api/ui/fyi/categories  (Dataverse.Api.Controllers.UI.FyiController.GetCategories)  [L63–L69] status=200 [auth=Authentication.UserPolicy]
  └─ uses_service IDatagetFyiService (AddTransient)
    └─ method GetCategoriesAsync [L66]
      └─ implementation Dataverse.Connections.DataGet.Services.DataGetFyiService.GetCategoriesAsync [L19-L291]

[web] GET /api/ui/fyi/categories/{categoryId:long}  (Dataverse.Api.Controllers.UI.FyiController.GetCategory)  [L71–L77] status=200 [auth=Authentication.UserPolicy]
  └─ uses_service IDatagetFyiService (AddTransient)
    └─ method GetCategoryAsync [L74]
      └─ implementation Dataverse.Connections.DataGet.Services.DataGetFyiService.GetCategoryAsync [L19-L291]

[web] GET /api/ui/fyi/documents/{documentId:guid}  (Dataverse.Api.Controllers.UI.FyiController.GetDocument)  [L98–L104] status=200 [auth=Authentication.UserPolicy]
  └─ uses_service IDatagetFyiService (AddTransient)
    └─ method GetDocumentAsync [L101]
      └─ implementation Dataverse.Connections.DataGet.Services.DataGetFyiService.GetDocumentAsync [L19-L291]

[web] GET /api/ui/fyi/documents/{documentVersionId:guid}/downloadUrl  (Dataverse.Api.Controllers.UI.FyiController.GetDocumentDownloadUrl)  [L106–L112] status=200 [auth=Authentication.UserPolicy]
  └─ uses_service IDatagetFyiService (AddTransient)
    └─ method GetDocumentDownloadUrlAsync [L109]
      └─ implementation Dataverse.Connections.DataGet.Services.DataGetFyiService.GetDocumentDownloadUrlAsync [L19-L291]

[web] GET /api/ui/fyi/documents  (Dataverse.Api.Controllers.UI.FyiController.GetDocuments)  [L79–L96] status=200 [auth=Authentication.UserPolicy]
  └─ uses_service IDatagetFyiService (AddTransient)
    └─ method GetDocumentsAsync [L93]
      └─ implementation Dataverse.Connections.DataGet.Services.DataGetFyiService.GetDocumentsAsync [L19-L291]

[web] GET /api/ui/fyi  (Dataverse.Api.Controllers.UI.FyiController.GetDownloadUrl)  [L293–L300] status=200 [auth=Authentication.UserPolicy]
  └─ uses_service StorageService
    └─ method CopyFileFromUri [L297]
      └─ implementation Dataverse.Services.Features.Storage.StorageService.CopyFileFromUri [L18-L331]
  └─ uses_storage StorageService.CopyFileFromUri [L297]

[web] GET /api/ui/fyi/entities  (Dataverse.Api.Controllers.UI.FyiController.GetEntities)  [L142–L148] status=200 [auth=Authentication.UserPolicy]
  └─ uses_service IDatagetFyiService (AddTransient)
    └─ method GetEntitiesAsync [L145]
      └─ implementation Dataverse.Connections.DataGet.Services.DataGetFyiService.GetEntitiesAsync [L19-L291]

[web] GET /api/ui/fyi/entities/{entityId:long}  (Dataverse.Api.Controllers.UI.FyiController.GetEntity)  [L150–L156] status=200 [auth=Authentication.UserPolicy]
  └─ uses_service IDatagetFyiService (AddTransient)
    └─ method GetEntityAsync [L153]
      └─ implementation Dataverse.Connections.DataGet.Services.DataGetFyiService.GetEntityAsync [L19-L291]

[web] POST /api/ui/fyi/link-contents  (Dataverse.Api.Controllers.UI.FyiController.GetFyiLinkContents)  [L265–L291] status=201 [auth=Authentication.UserPolicy]
  └─ uses_service IDatagetFyiService (AddTransient)
    └─ method GetDocumentAsync [L274]
      └─ implementation Dataverse.Connections.DataGet.Services.DataGetFyiService.GetDocumentAsync [L19-L291]

[web] GET /api/ui/fyi/groups/{groupId:long}  (Dataverse.Api.Controllers.UI.FyiController.GetGroup)  [L166–L172] status=200 [auth=Authentication.UserPolicy]
  └─ uses_service IDatagetFyiService (AddTransient)
    └─ method GetGroupAsync [L169]
      └─ implementation Dataverse.Connections.DataGet.Services.DataGetFyiService.GetGroupAsync [L19-L291]

[web] GET /api/ui/fyi/groups  (Dataverse.Api.Controllers.UI.FyiController.GetGroups)  [L158–L164] status=200 [auth=Authentication.UserPolicy]
  └─ uses_service IDatagetFyiService (AddTransient)
    └─ method GetGroupsAsync [L161]
      └─ implementation Dataverse.Connections.DataGet.Services.DataGetFyiService.GetGroupsAsync [L19-L291]

[web] GET /api/ui/fyi/users  (Dataverse.Api.Controllers.UI.FyiController.GetUsers)  [L174–L180] status=200 [auth=Authentication.UserPolicy]
  └─ uses_service IDatagetFyiService (AddTransient)
    └─ method GetUsersAsync [L177]
      └─ implementation Dataverse.Connections.DataGet.Services.DataGetFyiService.GetUsersAsync [L19-L291]

[web] POST /api/ui/fyi/documents/save-exported-binder/{binderId:guid}  (Dataverse.Api.Controllers.UI.FyiController.SaveExportedBinder)  [L130–L140] status=201 [auth=Authentication.UserPolicy]

[web] GET /api/ui/fyi/test-connection  (Dataverse.Api.Controllers.UI.FyiController.TestConnection)  [L205–L212] status=200 [auth=Authentication.UserPolicy,Authentication.AdminPolicy]
  └─ uses_service IDatagetFyiService (AddTransient)
    └─ method TestConnection [L209]
      └─ implementation Dataverse.Connections.DataGet.Services.DataGetFyiService.TestConnection [L19-L291]

[web] GET /api/ui/fyi  (Dataverse.Api.Controllers.UI.FyiController.UploadFile)  [L302–L307] status=200 [auth=Authentication.UserPolicy]
  └─ uses_service IDatagetFyiService (AddTransient)
    └─ method UploadFile [L304]
      └─ implementation Dataverse.Connections.DataGet.Services.DataGetFyiService.UploadFile [L19-L291]

[web] GET /api/ui/fyi/verify-connection  (Dataverse.Api.Controllers.UI.FyiController.VerifyConnection)  [L214–L221] status=200 [auth=Authentication.UserPolicy,Authentication.AdminPolicy]
  └─ uses_service IDatagetFyiService (AddTransient)
    └─ method VerifyConnection [L218]
      └─ implementation Dataverse.Connections.DataGet.Services.DataGetFyiService.VerifyConnection [L19-L291]

[web] PUT /api/ui/fyi-elite/access-info  (Dataverse.Api.Controllers.UI.FyiEliteController.Authenticate)  [L50–L55] status=200 [auth=Authentication.UserPolicy,Authentication.AdminPolicy]
  └─ uses_service IDatagetFyiEliteService (AddTransient)
    └─ method Authenticate [L54]
      └─ implementation Dataverse.Connections.DataGet.Services.DataGetFyiEliteService.Authenticate [L13-L53]

[web] PUT /api/ui/fyi-elite/{id}/authorise-with-existing-info  (Dataverse.Api.Controllers.UI.FyiEliteController.AuthenticateWithExistingInfo)  [L90–L114] status=200 [auth=Authentication.UserPolicy,Authentication.AdminPolicy]
  └─ calls SyncConfigurationRepository.WriteQuery [L102]
  └─ write SyncConfiguration [L102]
    └─ reads_from SyncConfigurations
  └─ uses_service IControlledRepository<SyncConfiguration>
    └─ method WriteQuery [L102]
      └─ ... (no implementation details available)
  └─ uses_service IDatagetFyiEliteService (AddTransient)
    └─ method Authenticate [L98]
      └─ implementation Dataverse.Connections.DataGet.Services.DataGetFyiEliteService.Authenticate [L13-L53]
  └─ uses_service IDatagetFyiService (AddTransient)
    └─ method GetAccessInfo [L95]
      └─ implementation Dataverse.Connections.DataGet.Services.DataGetFyiService.GetAccessInfo [L19-L291]
  └─ uses_service UserService
    └─ method GetUserAsync [L94]
      └─ implementation Dataverse.ApplicationService.Services.UserService.GetUserAsync [L15-L185]

[web] DELETE /api/ui/fyi-elite/disconnect  (Dataverse.Api.Controllers.UI.FyiEliteController.Disconnect)  [L57–L62] status=200 [auth=Authentication.UserPolicy,Authentication.AdminPolicy]
  └─ uses_service IDatagetFyiEliteService (AddTransient)
    └─ method Disconnect [L61]
      └─ implementation Dataverse.Connections.DataGet.Services.DataGetFyiEliteService.Disconnect [L13-L53]

[web] GET /api/ui/fyi-elite/access-info  (Dataverse.Api.Controllers.UI.FyiEliteController.GetAccessInfo)  [L41–L48] status=200 [auth=Authentication.UserPolicy,Authentication.AdminPolicy]
  └─ uses_service IDatagetFyiEliteService (AddTransient)
    └─ method GetAccessInfo [L45]
      └─ implementation Dataverse.Connections.DataGet.Services.DataGetFyiEliteService.GetAccessInfo [L13-L53]

[web] GET /api/ui/fyi-elite/{id}/test-connection  (Dataverse.Api.Controllers.UI.FyiEliteController.TestConnection)  [L64–L88] status=200 [auth=Authentication.UserPolicy,Authentication.AdminPolicy]
  └─ calls SyncConfigurationRepository.WriteQuery [L69]
  └─ write SyncConfiguration [L69]
    └─ reads_from SyncConfigurations
  └─ uses_service IControlledRepository<SyncConfiguration>
    └─ method WriteQuery [L69]
      └─ ... (no implementation details available)
  └─ uses_service IDatagetFyiEliteService (AddTransient)
    └─ method TestConnection [L68]
      └─ implementation Dataverse.Connections.DataGet.Services.DataGetFyiEliteService.TestConnection [L13-L53]
  └─ uses_service UserService
    └─ method GetUserAsync [L71]
      └─ implementation Dataverse.ApplicationService.Services.UserService.GetUserAsync [L15-L185]

[web] GET /api/ui/hnx/record-content/{binderId:guid}  (Dataverse.Api.Controllers.UI.HnxController.GetRecordContentForBinder)  [L30–L50] status=200 [auth=Authentication.UserPolicy]

[web] DELETE /api/ui/imanage/disconnect  (Dataverse.Api.Controllers.UI.IManageController.Disconnect)  [L99–L104] status=200 [auth=Authentication.UserPolicy,Authentication.AdminPolicy]
  └─ uses_service IDatagetImanageService (AddTransient)
    └─ method Disconnect [L103]
      └─ implementation Dataverse.Connections.DataGet.Services.DataGetImanageService.Disconnect [L19-L225]

[web] DELETE /api/ui/imanage/disconnect-user-level  (Dataverse.Api.Controllers.UI.IManageController.DisconnectUserLevel)  [L106–L110] status=200 [auth=Authentication.UserPolicy]
  └─ uses_service IDatagetImanageService (AddTransient)
    └─ method DisconnectUserLevel [L109]
      └─ implementation Dataverse.Connections.DataGet.Services.DataGetImanageService.DisconnectUserLevel [L19-L225]

[web] POST /api/ui/imanage/download-documents  (Dataverse.Api.Controllers.UI.IManageController.DownloadIManageDocuments)  [L270–L291] status=201 [auth=Authentication.UserPolicy]

[web] GET /api/ui/imanage/access-info  (Dataverse.Api.Controllers.UI.IManageController.GetAccessInfo)  [L79–L97] status=200 [auth=Authentication.UserPolicy]
  └─ uses_service IDatagetImanageService (AddTransient)
    └─ method GetAccessInfo [L84]
      └─ implementation Dataverse.Connections.DataGet.Services.DataGetImanageService.GetAccessInfo [L19-L225]

[web] GET /api/ui/imanage/standard-user-authorisation-url  (Dataverse.Api.Controllers.UI.IManageController.GetAuthorisationUrl)  [L70–L77] status=200 [auth=Authentication.UserPolicy]
  └─ uses_service IDatagetImanageService (AddTransient)
    └─ method GetAuthorisationUrlForStandardUser [L75]
      └─ implementation Dataverse.Connections.DataGet.Services.DataGetImanageService.GetAuthorisationUrlForStandardUser [L19-L225]

[web] GET /api/ui/imanage/clients  (Dataverse.Api.Controllers.UI.IManageController.GetClients)  [L166–L181] status=200 [auth=Authentication.UserPolicy]
  └─ maps_to IntegrationSettingsDto [L169]
    └─ automapper.registration DataverseMappingProfile (IntegrationSettings->IntegrationSettingsDto) [L294]
  └─ calls IntegrationSettingsRepository.ReadQuery [L169]
  └─ query IntegrationSettings [L169]
    └─ reads_from IntegrationSettingss
  └─ uses_service IControlledRepository<IntegrationSettings>
    └─ method ReadQuery [L169]
      └─ ... (no implementation details available)
  └─ uses_service IDatagetImanageService (AddTransient)
    └─ method GetClientsAsync [L175]
      └─ implementation Dataverse.Connections.DataGet.Services.DataGetImanageService.GetClientsAsync [L19-L225]

[web] GET /api/ui/imanage/documents  (Dataverse.Api.Controllers.UI.IManageController.GetDocuments)  [L234–L250] status=200 [auth=Authentication.UserPolicy]
  └─ maps_to IntegrationSettingsDto [L238]
    └─ automapper.registration DataverseMappingProfile (IntegrationSettings->IntegrationSettingsDto) [L294]
  └─ calls IntegrationSettingsRepository.ReadQuery [L238]
  └─ query IntegrationSettings [L238]
    └─ reads_from IntegrationSettingss
  └─ uses_service IControlledRepository<IntegrationSettings>
    └─ method ReadQuery [L238]
      └─ ... (no implementation details available)
  └─ uses_service IDatagetImanageService (AddTransient)
    └─ method GetDocumentsAsync [L244]
      └─ implementation Dataverse.Connections.DataGet.Services.DataGetImanageService.GetDocumentsAsync [L19-L225]

[web] GET /api/ui/imanage  (Dataverse.Api.Controllers.UI.IManageController.GetDownloadUrl)  [L305–L312] status=200 [auth=Authentication.UserPolicy]
  └─ uses_service StorageService
    └─ method CopyFileFromUri [L309]
      └─ implementation Dataverse.Services.Features.Storage.StorageService.CopyFileFromUri [L18-L331]
  └─ uses_storage StorageService.CopyFileFromUri [L309]

[web] GET /api/ui/imanage/folders  (Dataverse.Api.Controllers.UI.IManageController.GetFolders)  [L252–L268] status=200 [auth=Authentication.UserPolicy]
  └─ maps_to IntegrationSettingsDto [L256]
    └─ automapper.registration DataverseMappingProfile (IntegrationSettings->IntegrationSettingsDto) [L294]
  └─ calls IntegrationSettingsRepository.ReadQuery [L256]
  └─ query IntegrationSettings [L256]
    └─ reads_from IntegrationSettingss
  └─ uses_service IControlledRepository<IntegrationSettings>
    └─ method ReadQuery [L256]
      └─ ... (no implementation details available)
  └─ uses_service IDatagetImanageService (AddTransient)
    └─ method GetFoldersAsync [L262]
      └─ implementation Dataverse.Connections.DataGet.Services.DataGetImanageService.GetFoldersAsync [L19-L225]

[web] GET /api/ui/imanage/libraries  (Dataverse.Api.Controllers.UI.IManageController.GetLibraries)  [L144–L164] status=200 [auth=Authentication.UserPolicy]
  └─ maps_to IntegrationSettingsDto [L147]
    └─ automapper.registration DataverseMappingProfile (IntegrationSettings->IntegrationSettingsDto) [L294]
  └─ calls IntegrationSettingsRepository.ReadQuery [L147]
  └─ query IntegrationSettings [L147]
    └─ reads_from IntegrationSettingss
  └─ uses_service IControlledRepository<IntegrationSettings>
    └─ method ReadQuery [L147]
      └─ ... (no implementation details available)
  └─ uses_service IDatagetImanageService (AddTransient)
    └─ method GetLibraries [L153]
      └─ implementation Dataverse.Connections.DataGet.Services.DataGetImanageService.GetLibraries [L19-L225]

[web] GET /api/ui/imanage/folders/{folderId}/subfolders  (Dataverse.Api.Controllers.UI.IManageController.GetSubFolders)  [L217–L232] status=200 [auth=Authentication.UserPolicy]
  └─ maps_to IntegrationSettingsDto [L220]
    └─ automapper.registration DataverseMappingProfile (IntegrationSettings->IntegrationSettingsDto) [L294]
  └─ calls IntegrationSettingsRepository.ReadQuery [L220]
  └─ query IntegrationSettings [L220]
    └─ reads_from IntegrationSettingss
  └─ uses_service IControlledRepository<IntegrationSettings>
    └─ method ReadQuery [L220]
      └─ ... (no implementation details available)
  └─ uses_service IDatagetImanageService (AddTransient)
    └─ method GetSubFoldersAsync [L226]
      └─ implementation Dataverse.Connections.DataGet.Services.DataGetImanageService.GetSubFoldersAsync [L19-L225]

[web] GET /api/ui/imanage/workspaces/{workspaceId}/folders  (Dataverse.Api.Controllers.UI.IManageController.GetWorkspaceFolders)  [L200–L215] status=200 [auth=Authentication.UserPolicy]
  └─ maps_to IntegrationSettingsDto [L203]
    └─ automapper.registration DataverseMappingProfile (IntegrationSettings->IntegrationSettingsDto) [L294]
  └─ calls IntegrationSettingsRepository.ReadQuery [L203]
  └─ query IntegrationSettings [L203]
    └─ reads_from IntegrationSettingss
  └─ uses_service IControlledRepository<IntegrationSettings>
    └─ method ReadQuery [L203]
      └─ ... (no implementation details available)
  └─ uses_service IDatagetImanageService (AddTransient)
    └─ method GetWorkspaceFoldersAsync [L209]
      └─ implementation Dataverse.Connections.DataGet.Services.DataGetImanageService.GetWorkspaceFoldersAsync [L19-L225]

[web] GET /api/ui/imanage/workspaces  (Dataverse.Api.Controllers.UI.IManageController.GetWorkspaces)  [L183–L198] status=200 [auth=Authentication.UserPolicy]
  └─ maps_to IntegrationSettingsDto [L186]
    └─ automapper.registration DataverseMappingProfile (IntegrationSettings->IntegrationSettingsDto) [L294]
  └─ calls IntegrationSettingsRepository.ReadQuery [L186]
  └─ query IntegrationSettings [L186]
    └─ reads_from IntegrationSettingss
  └─ uses_service IControlledRepository<IntegrationSettings>
    └─ method ReadQuery [L186]
      └─ ... (no implementation details available)
  └─ uses_service IDatagetImanageService (AddTransient)
    └─ method GetWorkspacesAsync [L192]
      └─ implementation Dataverse.Connections.DataGet.Services.DataGetImanageService.GetWorkspacesAsync [L19-L225]

[web] POST /api/ui/imanage/documents/save-exported-binder/{binderId:guid}  (Dataverse.Api.Controllers.UI.IManageController.SaveExportedBinder)  [L293–L303] status=201 [auth=Authentication.UserPolicy]

[web] GET /api/ui/imanage/test-connection  (Dataverse.Api.Controllers.UI.IManageController.TestConnection)  [L112–L118] status=200 [auth=Authentication.UserPolicy]
  └─ uses_service IDatagetImanageService (AddTransient)
    └─ method TestConnection [L115]
      └─ implementation Dataverse.Connections.DataGet.Services.DataGetImanageService.TestConnection [L19-L225]

[web] GET /api/ui/imanage  (Dataverse.Api.Controllers.UI.IManageController.UploadFile)  [L314–L326] status=200 [auth=Authentication.UserPolicy]
  └─ maps_to IntegrationSettingsDto [L316]
    └─ automapper.registration DataverseMappingProfile (IntegrationSettings->IntegrationSettingsDto) [L294]
  └─ calls IntegrationSettingsRepository.ReadQuery [L316]
  └─ query IntegrationSettings [L316]
    └─ reads_from IntegrationSettingss
  └─ uses_service IControlledRepository<IntegrationSettings>
    └─ method ReadQuery [L316]
      └─ ... (no implementation details available)
  └─ uses_service IDatagetImanageService (AddTransient)
    └─ method UploadFile [L322]
      └─ implementation Dataverse.Connections.DataGet.Services.DataGetImanageService.UploadFile [L19-L225]

[web] PUT /api/ui/karbon/access-info  (Dataverse.Api.Controllers.UI.KarbonController.Authenticate)  [L38–L42] status=200 [auth=Authentication.AdminPolicy]
  └─ uses_service IDatagetKarbonService (AddTransient)
    └─ method Authenticate [L41]
      └─ implementation Dataverse.Connections.DataGet.Services.DataGetKarbonService.Authenticate [L13-L53]

[web] DELETE /api/ui/karbon/disconnect  (Dataverse.Api.Controllers.UI.KarbonController.Disconnect)  [L44–L48] status=200 [auth=Authentication.AdminPolicy]
  └─ uses_service IDatagetKarbonService (AddTransient)
    └─ method Disconnect [L47]
      └─ implementation Dataverse.Connections.DataGet.Services.DataGetKarbonService.Disconnect [L13-L53]

[web] GET /api/ui/karbon/{id}/test-and-update-connection-settings  (Dataverse.Api.Controllers.UI.KarbonController.TestAndUpdateConnectionSettings)  [L50–L74] status=200 [auth=Authentication.AdminPolicy]
  └─ calls SyncConfigurationRepository.WriteQuery [L57]
  └─ write SyncConfiguration [L57]
    └─ reads_from SyncConfigurations
  └─ uses_service IControlledRepository<SyncConfiguration>
    └─ method WriteQuery [L57]
      └─ ... (no implementation details available)
  └─ uses_service IDatagetKarbonService (AddTransient)
    └─ method TestConnection [L53]
      └─ implementation Dataverse.Connections.DataGet.Services.DataGetKarbonService.TestConnection [L13-L53]
  └─ uses_service UserService
    └─ method GetUserAsync [L59]
      └─ implementation Dataverse.ApplicationService.Services.UserService.GetUserAsync [L15-L185]

[web] GET /api/ui/messages/  (Dataverse.Api.Controllers.UI.MessagesController.GetMessages)  [L29–L35] status=200 [auth=Authentication.UserPolicy]
  └─ sends_request GetMessagesQuery [L32]
    └─ handled_by Dataverse.ApplicationService.Queries.Messaging.GetMessagesQueryHandler.Handle [L39–L102]
      └─ maps_to UserLightDto [L99]
      └─ maps_to UserLightDto [L81]
        └─ automapper.registration CirrusMappingProfile (User->UserLightDto) [L104]
        └─ automapper.registration DataverseMappingProfile (User->UserLightDto) [L84]
        └─ automapper.registration WorkpapersMappingProfile (User->UserLightDto) [L97]
      └─ uses_service IControlledRepository<Message>
        └─ method ReadQuery [L54]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<User>
        └─ method ReadQuery [L81]
          └─ ... (no implementation details available)
      └─ uses_service IMapper
        └─ method ConfigurationProvider [L83]
          └─ ... (no implementation details available)

[web] POST /api/ui/messages/  (Dataverse.Api.Controllers.UI.MessagesController.SendMessage)  [L37–L43] status=201 [auth=Authentication.UserPolicy]
  └─ sends_request SendMessageCommand [L40]
    └─ handled_by Dataverse.ApplicationService.Commands.Messaging.SendMessageCommandHandler.Handle [L55–L167]
      └─ maps_to UserUltraLightDto [L85]
      └─ uses_service UserService
        └─ method GetUserAsync [L84]
          └─ implementation Dataverse.ApplicationService.Services.UserService.GetUserAsync [L15-L185]
      └─ uses_service TenantService
        └─ method GetCurrentTenantAsync [L86]
          └─ implementation Dataverse.Services.Features.Tenants.TenantService.GetCurrentTenantAsync [L6-L27]
          └─ implementation Dataverse.Services.Features.Tenants.TenantService.GetCurrentTenantAsync [L6-L27]
      └─ uses_service MockMessagingService
        └─ method RequestNotificationMessage [L125]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<Message>
        └─ method Add [L113]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<User>
        └─ method ReadQuery [L83]
          └─ ... (no implementation details available)
      └─ uses_service IMapper
        └─ method Map [L85]
          └─ ... (no implementation details available)

[web] PUT /api/ui/notifications/{id}  (Dataverse.Api.Controllers.UI.NotificationController.Update)  [L33–L48] status=200 [auth=Authentication.UserPolicy]
  └─ calls NotificationRepository.WriteQuery [L38]
  └─ write Notification [L38]
    └─ reads_from Notifications
  └─ uses_service IControlledRepository<Notification>
    └─ method WriteQuery [L38]
      └─ ... (no implementation details available)

[web] PUT /api/ui/notifications/by-user/{id}  (Dataverse.Api.Controllers.UI.NotificationController.UpdateByUserId)  [L50–L76] status=200 [auth=Authentication.UserPolicy]
  └─ calls NotificationRepository.ReadQuery [L64]
  └─ calls NotificationRepository.WriteQuery [L56]
  └─ query Notification [L64]
    └─ reads_from Notifications
  └─ write Notification [L56]
    └─ reads_from Notifications
  └─ uses_service IControlledRepository<Notification>
    └─ method WriteQuery [L56]
      └─ ... (no implementation details available)
  └─ sends_request AcceptDocumentInviteCommand [L71]
    └─ handled_by Dataverse.ApplicationService.Commands.Documents.AcceptDocumentInviteCommandHandler.Handle [L31–L231]
      └─ calls TenantRepository.ReadTable [L114]
      └─ calls TenantRepository.ReadTable [L108]
      └─ calls TenantRepository.ReadTable [L104]
      └─ uses_service MockMessagingService
        └─ method RequestSharePointSiteUpdate [L211]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<User>
        └─ method ReadQuery [L92]
          └─ ... (no implementation details available)

[web] GET /api/ui/notification-subscriptions  (Dataverse.Api.Controllers.UI.NotificationSubscriptionController.GetAllSubscription)  [L39–L45] status=200 [auth=Authentication.UserPolicy]
  └─ calls NotificationSubscriptionRepository.ReadQuery [L43]
  └─ query NotificationSubscription [L43]
    └─ reads_from NotificationSubscriptions
  └─ uses_service IControlledRepository<NotificationSubscription>
    └─ method ReadQuery [L43]
      └─ ... (no implementation details available)
  └─ uses_service UserService
    └─ method GetUserId [L42]
      └─ implementation Dataverse.ApplicationService.Services.UserService.GetUserId [L15-L185]

[web] GET /api/ui/notification-subscriptions/{productSubscriptionType}  (Dataverse.Api.Controllers.UI.NotificationSubscriptionController.GetSubscriptionByType)  [L50–L56] status=200 [auth=Authentication.UserPolicy]
  └─ calls NotificationSubscriptionRepository.ReadQuery [L54]
  └─ query NotificationSubscription [L54]
    └─ reads_from NotificationSubscriptions
  └─ uses_service IControlledRepository<NotificationSubscription>
    └─ method ReadQuery [L54]
      └─ ... (no implementation details available)
  └─ uses_service UserService
    └─ method GetUserId [L53]
      └─ implementation Dataverse.ApplicationService.Services.UserService.GetUserId [L15-L185]

[web] PUT /api/ui/notification-subscriptions/{productSubscriptionType}  (Dataverse.Api.Controllers.UI.NotificationSubscriptionController.Update)  [L61–L66] status=200 [auth=Authentication.UserPolicy]
  └─ sends_request CreateOrUpdateNotificationSubscriptionCommand [L65]
    └─ handled_by Dataverse.ApplicationService.Commands.NotificationSubscriptions.CreateOrUpdateNotificationSubscriptionCommandHandler.Handle [L24–L55]
      └─ uses_service UserService
        └─ method GetUserId [L36]
          └─ implementation Dataverse.ApplicationService.Services.UserService.GetUserId [L15-L185]
      └─ uses_service IControlledRepository<NotificationSubscription>
        └─ method WriteQuery [L38]
          └─ ... (no implementation details available)

[web] GET /api/ui/sources/{type}/files  (Dataverse.Api.Controllers.UI.SourcesController.GetAccountingFiles)  [L32–L37] status=200 [auth=Authentication.UserPolicy]

[web] GET /api/ui/sources/{type}/authorization-url  (Dataverse.Api.Controllers.UI.SourcesController.GetAuthorizationUrl)  [L25–L30] status=200 [auth=Authentication.UserPolicy]

[web] GET /api/ui/storage/process-zip/{contextId}  (Dataverse.Api.Controllers.UI.StorageController.ProcessZip)  [L103–L109] status=200 [auth=Authentication.UserPolicy]

[web] POST /api/ui/storage/start-zip  (Dataverse.Api.Controllers.UI.StorageController.StartCreateZipFile)  [L55–L101] status=201 [auth=Authentication.UserPolicy]
  └─ uses_service TenantService
    └─ method GetCurrentTenantAsync [L58]
      └─ implementation Dataverse.Services.Features.Tenants.TenantService.GetCurrentTenantAsync [L6-L27]

[web] POST /api/ui/sync-configuration/default  (Dataverse.Api.Controllers.UI.SyncConfigurationController.CreateDefault)  [L142–L156] status=201 [auth=Authentication.AdminPolicy]
  └─ maps_to SyncConfigurationLightDto (var syncConfigDto) [L154]
  └─ calls SyncConfigurationRepository.Add [L152]
  └─ calls SyncConfigurationRepository.ReadQuery [L145]
  └─ insert SyncConfiguration [L152]
    └─ reads_from SyncConfigurations
  └─ query SyncConfiguration [L145]
    └─ reads_from SyncConfigurations
  └─ uses_service IControlledRepository<SyncConfiguration>
    └─ method ReadQuery [L145]
      └─ ... (no implementation details available)
  └─ uses_service IMapper
    └─ method Map [L154]
      └─ ... (no implementation details available)

[web] DELETE /api/ui/sync-configuration/{id:Guid}/setting  (Dataverse.Api.Controllers.UI.SyncConfigurationController.DeleteSetting)  [L158–L165] status=200 [auth=Authentication.AdminPolicy]
  └─ calls SyncConfigurationRepository.WriteQuery [L161]
  └─ write SyncConfiguration [L161]
    └─ reads_from SyncConfigurations
  └─ uses_service IControlledRepository<SyncConfiguration>
    └─ method WriteQuery [L161]
      └─ ... (no implementation details available)

[web] GET /api/ui/sync-configuration/{id:Guid}  (Dataverse.Api.Controllers.UI.SyncConfigurationController.Get)  [L59–L63] status=200 [auth=Authentication.AdminPolicy]
  └─ sends_request GetSyncConfigurationQuery [L62]
    └─ handled_by Dataverse.ApplicationService.Queries.SyncConfigurations.GetSyncConfigurationQueryHandler.Handle [L34–L90]
      └─ maps_to SyncConfigurationDto [L54]
      └─ uses_service IControlledRepository<SyncConfiguration>
        └─ method ReadQuery [L49]
          └─ ... (no implementation details available)
      └─ uses_service IMapper
        └─ method Map [L54]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L65]
          └─ implementation Dataverse.Services.Features.Requests.RequestProcessor.ProcessAsync [L8-L45]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle

[web] GET /api/ui/sync-configuration/  (Dataverse.Api.Controllers.UI.SyncConfigurationController.GetAll)  [L53–L57] status=200 [auth=Authentication.AdminPolicy]
  └─ sends_request GetSyncConfigurationsQuery [L56]
    └─ handled_by Dataverse.ApplicationService.Queries.SyncConfigurations.GetSyncConfigurationsQueryHandler.Handle [L32–L97]
      └─ maps_to SyncConfigurationDto [L56]
      └─ maps_to SyncConfigurationLightDto [L60]
      └─ uses_service IControlledRepository<SyncConfiguration>
        └─ method ReadQuery [L49]
          └─ ... (no implementation details available)
      └─ uses_service IMapper
        └─ method Map [L56]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L69]
          └─ implementation Dataverse.Services.Features.Requests.RequestProcessor.ProcessAsync [L8-L45]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle

[web] GET /api/ui/sync-configuration/type/{type}  (Dataverse.Api.Controllers.UI.SyncConfigurationController.GetAllByType)  [L65–L77] status=200 [auth=Authentication.AdminPolicy]
  └─ maps_to SyncConfigurationUltraLightDto [L70]
    └─ automapper.registration DataverseMappingProfile (SyncConfiguration->SyncConfigurationUltraLightDto) [L265]
  └─ calls SyncConfigurationRepository.ReadQuery [L70]
  └─ query SyncConfiguration [L70]
    └─ reads_from SyncConfigurations
  └─ uses_service IControlledRepository<SyncConfiguration>
    └─ method ReadQuery [L70]
      └─ ... (no implementation details available)

[web] GET /api/ui/sync-configuration/{id:guid}/authorisation-url  (Dataverse.Api.Controllers.UI.SyncConfigurationController.GetAuthorisationUrl)  [L191–L195] status=200 [auth=Authentication.AdminPolicy]

[web] GET /api/ui/sync-configuration/{id:Guid}/errors  (Dataverse.Api.Controllers.UI.SyncConfigurationController.GetErrors)  [L79–L110] status=200 [auth=Authentication.AdminPolicy]
  └─ calls SyncConfigurationRepository.ReadQuery [L89]
  └─ query SyncConfiguration [L89]
    └─ reads_from SyncConfigurations
  └─ uses_service IControlledRepository<SyncConfiguration>
    └─ method ReadQuery [L89]
      └─ ... (no implementation details available)

[web] GET /api/ui/sync-configuration/{id:guid}/tenants  (Dataverse.Api.Controllers.UI.SyncConfigurationController.GetTenants)  [L197–L201] status=200 [auth=Authentication.AdminPolicy]

[web] PUT /api/ui/sync-configuration/{id:Guid}/retry  (Dataverse.Api.Controllers.UI.SyncConfigurationController.RetrySyncErrors)  [L179–L189] status=200 [auth=Authentication.AdminPolicy]
  └─ calls SyncConfigurationRepository.WriteQuery [L182]
  └─ write SyncConfiguration [L182]
    └─ reads_from SyncConfigurations
  └─ uses_service IControlledRepository<SyncConfiguration>
    └─ method WriteQuery [L182]
      └─ ... (no implementation details available)

[web] PUT /api/ui/sync-configuration/{id:Guid}/start  (Dataverse.Api.Controllers.UI.SyncConfigurationController.StartSync)  [L167–L177] status=200 [auth=Authentication.AdminPolicy]
  └─ calls SyncConfigurationRepository.WriteQuery [L170]
  └─ write SyncConfiguration [L170]
    └─ reads_from SyncConfigurations
  └─ uses_service RequestRegionService
    └─ method GetTimeZone [L174]
      └─ implementation Dataverse.Services.Features.Localisation.RequestRegionService.GetTimeZone [L10-L74]
      └─ implementation Dataverse.Services.Features.Localisation.RequestRegionService.GetTimeZone [L10-L74]
  └─ uses_service IControlledRepository<SyncConfiguration>
    └─ method WriteQuery [L170]
      └─ ... (no implementation details available)

[web] GET /api/ui/sync-configuration/{id:guid}/test-connection  (Dataverse.Api.Controllers.UI.SyncConfigurationController.TestConnection)  [L203–L207] status=200 [auth=Authentication.AdminPolicy]

[web] PUT /api/ui/sync-configuration/{id:Guid}  (Dataverse.Api.Controllers.UI.SyncConfigurationController.Update)  [L112–L128] status=200 [auth=Authentication.AdminPolicy]
  └─ calls SyncConfigurationRepository.WriteQuery [L115]
  └─ write SyncConfiguration [L115]
    └─ reads_from SyncConfigurations
  └─ uses_service IControlledRepository<SyncConfiguration>
    └─ method WriteQuery [L115]
      └─ ... (no implementation details available)

[web] PUT /api/ui/sync-configuration/{id:Guid}/setting  (Dataverse.Api.Controllers.UI.SyncConfigurationController.UpdateSetting)  [L130–L140] status=200 [auth=Authentication.AdminPolicy]
  └─ calls SyncConfigurationRepository.WriteQuery [L133]
  └─ write SyncConfiguration [L133]
    └─ reads_from SyncConfigurations
  └─ uses_service IControlledRepository<SyncConfiguration>
    └─ method WriteQuery [L133]
      └─ ... (no implementation details available)

[web] GET /api/ui/sync-monitor/summary  (Dataverse.Api.Controllers.UI.SyncMonitorController.GetSummary)  [L63–L87] status=200 [auth=Authentication.AdminPolicy]
  └─ calls DataverseEntityFailureLogRepository.ReadQuery [L66]
  └─ calls SyncConfigurationRepository.ReadQuery [L68]
  └─ query DataverseEntityFailureLog [L66]
    └─ reads_from DataverseEntityFailureLogs
  └─ query SyncConfiguration [L68]
    └─ reads_from SyncConfigurations
  └─ uses_service IControlledRepository<DataverseEntityFailureLog>
    └─ method ReadQuery [L66]
      └─ ... (no implementation details available)
  └─ uses_service IControlledRepository<SyncConfiguration>
    └─ method ReadQuery [L68]
      └─ ... (no implementation details available)

[web] GET /api/ui/sync-monitor/failures  (Dataverse.Api.Controllers.UI.SyncMonitorController.Search)  [L36–L61] status=200 [auth=Authentication.AdminPolicy]
  └─ calls DataverseEntityFailureLogRepository.ReadQuery [L46]
  └─ query DataverseEntityFailureLog [L46]
    └─ reads_from DataverseEntityFailureLogs
  └─ uses_service IControlledRepository<DataverseEntityFailureLog>
    └─ method ReadQuery [L46]
      └─ ... (no implementation details available)

[web] GET /api/ui/templates/{id}/download  (Dataverse.Api.Controllers.UI.Templates.TemplatesController.DownloadTemplate)  [L66–L74] status=200 [auth=Authentication.UserPolicy]
  └─ uses_service ITemplateService (AddSingleton)
    └─ method GetTemplateDownloadUrl [L71]
      └─ implementation Dataverse.Templates.TemplateService.GetTemplateDownloadUrl [L17-L359]

[web] GET /api/ui/templates/  (Dataverse.Api.Controllers.UI.Templates.TemplatesController.FindTemplates)  [L32–L51] status=200 [auth=Authentication.UserPolicy]

[web] GET /api/ui/templates/types  (Dataverse.Api.Controllers.UI.Templates.TemplatesController.GetTypes)  [L53–L64] status=200 [auth=Authentication.UserPolicy]
  └─ uses_service ITemplateService (AddSingleton)
    └─ method GetTemplates [L56]
      └─ implementation Dataverse.Templates.TemplateService.GetTemplates [L17-L359]

[web] GET /api/ui/templates/{id}/preview  (Dataverse.Api.Controllers.UI.Templates.TemplatesController.PreviewTemplate)  [L76–L84] status=200 [auth=Authentication.UserPolicy]
  └─ uses_service ITemplateService (AddSingleton)
    └─ method GetTemplatePreviewUrl [L81]
      └─ implementation Dataverse.Templates.TemplateService.GetTemplatePreviewUrl [L17-L359]

[web] GET /api/ui/tenants/license-summary  (Dataverse.Api.Controllers.UI.TenantController.GetLicenseSummary)  [L70–L95] status=200 [auth=Authentication.UserPolicy]
  └─ maps_to LicenseSummaryDto [L74]
  └─ calls UserRepository.ReadQuery [L81]
  └─ calls TenantRepository.ReadTable [L74]
  └─ query User [L81]
  └─ query Tenant [L74]
    └─ reads_from Tenants
  └─ uses_service TenantService
    └─ method GetCurrentTenantAsync [L73]
      └─ implementation Dataverse.Services.Features.Tenants.TenantService.GetCurrentTenantAsync [L6-L27]
  └─ uses_service IControlledRepository<User>
    └─ method ReadQuery [L81]
      └─ ... (no implementation details available)
  └─ uses_service TenantRepository
    └─ method ReadTable [L74]
      └─ implementation Dataverse.Tenants.Data.TenantRepository.ReadTable [L15-L180]

[web] GET /api/ui/tenants/license-summary/trials/requested  (Dataverse.Api.Controllers.UI.TenantController.GetRequestedLicenseSummaries)  [L97–L118] status=200 [auth=Authentication.UserPolicy]
  └─ uses_cache IDistributedCache.GetRecordAsync [read] [L113]
  └─ calls TenantRepository.ReadTable [L101]
  └─ query Tenant [L101]
    └─ reads_from Tenants
  └─ uses_service TenantService
    └─ method GetCurrentTenantAsync [L100]
      └─ implementation Dataverse.Services.Features.Tenants.TenantService.GetCurrentTenantAsync [L6-L27]
  └─ uses_service TenantRepository
    └─ method ReadTable [L101]
      └─ implementation Dataverse.Tenants.Data.TenantRepository.ReadTable [L15-L180]

[web] GET /api/ui/tenants/subscriptions  (Dataverse.Api.Controllers.UI.TenantController.GetSubscriptions)  [L58–L68] status=200 [auth=Authentication.UserPolicy]
  └─ maps_to SubscriptionLightDto [L62]
  └─ calls TenantRepository.ReadTable [L62]
  └─ query Tenant [L62]
    └─ reads_from Tenants
  └─ uses_service TenantService
    └─ method GetCurrentTenantAsync [L61]
      └─ implementation Dataverse.Services.Features.Tenants.TenantService.GetCurrentTenantAsync [L6-L27]
  └─ uses_service TenantRepository
    └─ method ReadTable [L62]
      └─ implementation Dataverse.Tenants.Data.TenantRepository.ReadTable [L15-L180]

[web] PUT /api/ui/tenants/update-license  (Dataverse.Api.Controllers.UI.TenantController.UpdateLicense)  [L120–L125] status=200 [auth=Authentication.OwnerPolicy]
  └─ sends_request UserUpdateLicenseCommand [L123]
    └─ handled_by Dataverse.ApplicationService.Commands.Subscriptions.UserUpdateLicenseCommandHandler.Handle [L29–L124]
      └─ uses_service UserService
        └─ method GetUserIfPresentAsync [L60]
          └─ implementation Dataverse.ApplicationService.Services.UserService.GetUserIfPresentAsync [L15-L185]
      └─ uses_service TenantService
        └─ method GetCurrentTenantAsync [L59]
          └─ implementation Dataverse.Services.Features.Tenants.TenantService.GetCurrentTenantAsync [L6-L27]
          └─ implementation Dataverse.Services.Features.Tenants.TenantService.GetCurrentTenantAsync [L6-L27]
      └─ uses_service TenantLicenseService
        └─ method GetFirmSubscriptions [L61]
          └─ implementation Dataverse.ApplicationService.Services.TenantLicenseService.GetFirmSubscriptions [L22-L185]
      └─ uses_service EmailSender
        └─ method SendEmailFromOrdersAsync [L115]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L93]
          └─ implementation Dataverse.Services.Features.Requests.RequestProcessor.ProcessAsync [L8-L45]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle
      └─ uses_service SmtpSettings
        └─ method FromOrdersAU [L80]
          └─ ... (no implementation details available)

[web] POST /api/ui/trials/update-user/{referralId:guid}  (Dataverse.Api.Controllers.UI.Trial.TrialsAuthenticatedController.AddUserToReferral)  [L28–L33] status=201 [auth=Authentication.UserPolicy]
  └─ uses_service UserService
    └─ method GetUserId [L31]
      └─ implementation Dataverse.ApplicationService.Services.UserService.GetUserId [L15-L185]
  └─ sends_request AddUserToReferralCommand [L32]
    └─ handled_by Dataverse.ApplicationService.Commands.Trials.AddUserToReferralCommandHandler.Handle [L38–L67]
      └─ calls TenantRepository.WriteTable [L55]
      └─ maps_to UserDto [L53]
        └─ automapper.registration ExternalApiMappingProfile (User->UserDto) [L61]
        └─ automapper.registration CirrusMappingProfile (User->UserDto) [L110]
        └─ automapper.registration WorkpapersMappingProfile (User->UserDto) [L106]
        └─ automapper.registration DataverseMappingProfile (User->UserDto) [L77]
      └─ uses_service IControlledRepository<User>
        └─ method ReadQuery [L53]
          └─ ... (no implementation details available)

[web] POST /api/ui/trials/  (Dataverse.Api.Controllers.UI.Trial.TrialsController.CreateTrialTenant)  [L39–L44] status=201 [AllowAnonymous]
  └─ sends_request CreateTrialTenantCommand [L43]
    └─ handled_by Dataverse.ApplicationService.Commands.Trials.CreateTrialTenantCommandHandler.Handle [L32–L138]
      └─ calls TenantRepository.WriteTable [L53]
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L58]
          └─ implementation Dataverse.Services.Features.Requests.RequestProcessor.ProcessAsync [L8-L45]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle
      └─ uses_service TenantCreationConfig
        └─ method AutomatedCreationUserLimit [L71]
          └─ ... (no implementation details available)
      └─ uses_service TrialConfig
        └─ method TestingMode [L60]
          └─ ... (no implementation details available)

[web] GET /api/ui/trials/{type}/authorisation-url  (Dataverse.Api.Controllers.UI.Trial.TrialsController.GetAuthorisationUrl)  [L46–L57] status=200 [AllowAnonymous]
  └─ uses_service ConnectionService
    └─ method GetApiMethods [L56]
      └─ implementation Dataverse.ApplicationService.Services.ConnectionService.GetApiMethods [L9-L19]

[web] POST /api/ui/trials/{type}/process-callback  (Dataverse.Api.Controllers.UI.Trial.TrialsController.ProcessCallback)  [L59–L69] status=201 [AllowAnonymous]
  └─ uses_service ConnectionService
    └─ method GetApiMethods [L63]
      └─ implementation Dataverse.ApplicationService.Services.ConnectionService.GetApiMethods [L9-L19]
  └─ sends_request CreateNewUserReferralFromSignUpInfoCommand [L64]
    └─ handled_by Dataverse.ApplicationService.Commands.Trials.CreateNewUserReferralFromSignUpInfoCommandHandler.Handle [L21–L44]
      └─ calls TenantRepository.Add [L40]

[web] POST /api/ui/trials/update-referral/{referralId:guid}  (Dataverse.Api.Controllers.UI.Trial.TrialsController.UpdateReferral)  [L71–L76] status=201 [AllowAnonymous]
  └─ sends_request UpdateUserReferralCommand [L75]
    └─ handled_by Dataverse.ApplicationService.Commands.Trials.UpdateUserReferralCommandHandler.Handle [L32–L51]
      └─ calls TenantRepository.WriteTable [L43]

[web] GET /api/ui/trials/valid-email  (Dataverse.Api.Controllers.UI.Trial.TrialsController.ValidateEmail)  [L32–L37] status=200 [AllowAnonymous]
  └─ sends_request ValidateTrialEmailQuery [L36]
    └─ handled_by Dataverse.ApplicationService.Queries.Firms.Trials.ValidateTrialEmailQueryHandler.Handle [L37–L134]
      └─ calls TenantRepository.ReadTable [L127]
      └─ calls TenantRepository.ReadTable [L112]
      └─ calls TenantRepository.WriteTable [L56]
      └─ uses_service List<string>
        └─ method Any [L118]
          └─ ... (no implementation details available)

[web] POST /api/ui/trials/subscriptions/new  (Dataverse.Api.Controllers.UI.Trial.TrialSubscriptionsController.AddNewTenantTrialSubscriptions)  [L31–L36] status=201 [auth=Authentication.RequireTenantIdPolicy]
  └─ sends_request CreateTrialSubscriptionsForNewTenantCommand [L35]
    └─ handled_by Dataverse.ApplicationService.Commands.Trials.CreateTrialSubscriptionsForNewTenantCommandHandler.Handle [L33–L103]
      └─ calls TenantRepository.ReadTable [L99]
      └─ calls TenantRepository.ReadTable [L54]
      └─ uses_service TenantService
        └─ method GetCurrentTenant [L56]
          └─ implementation Dataverse.Services.Features.Tenants.TenantService.GetCurrentTenant [L6-L27]
            └─ uses_service TenantIdentificationService
              └─ method GetCurrentTenant [L20]
                └─ implementation Dataverse.Tenants.Tenants.TenantIdentificationService.GetCurrentTenant [L27-L149]
          └─ implementation Dataverse.Services.Features.Tenants.TenantService.GetCurrentTenant [L6-L27]
      └─ uses_service IControlledRepository<Office>
        └─ method ReadQuery [L60]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L86]
          └─ implementation Dataverse.Services.Features.Requests.RequestProcessor.ProcessAsync [L8-L45]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle

[web] POST /api/ui/trials/subscriptions  (Dataverse.Api.Controllers.UI.Trial.TrialSubscriptionsController.AddTrialSubscriptions)  [L24–L29] status=201 [auth=Authentication.AdminPolicy]
  └─ sends_request CreateTrialSubscriptionsCommand [L28]
    └─ handled_by Dataverse.ApplicationService.Commands.Trials.CreateTrialSubscriptionCommandHandler.Handle [L44–L163]
      └─ maps_to UserUltraLightDto [L139]
      └─ uses_service UserService
        └─ method GetUserAsync [L138]
          └─ implementation Dataverse.ApplicationService.Services.UserService.GetUserAsync [L15-L185]
      └─ uses_service TenantService
        └─ method GetCurrentTenantAsync [L75]
          └─ implementation Dataverse.Services.Features.Tenants.TenantService.GetCurrentTenantAsync [L6-L27]
          └─ implementation Dataverse.Services.Features.Tenants.TenantService.GetCurrentTenantAsync [L6-L27]
      └─ uses_service IControlledRepository<User>
        └─ method WriteQuery [L156]
          └─ ... (no implementation details available)
      └─ uses_service IMapper
        └─ method Map [L139]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L95]
          └─ implementation Dataverse.Services.Features.Requests.RequestProcessor.ProcessAsync [L8-L45]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle
      └─ uses_service TrialConfig
        └─ method UserLimit [L77]
          └─ ... (no implementation details available)
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L140]
      └─ uses_cache IDistributedCache.GetRecordAsync [read] [L135]
      └─ uses_cache IDistributedCache.GetRecordAsync [read] [L85]

[web] GET /api/ui/visualisations/friction-map/find  (Dataverse.Api.Controllers.UI.Visualisations.FrictionMapController.FindFrictionMap)  [L24–L28] status=200 [auth=Authentication.UserPolicy]

[web] GET /api/ui/visualisations/heatmap/find/binder  (Dataverse.Api.Controllers.UI.Visualisations.HeatMapController.FindBinderHeatMap)  [L52–L56] status=200 [auth=Authentication.UserPolicy]

[web] GET /api/ui/visualisations/heatmap/find/ledgerfile  (Dataverse.Api.Controllers.UI.Visualisations.HeatMapController.FindCirrusFileHeatMap)  [L58–L62] status=200 [auth=Authentication.UserPolicy]

[web] GET /api/ui/visualisations/heatmap/find/client  (Dataverse.Api.Controllers.UI.Visualisations.HeatMapController.FindClientHeatMap)  [L40–L44] status=200 [auth=Authentication.UserPolicy]

[web] GET /api/ui/visualisations/heatmap/find/office  (Dataverse.Api.Controllers.UI.Visualisations.HeatMapController.FindOfficeHeatMap)  [L46–L50] status=200 [auth=Authentication.UserPolicy]

[web] GET /api/ui/visualisations/heatmap/find/user  (Dataverse.Api.Controllers.UI.Visualisations.HeatMapController.FindUserHeatMap)  [L28–L32] status=200 [auth=Authentication.UserPolicy]

[web] POST /api/ui/workflow/deliverables/  (Dataverse.Api.Controllers.UI.Workflow.DeliverablesController.AddDeliverable)  [L85–L108] status=201 [auth=Authentication.UserPolicy]
  └─ maps_to DeliverableDto [L107]
  └─ calls DeliverableRepository.Add [L105]
  └─ calls DeliverableRepository.WriteQuery [L91]
  └─ insert Deliverable [L105]
    └─ reads_from Deliverables
  └─ write Deliverable [L91]
    └─ reads_from Deliverables
  └─ uses_service JobParamsService
    └─ method GetDeliverableParams [L101]
      └─ implementation Dataverse.ApplicationService.Services.Workflow.JobParamsService.GetDeliverableParams [L24-L215]
  └─ uses_service DeliverableRepository
    └─ method WriteQuery [L91]
      └─ implementation Dataverse.Data.Repository.Workflow.DeliverableRepository.WriteQuery [L8-L45]
  └─ uses_service IMapper
    └─ method Map [L107]
      └─ ... (no implementation details available)
  └─ sends_request CanIAccessJobQuery [L97]
    └─ handled_by Dataverse.ApplicationService.Queries.WorkFlow.CanIAccessJobQueryHandler.Handle [L39–L95]
      └─ uses_service UserService
        └─ method GetUserAsync [L71]
          └─ implementation Dataverse.ApplicationService.Services.UserService.GetUserAsync [L15-L185]
      └─ uses_service TenantService
        └─ method GetCurrentTenantAsync [L73]
          └─ implementation Dataverse.Services.Features.Tenants.TenantService.GetCurrentTenantAsync [L6-L27]
          └─ implementation Dataverse.Services.Features.Tenants.TenantService.GetCurrentTenantAsync [L6-L27]
      └─ uses_service RequestInfoService
        └─ method IsValidServiceAccountRequest [L68]
          └─ implementation Dataverse.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L92]
          └─ implementation Dataverse.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L92]
          └─ implementation Dataverse.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L92]
      └─ uses_service IControlledRepository<Job>
        └─ method ReadQuery [L78]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L82]
          └─ implementation Dataverse.Services.Features.Requests.RequestProcessor.ProcessAsync [L8-L45]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L91]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L75]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L73]

[web] DELETE /api/ui/workflow/deliverables/  (Dataverse.Api.Controllers.UI.Workflow.DeliverablesController.BulkDeleteDeliverables)  [L169–L183] status=200 [auth=Authentication.UserPolicy]
  └─ calls DeliverableRepository.WriteQuery [L172]
  └─ write Deliverable [L172]
    └─ reads_from Deliverables
  └─ uses_service DeliverableRepository
    └─ method WriteQuery [L172]
      └─ implementation Dataverse.Data.Repository.Workflow.DeliverableRepository.WriteQuery [L8-L45]
  └─ sends_request CanIAccessJobQuery [L180]
    └─ handled_by Dataverse.ApplicationService.Queries.WorkFlow.CanIAccessJobQueryHandler.Handle [L39–L95]
      └─ uses_service UserService
        └─ method GetUserAsync [L71]
          └─ implementation Dataverse.ApplicationService.Services.UserService.GetUserAsync [L15-L185]
      └─ uses_service TenantService
        └─ method GetCurrentTenantAsync [L73]
          └─ implementation Dataverse.Services.Features.Tenants.TenantService.GetCurrentTenantAsync [L6-L27]
          └─ implementation Dataverse.Services.Features.Tenants.TenantService.GetCurrentTenantAsync [L6-L27]
      └─ uses_service RequestInfoService
        └─ method IsValidServiceAccountRequest [L68]
          └─ implementation Dataverse.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L92]
          └─ implementation Dataverse.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L92]
          └─ implementation Dataverse.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L92]
      └─ uses_service IControlledRepository<Job>
        └─ method ReadQuery [L78]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L82]
          └─ implementation Dataverse.Services.Features.Requests.RequestProcessor.ProcessAsync [L8-L45]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L91]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L75]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L73]

[web] PUT /api/ui/workflow/deliverables/bulk  (Dataverse.Api.Controllers.UI.Workflow.DeliverablesController.BulkUpdateDeliverables)  [L158–L167] status=200 [auth=Authentication.UserPolicy]
  └─ sends_request UpdateDeliverableCommand [L163]
    └─ handled_by Dataverse.ApplicationService.Commands.Workflow.UpdateDeliverableCommandHandler.Handle [L25–L51]
      └─ uses_service JobParamsService
        └─ method GetDeliverableParams [L46]
          └─ implementation Dataverse.ApplicationService.Services.Workflow.JobParamsService.GetDeliverableParams [L24-L215]
      └─ uses_service IControlledRepository<Deliverable>
        └─ method WriteQuery [L40]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L44]
          └─ implementation Dataverse.Services.Features.Requests.RequestProcessor.ProcessAsync [L8-L45]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle

[web] DELETE /api/ui/workflow/deliverables/{id:Guid}  (Dataverse.Api.Controllers.UI.Workflow.DeliverablesController.Delete)  [L143–L156] status=200 [auth=Authentication.UserPolicy]
  └─ calls DeliverableRepository.WriteQuery [L146]
  └─ write Deliverable [L146]
    └─ reads_from Deliverables
  └─ uses_service DeliverableRepository
    └─ method WriteQuery [L146]
      └─ implementation Dataverse.Data.Repository.Workflow.DeliverableRepository.WriteQuery [L8-L45]
  └─ sends_request CanIAccessJobQuery [L149]
    └─ handled_by Dataverse.ApplicationService.Queries.WorkFlow.CanIAccessJobQueryHandler.Handle [L39–L95]
      └─ uses_service UserService
        └─ method GetUserAsync [L71]
          └─ implementation Dataverse.ApplicationService.Services.UserService.GetUserAsync [L15-L185]
      └─ uses_service TenantService
        └─ method GetCurrentTenantAsync [L73]
          └─ implementation Dataverse.Services.Features.Tenants.TenantService.GetCurrentTenantAsync [L6-L27]
          └─ implementation Dataverse.Services.Features.Tenants.TenantService.GetCurrentTenantAsync [L6-L27]
      └─ uses_service RequestInfoService
        └─ method IsValidServiceAccountRequest [L68]
          └─ implementation Dataverse.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L92]
          └─ implementation Dataverse.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L92]
          └─ implementation Dataverse.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L92]
      └─ uses_service IControlledRepository<Job>
        └─ method ReadQuery [L78]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L82]
          └─ implementation Dataverse.Services.Features.Requests.RequestProcessor.ProcessAsync [L8-L45]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L91]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L75]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L73]

[web] GET /api/ui/workflow/deliverables/find-job/{jobId:Guid}  (Dataverse.Api.Controllers.UI.Workflow.DeliverablesController.FindJobDeliverables)  [L51–L62] status=200 [auth=Authentication.UserPolicy]
  └─ maps_to DeliverableLightDto [L55]
  └─ calls DeliverableRepository.ReadQuery [L55]
  └─ query Deliverable [L55]
    └─ reads_from Deliverables
  └─ uses_service FirmSettingsService
    └─ method GetCurrentSettingsAsync [L57]
      └─ implementation Dataverse.ApplicationService.Services.FirmSettingsService.GetCurrentSettingsAsync [L18-L97]
  └─ uses_service DeliverableRepository
    └─ method ReadQuery [L55]
      └─ implementation Dataverse.Data.Repository.Workflow.DeliverableRepository.ReadQuery [L8-L45]
  └─ uses_service UserService
    └─ method GetUserId [L57]
      └─ implementation Dataverse.ApplicationService.Services.UserService.GetUserId [L15-L185]

[web] GET /api/ui/workflow/deliverables/{id:Guid}  (Dataverse.Api.Controllers.UI.Workflow.DeliverablesController.GetDeliverable)  [L64–L72] status=200 [auth=Authentication.UserPolicy]
  └─ maps_to DeliverableDto [L68]
  └─ calls DeliverableRepository.ReadQuery [L68]
  └─ query Deliverable [L68]
    └─ reads_from Deliverables
  └─ uses_service FirmSettingsService
    └─ method GetCurrentSettingsAsync [L70]
      └─ implementation Dataverse.ApplicationService.Services.FirmSettingsService.GetCurrentSettingsAsync [L18-L97]
  └─ uses_service DeliverableRepository
    └─ method ReadQuery [L68]
      └─ implementation Dataverse.Data.Repository.Workflow.DeliverableRepository.ReadQuery [L8-L45]
  └─ uses_service UserService
    └─ method GetUserId [L70]
      └─ implementation Dataverse.ApplicationService.Services.UserService.GetUserId [L15-L185]

[web] GET /api/ui/workflow/deliverables/default-name  (Dataverse.Api.Controllers.UI.Workflow.DeliverablesController.GetJobDefaultName)  [L74–L83] status=200 [auth=Authentication.UserPolicy]
  └─ sends_request DefaultDeliverableNameQuery [L81]
    └─ handled_by Dataverse.ApplicationService.Queries.WorkFlow.DefaultDeliverableNameQueryHandler.Handle [L41–L136]
      └─ maps_to DeliverableTypeDto [L94]
      └─ uses_service FirmSettingsService
        └─ method GetCurrentSettingsAsync [L80]
          └─ implementation Dataverse.ApplicationService.Services.FirmSettingsService.GetCurrentSettingsAsync [L18-L97]
      └─ uses_service UserService
        └─ method GetUserId [L80]
          └─ implementation Dataverse.ApplicationService.Services.UserService.GetUserId [L15-L185]
      └─ uses_service RequestInfoService
        └─ method IsValidServiceAccountRequest [L74]
          └─ implementation Dataverse.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L92]
          └─ implementation Dataverse.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L92]
          └─ implementation Dataverse.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L92]
      └─ uses_service JobParamsService
        └─ method GetClient [L93]
          └─ implementation Dataverse.ApplicationService.Services.Workflow.JobParamsService.GetClient [L24-L215]
      └─ uses_service IControlledRepository<Job>
        └─ method ReadQuery [L75]
          └─ ... (no implementation details available)
      └─ uses_service IMapper
        └─ method Map [L94]
          └─ ... (no implementation details available)
  └─ sends_request DefaultDeliverableNameQuery [L80]
    └─ handled_by Dataverse.ApplicationService.Queries.WorkFlow.DefaultDeliverableNameQueryHandler.Handle [L41–L136]
      └─ maps_to DeliverableTypeDto [L94]
      └─ uses_service FirmSettingsService
        └─ method GetCurrentSettingsAsync [L80]
          └─ implementation Dataverse.ApplicationService.Services.FirmSettingsService.GetCurrentSettingsAsync [L18-L97]
      └─ uses_service UserService
        └─ method GetUserId [L80]
          └─ implementation Dataverse.ApplicationService.Services.UserService.GetUserId [L15-L185]
      └─ uses_service RequestInfoService
        └─ method IsValidServiceAccountRequest [L74]
          └─ implementation Dataverse.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L92]
          └─ implementation Dataverse.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L92]
          └─ implementation Dataverse.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L92]
      └─ uses_service JobParamsService
        └─ method GetClient [L93]
          └─ implementation Dataverse.ApplicationService.Services.Workflow.JobParamsService.GetClient [L24-L215]
      └─ uses_service IControlledRepository<Job>
        └─ method ReadQuery [L75]
          └─ ... (no implementation details available)
      └─ uses_service IMapper
        └─ method Map [L94]
          └─ ... (no implementation details available)

[web] PUT /api/ui/workflow/deliverables/{id:Guid}/reorder  (Dataverse.Api.Controllers.UI.Workflow.DeliverablesController.Reorder)  [L120–L141] status=200 [auth=Authentication.UserPolicy]
  └─ calls DeliverableRepository.WriteQuery [L129]
  └─ calls DeliverableRepository.ReadQuery [L123]
  └─ query Deliverable [L123]
    └─ reads_from Deliverables
  └─ write Deliverable [L129]
    └─ reads_from Deliverables
  └─ uses_service DeliverableRepository
    └─ method ReadQuery [L123]
      └─ implementation Dataverse.Data.Repository.Workflow.DeliverableRepository.ReadQuery [L8-L45]
  └─ sends_request CanIAccessJobQuery [L135]
    └─ handled_by Dataverse.ApplicationService.Queries.WorkFlow.CanIAccessJobQueryHandler.Handle [L39–L95]
      └─ uses_service UserService
        └─ method GetUserAsync [L71]
          └─ implementation Dataverse.ApplicationService.Services.UserService.GetUserAsync [L15-L185]
      └─ uses_service TenantService
        └─ method GetCurrentTenantAsync [L73]
          └─ implementation Dataverse.Services.Features.Tenants.TenantService.GetCurrentTenantAsync [L6-L27]
          └─ implementation Dataverse.Services.Features.Tenants.TenantService.GetCurrentTenantAsync [L6-L27]
      └─ uses_service RequestInfoService
        └─ method IsValidServiceAccountRequest [L68]
          └─ implementation Dataverse.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L92]
          └─ implementation Dataverse.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L92]
          └─ implementation Dataverse.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L92]
      └─ uses_service IControlledRepository<Job>
        └─ method ReadQuery [L78]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L82]
          └─ implementation Dataverse.Services.Features.Requests.RequestProcessor.ProcessAsync [L8-L45]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L91]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L75]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L73]

[web] PUT /api/ui/workflow/deliverables/{id:guid}  (Dataverse.Api.Controllers.UI.Workflow.DeliverablesController.UpdateDeliverable)  [L110–L118] status=200 [auth=Authentication.UserPolicy]
  └─ maps_to DeliverableDto [L115]
  └─ uses_service IMapper
    └─ method Map [L115]
      └─ ... (no implementation details available)
  └─ sends_request UpdateDeliverableCommand [L113]
    └─ handled_by Dataverse.ApplicationService.Commands.Workflow.UpdateDeliverableCommandHandler.Handle [L25–L51]
      └─ uses_service JobParamsService
        └─ method GetDeliverableParams [L46]
          └─ implementation Dataverse.ApplicationService.Services.Workflow.JobParamsService.GetDeliverableParams [L24-L215]
      └─ uses_service IControlledRepository<Deliverable>
        └─ method WriteQuery [L40]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L44]
          └─ implementation Dataverse.Services.Features.Requests.RequestProcessor.ProcessAsync [L8-L45]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle

[web] POST /api/ui/workflow/deliverable-types  (Dataverse.Api.Controllers.UI.Workflow.DeliverableTypesController.Create)  [L64–L77] status=201 [auth=Authentication.UserPolicy,Authentication.AdminPolicy]
  └─ maps_to DeliverableTypeLightDto [L76]
  └─ calls DeliverableTypeRepository.Add [L74]
  └─ calls DeliverableTypeRepository.WriteQuery [L67]
  └─ insert DeliverableType [L74]
    └─ reads_from DeliverableTypes
  └─ write DeliverableType [L67]
    └─ reads_from DeliverableTypes
  └─ uses_service IControlledRepository<DeliverableType>
    └─ method WriteQuery [L67]
      └─ ... (no implementation details available)
  └─ uses_service IMapper
    └─ method Map [L76]
      └─ ... (no implementation details available)

[web] DELETE /api/ui/workflow/deliverable-types/{id:Guid}  (Dataverse.Api.Controllers.UI.Workflow.DeliverableTypesController.Delete)  [L104–L114] status=200 [auth=Authentication.UserPolicy,Authentication.AdminPolicy]
  └─ calls DeliverableTypeRepository.WriteQuery [L107]
  └─ write DeliverableType [L107]
    └─ reads_from DeliverableTypes
  └─ uses_service IControlledRepository<DeliverableType>
    └─ method WriteQuery [L107]
      └─ ... (no implementation details available)

[web] GET /api/ui/workflow/deliverable-types  (Dataverse.Api.Controllers.UI.Workflow.DeliverableTypesController.GetAll)  [L42–L52] status=200 [auth=Authentication.UserPolicy]
  └─ maps_to DeliverableTypeLightDto [L45]
    └─ automapper.registration DataverseMappingProfile (DeliverableType->DeliverableTypeLightDto) [L359]
  └─ calls DeliverableTypeRepository.ReadQuery [L45]
  └─ query DeliverableType [L45]
    └─ reads_from DeliverableTypes
  └─ uses_service IControlledRepository<DeliverableType>
    └─ method ReadQuery [L45]
      └─ ... (no implementation details available)

[web] GET /api/ui/workflow/deliverable-types/{id:Guid}  (Dataverse.Api.Controllers.UI.Workflow.DeliverableTypesController.GetById)  [L54–L62] status=200 [auth=Authentication.UserPolicy]
  └─ maps_to DeliverableTypeLightDto [L57]
    └─ automapper.registration DataverseMappingProfile (DeliverableType->DeliverableTypeLightDto) [L359]
  └─ calls DeliverableTypeRepository.ReadQuery [L57]
  └─ query DeliverableType [L57]
    └─ reads_from DeliverableTypes
  └─ uses_service IControlledRepository<DeliverableType>
    └─ method ReadQuery [L57]
      └─ ... (no implementation details available)

[web] PUT /api/ui/workflow/deliverable-types/{id:Guid}/reorder  (Dataverse.Api.Controllers.UI.Workflow.DeliverableTypesController.Reorder)  [L91–L102] status=200 [auth=Authentication.UserPolicy,Authentication.AdminPolicy]
  └─ calls DeliverableTypeRepository.WriteQuery [L94]
  └─ write DeliverableType [L94]
    └─ reads_from DeliverableTypes
  └─ uses_service IControlledRepository<DeliverableType>
    └─ method WriteQuery [L94]
      └─ ... (no implementation details available)

[web] PUT /api/ui/workflow/deliverable-types/{id:Guid}  (Dataverse.Api.Controllers.UI.Workflow.DeliverableTypesController.Update)  [L79–L89] status=200 [auth=Authentication.UserPolicy,Authentication.AdminPolicy]
  └─ calls DeliverableTypeRepository.WriteQuery [L82]
  └─ write DeliverableType [L82]
    └─ reads_from DeliverableTypes
  └─ uses_service IControlledRepository<DeliverableType>
    └─ method WriteQuery [L82]
      └─ ... (no implementation details available)

[web] POST /api/ui/workflow/excel/create-upload  (Dataverse.Api.Controllers.UI.Workflow.ExcelImportExportController.CreateUploadJobDto)  [L84–L90] status=201 [auth=Authentication.UserPolicy]
  └─ maps_to ImportJobsDto [L89]
  └─ uses_service IMapper
    └─ method Map [L89]
      └─ ... (no implementation details available)
  └─ sends_request CreateJobImportsFromExcelCommand [L87]
    └─ handled_by Dataverse.ApplicationService.Commands.Workflow.CreateJobImportsFromExcelCommandHandler.Handle [L31–L57]
      └─ uses_service StorageService
        └─ method GetStream [L48]
          └─ implementation Dataverse.Services.Features.Storage.StorageService.GetStream [L18-L331]
      └─ uses_storage StorageService.GetStream [L48]

[web] GET /api/ui/workflow/excel/download  (Dataverse.Api.Controllers.UI.Workflow.ExcelImportExportController.DownloadJobs)  [L49–L82] status=200 [auth=Authentication.UserPolicy]
  └─ sends_request CreateDownloadCommand [L79]
    └─ handled_by Cirrus.ApplicationService.Services.Commands.CreateDownloadCommandHandler.Handle [L48–L73]
      └─ uses_service IStorageService (InstancePerLifetimeScope)
        └─ method CreateDownloadUrl [L60]
          └─ implementation IStorageService.CreateDownloadUrl [L9-L9]
          └─ ... (no implementation details available)
      └─ uses_storage IStorageService.CreateDownloadUrl [L60]
  └─ sends_request ExportJobsFromExcelCommand [L78]
    └─ handled_by Dataverse.ApplicationService.Commands.Workflow.ExportJobsFromExcelCommandHandler.Handle [L27–L45]
      └─ uses_service WorkflowExcelWriter
        └─ method WriteAsync [L41]
          └─ ... (no implementation details available)
  └─ sends_request FindExcelJobsQuery [L65]

[web] GET /api/ui/workflow/excel/download-master  (Dataverse.Api.Controllers.UI.Workflow.ExcelImportExportController.DownloadTemplate)  [L39–L47] status=200 [auth=Authentication.UserPolicy]
  └─ sends_request CreateDownloadCommand [L44]
    └─ handled_by Cirrus.ApplicationService.Services.Commands.CreateDownloadCommandHandler.Handle [L48–L73]
      └─ uses_service IStorageService (InstancePerLifetimeScope)
        └─ method CreateDownloadUrl [L60]
          └─ implementation IStorageService.CreateDownloadUrl [L9-L9]
          └─ ... (no implementation details available)
      └─ uses_storage IStorageService.CreateDownloadUrl [L60]

[web] POST /api/ui/workflow/excel/upload-job  (Dataverse.Api.Controllers.UI.Workflow.ExcelImportExportController.UploadJob)  [L92–L100] status=201 [auth=Authentication.UserPolicy]
  └─ sends_request ImportJobsFromDtoCommand [L95]
    └─ handled_by Dataverse.ApplicationService.Commands.Workflow.ImportJobsFromDtoCommandHandler.Handle [L31–L263]
      └─ uses_service IControlledRepository<Client>
        └─ method ReadQuery [L184]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<DeliverableType>
        └─ method ReadQuery [L200]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<JobStatus>
        └─ method ReadQuery [L231]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<JobType>
        └─ method ReadQuery [L253]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<User>
        └─ method ReadQuery [L216]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L56]
          └─ implementation Dataverse.Services.Features.Requests.RequestProcessor.ProcessAsync [L8-L45]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle

[web] DELETE /api/ui/workflow/jobs/  (Dataverse.Api.Controllers.UI.Workflow.JobController.BulkDeleteJobs)  [L235–L249] status=200 [auth=Authentication.UserPolicy]
  └─ calls JobRepository.WriteQuery [L238]
  └─ write Job [L238]
    └─ reads_from Jobs
  └─ uses_service IControlledRepository<Job>
    └─ method WriteQuery [L238]
      └─ ... (no implementation details available)
  └─ sends_request CanIAccessJobQuery [L246]
    └─ handled_by Dataverse.ApplicationService.Queries.WorkFlow.CanIAccessJobQueryHandler.Handle [L39–L95]
      └─ uses_service UserService
        └─ method GetUserAsync [L71]
          └─ implementation Dataverse.ApplicationService.Services.UserService.GetUserAsync [L15-L185]
      └─ uses_service TenantService
        └─ method GetCurrentTenantAsync [L73]
          └─ implementation Dataverse.Services.Features.Tenants.TenantService.GetCurrentTenantAsync [L6-L27]
          └─ implementation Dataverse.Services.Features.Tenants.TenantService.GetCurrentTenantAsync [L6-L27]
      └─ uses_service RequestInfoService
        └─ method IsValidServiceAccountRequest [L68]
          └─ implementation Dataverse.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L92]
          └─ implementation Dataverse.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L92]
          └─ implementation Dataverse.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L92]
      └─ uses_service IControlledRepository<Job>
        └─ method ReadQuery [L78]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L82]
          └─ implementation Dataverse.Services.Features.Requests.RequestProcessor.ProcessAsync [L8-L45]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L91]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L75]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L73]

[web] PUT /api/ui/workflow/jobs/bulk  (Dataverse.Api.Controllers.UI.Workflow.JobController.BulkUpdateJobs)  [L212–L221] status=200 [auth=Authentication.UserPolicy]
  └─ sends_request UpdateJobCommand [L217]

[web] POST /api/ui/workflow/jobs/  (Dataverse.Api.Controllers.UI.Workflow.JobController.CreateJob)  [L164–L169] status=201 [auth=Authentication.UserPolicy]
  └─ sends_request CreateJobCommand [L167]

[web] DELETE /api/ui/workflow/jobs/{id:guid}  (Dataverse.Api.Controllers.UI.Workflow.JobController.DeleteJob)  [L223–L233] status=200 [auth=Authentication.UserPolicy]
  └─ calls JobRepository.WriteQuery [L228]
  └─ write Job [L228]
    └─ reads_from Jobs
  └─ uses_service IControlledRepository<Job>
    └─ method WriteQuery [L228]
      └─ ... (no implementation details available)
  └─ sends_request CanIAccessJobQuery [L226]
    └─ handled_by Dataverse.ApplicationService.Queries.WorkFlow.CanIAccessJobQueryHandler.Handle [L39–L95]
      └─ uses_service UserService
        └─ method GetUserAsync [L71]
          └─ implementation Dataverse.ApplicationService.Services.UserService.GetUserAsync [L15-L185]
      └─ uses_service TenantService
        └─ method GetCurrentTenantAsync [L73]
          └─ implementation Dataverse.Services.Features.Tenants.TenantService.GetCurrentTenantAsync [L6-L27]
          └─ implementation Dataverse.Services.Features.Tenants.TenantService.GetCurrentTenantAsync [L6-L27]
      └─ uses_service RequestInfoService
        └─ method IsValidServiceAccountRequest [L68]
          └─ implementation Dataverse.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L92]
          └─ implementation Dataverse.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L92]
          └─ implementation Dataverse.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L92]
      └─ uses_service IControlledRepository<Job>
        └─ method ReadQuery [L78]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L82]
          └─ implementation Dataverse.Services.Features.Requests.RequestProcessor.ProcessAsync [L8-L45]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L91]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L75]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L73]

[web] GET /api/ui/workflow/jobs/find  (Dataverse.Api.Controllers.UI.Workflow.JobController.FindJobs)  [L54–L70] status=200 [auth=Authentication.UserPolicy]
  └─ sends_request FindJobsQuery [L69]
    └─ handled_by Dataverse.ApplicationService.Queries.WorkFlow.FindJobsQueryHandler.Handle [L178–L538]
      └─ calls JobRepository.ReadQuery [L269]
      └─ maps_to DeliverableDto [L249]
      └─ maps_to JobDto [L245]
        └─ converts_to JobExportDto [L312]
      └─ maps_to WorkflowTaskDto [L251]
      └─ maps_to JobExportDto [L258]
      └─ uses_service FirmSettingsService
        └─ method GetCurrentSettingsAsync [L270]
          └─ implementation Dataverse.ApplicationService.Services.FirmSettingsService.GetCurrentSettingsAsync [L18-L97]
      └─ uses_service UserService
        └─ method GetUserId [L270]
          └─ implementation Dataverse.ApplicationService.Services.UserService.GetUserId [L15-L185]
      └─ uses_service IControlledRepository<JobStatus>
        └─ method ReadQuery [L322]
          └─ ... (no implementation details available)
      └─ uses_service IMapper
        └─ method ConfigurationProvider [L245]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L217]
          └─ implementation Dataverse.Services.Features.Requests.RequestProcessor.ProcessAsync [L8-L45]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle

[web] GET /api/ui/workflow/jobs/{id:guid}  (Dataverse.Api.Controllers.UI.Workflow.JobController.GetJob)  [L72–L81] status=200 [auth=Authentication.UserPolicy]
  └─ maps_to JobDto [L77]
    └─ automapper.registration DataverseMappingProfile (Job->JobDto) [L307]
    └─ automapper.registration ExternalApiMappingProfile (Job->JobDto) [L120]
    └─ converts_to JobExportDto [L312]
  └─ calls JobRepository.ReadQuery [L77]
  └─ query Job [L77]
    └─ reads_from Jobs
  └─ uses_service FirmSettingsService
    └─ method GetCurrentSettingsAsync [L79]
      └─ implementation Dataverse.ApplicationService.Services.FirmSettingsService.GetCurrentSettingsAsync [L18-L97]
  └─ uses_service IControlledRepository<Job>
    └─ method ReadQuery [L77]
      └─ ... (no implementation details available)
  └─ uses_service UserService
    └─ method GetUserId [L79]
      └─ implementation Dataverse.ApplicationService.Services.UserService.GetUserId [L15-L185]
  └─ sends_request CanIAccessJobQuery [L75]
    └─ handled_by Dataverse.ApplicationService.Queries.WorkFlow.CanIAccessJobQueryHandler.Handle [L39–L95]
      └─ uses_service UserService
        └─ method GetUserAsync [L71]
          └─ implementation Dataverse.ApplicationService.Services.UserService.GetUserAsync [L15-L185]
      └─ uses_service TenantService
        └─ method GetCurrentTenantAsync [L73]
          └─ implementation Dataverse.Services.Features.Tenants.TenantService.GetCurrentTenantAsync [L6-L27]
          └─ implementation Dataverse.Services.Features.Tenants.TenantService.GetCurrentTenantAsync [L6-L27]
      └─ uses_service RequestInfoService
        └─ method IsValidServiceAccountRequest [L68]
          └─ implementation Dataverse.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L92]
          └─ implementation Dataverse.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L92]
          └─ implementation Dataverse.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L92]
      └─ uses_service IControlledRepository<Job>
        └─ method ReadQuery [L78]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L82]
          └─ implementation Dataverse.Services.Features.Requests.RequestProcessor.ProcessAsync [L8-L45]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L91]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L75]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L73]

[web] GET /api/ui/workflow/jobs/{id:guid}/cirrus-links  (Dataverse.Api.Controllers.UI.Workflow.JobController.GetJobCirrusLinks)  [L83–L93] status=200 [auth=Authentication.UserPolicy]
  └─ maps_to DeliverableCirrusLinkDto [L86]
  └─ calls JobRepository.ReadQuery [L86]
  └─ query Job [L86]
    └─ reads_from Jobs
  └─ uses_service IControlledRepository<Job>
    └─ method ReadQuery [L86]
      └─ ... (no implementation details available)

[web] GET /api/ui/workflow/jobs/default-name  (Dataverse.Api.Controllers.UI.Workflow.JobController.GetJobDefaultName)  [L95–L100] status=200 [auth=Authentication.UserPolicy]
  └─ sends_request DefaultJobNameQuery [L98]
    └─ handled_by Dataverse.ApplicationService.Queries.WorkFlow.DefaultJobNameQueryHandler.Handle [L32–L73]
      └─ maps_to JobTypeDto [L51]
      └─ uses_service JobParamsService
        └─ method GetClient [L50]
          └─ implementation Dataverse.ApplicationService.Services.Workflow.JobParamsService.GetClient [L24-L215]
      └─ uses_service IMapper
        └─ method Map [L51]
          └─ ... (no implementation details available)

[web] GET /api/ui/workflow/jobs/series  (Dataverse.Api.Controllers.UI.Workflow.JobController.GetJobSeries)  [L112–L136] status=200 [auth=Authentication.UserPolicy]
  └─ calls JobRepository.ReadQuery [L121]
  └─ query Job [L121]
    └─ reads_from Jobs
  └─ uses_service IControlledRepository<Job>
    └─ method ReadQuery [L121]
      └─ ... (no implementation details available)

[web] GET /api/ui/workflow/jobs/series/batches  (Dataverse.Api.Controllers.UI.Workflow.JobController.GetJobSeriesBatches)  [L145–L162] status=200 [auth=Authentication.UserPolicy]
  └─ calls JobRepository.ReadQuery [L151]
  └─ query Job [L151]
    └─ reads_from Jobs
  └─ uses_service IControlledRepository<Job>
    └─ method ReadQuery [L151]
      └─ ... (no implementation details available)

[web] PUT /api/ui/workflow/jobs/{id:guid}/update/binders  (Dataverse.Api.Controllers.UI.Workflow.JobController.LinkJobBinders)  [L204–L210] status=200 [auth=Authentication.UserPolicy]
  └─ sends_request UpdateJobBindersCommand [L207]
    └─ handled_by Dataverse.ApplicationService.Commands.Workflow.UpdateJobBindersCommandHandler.Handle [L27–L59]
      └─ uses_service IControlledRepository<Job>
        └─ method WriteQuery [L45]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L47]
          └─ implementation Dataverse.Services.Features.Requests.RequestProcessor.ProcessAsync [L8-L45]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle

[web] PUT /api/ui/workflow/jobs/{id:guid}/update/cirrusFileId  (Dataverse.Api.Controllers.UI.Workflow.JobController.LinkJobCirrusFile)  [L196–L202] status=200 [auth=Authentication.UserPolicy]
  └─ sends_request UpdateCirrusFileIdCommand [L199]
    └─ handled_by Dataverse.ApplicationService.Commands.Workflow.UpdateCirrusFileIdCommandHandler.Handle [L25–L48]
      └─ uses_service IControlledRepository<Job>
        └─ method WriteQuery [L43]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L44]
          └─ implementation Dataverse.Services.Features.Requests.RequestProcessor.ProcessAsync [L8-L45]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle

[web] POST /api/ui/workflow/jobs/{id:guid}/rollover  (Dataverse.Api.Controllers.UI.Workflow.JobController.RolloverJob)  [L171–L175] status=201 [auth=Authentication.UserPolicy]
  └─ sends_request RolloverJobCommand [L174]
    └─ handled_by Dataverse.ApplicationService.Commands.Workflow.RolloverJobCommandHandler.Handle [L58–L257]
      └─ uses_service JobParamsService
        └─ method GetDefaultStatus [L95]
          └─ implementation Dataverse.ApplicationService.Services.Workflow.JobParamsService.GetDefaultStatus [L24-L215]
      └─ uses_service IControlledRepository<Job>
        └─ method ReadQuery [L151]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L78]
          └─ implementation Dataverse.Services.Features.Requests.RequestProcessor.ProcessAsync [L8-L45]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle

[web] PUT /api/ui/workflow/jobs/{id:guid}  (Dataverse.Api.Controllers.UI.Workflow.JobController.UpdateJob)  [L177–L188] status=200 [auth=Authentication.UserPolicy]
  └─ maps_to JobLightDto [L184]
  └─ uses_service IMapper
    └─ method Map [L184]
      └─ ... (no implementation details available)
  └─ sends_request UpdateJobCommand [L180]

[web] GET /api/ui/workflow/job-filter-sets/{id:Guid}/can-i-save  (Dataverse.Api.Controllers.UI.Workflow.JobFilterSetsController.CanISave)  [L75–L83] status=200 [auth=Authentication.UserPolicy]
  └─ calls JobFilterSetRepository.WriteQuery [L78]
  └─ write JobFilterSet [L78]
    └─ reads_from JobFilterSets
  └─ uses_service IControlledRepository<JobFilterSet>
    └─ method WriteQuery [L78]
      └─ ... (no implementation details available)
  └─ sends_request CanIEditJobFilterSet [L82]
    └─ handled_by Dataverse.ApplicationService.Queries.WorkFlow.CanIEditJobFilterSetHandler.Handle [L24–L56]
      └─ uses_service UserService
        └─ method GetUserAsync [L38]
          └─ implementation Dataverse.ApplicationService.Services.UserService.GetUserAsync [L15-L185]

[web] GET /api/ui/workflow/job-filter-sets/can-i-save-levels  (Dataverse.Api.Controllers.UI.Workflow.JobFilterSetsController.CanISaveLevels)  [L85–L106] status=200 [auth=Authentication.UserPolicy]
  └─ uses_service UserService
    └─ method GetUser [L88]
      └─ implementation Dataverse.ApplicationService.Services.UserService.GetUser [L15-L185]

[web] POST /api/ui/workflow/job-filter-sets  (Dataverse.Api.Controllers.UI.Workflow.JobFilterSetsController.Create)  [L108–L116] status=201 [auth=Authentication.UserPolicy]
  └─ calls JobFilterSetRepository.Add [L114]
  └─ insert JobFilterSet [L114]
    └─ reads_from JobFilterSets
  └─ uses_service IControlledRepository<JobFilterSet>
    └─ method Add [L114]
      └─ ... (no implementation details available)
  └─ uses_service UserService
    └─ method GetUserId [L111]
      └─ implementation Dataverse.ApplicationService.Services.UserService.GetUserId [L15-L185]
  └─ sends_request CanIEditJobFilterSet [L112]
    └─ handled_by Dataverse.ApplicationService.Queries.WorkFlow.CanIEditJobFilterSetHandler.Handle [L24–L56]
      └─ uses_service UserService
        └─ method GetUserAsync [L38]
          └─ implementation Dataverse.ApplicationService.Services.UserService.GetUserAsync [L15-L185]

[web] DELETE /api/ui/workflow/job-filter-sets/{id:Guid}  (Dataverse.Api.Controllers.UI.Workflow.JobFilterSetsController.Delete)  [L130–L140] status=200 [auth=Authentication.UserPolicy]
  └─ calls JobFilterSetRepository.Remove [L139]
  └─ calls JobFilterSetRepository.WriteQuery [L133]
  └─ delete JobFilterSet [L139]
    └─ reads_from JobFilterSets
  └─ write JobFilterSet [L133]
    └─ reads_from JobFilterSets
  └─ uses_service IControlledRepository<JobFilterSet>
    └─ method WriteQuery [L133]
      └─ ... (no implementation details available)
  └─ sends_request CanIEditJobFilterSet [L137]
    └─ handled_by Dataverse.ApplicationService.Queries.WorkFlow.CanIEditJobFilterSetHandler.Handle [L24–L56]
      └─ uses_service UserService
        └─ method GetUserAsync [L38]
          └─ implementation Dataverse.ApplicationService.Services.UserService.GetUserAsync [L15-L185]

[web] GET /api/ui/workflow/job-filter-sets  (Dataverse.Api.Controllers.UI.Workflow.JobFilterSetsController.GetAll)  [L48–L63] status=200 [auth=Authentication.UserPolicy]
  └─ maps_to JobFilterSetLightDto [L53]
    └─ automapper.registration DataverseMappingProfile (JobFilterSet->JobFilterSetLightDto) [L343]
  └─ calls JobFilterSetRepository.ReadQuery [L53]
  └─ query JobFilterSet [L53]
    └─ reads_from JobFilterSets
  └─ uses_service IControlledRepository<JobFilterSet>
    └─ method ReadQuery [L53]
      └─ ... (no implementation details available)
  └─ uses_service UserService
    └─ method GetUserId [L51]
      └─ implementation Dataverse.ApplicationService.Services.UserService.GetUserId [L15-L185]

[web] GET /api/ui/workflow/job-filter-sets/{id:Guid}  (Dataverse.Api.Controllers.UI.Workflow.JobFilterSetsController.GetById)  [L65–L73] status=200 [auth=Authentication.UserPolicy]
  └─ maps_to JobFilterSetDto [L68]
    └─ automapper.registration DataverseMappingProfile (JobFilterSet->JobFilterSetDto) [L344]
  └─ calls JobFilterSetRepository.ReadQuery [L68]
  └─ query JobFilterSet [L68]
    └─ reads_from JobFilterSets
  └─ uses_service IControlledRepository<JobFilterSet>
    └─ method ReadQuery [L68]
      └─ ... (no implementation details available)

[web] PUT /api/ui/workflow/job-filter-sets/{id:Guid}  (Dataverse.Api.Controllers.UI.Workflow.JobFilterSetsController.Update)  [L118–L128] status=200 [auth=Authentication.UserPolicy]
  └─ calls JobFilterSetRepository.WriteQuery [L121]
  └─ write JobFilterSet [L121]
    └─ reads_from JobFilterSets
  └─ uses_service IControlledRepository<JobFilterSet>
    └─ method WriteQuery [L121]
      └─ ... (no implementation details available)
  └─ uses_service UserService
    └─ method GetUserId [L127]
      └─ implementation Dataverse.ApplicationService.Services.UserService.GetUserId [L15-L185]
  └─ sends_request CanIEditJobFilterSet [L125]
    └─ handled_by Dataverse.ApplicationService.Queries.WorkFlow.CanIEditJobFilterSetHandler.Handle [L24–L56]
      └─ uses_service UserService
        └─ method GetUserAsync [L38]
          └─ implementation Dataverse.ApplicationService.Services.UserService.GetUserAsync [L15-L185]

[web] POST /api/ui/workflow/job-statuses  (Dataverse.Api.Controllers.UI.Workflow.JobStatusesController.Create)  [L67–L89] status=201 [auth=Authentication.UserPolicy,Authentication.AdminPolicy]
  └─ maps_to JobStatusDto [L88]
  └─ calls JobStatusRepository.Add [L86]
  └─ calls JobStatusRepository.WriteQuery [L70]
  └─ calls KanbanColumnRepository.ReadQuery [L76]
  └─ insert JobStatus [L86]
    └─ reads_from DVS_JobStatuses
  └─ write JobStatus [L70]
    └─ reads_from DVS_JobStatuses
  └─ query KanbanColumn [L76]
    └─ reads_from KanbanColumns
  └─ uses_service IControlledRepository<JobStatus>
    └─ method WriteQuery [L70]
      └─ ... (no implementation details available)
  └─ uses_service IControlledRepository<KanbanColumn>
    └─ method ReadQuery [L76]
      └─ ... (no implementation details available)
  └─ uses_service IMapper
    └─ method Map [L88]
      └─ ... (no implementation details available)

[web] DELETE /api/ui/workflow/job-statuses/{id:Guid}  (Dataverse.Api.Controllers.UI.Workflow.JobStatusesController.Delete)  [L116–L126] status=200 [auth=Authentication.UserPolicy,Authentication.AdminPolicy]
  └─ calls JobStatusRepository.WriteQuery [L119]
  └─ write JobStatus [L119]
    └─ reads_from DVS_JobStatuses
  └─ uses_service IControlledRepository<JobStatus>
    └─ method WriteQuery [L119]
      └─ ... (no implementation details available)

[web] GET /api/ui/workflow/job-statuses  (Dataverse.Api.Controllers.UI.Workflow.JobStatusesController.GetAll)  [L46–L55] status=200 [auth=Authentication.UserPolicy]
  └─ maps_to JobStatusLightDto [L49]
    └─ automapper.registration DataverseMappingProfile (JobStatus->JobStatusLightDto) [L316]
  └─ calls JobStatusRepository.ReadQuery [L49]
  └─ query JobStatus [L49]
    └─ reads_from DVS_JobStatuses
  └─ uses_service IControlledRepository<JobStatus>
    └─ method ReadQuery [L49]
      └─ ... (no implementation details available)

[web] GET /api/ui/workflow/job-statuses/{id:Guid}  (Dataverse.Api.Controllers.UI.Workflow.JobStatusesController.GetById)  [L57–L65] status=200 [auth=Authentication.UserPolicy]
  └─ maps_to JobStatusDto [L60]
    └─ automapper.registration DataverseMappingProfile (JobStatus->JobStatusDto) [L315]
    └─ automapper.registration ExternalApiMappingProfile (JobStatus->JobStatusDto) [L168]
  └─ calls JobStatusRepository.ReadQuery [L60]
  └─ query JobStatus [L60]
    └─ reads_from DVS_JobStatuses
  └─ uses_service IControlledRepository<JobStatus>
    └─ method ReadQuery [L60]
      └─ ... (no implementation details available)

[web] PUT /api/ui/workflow/job-statuses/{id:Guid}/reorder  (Dataverse.Api.Controllers.UI.Workflow.JobStatusesController.Reorder)  [L103–L114] status=200 [auth=Authentication.UserPolicy,Authentication.AdminPolicy]
  └─ calls JobStatusRepository.WriteQuery [L106]
  └─ write JobStatus [L106]
    └─ reads_from DVS_JobStatuses
  └─ uses_service IControlledRepository<JobStatus>
    └─ method WriteQuery [L106]
      └─ ... (no implementation details available)

[web] PUT /api/ui/workflow/job-statuses/{id:Guid}  (Dataverse.Api.Controllers.UI.Workflow.JobStatusesController.Update)  [L91–L101] status=200 [auth=Authentication.UserPolicy,Authentication.AdminPolicy]
  └─ calls JobStatusRepository.WriteQuery [L94]
  └─ write JobStatus [L94]
    └─ reads_from DVS_JobStatuses
  └─ uses_service IControlledRepository<JobStatus>
    └─ method WriteQuery [L94]
      └─ ... (no implementation details available)

[web] POST /api/ui/workflow/job-types  (Dataverse.Api.Controllers.UI.Workflow.JobTypesController.Create)  [L76–L89] status=201 [auth=Authentication.UserPolicy,Authentication.AdminPolicy]
  └─ maps_to JobTypeDto [L88]
  └─ calls JobTypeRepository.Add [L86]
  └─ calls JobTypeRepository.WriteQuery [L79]
  └─ insert JobType [L86]
    └─ reads_from JobTypes
  └─ write JobType [L79]
    └─ reads_from JobTypes
  └─ uses_service IControlledRepository<JobType>
    └─ method WriteQuery [L79]
      └─ ... (no implementation details available)
  └─ uses_service IMapper
    └─ method Map [L88]
      └─ ... (no implementation details available)

[web] DELETE /api/ui/workflow/job-types/{id:Guid}  (Dataverse.Api.Controllers.UI.Workflow.JobTypesController.Delete)  [L116–L126] status=200 [auth=Authentication.UserPolicy,Authentication.AdminPolicy]
  └─ calls JobTypeRepository.WriteQuery [L119]
  └─ write JobType [L119]
    └─ reads_from JobTypes
  └─ uses_service IControlledRepository<JobType>
    └─ method WriteQuery [L119]
      └─ ... (no implementation details available)

[web] GET /api/ui/workflow/job-types  (Dataverse.Api.Controllers.UI.Workflow.JobTypesController.GetAll)  [L42–L52] status=200 [auth=Authentication.UserPolicy]
  └─ maps_to JobTypeDto [L45]
    └─ automapper.registration WorkpapersMappingProfile (JobType->JobTypeDto) [L867]
    └─ automapper.registration ExternalApiMappingProfile (JobType->JobTypeDto) [L175]
    └─ automapper.registration DataverseMappingProfile (JobType->JobTypeDto) [L318]
  └─ calls JobTypeRepository.ReadQuery [L45]
  └─ query JobType [L45]
    └─ reads_from JobTypes
  └─ uses_service IControlledRepository<JobType>
    └─ method ReadQuery [L45]
      └─ ... (no implementation details available)

[web] GET /api/ui/workflow/job-types/{id:Guid}  (Dataverse.Api.Controllers.UI.Workflow.JobTypesController.GetById)  [L66–L74] status=200 [auth=Authentication.UserPolicy]
  └─ maps_to JobTypeDto [L69]
    └─ automapper.registration WorkpapersMappingProfile (JobType->JobTypeDto) [L867]
    └─ automapper.registration ExternalApiMappingProfile (JobType->JobTypeDto) [L175]
    └─ automapper.registration DataverseMappingProfile (JobType->JobTypeDto) [L318]
  └─ calls JobTypeRepository.ReadQuery [L69]
  └─ query JobType [L69]
    └─ reads_from JobTypes
  └─ uses_service IControlledRepository<JobType>
    └─ method ReadQuery [L69]
      └─ ... (no implementation details available)

[web] GET /api/ui/workflow/job-types/ultra-light  (Dataverse.Api.Controllers.UI.Workflow.JobTypesController.GetUltraLight)  [L54–L64] status=200 [auth=Authentication.UserPolicy]
  └─ maps_to JobTypeUltraLightDto [L57]
    └─ automapper.registration DataverseMappingProfile (JobType->JobTypeUltraLightDto) [L319]
  └─ calls JobTypeRepository.ReadQuery [L57]
  └─ query JobType [L57]
    └─ reads_from JobTypes
  └─ uses_service IControlledRepository<JobType>
    └─ method ReadQuery [L57]
      └─ ... (no implementation details available)

[web] PUT /api/ui/workflow/job-types/{id:Guid}/reorder  (Dataverse.Api.Controllers.UI.Workflow.JobTypesController.Reorder)  [L103–L114] status=200 [auth=Authentication.UserPolicy,Authentication.AdminPolicy]
  └─ calls JobTypeRepository.WriteQuery [L106]
  └─ write JobType [L106]
    └─ reads_from JobTypes
  └─ uses_service IControlledRepository<JobType>
    └─ method WriteQuery [L106]
      └─ ... (no implementation details available)

[web] PUT /api/ui/workflow/job-types/{id:Guid}  (Dataverse.Api.Controllers.UI.Workflow.JobTypesController.Update)  [L91–L101] status=200 [auth=Authentication.UserPolicy,Authentication.AdminPolicy]
  └─ calls JobTypeRepository.WriteQuery [L94]
  └─ write JobType [L94]
    └─ reads_from JobTypes
  └─ uses_service IControlledRepository<JobType>
    └─ method WriteQuery [L94]
      └─ ... (no implementation details available)

[web] POST /api/ui/workflow/kanban-columns  (Dataverse.Api.Controllers.UI.Workflow.KanbanColumnsController.Create)  [L55–L68] status=201 [auth=Authentication.UserPolicy,Authentication.AdminPolicy]
  └─ calls KanbanColumnRepository.Add [L65]
  └─ calls KanbanColumnRepository.WriteQuery [L58]
  └─ insert KanbanColumn [L65]
    └─ reads_from KanbanColumns
  └─ write KanbanColumn [L58]
    └─ reads_from KanbanColumns
  └─ uses_service IControlledRepository<KanbanColumn>
    └─ method WriteQuery [L58]
      └─ ... (no implementation details available)

[web] DELETE /api/ui/workflow/kanban-columns/{id:Guid}  (Dataverse.Api.Controllers.UI.Workflow.KanbanColumnsController.Delete)  [L95–L105] status=200 [auth=Authentication.UserPolicy,Authentication.AdminPolicy]
  └─ calls KanbanColumnRepository.Remove [L102]
  └─ calls KanbanColumnRepository.WriteQuery [L98]
  └─ delete KanbanColumn [L102]
    └─ reads_from KanbanColumns
  └─ write KanbanColumn [L98]
    └─ reads_from KanbanColumns
  └─ uses_service IControlledRepository<KanbanColumn>
    └─ method WriteQuery [L98]
      └─ ... (no implementation details available)

[web] GET /api/ui/workflow/kanban-columns  (Dataverse.Api.Controllers.UI.Workflow.KanbanColumnsController.GetAll)  [L33–L43] status=200 [auth=Authentication.UserPolicy]
  └─ maps_to KanbanColumnDto [L36]
    └─ automapper.registration DataverseMappingProfile (KanbanColumn->KanbanColumnDto) [L379]
    └─ automapper.registration ExternalApiMappingProfile (KanbanColumn->KanbanColumnDto) [L161]
  └─ calls KanbanColumnRepository.ReadQuery [L36]
  └─ query KanbanColumn [L36]
    └─ reads_from KanbanColumns
  └─ uses_service IControlledRepository<KanbanColumn>
    └─ method ReadQuery [L36]
      └─ ... (no implementation details available)

[web] GET /api/ui/workflow/kanban-columns/{id:Guid}  (Dataverse.Api.Controllers.UI.Workflow.KanbanColumnsController.GetById)  [L45–L53] status=200 [auth=Authentication.UserPolicy]
  └─ maps_to KanbanColumnDto [L48]
    └─ automapper.registration DataverseMappingProfile (KanbanColumn->KanbanColumnDto) [L379]
    └─ automapper.registration ExternalApiMappingProfile (KanbanColumn->KanbanColumnDto) [L161]
  └─ calls KanbanColumnRepository.ReadQuery [L48]
  └─ query KanbanColumn [L48]
    └─ reads_from KanbanColumns
  └─ uses_service IControlledRepository<KanbanColumn>
    └─ method ReadQuery [L48]
      └─ ... (no implementation details available)

[web] PUT /api/ui/workflow/kanban-columns/{id:Guid}/reorder  (Dataverse.Api.Controllers.UI.Workflow.KanbanColumnsController.Reorder)  [L82–L93] status=200 [auth=Authentication.UserPolicy,Authentication.AdminPolicy]
  └─ calls KanbanColumnRepository.WriteQuery [L85]
  └─ write KanbanColumn [L85]
    └─ reads_from KanbanColumns
  └─ uses_service IControlledRepository<KanbanColumn>
    └─ method WriteQuery [L85]
      └─ ... (no implementation details available)

[web] PUT /api/ui/workflow/kanban-columns/{id:Guid}  (Dataverse.Api.Controllers.UI.Workflow.KanbanColumnsController.Update)  [L70–L80] status=200 [auth=Authentication.UserPolicy,Authentication.AdminPolicy]
  └─ calls KanbanColumnRepository.WriteQuery [L73]
  └─ write KanbanColumn [L73]
    └─ reads_from KanbanColumns
  └─ uses_service IControlledRepository<KanbanColumn>
    └─ method WriteQuery [L73]
      └─ ... (no implementation details available)

[web] PUT /api/ui/workflow/tasks/for-job/{jobId}/default-tasks  (Dataverse.Api.Controllers.UI.Workflow.TasksController.BuildDefaultTasksFromTemplate)  [L162–L167] status=200 [auth=Authentication.UserPolicy]
  └─ sends_request SeedJobTasksFromTemplateCommand [L166]

[web] PUT /api/ui/workflow/tasks/{id:guid}/complete  (Dataverse.Api.Controllers.UI.Workflow.TasksController.CompleteTask)  [L123–L132] status=200 [auth=Authentication.UserPolicy]

[web] POST /api/ui/workflow/tasks/  (Dataverse.Api.Controllers.UI.Workflow.TasksController.CreateTask)  [L97–L107] status=201 [auth=Authentication.UserPolicy]
  └─ maps_to WorkflowTaskDto [L106]
  └─ calls TaskRepository.Add [L104]
  └─ uses_service IMapper
    └─ method Map [L106]
      └─ ... (no implementation details available)
  └─ uses_service TaskRepository
    └─ method Add [L104]
      └─ implementation Dataverse.Data.Repository.Workflow.TaskRepository.Add [L8-L40]

[web] DELETE /api/ui/workflow/tasks/{id:Guid}  (Dataverse.Api.Controllers.UI.Workflow.TasksController.Delete)  [L169–L182] status=200 [auth=Authentication.UserPolicy]
  └─ calls TaskRepository.Remove [L179]
  └─ calls TaskRepository.WriteQuery [L172]
  └─ uses_service TaskRepository
    └─ method WriteQuery [L172]
      └─ implementation Dataverse.Data.Repository.Workflow.TaskRepository.WriteQuery [L8-L40]
  └─ sends_request CanIAccessJobQuery [L177]
    └─ handled_by Dataverse.ApplicationService.Queries.WorkFlow.CanIAccessJobQueryHandler.Handle [L39–L95]
      └─ uses_service UserService
        └─ method GetUserAsync [L71]
          └─ implementation Dataverse.ApplicationService.Services.UserService.GetUserAsync [L15-L185]
      └─ uses_service TenantService
        └─ method GetCurrentTenantAsync [L73]
          └─ implementation Dataverse.Services.Features.Tenants.TenantService.GetCurrentTenantAsync [L6-L27]
          └─ implementation Dataverse.Services.Features.Tenants.TenantService.GetCurrentTenantAsync [L6-L27]
      └─ uses_service RequestInfoService
        └─ method IsValidServiceAccountRequest [L68]
          └─ implementation Dataverse.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L92]
          └─ implementation Dataverse.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L92]
          └─ implementation Dataverse.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L92]
      └─ uses_service IControlledRepository<Job>
        └─ method ReadQuery [L78]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L82]
          └─ implementation Dataverse.Services.Features.Requests.RequestProcessor.ProcessAsync [L8-L45]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L91]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L75]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L73]

[web] GET /api/ui/workflow/tasks/find  (Dataverse.Api.Controllers.UI.Workflow.TasksController.FindTasks)  [L44–L57] status=200 [auth=Authentication.UserPolicy]
  └─ sends_request FindTasksQuery [L54]
    └─ handled_by Dataverse.ApplicationService.Queries.WorkFlow.FindTasksQueryHandler.Handle [L42–L116]
      └─ calls TaskRepository.ReadQuery [L59]
      └─ uses_service FirmSettingsService
        └─ method GetCurrentSettingsAsync [L68]
          └─ implementation Dataverse.ApplicationService.Services.FirmSettingsService.GetCurrentSettingsAsync [L18-L97]
      └─ uses_service UserService
        └─ method GetUserId [L68]
          └─ implementation Dataverse.ApplicationService.Services.UserService.GetUserId [L15-L185]

[web] GET /api/ui/workflow/tasks/for-deliverable/{deliverableId:guid}  (Dataverse.Api.Controllers.UI.Workflow.TasksController.GetDeliverableTasks)  [L74–L86] status=200 [auth=Authentication.UserPolicy]
  └─ maps_to WorkflowTaskLightDto [L80]
  └─ calls TaskRepository.ReadQuery [L80]
  └─ uses_service TaskRepository
    └─ method ReadQuery [L80]
      └─ implementation Dataverse.Data.Repository.Workflow.TaskRepository.ReadQuery [L8-L40]
  └─ sends_request CanIAccessJobQuery [L78]
    └─ handled_by Dataverse.ApplicationService.Queries.WorkFlow.CanIAccessJobQueryHandler.Handle [L39–L95]
      └─ uses_service UserService
        └─ method GetUserAsync [L71]
          └─ implementation Dataverse.ApplicationService.Services.UserService.GetUserAsync [L15-L185]
      └─ uses_service TenantService
        └─ method GetCurrentTenantAsync [L73]
          └─ implementation Dataverse.Services.Features.Tenants.TenantService.GetCurrentTenantAsync [L6-L27]
          └─ implementation Dataverse.Services.Features.Tenants.TenantService.GetCurrentTenantAsync [L6-L27]
      └─ uses_service RequestInfoService
        └─ method IsValidServiceAccountRequest [L68]
          └─ implementation Dataverse.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L92]
          └─ implementation Dataverse.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L92]
          └─ implementation Dataverse.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L92]
      └─ uses_service IControlledRepository<Job>
        └─ method ReadQuery [L78]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L82]
          └─ implementation Dataverse.Services.Features.Requests.RequestProcessor.ProcessAsync [L8-L45]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L91]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L75]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L73]

[web] GET /api/ui/workflow/tasks/for-job/{jobId:guid}  (Dataverse.Api.Controllers.UI.Workflow.TasksController.GetJobTasks)  [L59–L72] status=200 [auth=Authentication.UserPolicy]
  └─ maps_to WorkflowTaskLightDto [L65]
  └─ calls TaskRepository.ReadQuery [L65]
  └─ uses_service TaskRepository
    └─ method ReadQuery [L65]
      └─ implementation Dataverse.Data.Repository.Workflow.TaskRepository.ReadQuery [L8-L40]
  └─ sends_request CanIAccessJobQuery [L63]
    └─ handled_by Dataverse.ApplicationService.Queries.WorkFlow.CanIAccessJobQueryHandler.Handle [L39–L95]
      └─ uses_service UserService
        └─ method GetUserAsync [L71]
          └─ implementation Dataverse.ApplicationService.Services.UserService.GetUserAsync [L15-L185]
      └─ uses_service TenantService
        └─ method GetCurrentTenantAsync [L73]
          └─ implementation Dataverse.Services.Features.Tenants.TenantService.GetCurrentTenantAsync [L6-L27]
          └─ implementation Dataverse.Services.Features.Tenants.TenantService.GetCurrentTenantAsync [L6-L27]
      └─ uses_service RequestInfoService
        └─ method IsValidServiceAccountRequest [L68]
          └─ implementation Dataverse.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L92]
          └─ implementation Dataverse.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L92]
          └─ implementation Dataverse.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L92]
      └─ uses_service IControlledRepository<Job>
        └─ method ReadQuery [L78]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L82]
          └─ implementation Dataverse.Services.Features.Requests.RequestProcessor.ProcessAsync [L8-L45]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L91]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L75]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L73]

[web] GET /api/ui/workflow/tasks/{id:guid}  (Dataverse.Api.Controllers.UI.Workflow.TasksController.GetTask)  [L88–L95] status=200 [auth=Authentication.UserPolicy]
  └─ maps_to WorkflowTaskDto [L91]
  └─ calls TaskRepository.ReadQuery [L91]
  └─ uses_service FirmSettingsService
    └─ method GetCurrentSettingsAsync [L93]
      └─ implementation Dataverse.ApplicationService.Services.FirmSettingsService.GetCurrentSettingsAsync [L18-L97]
  └─ uses_service TaskRepository
    └─ method ReadQuery [L91]
      └─ implementation Dataverse.Data.Repository.Workflow.TaskRepository.ReadQuery [L8-L40]
  └─ uses_service UserService
    └─ method GetUserId [L93]
      └─ implementation Dataverse.ApplicationService.Services.UserService.GetUserId [L15-L185]

[web] GET /api/ui/workflow/tasks  (Dataverse.Api.Controllers.UI.Workflow.TasksController.GetTaskManager)  [L205–L218] status=200 [auth=Authentication.UserPolicy]
  └─ calls TaskRepository.WriteQuery [L207]
  └─ uses_service TaskRepository
    └─ method WriteQuery [L207]
      └─ implementation Dataverse.Data.Repository.Workflow.TaskRepository.WriteQuery [L8-L40]
  └─ sends_request CanIAccessJobQuery [L215]
    └─ handled_by Dataverse.ApplicationService.Queries.WorkFlow.CanIAccessJobQueryHandler.Handle [L39–L95]
      └─ uses_service UserService
        └─ method GetUserAsync [L71]
          └─ implementation Dataverse.ApplicationService.Services.UserService.GetUserAsync [L15-L185]
      └─ uses_service TenantService
        └─ method GetCurrentTenantAsync [L73]
          └─ implementation Dataverse.Services.Features.Tenants.TenantService.GetCurrentTenantAsync [L6-L27]
          └─ implementation Dataverse.Services.Features.Tenants.TenantService.GetCurrentTenantAsync [L6-L27]
      └─ uses_service RequestInfoService
        └─ method IsValidServiceAccountRequest [L68]
          └─ implementation Dataverse.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L92]
          └─ implementation Dataverse.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L92]
          └─ implementation Dataverse.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L92]
      └─ uses_service IControlledRepository<Job>
        └─ method ReadQuery [L78]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L82]
          └─ implementation Dataverse.Services.Features.Requests.RequestProcessor.ProcessAsync [L8-L45]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L91]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L75]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L73]

[web] PUT /api/ui/workflow/tasks/{id:Guid}/reorder  (Dataverse.Api.Controllers.UI.Workflow.TasksController.Reorder)  [L145–L153] status=200 [auth=Authentication.UserPolicy]

[web] PUT /api/ui/workflow/tasks/{id:guid}/uncomplete  (Dataverse.Api.Controllers.UI.Workflow.TasksController.UncompleteTask)  [L134–L143] status=200 [auth=Authentication.UserPolicy]

[web] PUT /api/ui/workflow/tasks/{id:guid}  (Dataverse.Api.Controllers.UI.Workflow.TasksController.UpdateTask)  [L109–L121] status=200 [auth=Authentication.UserPolicy]
  └─ maps_to WorkflowTaskDto [L118]
  └─ uses_service IMapper
    └─ method Map [L118]
      └─ ... (no implementation details available)

[web] POST /api/ui/workflow/task-template-groups  (Dataverse.Api.Controllers.UI.Workflow.TaskTemplateGroupsController.Create)  [L55–L62] status=201 [auth=Authentication.UserPolicy,Authentication.AdminPolicy]
  └─ maps_to TaskTemplateGroupLightDto [L61]
  └─ calls TaskTemplateGroupRepository.Add [L59]
  └─ insert TaskTemplateGroup [L59]
    └─ reads_from TaskTemplateGroups
  └─ uses_service IControlledRepository<TaskTemplateGroup>
    └─ method Add [L59]
      └─ ... (no implementation details available)
  └─ uses_service IMapper
    └─ method Map [L61]
      └─ ... (no implementation details available)

[web] DELETE /api/ui/workflow/task-template-groups/{id:Guid}  (Dataverse.Api.Controllers.UI.Workflow.TaskTemplateGroupsController.Delete)  [L76–L86] status=200 [auth=Authentication.UserPolicy,Authentication.AdminPolicy]
  └─ calls TaskTemplateGroupRepository.Remove [L83]
  └─ calls TaskTemplateGroupRepository.WriteQuery [L79]
  └─ delete TaskTemplateGroup [L83]
    └─ reads_from TaskTemplateGroups
  └─ write TaskTemplateGroup [L79]
    └─ reads_from TaskTemplateGroups
  └─ uses_service IControlledRepository<TaskTemplateGroup>
    └─ method WriteQuery [L79]
      └─ ... (no implementation details available)

[web] GET /api/ui/workflow/task-template-groups  (Dataverse.Api.Controllers.UI.Workflow.TaskTemplateGroupsController.GetAll)  [L34–L43] status=200 [auth=Authentication.UserPolicy]
  └─ maps_to TaskTemplateGroupDto [L37]
    └─ automapper.registration DataverseMappingProfile (TaskTemplateGroup->TaskTemplateGroupDto) [L373]
    └─ automapper.registration ExternalApiMappingProfile (TaskTemplateGroup->TaskTemplateGroupDto) [L155]
  └─ calls TaskTemplateGroupRepository.ReadQuery [L37]
  └─ query TaskTemplateGroup [L37]
    └─ reads_from TaskTemplateGroups
  └─ uses_service IControlledRepository<TaskTemplateGroup>
    └─ method ReadQuery [L37]
      └─ ... (no implementation details available)

[web] GET /api/ui/workflow/task-template-groups/{id:Guid}  (Dataverse.Api.Controllers.UI.Workflow.TaskTemplateGroupsController.GetById)  [L45–L53] status=200 [auth=Authentication.UserPolicy]
  └─ maps_to TaskTemplateGroupDto [L48]
    └─ automapper.registration DataverseMappingProfile (TaskTemplateGroup->TaskTemplateGroupDto) [L373]
    └─ automapper.registration ExternalApiMappingProfile (TaskTemplateGroup->TaskTemplateGroupDto) [L155]
  └─ calls TaskTemplateGroupRepository.ReadQuery [L48]
  └─ query TaskTemplateGroup [L48]
    └─ reads_from TaskTemplateGroups
  └─ uses_service IControlledRepository<TaskTemplateGroup>
    └─ method ReadQuery [L48]
      └─ ... (no implementation details available)

[web] PUT /api/ui/workflow/task-template-groups/{id:Guid}  (Dataverse.Api.Controllers.UI.Workflow.TaskTemplateGroupsController.Update)  [L64–L74] status=200 [auth=Authentication.UserPolicy,Authentication.AdminPolicy]
  └─ calls TaskTemplateGroupRepository.WriteQuery [L67]
  └─ write TaskTemplateGroup [L67]
    └─ reads_from TaskTemplateGroups
  └─ uses_service IControlledRepository<TaskTemplateGroup>
    └─ method WriteQuery [L67]
      └─ ... (no implementation details available)

[web] POST /api/ui/workflow/task-templates  (Dataverse.Api.Controllers.UI.Workflow.TaskTemplatesController.Create)  [L55–L69] status=201 [auth=Authentication.UserPolicy,Authentication.AdminPolicy]
  └─ maps_to TaskTemplateDto [L68]
  └─ calls TaskTemplateRepository.Add [L66]
  └─ calls TaskTemplateRepository.WriteQuery [L58]
  └─ insert TaskTemplate [L66]
    └─ reads_from TaskTemplates
  └─ write TaskTemplate [L58]
    └─ reads_from TaskTemplates
  └─ uses_service IControlledRepository<TaskTemplate>
    └─ method WriteQuery [L58]
      └─ ... (no implementation details available)
  └─ uses_service IMapper
    └─ method Map [L68]
      └─ ... (no implementation details available)

[web] DELETE /api/ui/workflow/task-templates/{id:Guid}  (Dataverse.Api.Controllers.UI.Workflow.TaskTemplatesController.Delete)  [L101–L111] status=200 [auth=Authentication.UserPolicy,Authentication.AdminPolicy]
  └─ calls TaskTemplateRepository.Remove [L108]
  └─ calls TaskTemplateRepository.WriteQuery [L104]
  └─ delete TaskTemplate [L108]
    └─ reads_from TaskTemplates
  └─ write TaskTemplate [L104]
    └─ reads_from TaskTemplates
  └─ uses_service IControlledRepository<TaskTemplate>
    └─ method WriteQuery [L104]
      └─ ... (no implementation details available)

[web] GET /api/ui/workflow/task-templates  (Dataverse.Api.Controllers.UI.Workflow.TaskTemplatesController.GetAll)  [L33–L43] status=200 [auth=Authentication.UserPolicy]
  └─ maps_to TaskTemplateDto [L36]
    └─ automapper.registration ExternalApiMappingProfile (TaskTemplate->TaskTemplateDto) [L149]
    └─ automapper.registration DataverseMappingProfile (TaskTemplate->TaskTemplateDto) [L376]
  └─ calls TaskTemplateRepository.ReadQuery [L36]
  └─ query TaskTemplate [L36]
    └─ reads_from TaskTemplates
  └─ uses_service IControlledRepository<TaskTemplate>
    └─ method ReadQuery [L36]
      └─ ... (no implementation details available)

[web] GET /api/ui/workflow/task-templates/{id:Guid}  (Dataverse.Api.Controllers.UI.Workflow.TaskTemplatesController.GetById)  [L45–L53] status=200 [auth=Authentication.UserPolicy]
  └─ maps_to TaskTemplateDto [L48]
    └─ automapper.registration ExternalApiMappingProfile (TaskTemplate->TaskTemplateDto) [L149]
    └─ automapper.registration DataverseMappingProfile (TaskTemplate->TaskTemplateDto) [L376]
  └─ calls TaskTemplateRepository.ReadQuery [L48]
  └─ query TaskTemplate [L48]
    └─ reads_from TaskTemplates
  └─ uses_service IControlledRepository<TaskTemplate>
    └─ method ReadQuery [L48]
      └─ ... (no implementation details available)

[web] PUT /api/ui/workflow/task-templates/{id:Guid}/reorder  (Dataverse.Api.Controllers.UI.Workflow.TaskTemplatesController.Reorder)  [L83–L99] status=200 [auth=Authentication.UserPolicy,Authentication.AdminPolicy]
  └─ calls TaskTemplateRepository.WriteQuery [L86]
  └─ write TaskTemplate [L86]
    └─ reads_from TaskTemplates
  └─ uses_service IControlledRepository<TaskTemplate>
    └─ method WriteQuery [L86]
      └─ ... (no implementation details available)

[web] PUT /api/ui/workflow/task-templates/{id:Guid}  (Dataverse.Api.Controllers.UI.Workflow.TaskTemplatesController.Update)  [L71–L81] status=200 [auth=Authentication.UserPolicy,Authentication.AdminPolicy]
  └─ calls TaskTemplateRepository.WriteQuery [L74]
  └─ write TaskTemplate [L74]
    └─ reads_from TaskTemplates
  └─ uses_service IControlledRepository<TaskTemplate>
    └─ method WriteQuery [L74]
      └─ ... (no implementation details available)

[web] GET /api/ui/workflow/reports/find  (Dataverse.Api.Controllers.UI.Workflow.WorkflowReportsController.GetReport)  [L28–L47] status=200 [auth=Authentication.UserPolicy]
  └─ sends_request FindJobsReportDataQuery [L46]

[web] GET /api/ui/workflow/reports/find/detail/{id:guid}  (Dataverse.Api.Controllers.UI.Workflow.WorkflowReportsController.GetReportDetail)  [L49–L69] status=200 [auth=Authentication.UserPolicy]
  └─ sends_request FindJobsReportDataDetailQuery [L68]

[web] POST /core/v1/clients/  (Dataverse.Api.External.Controllers.v1.Core.ClientsController.CreateClientEntity)  [L269–L277] status=201 [auth=Authentication.CoreWrite]
  └─ uses_service IDataverseProxyService (AddScoped)
    └─ method PostSerialisedModel [L275]
      └─ implementation Dataverse.Api.External.Features.DataverseProxy.DataverseProxyService.PostSerialisedModel [L12-L74]

[web] POST /core/v1/clients/group  (Dataverse.Api.External.Controllers.v1.Core.ClientsController.CreateClientGroup)  [L303–L311] status=201 [auth=Authentication.CoreWrite]
  └─ uses_service IDataverseProxyService (AddScoped)
    └─ method PostSerialisedModel [L309]
      └─ implementation Dataverse.Api.External.Features.DataverseProxy.DataverseProxyService.PostSerialisedModel [L12-L74]

[web] DELETE /core/v1/clients/{id:Guid}  (Dataverse.Api.External.Controllers.v1.Core.ClientsController.Delete)  [L338–L342] status=200 [auth=Authentication.CoreWrite]
  └─ uses_service IDataverseProxyService (AddScoped)
    └─ method Delete [L341]
      └─ implementation Dataverse.Api.External.Features.DataverseProxy.DataverseProxyService.Delete [L12-L74]

[web] GET /core/v1/clients/audits/{entityId:Guid}  (Dataverse.Api.External.Controllers.v1.Core.ClientsController.GetAuditQuery)  [L256–L261] status=200
  └─ maps_to EntityAuditDto [L259]
  └─ calls ClientRepository.ReadQuery [L259]
  └─ query Client [L259]
  └─ uses_service IControlledRepository<Client>
    └─ method ReadQuery [L259]
      └─ ... (no implementation details available)

[web] GET /core/v1/clients/audits  (Dataverse.Api.External.Controllers.v1.Core.ClientsController.GetAuditsQuery)  [L242–L248] status=200
  └─ maps_to EntityAuditDto [L245]
  └─ calls ClientRepository.ReadQuery [L245]
  └─ query Client [L245]
  └─ uses_service IControlledRepository<Client>
    └─ method ReadQuery [L245]
      └─ ... (no implementation details available)

[web] GET /core/v1/clients/entities/{id:Guid}  (Dataverse.Api.External.Controllers.v1.Core.ClientsController.GetClientEntity)  [L73–L79] status=200
  └─ maps_to ClientEntityDto [L76]
    └─ automapper.registration ExternalApiMappingProfile (Client->ClientEntityDto) [L98]
  └─ calls ClientRepository.ReadQuery [L76]
  └─ query Client [L76]
  └─ uses_service IControlledRepository<Client>
    └─ method ReadQuery [L76]
      └─ ... (no implementation details available)

[web] GET /core/v1/clients/entities/detailed  (Dataverse.Api.External.Controllers.v1.Core.ClientsController.GetClientEntityDetailedQuery)  [L113–L147] status=200
  └─ maps_to ClientEntityDto [L129]
    └─ automapper.registration ExternalApiMappingProfile (Client->ClientEntityDto) [L98]
  └─ calls ClientRepository.ReadQuery [L122]
  └─ query Client [L122]
  └─ uses_service IControlledRepository<Client>
    └─ method ReadQuery [L122]
      └─ ... (no implementation details available)

[web] GET /core/v1/clients/entities  (Dataverse.Api.External.Controllers.v1.Core.ClientsController.GetClientEntityMinimalQuery)  [L91–L99] status=200
  └─ calls ClientRepository.ReadQuery [L94]
  └─ query Client [L94]
  └─ uses_service IControlledRepository<Client>
    └─ method ReadQuery [L94]
      └─ ... (no implementation details available)

[web] GET /core/v1/clients/  (Dataverse.Api.External.Controllers.v1.Core.ClientsController.GetClientEntityOrGroupMinimalQuery)  [L58–L65] status=200
  └─ calls ClientRepository.ReadQuery [L61]
  └─ query Client [L61]
  └─ uses_service IControlledRepository<Client>
    └─ method ReadQuery [L61]
      └─ ... (no implementation details available)

[web] GET /core/v1/clients/groups/{id:Guid}  (Dataverse.Api.External.Controllers.v1.Core.ClientsController.GetClientGroup)  [L155–L161] status=200
  └─ maps_to ClientGroupDto [L158]
    └─ automapper.registration ExternalApiMappingProfile (Client->ClientGroupDto) [L104]
  └─ calls ClientRepository.ReadQuery [L158]
  └─ query Client [L158]
  └─ uses_service IControlledRepository<Client>
    └─ method ReadQuery [L158]
      └─ ... (no implementation details available)

[web] GET /core/v1/clients/groups/detailed  (Dataverse.Api.External.Controllers.v1.Core.ClientsController.GetClientGroupDetailedQuery)  [L207–L215] status=200
  └─ calls ClientRepository.ReadQuery [L210]
  └─ query Client [L210]
  └─ uses_service IControlledRepository<Client>
    └─ method ReadQuery [L210]
      └─ ... (no implementation details available)

[web] GET /core/v1/clients/groups  (Dataverse.Api.External.Controllers.v1.Core.ClientsController.GetClientGroupMinimalQuery)  [L187–L195] status=200
  └─ calls ClientRepository.ReadQuery [L190]
  └─ query Client [L190]
  └─ uses_service IControlledRepository<Client>
    └─ method ReadQuery [L190]
      └─ ... (no implementation details available)

[web] GET /core/v1/clients/groups/include-children  (Dataverse.Api.External.Controllers.v1.Core.ClientsController.GetClientGroupsWithChildrenQuery)  [L227–L235] status=200
  └─ calls ClientRepository.ReadQuery [L230]
  └─ query Client [L230]
  └─ uses_service IControlledRepository<Client>
    └─ method ReadQuery [L230]
      └─ ... (no implementation details available)

[web] GET /core/v1/clients/groups/{id:Guid}/include-children  (Dataverse.Api.External.Controllers.v1.Core.ClientsController.GetClientGroupWithChildren)  [L169–L175] status=200
  └─ maps_to ClientGroupWithChildrenDto [L172]
    └─ automapper.registration ExternalApiMappingProfile (Client->ClientGroupWithChildrenDto) [L107]
  └─ calls ClientRepository.ReadQuery [L172]
  └─ query Client [L172]
  └─ uses_service IControlledRepository<Client>
    └─ method ReadQuery [L172]
      └─ ... (no implementation details available)

[web] PUT /core/v1/clients/{id:Guid}  (Dataverse.Api.External.Controllers.v1.Core.ClientsController.UpdateClientEntity)  [L287–L295] status=200 [auth=Authentication.CoreWrite]
  └─ uses_service IDataverseProxyService (AddScoped)
    └─ method PostSerialisedModel [L293]
      └─ implementation Dataverse.Api.External.Features.DataverseProxy.DataverseProxyService.PostSerialisedModel [L12-L74]

[web] PUT /core/v1/clients/group/{id:Guid}  (Dataverse.Api.External.Controllers.v1.Core.ClientsController.UpdateClientGroup)  [L321–L329] status=200 [auth=Authentication.CoreWrite]
  └─ uses_service IDataverseProxyService (AddScoped)
    └─ method PostSerialisedModel [L327]
      └─ implementation Dataverse.Api.External.Features.DataverseProxy.DataverseProxyService.PostSerialisedModel [L12-L74]

[web] POST /core/v1/offices/  (Dataverse.Api.External.Controllers.v1.Core.OfficesController.Create)  [L125–L133] status=201 [auth=Authentication.CoreWrite]
  └─ uses_service IDataverseProxyService (AddScoped)
    └─ method PostSerialisedModel [L131]
      └─ implementation Dataverse.Api.External.Features.DataverseProxy.DataverseProxyService.PostSerialisedModel [L12-L74]

[web] DELETE /core/v1/offices/{id:Guid}  (Dataverse.Api.External.Controllers.v1.Core.OfficesController.Delete)  [L159–L163] status=200 [auth=Authentication.CoreWrite]
  └─ uses_service IDataverseProxyService (AddScoped)
    └─ method Delete [L162]
      └─ implementation Dataverse.Api.External.Features.DataverseProxy.DataverseProxyService.Delete [L12-L74]

[web] GET /core/v1/offices/detailed  (Dataverse.Api.External.Controllers.v1.Core.OfficesController.FullQuery)  [L86–L91] status=200
  └─ calls OfficeRepository.ReadQuery [L89]
  └─ query Office [L89]
    └─ reads_from Offices
  └─ uses_service IControlledRepository<Office>
    └─ method ReadQuery [L89]
      └─ ... (no implementation details available)

[web] GET /core/v1/offices/{id:Guid}  (Dataverse.Api.External.Controllers.v1.Core.OfficesController.Get)  [L52–L57] status=200
  └─ maps_to OfficeDto [L55]
    └─ automapper.registration ExternalApiMappingProfile (Office->OfficeDto) [L54]
    └─ automapper.registration WorkpapersMappingProfile (Office->OfficeDto) [L181]
    └─ automapper.registration DataverseMappingProfile (Office->OfficeDto) [L138]
    └─ automapper.registration CirrusMappingProfile (Office->OfficeDto) [L128]
  └─ calls OfficeRepository.ReadQuery [L55]
  └─ query Office [L55]
    └─ reads_from Offices
  └─ uses_service IControlledRepository<Office>
    └─ method ReadQuery [L55]
      └─ ... (no implementation details available)

[web] GET /core/v1/offices/audits/{entityId:Guid}  (Dataverse.Api.External.Controllers.v1.Core.OfficesController.GetAuditQuery)  [L112–L117] status=200
  └─ maps_to EntityAuditDto [L115]
  └─ calls OfficeRepository.ReadQuery [L115]
  └─ query Office [L115]
    └─ reads_from Offices
  └─ uses_service IControlledRepository<Office>
    └─ method ReadQuery [L115]
      └─ ... (no implementation details available)

[web] GET /core/v1/offices/audits  (Dataverse.Api.External.Controllers.v1.Core.OfficesController.GetAuditsQuery)  [L98–L104] status=200
  └─ maps_to EntityAuditDto [L101]
  └─ calls OfficeRepository.ReadQuery [L101]
  └─ query Office [L101]
    └─ reads_from Offices
  └─ uses_service IControlledRepository<Office>
    └─ method ReadQuery [L101]
      └─ ... (no implementation details available)

[web] GET /core/v1/offices/  (Dataverse.Api.External.Controllers.v1.Core.OfficesController.MinimalQuery)  [L69–L74] status=200
  └─ calls OfficeRepository.ReadQuery [L72]
  └─ query Office [L72]
    └─ reads_from Offices
  └─ uses_service IControlledRepository<Office>
    └─ method ReadQuery [L72]
      └─ ... (no implementation details available)

[web] PUT /core/v1/offices/{id:Guid}  (Dataverse.Api.External.Controllers.v1.Core.OfficesController.Update)  [L143–L150] status=200 [auth=Authentication.CoreWrite]
  └─ uses_service IDataverseProxyService (AddScoped)
    └─ method PutSerialisedModel [L148]
      └─ implementation Dataverse.Api.External.Features.DataverseProxy.DataverseProxyService.PutSerialisedModel [L12-L74]

[web] GET /core/v1/tax-agents/{id:Guid}  (Dataverse.Api.External.Controllers.v1.Core.TaxAgentsController.Get)  [L41–L46] status=200
  └─ maps_to TaxAgentDto [L44]
    └─ automapper.registration DataverseMappingProfile (TaxAgent->TaxAgentDto) [L253]
    └─ automapper.registration ExternalApiMappingProfile (TaxAgent->TaxAgentDto) [L79]
  └─ calls TaxAgentRepository.ReadQuery [L44]
  └─ query TaxAgent [L44]
    └─ reads_from TaxAgents
  └─ uses_service IControlledRepository<TaxAgent>
    └─ method ReadQuery [L44]
      └─ ... (no implementation details available)

[web] GET /core/v1/tax-agents/  (Dataverse.Api.External.Controllers.v1.Core.TaxAgentsController.GetAll)  [L55–L79] status=200
  └─ maps_to TaxAgentDto [L70]
    └─ automapper.registration DataverseMappingProfile (TaxAgent->TaxAgentDto) [L253]
    └─ automapper.registration ExternalApiMappingProfile (TaxAgent->TaxAgentDto) [L79]
  └─ maps_to TaxAgentDto [L63]
    └─ automapper.registration DataverseMappingProfile (TaxAgent->TaxAgentDto) [L253]
    └─ automapper.registration ExternalApiMappingProfile (TaxAgent->TaxAgentDto) [L79]
  └─ calls TaxAgentRepository.ReadQuery [L63]
  └─ query TaxAgent [L63]
    └─ reads_from TaxAgents
  └─ uses_service IControlledRepository<TaxAgent>
    └─ method ReadQuery [L63]
      └─ ... (no implementation details available)

[web] POST /core/v1/teams/  (Dataverse.Api.External.Controllers.v1.Core.TeamsController.Create)  [L124–L132] status=201 [auth=Authentication.CoreWrite]
  └─ uses_service IDataverseProxyService (AddScoped)
    └─ method PostSerialisedModel [L130]
      └─ implementation Dataverse.Api.External.Features.DataverseProxy.DataverseProxyService.PostSerialisedModel [L12-L74]

[web] DELETE /core/v1/teams/{id:Guid}  (Dataverse.Api.External.Controllers.v1.Core.TeamsController.Delete)  [L158–L162] status=200 [auth=Authentication.CoreWrite]
  └─ uses_service IDataverseProxyService (AddScoped)
    └─ method Delete [L161]
      └─ implementation Dataverse.Api.External.Features.DataverseProxy.DataverseProxyService.Delete [L12-L74]

[web] GET /core/v1/teams/detailed  (Dataverse.Api.External.Controllers.v1.Core.TeamsController.FullQuery)  [L85–L90] status=200
  └─ calls TeamRepository.ReadQuery [L88]
  └─ query Team [L88]
    └─ reads_from Teams
  └─ uses_service IControlledRepository<Team>
    └─ method ReadQuery [L88]
      └─ ... (no implementation details available)

[web] GET /core/v1/teams/{id:Guid}  (Dataverse.Api.External.Controllers.v1.Core.TeamsController.Get)  [L51–L56] status=200
  └─ maps_to TeamDto [L54]
    └─ automapper.registration DataverseMappingProfile (Team->TeamDto) [L149]
    └─ automapper.registration ExternalApiMappingProfile (Team->TeamDto) [L75]
    └─ automapper.registration CirrusMappingProfile (Team->TeamDto) [L138]
    └─ automapper.registration WorkpapersMappingProfile (Team->TeamDto) [L190]
  └─ calls TeamRepository.ReadQuery [L54]
  └─ query Team [L54]
    └─ reads_from Teams
  └─ uses_service IControlledRepository<Team>
    └─ method ReadQuery [L54]
      └─ ... (no implementation details available)

[web] GET /core/v1/teams/audits/{entityId:Guid}  (Dataverse.Api.External.Controllers.v1.Core.TeamsController.GetAuditQuery)  [L111–L116] status=200
  └─ maps_to EntityAuditDto [L114]
  └─ calls TeamRepository.ReadQuery [L114]
  └─ query Team [L114]
    └─ reads_from Teams
  └─ uses_service IControlledRepository<Team>
    └─ method ReadQuery [L114]
      └─ ... (no implementation details available)

[web] GET /core/v1/teams/audits  (Dataverse.Api.External.Controllers.v1.Core.TeamsController.GetAuditsQuery)  [L97–L103] status=200
  └─ maps_to EntityAuditDto [L100]
  └─ calls TeamRepository.ReadQuery [L100]
  └─ query Team [L100]
    └─ reads_from Teams
  └─ uses_service IControlledRepository<Team>
    └─ method ReadQuery [L100]
      └─ ... (no implementation details available)

[web] GET /core/v1/teams/  (Dataverse.Api.External.Controllers.v1.Core.TeamsController.MinimalQuery)  [L68–L73] status=200
  └─ calls TeamRepository.ReadQuery [L71]
  └─ query Team [L71]
    └─ reads_from Teams
  └─ uses_service IControlledRepository<Team>
    └─ method ReadQuery [L71]
      └─ ... (no implementation details available)

[web] PUT /core/v1/teams/{id:Guid}  (Dataverse.Api.External.Controllers.v1.Core.TeamsController.Update)  [L142–L149] status=200 [auth=Authentication.CoreWrite]
  └─ uses_service IDataverseProxyService (AddScoped)
    └─ method PutSerialisedModel [L147]
      └─ implementation Dataverse.Api.External.Features.DataverseProxy.DataverseProxyService.PutSerialisedModel [L12-L74]

[web] POST /core/v1/users/  (Dataverse.Api.External.Controllers.v1.Core.UsersController.Create)  [L142–L150] status=201 [auth=Authentication.CoreWrite]
  └─ uses_service IDataverseProxyService (AddScoped)
    └─ method PostSerialisedModel [L148]
      └─ implementation Dataverse.Api.External.Features.DataverseProxy.DataverseProxyService.PostSerialisedModel [L12-L74]

[web] GET /core/v1/users/detailed  (Dataverse.Api.External.Controllers.v1.Core.UsersController.FullQuery)  [L102–L108] status=200
  └─ calls UserRepository.ReadQuery [L105]
  └─ query User [L105]
  └─ uses_service IControlledRepository<User>
    └─ method ReadQuery [L105]
      └─ ... (no implementation details available)

[web] GET /core/v1/users/{id:Guid}  (Dataverse.Api.External.Controllers.v1.Core.UsersController.Get)  [L67–L72] status=200
  └─ maps_to UserDto [L70]
    └─ automapper.registration ExternalApiMappingProfile (User->UserDto) [L61]
    └─ automapper.registration CirrusMappingProfile (User->UserDto) [L110]
    └─ automapper.registration WorkpapersMappingProfile (User->UserDto) [L106]
    └─ automapper.registration DataverseMappingProfile (User->UserDto) [L77]
  └─ calls UserRepository.ReadQuery [L70]
  └─ query User [L70]
  └─ uses_service IControlledRepository<User>
    └─ method ReadQuery [L70]
      └─ ... (no implementation details available)

[web] GET /core/v1/users/audits/{entityId:Guid}  (Dataverse.Api.External.Controllers.v1.Core.UsersController.GetAuditQuery)  [L129–L134] status=200
  └─ maps_to EntityAuditDto [L132]
  └─ calls UserRepository.ReadQuery [L132]
  └─ query User [L132]
  └─ uses_service IControlledRepository<User>
    └─ method ReadQuery [L132]
      └─ ... (no implementation details available)

[web] GET /core/v1/users/audits  (Dataverse.Api.External.Controllers.v1.Core.UsersController.GetAuditsQuery)  [L115–L121] status=200
  └─ maps_to EntityAuditDto [L118]
  └─ calls UserRepository.ReadQuery [L118]
  └─ query User [L118]
  └─ uses_service IControlledRepository<User>
    └─ method ReadQuery [L118]
      └─ ... (no implementation details available)

[web] GET /core/v1/users/  (Dataverse.Api.External.Controllers.v1.Core.UsersController.MinimalQuery)  [L84–L90] status=200
  └─ calls UserRepository.ReadQuery [L87]
  └─ query User [L87]
  └─ uses_service IControlledRepository<User>
    └─ method ReadQuery [L87]
      └─ ... (no implementation details available)

[web] GET /core/v1/users/profile  (Dataverse.Api.External.Controllers.v1.Core.UsersController.Profile)  [L54–L59] status=200
  └─ maps_to UserWithTenantIdDto [L57]
    └─ automapper.registration ExternalApiMappingProfile (User->UserWithTenantIdDto) [L66]
  └─ calls UserRepository.ReadQuery [L57]
  └─ query User [L57]
  └─ uses_service IControlledRepository<User>
    └─ method ReadQuery [L57]
      └─ ... (no implementation details available)
  └─ uses_service UserService
    └─ method GetUserId [L58]
      └─ implementation Dataverse.ApplicationService.Services.UserService.GetUserId [L15-L185]

[web] PUT /core/v1/users/{id:Guid}  (Dataverse.Api.External.Controllers.v1.Core.UsersController.Update)  [L160–L169] status=200 [auth=Authentication.CoreWrite]
  └─ uses_service IDataverseProxyService (AddScoped)
    └─ method PutSerialisedModel [L167]
      └─ implementation Dataverse.Api.External.Features.DataverseProxy.DataverseProxyService.PutSerialisedModel [L12-L74]

[web] POST /webhooks/v1/webhooks/  (Dataverse.Api.External.Controllers.v1.Core.WebhooksController.Create)  [L100–L109] status=201 [auth=Authentication.CoreRead,Authentication.CoreWrite]
  └─ uses_service IDataverseProxyService (AddScoped)
    └─ method PostSerialisedModel [L107]
      └─ implementation Dataverse.Api.External.Features.DataverseProxy.DataverseProxyService.PostSerialisedModel [L12-L74]
  └─ uses_service RequestInfoService
    └─ method GetRequestingClientId [L104]
      └─ implementation Dataverse.Services.Features.RequestInfoService.GetRequestingClientId [L11-L92]
      └─ implementation Dataverse.Services.Features.RequestInfoService.GetRequestingClientId [L11-L92]
      └─ implementation Dataverse.Services.Features.RequestInfoService.GetRequestingClientId [L11-L92]

[web] DELETE /webhooks/v1/webhooks/{id:Guid}  (Dataverse.Api.External.Controllers.v1.Core.WebhooksController.Delete)  [L138–L142] status=200 [auth=Authentication.CoreRead,Authentication.CoreWrite]
  └─ uses_service IDataverseProxyService (AddScoped)
    └─ method Delete [L141]
      └─ implementation Dataverse.Api.External.Features.DataverseProxy.DataverseProxyService.Delete [L12-L74]

[web] GET /webhooks/v1/webhooks/  (Dataverse.Api.External.Controllers.v1.Core.WebhooksController.FullQuery)  [L85–L92] status=200 [auth=Authentication.CoreRead]
  └─ calls WebhookRepository.ReadQuery [L90]
  └─ query Webhook [L90]
    └─ reads_from Webhooks
  └─ uses_service IControlledRepository<Webhook>
    └─ method ReadQuery [L90]
      └─ ... (no implementation details available)

[web] GET /webhooks/v1/webhooks/{webhookId:Guid}  (Dataverse.Api.External.Controllers.v1.Core.WebhooksController.Get)  [L57–L62] status=200 [auth=Authentication.CoreRead]
  └─ maps_to WebhookDto [L60]
    └─ automapper.registration DataverseMappingProfile (Webhook->WebhookDto) [L458]
    └─ automapper.registration ExternalApiMappingProfile (Webhook->WebhookDto) [L181]
  └─ calls WebhookRepository.ReadQuery [L60]
  └─ query Webhook [L60]
    └─ reads_from Webhooks
  └─ uses_service IControlledRepository<Webhook>
    └─ method ReadQuery [L60]
      └─ ... (no implementation details available)

[web] GET /webhooks/v1/webhooks/available  (Dataverse.Api.External.Controllers.v1.Core.WebhooksController.GetAvailableWebhooks)  [L69–L73] status=200 [auth=Authentication.CoreRead]

[web] PUT /webhooks/v1/webhooks/{id:Guid}  (Dataverse.Api.External.Controllers.v1.Core.WebhooksController.Update)  [L119–L129] status=200 [auth=Authentication.CoreRead,Authentication.CoreWrite]
  └─ uses_service IDataverseProxyService (AddScoped)
    └─ method PutSerialisedModel [L127]
      └─ implementation Dataverse.Api.External.Features.DataverseProxy.DataverseProxyService.PutSerialisedModel [L12-L74]

[web] POST /documents/v1/documents/  (Dataverse.Api.External.Controllers.v1.Documents.DocumentsController.Create)  [L123–L130] status=201 [auth=Authentication.CoreWrite]
  └─ uses_service IDataverseProxyService (AddScoped)
    └─ method PostSerialisedModel [L127]
      └─ implementation Dataverse.Api.External.Features.DataverseProxy.DataverseProxyService.PostSerialisedModel [L12-L74]

[web] DELETE /documents/v1/documents/{id:Guid}  (Dataverse.Api.External.Controllers.v1.Documents.DocumentsController.Delete)  [L158–L162] status=200 [auth=Authentication.CoreWrite]
  └─ uses_service IDataverseProxyService (AddScoped)
    └─ method Delete [L161]
      └─ implementation Dataverse.Api.External.Features.DataverseProxy.DataverseProxyService.Delete [L12-L74]

[web] GET /documents/v1/documents/{id:Guid}/download  (Dataverse.Api.External.Controllers.v1.Documents.DocumentsController.DownloadDocument)  [L70–L76] status=200
  └─ sends_request GetDocumentDownloadLink [L73]
    └─ handled_by Dataverse.ApplicationService.Queries.Documents.GetDocumentDownloadLinkHandler.Handle [L30–L77]
      └─ maps_to SecureDocumentStoreDto [L65]
      └─ uses_service UserService
        └─ method GetUserId [L73]
          └─ implementation Dataverse.ApplicationService.Services.UserService.GetUserId [L15-L185]
      └─ uses_service DocumentServiceFactory
        └─ method GetForStore [L65]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<Document>
        └─ method ReadQuery [L56]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<DocumentAuditLog>
        └─ method Add [L68]
          └─ ... (no implementation details available)
      └─ uses_service IMapper
        └─ method Map [L65]
          └─ ... (no implementation details available)

[web] GET /documents/v1/documents/detailed  (Dataverse.Api.External.Controllers.v1.Documents.DocumentsController.FullQuery)  [L104–L110] status=200
  └─ maps_to DocumentDto [L107]
    └─ automapper.registration DataverseMappingProfile (Document->DocumentDto) [L405]
  └─ calls DocumentRepository.ReadQuery [L107]
  └─ query Document [L107]
    └─ reads_from Documents
  └─ uses_service IControlledRepository<Document>
    └─ method ReadQuery [L107]
      └─ ... (no implementation details available)

[web] GET /documents/v1/documents/{id:Guid}  (Dataverse.Api.External.Controllers.v1.Documents.DocumentsController.Get)  [L55–L60] status=200
  └─ maps_to DocumentDto [L58]
    └─ automapper.registration DataverseMappingProfile (Document->DocumentDto) [L405]
  └─ calls DocumentRepository.ReadQuery [L58]
  └─ query Document [L58]
    └─ reads_from Documents
  └─ uses_service IControlledRepository<Document>
    └─ method ReadQuery [L58]
      └─ ... (no implementation details available)

[web] GET /documents/v1/documents/  (Dataverse.Api.External.Controllers.v1.Documents.DocumentsController.MinimalQuery)  [L87–L93] status=200
  └─ maps_to DocumentMinimalDto [L90]
  └─ calls DocumentRepository.ReadQuery [L90]
  └─ query Document [L90]
    └─ reads_from Documents
  └─ uses_service IControlledRepository<Document>
    └─ method ReadQuery [L90]
      └─ ... (no implementation details available)

[web] PUT /documents/v1/documents/{id:Guid}  (Dataverse.Api.External.Controllers.v1.Documents.DocumentsController.Update)  [L142–L147] status=200 [auth=Authentication.CoreWrite]
  └─ uses_service IDataverseProxyService (AddScoped)
    └─ method PutSerialisedModel [L146]
      └─ implementation Dataverse.Api.External.Features.DataverseProxy.DataverseProxyService.PutSerialisedModel [L12-L74]

[web] POST /workflow/v1/deliverables/  (Dataverse.Api.External.Controllers.v1.Workflow.DeliverablesController.Create)  [L131–L139] status=201 [auth=Authentication.WorkflowWrite]
  └─ uses_service IDataverseProxyService (AddScoped)
    └─ method PostSerialisedModel [L137]
      └─ implementation Dataverse.Api.External.Features.DataverseProxy.DataverseProxyService.PostSerialisedModel [L12-L74]

[web] DELETE /workflow/v1/deliverables/{id:Guid}  (Dataverse.Api.External.Controllers.v1.Workflow.DeliverablesController.Delete)  [L165–L169] status=200 [auth=Authentication.WorkflowWrite]
  └─ uses_service IDataverseProxyService (AddScoped)
    └─ method Delete [L168]
      └─ implementation Dataverse.Api.External.Features.DataverseProxy.DataverseProxyService.Delete [L12-L74]

[web] GET /workflow/v1/deliverables/detailed  (Dataverse.Api.External.Controllers.v1.Workflow.DeliverablesController.FullQuery)  [L89–L97] status=200
  └─ calls DeliverableRepository.ReadQuery [L93]
  └─ query Deliverable [L93]
    └─ reads_from Deliverables
  └─ uses_service IControlledRepository<Deliverable>
    └─ method ReadQuery [L93]
      └─ ... (no implementation details available)

[web] GET /workflow/v1/deliverables/{id:Guid}  (Dataverse.Api.External.Controllers.v1.Workflow.DeliverablesController.Get)  [L52–L57] status=200
  └─ maps_to DeliverableDto [L55]
    └─ automapper.registration ExternalApiMappingProfile (Deliverable->DeliverableDto) [L130]
    └─ automapper.registration DataverseMappingProfile (Deliverable->DeliverableDto) [L353]
  └─ calls DeliverableRepository.ReadQuery [L55]
  └─ query Deliverable [L55]
    └─ reads_from Deliverables
  └─ uses_service IControlledRepository<Deliverable>
    └─ method ReadQuery [L55]
      └─ ... (no implementation details available)

[web] GET /workflow/v1/deliverables/audits/{entityId:Guid}  (Dataverse.Api.External.Controllers.v1.Workflow.DeliverablesController.GetAuditQuery)  [L118–L123] status=200
  └─ maps_to EntityAuditDto [L121]
  └─ calls DeliverableRepository.ReadQuery [L121]
  └─ query Deliverable [L121]
    └─ reads_from Deliverables
  └─ uses_service IControlledRepository<Deliverable>
    └─ method ReadQuery [L121]
      └─ ... (no implementation details available)

[web] GET /workflow/v1/deliverables/audits  (Dataverse.Api.External.Controllers.v1.Workflow.DeliverablesController.GetAuditsQuery)  [L104–L110] status=200
  └─ maps_to EntityAuditDto [L107]
  └─ calls DeliverableRepository.ReadQuery [L107]
  └─ query Deliverable [L107]
    └─ reads_from Deliverables
  └─ uses_service IControlledRepository<Deliverable>
    └─ method ReadQuery [L107]
      └─ ... (no implementation details available)

[web] GET /workflow/v1/deliverables/  (Dataverse.Api.External.Controllers.v1.Workflow.DeliverablesController.MinimalQuery)  [L69–L77] status=200
  └─ calls DeliverableRepository.ReadQuery [L73]
  └─ query Deliverable [L73]
    └─ reads_from Deliverables
  └─ uses_service IControlledRepository<Deliverable>
    └─ method ReadQuery [L73]
      └─ ... (no implementation details available)

[web] PUT /workflow/v1/deliverables/{id:Guid}  (Dataverse.Api.External.Controllers.v1.Workflow.DeliverablesController.Update)  [L149–L156] status=200 [auth=Authentication.WorkflowWrite]
  └─ uses_service IDataverseProxyService (AddScoped)
    └─ method PutSerialisedModel [L154]
      └─ implementation Dataverse.Api.External.Features.DataverseProxy.DataverseProxyService.PutSerialisedModel [L12-L74]

[web] POST /workflow/v1/deliverable-types/  (Dataverse.Api.External.Controllers.v1.Workflow.DeliverableTypeController.Create)  [L129–L138] status=201 [auth=Authentication.WorkflowWrite]
  └─ uses_service IDataverseProxyService (AddScoped)
    └─ method PostSerialisedModel [L135]
      └─ implementation Dataverse.Api.External.Features.DataverseProxy.DataverseProxyService.PostSerialisedModel [L12-L74]

[web] DELETE /workflow/v1/deliverable-types/{id:Guid}  (Dataverse.Api.External.Controllers.v1.Workflow.DeliverableTypeController.Delete)  [L164–L168] status=200 [auth=Authentication.WorkflowWrite]
  └─ uses_service IDataverseProxyService (AddScoped)
    └─ method Delete [L167]
      └─ implementation Dataverse.Api.External.Features.DataverseProxy.DataverseProxyService.Delete [L12-L74]

[web] GET /workflow/v1/deliverable-types/detailed  (Dataverse.Api.External.Controllers.v1.Workflow.DeliverableTypeController.FullQuery)  [L88–L95] status=200
  └─ calls DeliverableTypeRepository.ReadQuery [L92]
  └─ query DeliverableType [L92]
    └─ reads_from DeliverableTypes
  └─ uses_service IControlledRepository<DeliverableType>
    └─ method ReadQuery [L92]
      └─ ... (no implementation details available)

[web] GET /workflow/v1/deliverable-types/{id:Guid}  (Dataverse.Api.External.Controllers.v1.Workflow.DeliverableTypeController.Get)  [L52–L57] status=200
  └─ maps_to DeliverableTypeDto [L55]
    └─ automapper.registration ExternalApiMappingProfile (DeliverableType->DeliverableTypeDto) [L137]
    └─ automapper.registration DataverseMappingProfile (DeliverableType->DeliverableTypeDto) [L358]
  └─ calls DeliverableTypeRepository.ReadQuery [L55]
  └─ query DeliverableType [L55]
    └─ reads_from DeliverableTypes
  └─ uses_service IControlledRepository<DeliverableType>
    └─ method ReadQuery [L55]
      └─ ... (no implementation details available)

[web] GET /workflow/v1/deliverable-types/audits/{entityId:Guid}  (Dataverse.Api.External.Controllers.v1.Workflow.DeliverableTypeController.GetAuditQuery)  [L116–L121] status=200
  └─ maps_to EntityAuditDto [L119]
  └─ calls DeliverableTypeRepository.ReadQuery [L119]
  └─ query DeliverableType [L119]
    └─ reads_from DeliverableTypes
  └─ uses_service IControlledRepository<DeliverableType>
    └─ method ReadQuery [L119]
      └─ ... (no implementation details available)

[web] GET /workflow/v1/deliverable-types/audits  (Dataverse.Api.External.Controllers.v1.Workflow.DeliverableTypeController.GetAuditsQuery)  [L102–L108] status=200
  └─ maps_to EntityAuditDto [L105]
  └─ calls DeliverableTypeRepository.ReadQuery [L105]
  └─ query DeliverableType [L105]
    └─ reads_from DeliverableTypes
  └─ uses_service IControlledRepository<DeliverableType>
    └─ method ReadQuery [L105]
      └─ ... (no implementation details available)

[web] GET /workflow/v1/deliverable-types/  (Dataverse.Api.External.Controllers.v1.Workflow.DeliverableTypeController.MinimalQuery)  [L69–L76] status=200
  └─ calls DeliverableTypeRepository.ReadQuery [L73]
  └─ query DeliverableType [L73]
    └─ reads_from DeliverableTypes
  └─ uses_service IControlledRepository<DeliverableType>
    └─ method ReadQuery [L73]
      └─ ... (no implementation details available)

[web] PUT /workflow/v1/deliverable-types/{id:Guid}  (Dataverse.Api.External.Controllers.v1.Workflow.DeliverableTypeController.Update)  [L148–L155] status=200 [auth=Authentication.WorkflowWrite]
  └─ uses_service IDataverseProxyService (AddScoped)
    └─ method PutSerialisedModel [L153]
      └─ implementation Dataverse.Api.External.Features.DataverseProxy.DataverseProxyService.PutSerialisedModel [L12-L74]

[web] POST /workflow/v1/jobs/  (Dataverse.Api.External.Controllers.v1.Workflow.JobsController.Create)  [L131–L140] status=201 [auth=Authentication.WorkflowWrite]
  └─ uses_service IDataverseProxyService (AddScoped)
    └─ method PostSerialisedModel [L137]
      └─ implementation Dataverse.Api.External.Features.DataverseProxy.DataverseProxyService.PostSerialisedModel [L12-L74]

[web] DELETE /workflow/v1/jobs/{id:Guid}  (Dataverse.Api.External.Controllers.v1.Workflow.JobsController.Delete)  [L166–L170] status=200 [auth=Authentication.WorkflowWrite]
  └─ uses_service IDataverseProxyService (AddScoped)
    └─ method Delete [L169]
      └─ implementation Dataverse.Api.External.Features.DataverseProxy.DataverseProxyService.Delete [L12-L74]

[web] GET /workflow/v1/jobs/detailed  (Dataverse.Api.External.Controllers.v1.Workflow.JobsController.FullQuery)  [L89–L97] status=200
  └─ calls JobRepository.ReadQuery [L93]
  └─ query Job [L93]
    └─ reads_from Jobs
  └─ uses_service IControlledRepository<Job>
    └─ method ReadQuery [L93]
      └─ ... (no implementation details available)

[web] GET /workflow/v1/jobs/{id:Guid}  (Dataverse.Api.External.Controllers.v1.Workflow.JobsController.Get)  [L52–L57] status=200
  └─ maps_to JobDto [L55]
    └─ automapper.registration DataverseMappingProfile (Job->JobDto) [L307]
    └─ automapper.registration ExternalApiMappingProfile (Job->JobDto) [L120]
    └─ converts_to JobExportDto [L312]
  └─ calls JobRepository.ReadQuery [L55]
  └─ query Job [L55]
    └─ reads_from Jobs
  └─ uses_service IControlledRepository<Job>
    └─ method ReadQuery [L55]
      └─ ... (no implementation details available)

[web] GET /workflow/v1/jobs/audits/{entityId:Guid}  (Dataverse.Api.External.Controllers.v1.Workflow.JobsController.GetAuditQuery)  [L118–L123] status=200
  └─ maps_to EntityAuditDto [L121]
  └─ calls JobRepository.ReadQuery [L121]
  └─ query Job [L121]
    └─ reads_from Jobs
  └─ uses_service IControlledRepository<Job>
    └─ method ReadQuery [L121]
      └─ ... (no implementation details available)

[web] GET /workflow/v1/jobs/audits  (Dataverse.Api.External.Controllers.v1.Workflow.JobsController.GetAuditsQuery)  [L104–L110] status=200
  └─ maps_to EntityAuditDto [L107]
  └─ calls JobRepository.ReadQuery [L107]
  └─ query Job [L107]
    └─ reads_from Jobs
  └─ uses_service IControlledRepository<Job>
    └─ method ReadQuery [L107]
      └─ ... (no implementation details available)

[web] GET /workflow/v1/jobs/  (Dataverse.Api.External.Controllers.v1.Workflow.JobsController.MinimalQuery)  [L69–L77] status=200
  └─ calls JobRepository.ReadQuery [L73]
  └─ query Job [L73]
    └─ reads_from Jobs
  └─ uses_service IControlledRepository<Job>
    └─ method ReadQuery [L73]
      └─ ... (no implementation details available)

[web] PUT /workflow/v1/jobs/{id:Guid}  (Dataverse.Api.External.Controllers.v1.Workflow.JobsController.Update)  [L150–L157] status=200 [auth=Authentication.WorkflowWrite]
  └─ uses_service IDataverseProxyService (AddScoped)
    └─ method PutSerialisedModel [L155]
      └─ implementation Dataverse.Api.External.Features.DataverseProxy.DataverseProxyService.PutSerialisedModel [L12-L74]

[web] POST /workflow/v1/job-statuses/  (Dataverse.Api.External.Controllers.v1.Workflow.JobStatusController.Create)  [L129–L138] status=201 [auth=Authentication.WorkflowWrite]
  └─ uses_service IDataverseProxyService (AddScoped)
    └─ method PostSerialisedModel [L135]
      └─ implementation Dataverse.Api.External.Features.DataverseProxy.DataverseProxyService.PostSerialisedModel [L12-L74]

[web] DELETE /workflow/v1/job-statuses/{id:Guid}  (Dataverse.Api.External.Controllers.v1.Workflow.JobStatusController.Delete)  [L164–L168] status=200 [auth=Authentication.WorkflowWrite]
  └─ uses_service IDataverseProxyService (AddScoped)
    └─ method Delete [L167]
      └─ implementation Dataverse.Api.External.Features.DataverseProxy.DataverseProxyService.Delete [L12-L74]

[web] GET /workflow/v1/job-statuses/detailed  (Dataverse.Api.External.Controllers.v1.Workflow.JobStatusController.FullQuery)  [L88–L95] status=200
  └─ calls JobStatusRepository.ReadQuery [L92]
  └─ query JobStatus [L92]
    └─ reads_from DVS_JobStatuses
  └─ uses_service IControlledRepository<JobStatus>
    └─ method ReadQuery [L92]
      └─ ... (no implementation details available)

[web] GET /workflow/v1/job-statuses/{id:Guid}  (Dataverse.Api.External.Controllers.v1.Workflow.JobStatusController.Get)  [L52–L57] status=200
  └─ maps_to JobStatusDto [L55]
    └─ automapper.registration DataverseMappingProfile (JobStatus->JobStatusDto) [L315]
    └─ automapper.registration ExternalApiMappingProfile (JobStatus->JobStatusDto) [L168]
  └─ calls JobStatusRepository.ReadQuery [L55]
  └─ query JobStatus [L55]
    └─ reads_from DVS_JobStatuses
  └─ uses_service IControlledRepository<JobStatus>
    └─ method ReadQuery [L55]
      └─ ... (no implementation details available)

[web] GET /workflow/v1/job-statuses/audits/{entityId:Guid}  (Dataverse.Api.External.Controllers.v1.Workflow.JobStatusController.GetAuditQuery)  [L116–L121] status=200
  └─ maps_to EntityAuditDto [L119]
  └─ calls JobStatusRepository.ReadQuery [L119]
  └─ query JobStatus [L119]
    └─ reads_from DVS_JobStatuses
  └─ uses_service IControlledRepository<JobStatus>
    └─ method ReadQuery [L119]
      └─ ... (no implementation details available)

[web] GET /workflow/v1/job-statuses/audits  (Dataverse.Api.External.Controllers.v1.Workflow.JobStatusController.GetAuditsQuery)  [L102–L108] status=200
  └─ maps_to EntityAuditDto [L105]
  └─ calls JobStatusRepository.ReadQuery [L105]
  └─ query JobStatus [L105]
    └─ reads_from DVS_JobStatuses
  └─ uses_service IControlledRepository<JobStatus>
    └─ method ReadQuery [L105]
      └─ ... (no implementation details available)

[web] GET /workflow/v1/job-statuses/  (Dataverse.Api.External.Controllers.v1.Workflow.JobStatusController.MinimalQuery)  [L69–L76] status=200
  └─ calls JobStatusRepository.ReadQuery [L73]
  └─ query JobStatus [L73]
    └─ reads_from DVS_JobStatuses
  └─ uses_service IControlledRepository<JobStatus>
    └─ method ReadQuery [L73]
      └─ ... (no implementation details available)

[web] PUT /workflow/v1/job-statuses/{id:Guid}  (Dataverse.Api.External.Controllers.v1.Workflow.JobStatusController.Update)  [L148–L155] status=200 [auth=Authentication.WorkflowWrite]
  └─ uses_service IDataverseProxyService (AddScoped)
    └─ method PutSerialisedModel [L153]
      └─ implementation Dataverse.Api.External.Features.DataverseProxy.DataverseProxyService.PutSerialisedModel [L12-L74]

[web] POST /workflow/v1/job-types/  (Dataverse.Api.External.Controllers.v1.Workflow.JobTypesController.Create)  [L129–L138] status=201 [auth=Authentication.WorkflowWrite]
  └─ uses_service IDataverseProxyService (AddScoped)
    └─ method PostSerialisedModel [L135]
      └─ implementation Dataverse.Api.External.Features.DataverseProxy.DataverseProxyService.PostSerialisedModel [L12-L74]

[web] DELETE /workflow/v1/job-types/{id:Guid}  (Dataverse.Api.External.Controllers.v1.Workflow.JobTypesController.Delete)  [L164–L168] status=200 [auth=Authentication.WorkflowWrite]
  └─ uses_service IDataverseProxyService (AddScoped)
    └─ method Delete [L167]
      └─ implementation Dataverse.Api.External.Features.DataverseProxy.DataverseProxyService.Delete [L12-L74]

[web] GET /workflow/v1/job-types/detailed  (Dataverse.Api.External.Controllers.v1.Workflow.JobTypesController.FullQuery)  [L88–L95] status=200
  └─ calls JobTypeRepository.ReadQuery [L92]
  └─ query JobType [L92]
    └─ reads_from JobTypes
  └─ uses_service IControlledRepository<JobType>
    └─ method ReadQuery [L92]
      └─ ... (no implementation details available)

[web] GET /workflow/v1/job-types/{id:Guid}  (Dataverse.Api.External.Controllers.v1.Workflow.JobTypesController.Get)  [L52–L57] status=200
  └─ maps_to JobTypeDto [L55]
    └─ automapper.registration WorkpapersMappingProfile (JobType->JobTypeDto) [L867]
    └─ automapper.registration ExternalApiMappingProfile (JobType->JobTypeDto) [L175]
    └─ automapper.registration DataverseMappingProfile (JobType->JobTypeDto) [L318]
  └─ calls JobTypeRepository.ReadQuery [L55]
  └─ query JobType [L55]
    └─ reads_from JobTypes
  └─ uses_service IControlledRepository<JobType>
    └─ method ReadQuery [L55]
      └─ ... (no implementation details available)

[web] GET /workflow/v1/job-types/audits/{entityId:Guid}  (Dataverse.Api.External.Controllers.v1.Workflow.JobTypesController.GetAuditQuery)  [L116–L121] status=200
  └─ maps_to EntityAuditDto [L119]
  └─ calls JobTypeRepository.ReadQuery [L119]
  └─ query JobType [L119]
    └─ reads_from JobTypes
  └─ uses_service IControlledRepository<JobType>
    └─ method ReadQuery [L119]
      └─ ... (no implementation details available)

[web] GET /workflow/v1/job-types/audits  (Dataverse.Api.External.Controllers.v1.Workflow.JobTypesController.GetAuditsQuery)  [L102–L108] status=200
  └─ maps_to EntityAuditDto [L105]
  └─ calls JobTypeRepository.ReadQuery [L105]
  └─ query JobType [L105]
    └─ reads_from JobTypes
  └─ uses_service IControlledRepository<JobType>
    └─ method ReadQuery [L105]
      └─ ... (no implementation details available)

[web] GET /workflow/v1/job-types/  (Dataverse.Api.External.Controllers.v1.Workflow.JobTypesController.MinimalQuery)  [L69–L76] status=200
  └─ calls JobTypeRepository.ReadQuery [L73]
  └─ query JobType [L73]
    └─ reads_from JobTypes
  └─ uses_service IControlledRepository<JobType>
    └─ method ReadQuery [L73]
      └─ ... (no implementation details available)

[web] PUT /workflow/v1/job-types/{id:Guid}  (Dataverse.Api.External.Controllers.v1.Workflow.JobTypesController.Update)  [L148–L155] status=200 [auth=Authentication.WorkflowWrite]
  └─ uses_service IDataverseProxyService (AddScoped)
    └─ method PutSerialisedModel [L153]
      └─ implementation Dataverse.Api.External.Features.DataverseProxy.DataverseProxyService.PutSerialisedModel [L12-L74]

[web] POST /workflow/v1/kanban-columns/  (Dataverse.Api.External.Controllers.v1.Workflow.KanbanColumnsController.Create)  [L97–L105] status=201 [auth=Authentication.WorkflowWrite]
  └─ uses_service IDataverseProxyService (AddScoped)
    └─ method PostSerialisedModel [L102]
      └─ implementation Dataverse.Api.External.Features.DataverseProxy.DataverseProxyService.PostSerialisedModel [L12-L74]

[web] DELETE /workflow/v1/kanban-columns/{id:Guid}  (Dataverse.Api.External.Controllers.v1.Workflow.KanbanColumnsController.Delete)  [L131–L135] status=200 [auth=Authentication.WorkflowWrite]
  └─ uses_service IDataverseProxyService (AddScoped)
    └─ method Delete [L134]
      └─ implementation Dataverse.Api.External.Features.DataverseProxy.DataverseProxyService.Delete [L12-L74]

[web] GET /workflow/v1/kanban-columns/detailed  (Dataverse.Api.External.Controllers.v1.Workflow.KanbanColumnsController.FullQuery)  [L83–L89] status=200
  └─ calls KanbanColumnRepository.ReadQuery [L87]
  └─ query KanbanColumn [L87]
    └─ reads_from KanbanColumns
  └─ uses_service IControlledRepository<KanbanColumn>
    └─ method ReadQuery [L87]
      └─ ... (no implementation details available)

[web] GET /workflow/v1/kanban-columns/{id:Guid}  (Dataverse.Api.External.Controllers.v1.Workflow.KanbanColumnsController.Get)  [L48–L53] status=200
  └─ maps_to KanbanColumnDto [L51]
    └─ automapper.registration DataverseMappingProfile (KanbanColumn->KanbanColumnDto) [L379]
    └─ automapper.registration ExternalApiMappingProfile (KanbanColumn->KanbanColumnDto) [L161]
  └─ calls KanbanColumnRepository.ReadQuery [L51]
  └─ query KanbanColumn [L51]
    └─ reads_from KanbanColumns
  └─ uses_service IControlledRepository<KanbanColumn>
    └─ method ReadQuery [L51]
      └─ ... (no implementation details available)

[web] GET /workflow/v1/kanban-columns/  (Dataverse.Api.External.Controllers.v1.Workflow.KanbanColumnsController.MinimalQuery)  [L65–L71] status=200
  └─ calls KanbanColumnRepository.ReadQuery [L69]
  └─ query KanbanColumn [L69]
    └─ reads_from KanbanColumns
  └─ uses_service IControlledRepository<KanbanColumn>
    └─ method ReadQuery [L69]
      └─ ... (no implementation details available)

[web] PUT /workflow/v1/kanban-columns/{id:Guid}  (Dataverse.Api.External.Controllers.v1.Workflow.KanbanColumnsController.Update)  [L115–L122] status=200 [auth=Authentication.WorkflowWrite]
  └─ uses_service IDataverseProxyService (AddScoped)
    └─ method PutSerialisedModel [L120]
      └─ implementation Dataverse.Api.External.Features.DataverseProxy.DataverseProxyService.PutSerialisedModel [L12-L74]

[web] POST /workflow/v1/tasks/  (Dataverse.Api.External.Controllers.v1.Workflow.TasksController.Create)  [L107–L114] status=201 [auth=Authentication.WorkflowWrite]
  └─ uses_service IDataverseProxyService (AddScoped)
    └─ method PostSerialisedModel [L112]
      └─ implementation Dataverse.Api.External.Features.DataverseProxy.DataverseProxyService.PostSerialisedModel [L12-L74]

[web] DELETE /workflow/v1/tasks/{id:Guid}  (Dataverse.Api.External.Controllers.v1.Workflow.TasksController.Delete)  [L140–L144] status=200 [auth=Authentication.WorkflowWrite]
  └─ uses_service IDataverseProxyService (AddScoped)
    └─ method Delete [L143]
      └─ implementation Dataverse.Api.External.Features.DataverseProxy.DataverseProxyService.Delete [L12-L74]

[web] GET /workflow/v1/tasks/detailed  (Dataverse.Api.External.Controllers.v1.Workflow.TasksController.FullQuery)  [L89–L99] status=200
  └─ query WorkflowTask [L93]
    └─ reads_from DVS_Tasks
  └─ uses_service IControlledRepository<WorkflowTask>
    └─ method ReadQuery [L93]
      └─ ... (no implementation details available)

[web] GET /workflow/v1/tasks/{id:Guid}  (Dataverse.Api.External.Controllers.v1.Workflow.TasksController.Get)  [L49–L55] status=200
  └─ maps_to WorkflowTaskDto [L52]
    └─ automapper.registration DataverseMappingProfile (WorkflowTask->WorkflowTaskDto) [L371]
    └─ automapper.registration ExternalApiMappingProfile (WorkflowTask->WorkflowTaskDto) [L143]
  └─ query WorkflowTask [L52]
    └─ reads_from DVS_Tasks
  └─ uses_service IControlledRepository<WorkflowTask>
    └─ method ReadQuery [L52]
      └─ ... (no implementation details available)

[web] GET /workflow/v1/tasks/  (Dataverse.Api.External.Controllers.v1.Workflow.TasksController.MinimalQuery)  [L67–L77] status=200
  └─ query WorkflowTask [L71]
    └─ reads_from DVS_Tasks
  └─ uses_service IControlledRepository<WorkflowTask>
    └─ method ReadQuery [L71]
      └─ ... (no implementation details available)

[web] PUT /workflow/v1/tasks/{id:Guid}  (Dataverse.Api.External.Controllers.v1.Workflow.TasksController.Update)  [L124–L131] status=200 [auth=Authentication.WorkflowWrite]
  └─ uses_service IDataverseProxyService (AddScoped)
    └─ method PutSerialisedModel [L129]
      └─ implementation Dataverse.Api.External.Features.DataverseProxy.DataverseProxyService.PutSerialisedModel [L12-L74]

[web] POST /workflow/v1/task-template-groups/  (Dataverse.Api.External.Controllers.v1.Workflow.TaskTemplateGroupsController.Create)  [L100–L107] status=201 [auth=Authentication.WorkflowWrite]
  └─ uses_service IDataverseProxyService (AddScoped)
    └─ method PostSerialisedModel [L105]
      └─ implementation Dataverse.Api.External.Features.DataverseProxy.DataverseProxyService.PostSerialisedModel [L12-L74]

[web] DELETE /workflow/v1/task-template-groups/{id:Guid}  (Dataverse.Api.External.Controllers.v1.Workflow.TaskTemplateGroupsController.Delete)  [L133–L137] status=200 [auth=Authentication.WorkflowWrite]
  └─ uses_service IDataverseProxyService (AddScoped)
    └─ method Delete [L136]
      └─ implementation Dataverse.Api.External.Features.DataverseProxy.DataverseProxyService.Delete [L12-L74]

[web] GET /workflow/v1/task-template-groups/detailed  (Dataverse.Api.External.Controllers.v1.Workflow.TaskTemplateGroupsController.FullQuery)  [L85–L92] status=200
  └─ calls TaskTemplateGroupRepository.ReadQuery [L89]
  └─ query TaskTemplateGroup [L89]
    └─ reads_from TaskTemplateGroups
  └─ uses_service IControlledRepository<TaskTemplateGroup>
    └─ method ReadQuery [L89]
      └─ ... (no implementation details available)

[web] GET /workflow/v1/task-template-groups/{id:Guid}  (Dataverse.Api.External.Controllers.v1.Workflow.TaskTemplateGroupsController.Get)  [L48–L54] status=200
  └─ maps_to TaskTemplateGroupDto [L51]
    └─ automapper.registration DataverseMappingProfile (TaskTemplateGroup->TaskTemplateGroupDto) [L373]
    └─ automapper.registration ExternalApiMappingProfile (TaskTemplateGroup->TaskTemplateGroupDto) [L155]
  └─ calls TaskTemplateGroupRepository.ReadQuery [L51]
  └─ query TaskTemplateGroup [L51]
    └─ reads_from TaskTemplateGroups
  └─ uses_service IControlledRepository<TaskTemplateGroup>
    └─ method ReadQuery [L51]
      └─ ... (no implementation details available)

[web] GET /workflow/v1/task-template-groups/  (Dataverse.Api.External.Controllers.v1.Workflow.TaskTemplateGroupsController.MinimalQuery)  [L66–L73] status=200
  └─ calls TaskTemplateGroupRepository.ReadQuery [L70]
  └─ query TaskTemplateGroup [L70]
    └─ reads_from TaskTemplateGroups
  └─ uses_service IControlledRepository<TaskTemplateGroup>
    └─ method ReadQuery [L70]
      └─ ... (no implementation details available)

[web] PUT /workflow/v1/task-template-groups/{id:Guid}  (Dataverse.Api.External.Controllers.v1.Workflow.TaskTemplateGroupsController.Update)  [L117–L124] status=200 [auth=Authentication.WorkflowWrite]
  └─ uses_service IDataverseProxyService (AddScoped)
    └─ method PutSerialisedModel [L122]
      └─ implementation Dataverse.Api.External.Features.DataverseProxy.DataverseProxyService.PutSerialisedModel [L12-L74]

[web] POST /workflow/v1/task-templates/  (Dataverse.Api.External.Controllers.v1.Workflow.TaskTemplatesController.Create)  [L103–L110] status=201 [auth=Authentication.WorkflowWrite]
  └─ uses_service IDataverseProxyService (AddScoped)
    └─ method PostSerialisedModel [L108]
      └─ implementation Dataverse.Api.External.Features.DataverseProxy.DataverseProxyService.PostSerialisedModel [L12-L74]

[web] DELETE /workflow/v1/task-templates/{id:Guid}  (Dataverse.Api.External.Controllers.v1.Workflow.TaskTemplatesController.Delete)  [L136–L140] status=200 [auth=Authentication.WorkflowWrite]
  └─ uses_service IDataverseProxyService (AddScoped)
    └─ method Delete [L139]
      └─ implementation Dataverse.Api.External.Features.DataverseProxy.DataverseProxyService.Delete [L12-L74]

[web] GET /workflow/v1/task-templates/detailed  (Dataverse.Api.External.Controllers.v1.Workflow.TaskTemplatesController.FullQuery)  [L87–L95] status=200
  └─ calls TaskTemplateRepository.ReadQuery [L91]
  └─ query TaskTemplate [L91]
    └─ reads_from TaskTemplates
  └─ uses_service IControlledRepository<TaskTemplate>
    └─ method ReadQuery [L91]
      └─ ... (no implementation details available)

[web] GET /workflow/v1/task-templates/{id:Guid}  (Dataverse.Api.External.Controllers.v1.Workflow.TaskTemplatesController.Get)  [L49–L55] status=200
  └─ maps_to TaskTemplateDto [L52]
    └─ automapper.registration ExternalApiMappingProfile (TaskTemplate->TaskTemplateDto) [L149]
    └─ automapper.registration DataverseMappingProfile (TaskTemplate->TaskTemplateDto) [L376]
  └─ calls TaskTemplateRepository.ReadQuery [L52]
  └─ query TaskTemplate [L52]
    └─ reads_from TaskTemplates
  └─ uses_service IControlledRepository<TaskTemplate>
    └─ method ReadQuery [L52]
      └─ ... (no implementation details available)

[web] GET /workflow/v1/task-templates/  (Dataverse.Api.External.Controllers.v1.Workflow.TaskTemplatesController.MinimalQuery)  [L67–L75] status=200
  └─ calls TaskTemplateRepository.ReadQuery [L71]
  └─ query TaskTemplate [L71]
    └─ reads_from TaskTemplates
  └─ uses_service IControlledRepository<TaskTemplate>
    └─ method ReadQuery [L71]
      └─ ... (no implementation details available)

[web] PUT /workflow/v1/task-templates/{id:Guid}  (Dataverse.Api.External.Controllers.v1.Workflow.TaskTemplatesController.Update)  [L120–L127] status=200 [auth=Authentication.WorkflowWrite]
  └─ uses_service IDataverseProxyService (AddScoped)
    └─ method PutSerialisedModel [L125]
      └─ implementation Dataverse.Api.External.Features.DataverseProxy.DataverseProxyService.PutSerialisedModel [L12-L74]

[web] GET /api/account-types/{id:int}  (Workpapers.Next.API.Controllers.AccountTypesController.Get)  [L42–L50] status=200 [auth=AuthorizationPolicies.User]
  └─ maps_to AccountTypeDto [L45]
    └─ automapper.registration CirrusMappingProfile (AccountType->AccountTypeDto) [L244]
    └─ automapper.registration WorkpapersMappingProfile (AccountType->AccountTypeDto) [L709]
  └─ calls AccountTypeRepository.ReadQuery [L45]
  └─ query AccountType [L45]
    └─ reads_from AccountTypes
  └─ uses_service IControlledRepository<AccountType>
    └─ method ReadQuery [L45]
      └─ ... (no implementation details available)

[web] GET /api/account-types/search  (Workpapers.Next.API.Controllers.AccountTypesController.Search)  [L59–L65] status=200 [auth=AuthorizationPolicies.User]
  └─ sends_request FindAccountTypesQuery [L64]
    └─ handled_by Cirrus.ApplicationService.Accounting.Queries.FindAccountTypesQueryHandler.Handle [L41–L80]
      └─ uses_service IControlledRepository<Account>
        └─ method ReadQuery [L62]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<AccountType>
        └─ method ReadQuery [L56]
          └─ ... (no implementation details available)
  └─ sends_request FindAccountTypesLightQuery [L63]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Workpapers.FindAccountTypesQueryHandler.Handle [L50–L82]
      └─ uses_service IControlledRepository<AccountType>
        └─ method ReadQuery [L78]
          └─ ... (no implementation details available)

[web] POST /api/autoinsert/suggestions  (Workpapers.Next.API.Controllers.AutoInsertController.Post)  [L32–L45] status=201
  └─ uses_service UserService
    └─ method GetFirmId [L35]
      └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetFirmId [L20-L295]
  └─ sends_request GetAutoInsertSuggestionsQuery [L40]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.GetAutoInsertSuggestionsQueryHandler.Handle [L31–L131]
      └─ uses_service UserService
        └─ method GetFirmId [L54]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetFirmId [L20-L295]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetFirmId [L20-L295]
      └─ uses_service RequestProcessor
        └─ method Process [L102]
          └─ implementation Workpapers.Next.Services.Features.Requests.RequestProcessor.Process [L9-L32]
      └─ uses_service UnitOfWork
        └─ method Table [L57]
          └─ ... (no implementation details available)
      └─ uses_service ArtificialIntelligenceService
        └─ method GetWeightedTemplatePredictions [L98]
          └─ implementation Workpapers.Next.ApplicationService.Features.ArtificialIntelligence.ArtificialIntelligenceService.GetWeightedTemplatePredictions [L12-L60]
  └─ sends_request GetProductQuery [L35]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Licensing.Products.GetProductQueryHandler.Handle [L57–L101]
      └─ uses_service UnitOfWork
        └─ method Table [L71]
          └─ ... (no implementation details available)
  └─ sends_request GetFilteredSuggestionsQuery [L42]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Workpapers.GetFilteredSuggestionsQueryHandler.Handle [L22–L52]
  └─ sends_request AllWorkpaperRecordTemplatesForProductV2Query [L37]
    └─ handled_by Workpapers.Next.Data.Queries.Templates.AllWorkpaperRecordTemplatesForProductQueryHandler.Handle [L18–L141]
      └─ maps_to SectionWithWorkpaperRecordTemplateIdsDto [L54]
      └─ maps_to WorkpaperRecordTemplateV2Dto [L88]
        └─ converts_to LegacyDocumentDto [L343]
        └─ converts_to WorkpaperRecordTemplateV2Dto [L290]
      └─ maps_to WorkpaperRecordTemplateV2Dto [L106]
        └─ converts_to LegacyDocumentDto [L343]
        └─ converts_to WorkpaperRecordTemplateV2Dto [L290]
      └─ uses_service IControlledRepository<ExcludedWorkpaperRecordTemplate>
        └─ method ReadQuery [L65]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<Product>
        └─ method ReadQuery [L54]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<WorkpaperRecordTemplate>
        └─ method ReadQuery [L69]
          └─ ... (no implementation details available)
      └─ uses_service IMapper
        └─ method ConfigurationProvider [L57]
          └─ ... (no implementation details available)

[web] GET /api/clients/{id:guid}  (Workpapers.Next.API.Controllers.ClientsController.Get)  [L68–L76] status=200 [auth=AuthorizationPolicies.User]
  └─ maps_to ClientDto [L73]
    └─ automapper.registration DataverseMappingProfile (Client->ClientDto) [L165]
    └─ automapper.registration WorkpapersMappingProfile (Client->ClientDto) [L69]
    └─ automapper.registration CirrusMappingProfile (Client->ClientDto) [L146]
  └─ calls ClientRepository.ReadQuery [L73]
  └─ query Client [L73]
  └─ uses_service IControlledRepository<Client>
    └─ method ReadQuery [L73]
      └─ ... (no implementation details available)

[web] GET /api/clients/{id:guid}/binders  (Workpapers.Next.API.Controllers.ClientsController.GetChildrenAndBinders)  [L78–L122] status=200 [auth=AuthorizationPolicies.User]
  └─ maps_to BinderListItemClientDto [L102]
    └─ automapper.registration WorkpapersMappingProfile (Binder->BinderListItemClientDto) [L438]
  └─ maps_to ClientWithBindersDto [L95]
    └─ automapper.registration WorkpapersMappingProfile (Client->ClientWithBindersDto) [L72]
  └─ calls ClientRepository.ReadQuery [L87]
  └─ calls BinderRepository.ReadQuery [L102]
  └─ query Binder [L102]
    └─ reads_from Binders
  └─ query Client [L87]
  └─ uses_service IControlledRepository<Binder>
    └─ method ReadQuery [L102]
      └─ ... (no implementation details available)
  └─ uses_service IControlledRepository<Client>
    └─ method ReadQuery [L87]
      └─ ... (no implementation details available)

[web] GET /api/clients/summary  (Workpapers.Next.API.Controllers.ClientsController.GetSummary)  [L125–L170] status=200 [auth=AuthorizationPolicies.User]
  └─ calls ClientRepository.ReadQuery [L128]
  └─ calls BinderRepository.ReadQuery [L140]
  └─ query Binder [L140]
    └─ reads_from Binders
  └─ query Client [L128]
  └─ uses_service IControlledRepository<Binder>
    └─ method ReadQuery [L140]
      └─ ... (no implementation details available)
  └─ uses_service IControlledRepository<Client>
    └─ method ReadQuery [L128]
      └─ ... (no implementation details available)

[web] GET /api/clients/  (Workpapers.Next.API.Controllers.ClientsController.Search)  [L45–L66] status=200 [auth=AuthorizationPolicies.User]
  └─ sends_request GetClientsQuery [L61]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Clients.GetClientsQueryHandler.Handle [L70–L165]
      └─ uses_service FirmSettingsService
        └─ method GetCurrentSettings [L88]
          └─ implementation Workpapers.Next.API.Features.FirmSettings.FirmSettingsService.GetCurrentSettings [L23-L154]
          └─ implementation Workpapers.Next.API.Features.FirmSettings.FirmSettingsService.GetCurrentSettings [L23-L154]
      └─ uses_service UserService
        └─ method GetUserId [L87]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
      └─ uses_service IControlledRepository<Client>
        └─ method ReadQuery [L90]
          └─ ... (no implementation details available)

[web] GET /api/connections/bgl360/funds/{fundId}  (Workpapers.Next.API.Controllers.Connections.Bgl360Controller.GetFund)  [L33–L39] status=200

[web] GET /api/connections/bgl360/funds  (Workpapers.Next.API.Controllers.Connections.Bgl360Controller.GetFunds)  [L25–L31] status=200

[web] GET /api/connections/bgl360/funds/{fundId}/ledger/{startDate:datetime}/{endDate:datetime}  (Workpapers.Next.API.Controllers.Connections.Bgl360Controller.GetLedger)  [L49–L55] status=200

[web] GET /api/connections/bgl360/funds/{fundId}/trial-balance/{startDate:datetime}/{endDate:datetime}  (Workpapers.Next.API.Controllers.Connections.Bgl360Controller.GetTrialBalance)  [L41–L47] status=200

[web] GET /api/connections/class/funds/{fundCode}  (Workpapers.Next.API.Controllers.Connections.ClassController.GetFund)  [L36–L42] status=200

[web] GET /api/connections/class/funds  (Workpapers.Next.API.Controllers.Connections.ClassController.GetFunds)  [L27–L33] status=200

[web] GET /api/connections/class/funds/{fundCode}/ledger/{accountId}/{date:datetime}  (Workpapers.Next.API.Controllers.Connections.ClassController.GetLedger)  [L61–L67] status=200

[web] GET /api/connections/class/funds/{fundCode}/property/{accountName}/{date:datetime}  (Workpapers.Next.API.Controllers.Connections.ClassController.GetProperty)  [L53–L59] status=200

[web] GET /api/connections/class/funds/{fundCode}/trial-balance/{date:datetime}  (Workpapers.Next.API.Controllers.Connections.ClassController.GetTrialBalance)  [L44–L51] status=200

[web] DELETE /api/connections/{apiType}  (Workpapers.Next.API.Controllers.Connections.ConnectionsController.DeleteConnection)  [L36–L42] status=200
  └─ uses_service UserService
    └─ method GetUserId [L39]
      └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
  └─ sends_request RemoveConnectionCommand [L39]
    └─ handled_by Workpapers.Next.Data.Commands.RemoveConnectionCommandHandler.Handle [L17–L87]
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L48]
          └─ implementation Workpapers.Next.Services.Features.Requests.RequestProcessor.ProcessAsync [L9-L32]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle
      └─ uses_service UnitOfWork
        └─ method Table [L52]
          └─ ... (no implementation details available)
      └─ uses_service ConnectionApiService
        └─ method GetApiMethods [L43]
          └─ implementation Workpapers.Next.ApplicationService.Features.Connections.ConnectionApiService.GetApiMethods [L20-L75]

[web] GET /api/connections/{apiType}  (Workpapers.Next.API.Controllers.Connections.ConnectionsController.GetConnections)  [L44–L52] status=200
  └─ uses_service UnitOfWork
    └─ method Table [L48]
      └─ ... (no implementation details available)
  └─ uses_service UserService
    └─ method GetFirmId [L49]
      └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetFirmId [L20-L295]

[web] GET /api/connections/hasconnection  (Workpapers.Next.API.Controllers.Connections.ConnectionsController.HasConnection)  [L54–L68] status=200

[web] GET /api/connections/myob/ar/files  (Workpapers.Next.API.Controllers.Connections.MYOBAccountRightController.GetAccountingFiles)  [L28–L34] status=200

[web] PUT /api/connections/myob/ar/clientdetails  (Workpapers.Next.API.Controllers.Connections.MYOBAccountRightController.GetClientDetails)  [L36–L42] status=200

[web] PUT /api/connections/myob/ar/ledger  (Workpapers.Next.API.Controllers.Connections.MYOBAccountRightController.GetLedger)  [L52–L58] status=200

[web] PUT /api/connections/myob/ar/trialbalance  (Workpapers.Next.API.Controllers.Connections.MYOBAccountRightController.GetTrialBalance)  [L44–L50] status=200

[web] GET /api/connections/myob/es/files  (Workpapers.Next.API.Controllers.Connections.MYOBEssentialsController.GetAccountingFiles)  [L26–L32] status=200
  └─ sends_request GetBusinessesQuery [L29]
    └─ handled_by Workpapers.Next.MyobEssentialsServices.Queries.GetBusinessesQueryHandler.Handle [L10–L29]
      └─ uses_service IMapToNew<Business, AccountingFileDto>
        └─ method Map [L27]
          └─ ... (no implementation details available)
      └─ uses_service MyobEssentialsHttp
        └─ method GetHttpResponseAsync [L24]
          └─ ... (no implementation details available)

[web] PUT /api/connections/myob/es/clientdetails  (Workpapers.Next.API.Controllers.Connections.MYOBEssentialsController.GetClientDetails)  [L34–L40] status=200
  └─ sends_request GetBusinessQuery [L37]
    └─ handled_by Workpapers.Next.MyobEssentialsServices.Queries.GetBusinessQueryHandler.Handle [L13–L41]
      └─ uses_service IMapToNew<Business, ClientDetail>
        └─ method Map [L35]
          └─ ... (no implementation details available)
      └─ uses_service MyobEssentialsHttp
        └─ method GetHttpResponseAsync [L33]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L30]
          └─ implementation Workpapers.Next.Services.Features.Requests.RequestProcessor.ProcessAsync [L9-L32]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle
      └─ uses_service UserService
        └─ method GetUserId [L30]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]

[web] PUT /api/connections/myob/es/trialbalance  (Workpapers.Next.API.Controllers.Connections.MYOBEssentialsController.GetTrialBalance)  [L42–L48] status=200
  └─ uses_service UserService
    └─ method GetUserId [L45]
      └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
  └─ sends_request GetTrialBalanceQuery [L45]
    └─ handled_by Cirrus.Api.External.Queries.GetTrialBalanceQueryHandler.Handle [L44–L156]
      └─ uses_service GetAccountsQuery
        └─ method Execute [L73]
          └─ implementation Cirrus.Connections.DataGet.Queries.GetAccountsQuery.Execute [L9-L23]
            └─ handled_by Cirrus.Connections.DataGet.Queries.GetAccountsQueryHandler.Handle [L25–L59]
              └─ uses_client DataGetClient [L40]
                └─ calls GetAccounts (GET /api/accounting-file/{fileId}/accounts?apiType={*}&password={*}&username={*}, method=GetAccountsAsync, target=DataGet.Api, query=apiType={*}&password={*}&username={*}) [L65]
                  └─ target_service DataGet.Api
                    └─ [web] GET /api/accounting-file/{fileId}/accounts  (DataGet.Api.Controllers.Connections.AccountingFileController.GetAccounts)  [L44–L52] status=200 [auth=Authentication.MachineToMachinePolicy]
                      └─ sends_request GetAccountsQuery [L48]
                        └─ handled_by Cirrus.Connections.DataGet.Queries.GetAccountsQueryHandler.Handle [L25–L59]
              └─ uses_service DatagetFileIdService
                └─ method GetFileIdFromSource [L38]
                  └─ implementation Cirrus.Connections.DataGet.Services.DatagetFileIdService.GetFileIdFromSource [L14-L37]
              └─ uses_service DataGetClient
                └─ method GetAccountsAsync [L40]
                  └─ implementation Cirrus.Connections.DataGet.Client.DataGetClient.GetAccountsAsync [L15-L302]
                    └─ calls GetAccounts [L106]
      └─ uses_service GetTrialBalanceForDatesQuery
        └─ method Execute [L93]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<Dataset>
        └─ method ReadQuery [L65]
          └─ ... (no implementation details available)

[web] GET /api/connections/qbo/files  (Workpapers.Next.API.Controllers.Connections.QBOController.GetAccountingFiles)  [L27–L33] status=200

[web] PUT /api/connections/qbo/clientdetails  (Workpapers.Next.API.Controllers.Connections.QBOController.GetClientDetails)  [L35–L41] status=200

[web] PUT /api/connections/qbo/ledger  (Workpapers.Next.API.Controllers.Connections.QBOController.GetLedger)  [L52–L58] status=200

[web] PUT /api/connections/qbo/trialbalance  (Workpapers.Next.API.Controllers.Connections.QBOController.GetTrialBalance)  [L43–L49] status=200

[web] DELETE /api/connections/qbo/filetokens/{id}  (Workpapers.Next.API.Controllers.Connections.QBOController.RemoveFileToken)  [L60–L66] status=200

[web] GET /api/connections/reportance/files  (Workpapers.Next.API.Controllers.Connections.ReportanceController.GetAccountingFiles)  [L28–L34] status=200
  └─ sends_request GetFilesQuery [L31]
    └─ handled_by Workpapers.Next.CirrusServices.Queries.GetFilesQueryHandler.Handle [L12–L39]
      └─ uses_service CirrusConfig
        └─ method GetBaseUrl [L27]
          └─ ... (no implementation details available)
      └─ uses_service CirrusHttp
        └─ method GetHttpResponseAsync [L35]
          └─ ... (no implementation details available)
      └─ uses_service IMapToNew<FileSearchResult, AccountingFileDto>
        └─ method Map [L37]
          └─ ... (no implementation details available)

[web] GET /api/connections/reportance/journal-url  (Workpapers.Next.API.Controllers.Connections.ReportanceController.GetAddJournalUrl)  [L84–L90] status=200
  └─ sends_request GetCirrusAddJournalUrl [L87]
    └─ handled_by Workpapers.Next.CirrusServices.Queries.GetCirrusJournalUrlHandler.Handle [L20–L34]
      └─ uses_service CirrusConfig
        └─ method SiteBaseUrl [L32]
          └─ ... (no implementation details available)

[web] GET /api/connections/reportance/clientdetails/from-dataset  (Workpapers.Next.API.Controllers.Connections.ReportanceController.GetClientDetails)  [L52–L58] status=200
  └─ sends_request GetClientDetailsQuery [L55]
    └─ handled_by Workpapers.Next.CirrusServices.Queries.GetClientDetailsQueryHandler.Handle [L42–L117]
      └─ uses_service CirrusConfig
        └─ method GetBaseUrl [L63]
          └─ ... (no implementation details available)
      └─ uses_service CirrusHttp
        └─ method GetHttpResponseAsync [L64]
          └─ ... (no implementation details available)

[web] GET /api/connections/reportance/creditors  (Workpapers.Next.API.Controllers.Connections.ReportanceController.GetCreditors)  [L100–L106] status=200

[web] GET /api/connections/reportance/datasets/{fileId}  (Workpapers.Next.API.Controllers.Connections.ReportanceController.GetDatasets)  [L36–L42] status=200
  └─ sends_request GetDatasetsQuery [L39]
    └─ handled_by Workpapers.Next.CirrusServices.Queries.GetDatasetsQueryHandler.Handle [L21–L37]
      └─ uses_service CirrusConfig
        └─ method GetBaseUrl [L35]
          └─ ... (no implementation details available)
      └─ uses_service CirrusHttp
        └─ method GetHttpResponseAsync [L35]
          └─ ... (no implementation details available)

[web] GET /api/connections/reportance/debtors  (Workpapers.Next.API.Controllers.Connections.ReportanceController.GetDebtors)  [L92–L98] status=200

[web] GET /api/connections/reportance/ledger/{datasetId}  (Workpapers.Next.API.Controllers.Connections.ReportanceController.GetLedger)  [L76–L82] status=200

[web] GET /api/connections/reportance/source/{datasetId}  (Workpapers.Next.API.Controllers.Connections.ReportanceController.GetSource)  [L60–L66] status=200
  └─ sends_request GetSourceQuery [L63]
    └─ handled_by Workpapers.Next.CirrusServices.Queries.GetSourceQueryHandler.Handle [L20–L43]
      └─ uses_service CirrusConfig
        └─ method GetBaseUrl [L38]
          └─ ... (no implementation details available)
      └─ uses_service CirrusHttp
        └─ method GetHttpResponseAsync [L39]
          └─ ... (no implementation details available)

[web] GET /api/connections/reportance/taxonomy  (Workpapers.Next.API.Controllers.Connections.ReportanceController.GetTaxonomy)  [L116–L122] status=200

[web] PUT /api/connections/reportance/trialbalance  (Workpapers.Next.API.Controllers.Connections.ReportanceController.GetTrialBalance)  [L68–L74] status=200
  └─ sends_request GetTrialBalanceQuery [L71]
    └─ handled_by Cirrus.Api.External.Queries.GetTrialBalanceQueryHandler.Handle [L44–L156]
      └─ uses_service GetAccountsQuery
        └─ method Execute [L73]
          └─ implementation Cirrus.Connections.DataGet.Queries.GetAccountsQuery.Execute [L9-L23]
            └─ handled_by Cirrus.Connections.DataGet.Queries.GetAccountsQueryHandler.Handle [L25–L59]
              └─ uses_client DataGetClient [L40]
                └─ calls GetAccounts (GET /api/accounting-file/{fileId}/accounts?apiType={*}&password={*}&username={*}, method=GetAccountsAsync, target=DataGet.Api, query=apiType={*}&password={*}&username={*}) [L65]
                  └─ target_service DataGet.Api
                    └─ [web] GET /api/accounting-file/{fileId}/accounts  (DataGet.Api.Controllers.Connections.AccountingFileController.GetAccounts)  [L44–L52] status=200 [auth=Authentication.MachineToMachinePolicy]
                      └─ sends_request GetAccountsQuery [L48]
                        └─ handled_by Cirrus.Connections.DataGet.Queries.GetAccountsQueryHandler.Handle [L25–L59]
              └─ uses_service DatagetFileIdService
                └─ method GetFileIdFromSource [L38]
                  └─ implementation Cirrus.Connections.DataGet.Services.DatagetFileIdService.GetFileIdFromSource [L14-L37]
              └─ uses_service DataGetClient
                └─ method GetAccountsAsync [L40]
                  └─ implementation Cirrus.Connections.DataGet.Client.DataGetClient.GetAccountsAsync [L15-L302]
                    └─ calls GetAccounts [L106]
      └─ uses_service GetTrialBalanceForDatesQuery
        └─ method Execute [L93]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<Dataset>
        └─ method ReadQuery [L65]
          └─ ... (no implementation details available)

[web] GET /api/connections/reportance/wages  (Workpapers.Next.API.Controllers.Connections.ReportanceController.GetWages)  [L108–L114] status=200

[web] GET /api/connections/xero/files  (Workpapers.Next.API.Controllers.Connections.XeroController.GetAccountingFiles)  [L30–L36] status=200

[web] GET /api/connections/xero/bas  (Workpapers.Next.API.Controllers.Connections.XeroController.GetBAS)  [L78–L84] status=200

[web] PUT /api/connections/xero/clientdetails  (Workpapers.Next.API.Controllers.Connections.XeroController.GetClientDetails)  [L38–L44] status=200

[web] GET /api/connections/xero/creditors  (Workpapers.Next.API.Controllers.Connections.XeroController.GetCreditors)  [L70–L76] status=200

[web] GET /api/connections/xero/debtors  (Workpapers.Next.API.Controllers.Connections.XeroController.GetDebtors)  [L62–L68] status=200

[web] PUT /api/connections/xero/ledger  (Workpapers.Next.API.Controllers.Connections.XeroController.GetLedger)  [L54–L60] status=200

[web] PUT /api/connections/xero/trialbalance  (Workpapers.Next.API.Controllers.Connections.XeroController.GetTrialBalance)  [L46–L52] status=200

[web] GET /api/connections/xero/wages  (Workpapers.Next.API.Controllers.Connections.XeroController.GetWages)  [L86–L92] status=200

[web] DELETE /api/connections/xero/files/{id}  (Workpapers.Next.API.Controllers.Connections.XeroController.RemoveFile)  [L94–L100] status=200

[web] GET /api/conversations/{id:guid}  (Workpapers.Next.API.Controllers.ConversationsController.Get)  [L34–L46] status=200
  └─ maps_to ConversationDto [L37]
    └─ automapper.registration WorkpapersMappingProfile (Conversation->ConversationDto) [L394]
  └─ calls ConversationRepository.ReadQuery [L37]
  └─ query Conversation [L37]
    └─ reads_from Conversations
  └─ uses_service IControlledRepository<Conversation>
    └─ method ReadQuery [L37]
      └─ ... (no implementation details available)
  └─ uses_service UserService
    └─ method GetUserId [L42]
      └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]

[web] POST /api/conversations/{id:guid}/message  (Workpapers.Next.API.Controllers.ConversationsController.PostMessage)  [L48–L57] status=201
  └─ calls ConversationRepository.WriteQuery [L51]
  └─ write Conversation [L51]
    └─ reads_from Conversations
  └─ uses_service IControlledRepository<Conversation>
    └─ method WriteQuery [L51]
      └─ ... (no implementation details available)
  └─ uses_service UserService
    └─ method GetUserId [L54]
      └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]

[web] PUT /api/conversations/{id:guid}/message/{messageId:guid}  (Workpapers.Next.API.Controllers.ConversationsController.UpdateMessage)  [L59–L68] status=200
  └─ calls ConversationRepository.WriteQuery [L62]
  └─ write Conversation [L62]
    └─ reads_from Conversations
  └─ uses_service IControlledRepository<Conversation>
    └─ method WriteQuery [L62]
      └─ ... (no implementation details available)
  └─ uses_service UserService
    └─ method GetUserId [L65]
      └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]

[web] POST /api/custom-statuses/binder  (Workpapers.Next.API.Controllers.CustomStatusesController.CreateBinder)  [L104–L109] status=201 [auth=AuthorizationPolicies.Administrator]

[web] POST /api/custom-statuses/matter  (Workpapers.Next.API.Controllers.CustomStatusesController.CreateMatter)  [L88–L102] status=201 [auth=AuthorizationPolicies.Administrator]
  └─ uses_service IControlledRepository<MatterStatus> (AddScoped)
    └─ method ReadQuery [L92]
      └─ ... (no implementation details available)

[web] POST /api/custom-statuses/record  (Workpapers.Next.API.Controllers.CustomStatusesController.CreateRecord)  [L72–L86] status=201 [auth=AuthorizationPolicies.Administrator]
  └─ uses_service IControlledRepository<RecordStatus> (AddScoped)
    └─ method ReadQuery [L76]
      └─ ... (no implementation details available)

[web] DELETE /api/custom-statuses/binder/{id:Guid}  (Workpapers.Next.API.Controllers.CustomStatusesController.DeleteBinder)  [L169–L177] status=200 [auth=AuthorizationPolicies.Administrator]
  └─ delete BinderStatus [L174]
    └─ reads_from BinderStatuss
  └─ write BinderStatus [L173]
    └─ reads_from BinderStatuss
  └─ uses_service IControlledRepository<BinderStatus> (AddScoped)
    └─ method WriteQuery [L173]
      └─ ... (no implementation details available)

[web] DELETE /api/custom-statuses/matter/{id:Guid}  (Workpapers.Next.API.Controllers.CustomStatusesController.DeleteMatter)  [L159–L167] status=200 [auth=AuthorizationPolicies.Administrator]
  └─ uses_service IControlledRepository<MatterStatus> (AddScoped)
    └─ method WriteQuery [L163]
      └─ ... (no implementation details available)

[web] DELETE /api/custom-statuses/record/{id:Guid}  (Workpapers.Next.API.Controllers.CustomStatusesController.DeleteRecord)  [L149–L157] status=200 [auth=AuthorizationPolicies.Administrator]
  └─ uses_service IControlledRepository<RecordStatus> (AddScoped)
    └─ method WriteQuery [L153]
      └─ ... (no implementation details available)

[web] GET /api/custom-statuses/by-type  (Workpapers.Next.API.Controllers.CustomStatusesController.GetAllFor)  [L49–L70] status=200

[web] PUT /api/custom-statuses/binder/{id:Guid}  (Workpapers.Next.API.Controllers.CustomStatusesController.UpdateBinder)  [L131–L139] status=200 [auth=AuthorizationPolicies.Administrator]
  └─ write BinderStatus [L135]
    └─ reads_from BinderStatuss
  └─ uses_service IControlledRepository<BinderStatus> (AddScoped)
    └─ method WriteQuery [L135]
      └─ ... (no implementation details available)

[web] PUT /api/custom-statuses/matter/{id:Guid}  (Workpapers.Next.API.Controllers.CustomStatusesController.UpdateMatter)  [L121–L129] status=200 [auth=AuthorizationPolicies.Administrator]
  └─ uses_service IControlledRepository<MatterStatus> (AddScoped)
    └─ method WriteQuery [L125]
      └─ ... (no implementation details available)

[web] PUT /api/custom-statuses/{id:Guid}/reorder  (Workpapers.Next.API.Controllers.CustomStatusesController.UpdateOrder)  [L141–L147] status=200
  └─ sends_request ReorderCustomStatusCommand [L144]
    └─ handled_by Workpapers.Next.Data.Commands.Dataverse.ReorderCustomStatusCommandandler.Handle [L35–L88]
      └─ uses_service TenantService
        └─ method GetCurrentTenant [L65]
          └─ implementation Workpapers.Next.Services.Features.Tenants.TenantService.GetCurrentTenant [L5-L22]
            └─ uses_service TenantIdentificationService
              └─ method GetCurrentTenant [L20]
                └─ implementation Workpapers.Next.ApplicationService.Services.TenantIdentificationService.GetCurrentTenant [L15-L131]
      └─ uses_service DataverseService
        └─ method Put [L67]
          └─ implementation Workpapers.Next.Dataverse.Service.DataverseService.Put [L17-L127]
      └─ uses_service IControlledRepository<BinderStatus> (AddScoped)
        └─ method ReadQuery [L62]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<CustomStatus> (AddScoped)
        └─ method ReadQuery [L58]
          └─ ... (no implementation details available)

[web] PUT /api/custom-statuses/record/{id:Guid}  (Workpapers.Next.API.Controllers.CustomStatusesController.UpdateRecord)  [L111–L119] status=200 [auth=AuthorizationPolicies.Administrator]
  └─ uses_service IControlledRepository<RecordStatus> (AddScoped)
    └─ method WriteQuery [L115]
      └─ ... (no implementation details available)

[web] POST /api/dataverse/firms  (Workpapers.Next.API.Controllers.DataverseController.CreateFirm)  [L234–L267] status=201 [auth=AuthorizationPolicies.M2M]
  └─ maps_to FirmLightWithSubscriptionsDto [L266]
  └─ maps_to FirmCreateModel (var firmModel) [L254]
    └─ automapper.registration DataverseMappingProfile (DataverseFirmCreateModel->FirmCreateModel) [L111]
  └─ uses_service IMapper
    └─ method Map [L254]
      └─ ... (no implementation details available)
  └─ uses_service UnitOfWork
    └─ method Table [L241]
      └─ ... (no implementation details available)

[web] PUT /api/dataverse/document-hyperlinks/{documentId:guid}  (Workpapers.Next.API.Controllers.DataverseController.DocumentHyperLinks)  [L410–L420] status=204 [auth=AuthorizationPolicies.M2M,AuthorizationPolicies.RequireTenantId,AuthorizationPolicies.RequireDataverseTenantAndUserId]
  └─ sends_request UpdateHyperlinksLinkedToDocumentCommand [L417]
    └─ handled_by Workpapers.Next.ApplicationService.Commands.Workpapers.Binders.UpdateHyperlinksLinkedToDocumentCommandHandler.Handle [L29–L118]
      └─ uses_service IControlledRepository<Matter>
        └─ method WriteQuery [L89]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<WorkpaperRecord>
        └─ method WriteQuery [L75]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<Worksheet>
        └─ method WriteQuery [L61]
          └─ ... (no implementation details available)

[web] GET /api/dataverse/{entityRoute}/audit-entity/{dataverseId}  (Workpapers.Next.API.Controllers.DataverseController.GetAudit)  [L385–L395] status=200 [auth=AuthorizationPolicies.M2M,AuthorizationPolicies.RequireTenantId]
  └─ sends_request DataverseEntityAuditQuery [L392]
    └─ handled_by Cirrus.ApplicationService.Firm.Queries.DataverseEntityAuditQueryHandler.Handle [L24–L57]
      └─ uses_service IControlledRepository<Client>
        └─ method ReadQuery [L50]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<Entity>
        └─ method ReadQuery [L52]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<Office>
        └─ method ReadQuery [L46]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<User>
        └─ method ReadQuery [L48]
          └─ ... (no implementation details available)
  └─ returns DataverseAuditDto [L392]

[web] GET /api/dataverse/binders  (Workpapers.Next.API.Controllers.DataverseController.GetBinders)  [L352–L361] status=200 [auth=AuthorizationPolicies.M2M,AuthorizationPolicies.RequireTenantId,AuthorizationPolicies.RequireDataverseTenantAndUserId]
  └─ maps_to BinderListItemDto [L357]
    └─ automapper.registration WorkpapersMappingProfile (Binder->BinderListItemDto) [L431]
  └─ calls BinderRepository.ReadQuery [L357]
  └─ query Binder [L357]
    └─ reads_from Binders
  └─ uses_service IControlledRepository<Binder>
    └─ method ReadQuery [L357]
      └─ ... (no implementation details available)

[web] GET /api/dataverse/{entityRoute}/audit  (Workpapers.Next.API.Controllers.DataverseController.GetData)  [L367–L379] status=200 [auth=AuthorizationPolicies.M2M,AuthorizationPolicies.RequireTenantId]
  └─ uses_service TenantService
    └─ method GetCurrentTenant [L374]
      └─ implementation Workpapers.Next.Services.Features.Tenants.TenantService.GetCurrentTenant [L5-L22]
        └─ uses_service TenantIdentificationService
          └─ method GetCurrentTenant [L20]
            └─ implementation Workpapers.Next.ApplicationService.Services.TenantIdentificationService.GetCurrentTenant [L15-L131]
  └─ sends_request DataverseAuditQuery [L376]
    └─ handled_by Cirrus.ApplicationService.Firm.Queries.DataverseAuditQueryHandler.Handle [L26–L69]
      └─ maps_to DataverseAuditDto [L63]
        └─ automapper.registration CirrusMappingProfile (Entity->DataverseAuditDto) [L178]
      └─ maps_to DataverseAuditDto [L62]
        └─ automapper.registration CirrusMappingProfile (Client->DataverseAuditDto) [L162]
        └─ automapper.registration DataverseMappingProfile (Client->DataverseAuditDto) [L81]
      └─ maps_to DataverseAuditDto [L60]
        └─ automapper.registration DataverseMappingProfile (User->DataverseAuditDto) [L78]
        └─ automapper.registration CirrusMappingProfile (User->DataverseAuditDto) [L123]
      └─ maps_to DataverseAuditDto [L58]
        └─ automapper.registration CirrusMappingProfile (Team->DataverseAuditDto) [L143]
      └─ maps_to DataverseAuditDto [L56]
        └─ automapper.registration CirrusMappingProfile (Office->DataverseAuditDto) [L135]
        └─ automapper.registration DataverseMappingProfile (Office->DataverseAuditDto) [L79]
      └─ uses_service IControlledRepository<Client>
        └─ method ReadQuery [L62]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<Entity>
        └─ method ReadQuery [L63]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<Office>
        └─ method ReadQuery [L56]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<Team>
        └─ method ReadQuery [L58]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<User>
        └─ method ReadQuery [L60]
          └─ ... (no implementation details available)
      └─ uses_service IMapper
        └─ method ConfigurationProvider [L56]
          └─ ... (no implementation details available)

[web] GET /api/dataverse/financial-data  (Workpapers.Next.API.Controllers.DataverseController.GetFinancialDataSummary)  [L432–L440] status=200 [auth=AuthorizationPolicies.M2M,AuthorizationPolicies.RequireTenantId]
  └─ sends_request GetBinderFinancialDataQuery [L437]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Binders.GetBinderFinancialDataQueryHandler.Handle [L29–L95]
      └─ uses_service UnitOfWork
        └─ method Table [L44]
          └─ ... (no implementation details available)

[web] GET /api/dataverse/firms/{dataverseId}  (Workpapers.Next.API.Controllers.DataverseController.GetFirm)  [L199–L209] status=200 [auth=AuthorizationPolicies.M2M]
  └─ maps_to FirmLightWithSubscriptionsDto [L203]
  └─ uses_service UnitOfWork
    └─ method Table [L203]
      └─ ... (no implementation details available)

[web] GET /api/dataverse/firms/{dataverseId}/settings  (Workpapers.Next.API.Controllers.DataverseController.GetFirmSettings)  [L216–L228] status=200 [auth=AuthorizationPolicies.M2M]
  └─ maps_to WorkpaperSettingsDto [L220]
  └─ uses_service UnitOfWork
    └─ method Table [L220]
      └─ ... (no implementation details available)
  └─ uses_service FirmFeatureFlagService
    └─ method GetAvailableFeaturesForFirm [L225]
      └─ implementation Workpapers.Next.ApplicationService.Features.FeatureFlags.FirmFeatureFlagService.GetAvailableFeaturesForFirm [L14-L110]

[web] GET /api/dataverse/subscription-info  (Workpapers.Next.API.Controllers.DataverseController.GetSubscriptionCreateInfo)  [L187–L192] status=200 [auth=AuthorizationPolicies.M2M]
  └─ sends_request GetSubscriptionInfoQuery [L191]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Dataverse.GetSubscriptionInfoQueryHandler.Handle [L33–L83]
      └─ maps_to ProductSetDto [L61]
      └─ maps_to StarterPackDto [L66]
      └─ maps_to WholesalerDto [L70]
      └─ maps_to TemplateStandardAccountSetDto [L48]
      └─ uses_service IMapper
        └─ method ConfigurationProvider [L52]
          └─ ... (no implementation details available)
      └─ uses_service UnitOfWork
        └─ method Table [L48]
          └─ ... (no implementation details available)

[web] PUT /api/dataverse/synchronise-binder-status  (Workpapers.Next.API.Controllers.DataverseController.UpdateBinderStatuses)  [L326–L332] status=200 [auth=AuthorizationPolicies.M2M,AuthorizationPolicies.RequireTenantId]
  └─ sends_request SynchroniseBinderStatusCommand [L331]
    └─ handled_by Workpapers.Next.ApplicationService.Commands.Dataverse.SynchroniseBinderStatusCommandHandler.Handle [L28–L85]
      └─ uses_service IControlledRepository<BinderStatus> (AddScoped)
        └─ method ReadQuery [L49]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L78]
          └─ implementation Workpapers.Next.Services.Features.Requests.RequestProcessor.ProcessAsync [L9-L32]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle
      └─ uses_service UnitOfWork
        └─ method Table [L71]
          └─ ... (no implementation details available)

[web] PUT /api/dataverse/synchronise-binder-status-as-user  (Workpapers.Next.API.Controllers.DataverseController.UpdateBinderStatusesAsUser)  [L339–L345] status=200 [auth=AuthorizationPolicies.M2M,AuthorizationPolicies.RequireTenantId,AuthorizationPolicies.RequireDataverseTenantAndUserId]
  └─ sends_request SynchroniseBinderStatusCommand [L344]
    └─ handled_by Workpapers.Next.ApplicationService.Commands.Dataverse.SynchroniseBinderStatusCommandHandler.Handle [L28–L85]
      └─ uses_service IControlledRepository<BinderStatus> (AddScoped)
        └─ method ReadQuery [L49]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L78]
          └─ implementation Workpapers.Next.Services.Features.Requests.RequestProcessor.ProcessAsync [L9-L32]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle
      └─ uses_service UnitOfWork
        └─ method Table [L71]
          └─ ... (no implementation details available)

[web] PUT /api/dataverse/clients  (Workpapers.Next.API.Controllers.DataverseController.UpdateClientChanges)  [L115–L121] status=200 [auth=AuthorizationPolicies.M2M,AuthorizationPolicies.RequireTenantId]
  └─ uses_service TenantService
    └─ method GetCurrentTenant [L119]
      └─ implementation Workpapers.Next.Services.Features.Tenants.TenantService.GetCurrentTenant [L5-L22]
        └─ uses_service TenantIdentificationService
          └─ method GetCurrentTenant [L20]
            └─ implementation Workpapers.Next.ApplicationService.Services.TenantIdentificationService.GetCurrentTenant [L15-L131]
  └─ sends_request ProcessDataverseClientCommand [L120]
    └─ handled_by Cirrus.Central.Dataverse.Commands.ProcessDataverseClientCommandHandler.Handle [L38–L251]
      └─ calls FileRepository.WriteQueryWithArchived [L106]
      └─ maps_to DataverseEntityMap [L246]
        └─ automapper.registration DataverseMappingProfile (User->DataverseEntityMap) [L73]
        └─ automapper.registration DataverseMappingProfile (User->DataverseEntityMap) [L82]
      └─ maps_to DataverseEntityMap [L235]
        └─ automapper.registration DataverseMappingProfile (User->DataverseEntityMap) [L73]
        └─ automapper.registration DataverseMappingProfile (User->DataverseEntityMap) [L82]
      └─ maps_to DataverseEntityMap [L223]
        └─ automapper.registration DataverseMappingProfile (Team->DataverseEntityMap) [L81]
      └─ maps_to DataverseEntityMap [L214]
        └─ automapper.registration DataverseMappingProfile (Office->DataverseEntityMap) [L80]
        └─ automapper.registration DataverseMappingProfile (Office->DataverseEntityMap) [L76]
      └─ uses_service FirmSettingsService
        └─ method GetFirmJurisdictions [L189]
          └─ implementation Cirrus.ApplicationService.Firm.FirmSettingsService.GetFirmJurisdictions [L15-L112]
      └─ uses_service IControlledRepository<Client>
        └─ method WriteQuery [L81]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<Entity>
        └─ method ReadQuery [L114]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<Office>
        └─ method ReadQuery [L178]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<Team>
        └─ method ReadQuery [L223]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<User>
        └─ method ReadQuery [L235]
          └─ ... (no implementation details available)
      └─ uses_service IMapper
        └─ method ConfigurationProvider [L216]
          └─ ... (no implementation details available)

[web] PUT /api/dataverse/tenants/{dataverseId}  (Workpapers.Next.API.Controllers.DataverseController.UpdateCoreTenantChanges)  [L148–L180] status=200 [auth=AuthorizationPolicies.M2M]
  └─ uses_service UnitOfWork
    └─ method Table [L152]
      └─ ... (no implementation details available)

[web] POST /api/dataverse/users/core  (Workpapers.Next.API.Controllers.DataverseController.UpdateCoreUserChanges)  [L77–L87] status=201 [auth=AuthorizationPolicies.M2M]
  └─ sends_request ProcessCoreUserChangesFromDataverseCommand [L81]
    └─ handled_by Workpapers.Next.ApplicationService.Commands.Dataverse.ProcessCoreUserChangesFromDataverseCommandHandler.Handle [L28–L73]
      └─ uses_service UnitOfWork
        └─ method Table [L39]
          └─ ... (no implementation details available)

[web] PUT /api/dataverse/custom-statuses  (Workpapers.Next.API.Controllers.DataverseController.UpdateCustomStatusChanges)  [L126–L132] status=200 [auth=AuthorizationPolicies.M2M,AuthorizationPolicies.RequireTenantId]
  └─ uses_service TenantService
    └─ method GetCurrentTenant [L130]
      └─ implementation Workpapers.Next.Services.Features.Tenants.TenantService.GetCurrentTenant [L5-L22]
        └─ uses_service TenantIdentificationService
          └─ method GetCurrentTenant [L20]
            └─ implementation Workpapers.Next.ApplicationService.Services.TenantIdentificationService.GetCurrentTenant [L15-L131]
  └─ sends_request ProcessDataverseCustomStatusCommand [L131]
    └─ handled_by Workpapers.Next.Data.Commands.Dataverse.ProcessDataverseCustomStatusCommandHandler.Handle [L21–L57]
      └─ uses_service IControlledRepository<BinderStatus> (AddScoped)
        └─ method WriteQuery [L34]
          └─ ... (no implementation details available)

[web] PUT /api/dataverse/firms/{dataverseId}  (Workpapers.Next.API.Controllers.DataverseController.UpdateFirm)  [L275–L319] status=200 [auth=AuthorizationPolicies.M2M]
  └─ maps_to FirmLightDto [L316]
  └─ maps_to FirmLightWithSubscriptionsDto [L315]
  └─ maps_to FirmRestrictedUpdateModel (var firmModel) [L284]
    └─ automapper.registration DataverseMappingProfile (DataverseFirmUpdateModel->FirmRestrictedUpdateModel) [L114]
  └─ uses_service IMapper
    └─ method Map [L284]
      └─ ... (no implementation details available)
  └─ uses_service UnitOfWork
    └─ method Table [L279]
      └─ ... (no implementation details available)

[web] PUT /api/dataverse/job-types  (Workpapers.Next.API.Controllers.DataverseController.UpdateJobTypeChanges)  [L137–L143] status=200 [auth=AuthorizationPolicies.M2M,AuthorizationPolicies.RequireTenantId]
  └─ uses_service TenantService
    └─ method GetCurrentTenant [L141]
      └─ implementation Workpapers.Next.Services.Features.Tenants.TenantService.GetCurrentTenant [L5-L22]
        └─ uses_service TenantIdentificationService
          └─ method GetCurrentTenant [L20]
            └─ implementation Workpapers.Next.ApplicationService.Services.TenantIdentificationService.GetCurrentTenant [L15-L131]
  └─ sends_request ProcessDataverseJobTypeCommand [L142]
    └─ handled_by Workpapers.Next.Data.Commands.Dataverse.ProcessDataverseJobTypeCommandHandler.Handle [L21–L57]
      └─ uses_service IControlledRepository<JobType>
        └─ method WriteQuery [L34]
          └─ ... (no implementation details available)

[web] PUT /api/dataverse/offices  (Workpapers.Next.API.Controllers.DataverseController.UpdateOfficeChanges)  [L104–L110] status=200 [auth=AuthorizationPolicies.M2M,AuthorizationPolicies.RequireTenantId]
  └─ uses_service TenantService
    └─ method GetCurrentTenant [L108]
      └─ implementation Workpapers.Next.Services.Features.Tenants.TenantService.GetCurrentTenant [L5-L22]
        └─ uses_service TenantIdentificationService
          └─ method GetCurrentTenant [L20]
            └─ implementation Workpapers.Next.ApplicationService.Services.TenantIdentificationService.GetCurrentTenant [L15-L131]
  └─ sends_request ProcessDataverseOfficeCommand [L109]
    └─ handled_by Cirrus.Central.Dataverse.Commands.ProcessDataverseOfficeCommandHandler.Handle [L23–L64]
      └─ uses_service IControlledRepository<Office>
        └─ method WriteQuery [L37]
          └─ ... (no implementation details available)

[web] PUT /api/dataverse/users  (Workpapers.Next.API.Controllers.DataverseController.UpdateUserChanges)  [L92–L99] status=200 [auth=AuthorizationPolicies.M2M,AuthorizationPolicies.RequireTenantId]
  └─ uses_service TenantService
    └─ method GetCurrentTenant [L97]
      └─ implementation Workpapers.Next.Services.Features.Tenants.TenantService.GetCurrentTenant [L5-L22]
        └─ uses_service TenantIdentificationService
          └─ method GetCurrentTenant [L20]
            └─ implementation Workpapers.Next.ApplicationService.Services.TenantIdentificationService.GetCurrentTenant [L15-L131]
  └─ sends_request ProcessDataverseUserCommand [L98]
    └─ handled_by Cirrus.Central.Dataverse.Commands.ProcessDataverseUserCommandHandler.Handle [L28–L89]
      └─ maps_to DataverseEntityMap [L62]
        └─ automapper.registration DataverseMappingProfile (Team->DataverseEntityMap) [L81]
      └─ maps_to DataverseEntityMap [L56]
        └─ automapper.registration DataverseMappingProfile (Office->DataverseEntityMap) [L80]
        └─ automapper.registration DataverseMappingProfile (Office->DataverseEntityMap) [L76]
      └─ uses_service IControlledRepository<Office>
        └─ method ReadQuery [L56]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<Team>
        └─ method ReadQuery [L62]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<User>
        └─ method WriteQuery [L46]
          └─ ... (no implementation details available)
      └─ uses_service IMapper
        └─ method ConfigurationProvider [L59]
          └─ ... (no implementation details available)

[web] POST /api/firms  (Workpapers.Next.API.Controllers.Firms.FirmsController.AddFirm)  [L122–L147] status=201 [auth=AuthorizationPolicies.SuperUser]
  └─ maps_to FirmWithSubscriptionsDto [L146]
    └─ converts_to FirmWithStatsDto [L170]
  └─ uses_service IMapper
    └─ method Map [L146]
      └─ ... (no implementation details available)
  └─ uses_service UnitOfWork
    └─ method Table [L130]
      └─ ... (no implementation details available)

[web] GET /api/firms/checkname  (Workpapers.Next.API.Controllers.Firms.FirmsController.CheckName)  [L114–L120] status=200
  └─ uses_service UnitOfWork
    └─ method Table [L117]
      └─ ... (no implementation details available)

[web] DELETE /api/firms/{id:Guid}  (Workpapers.Next.API.Controllers.Firms.FirmsController.DeleteFirm)  [L185–L195] status=200 [auth=AuthorizationPolicies.SuperUser]
  └─ maps_to FirmDto [L194]
    └─ converts_to FirmWithStatsDto [L162]
  └─ uses_service IMapper
    └─ method Map [L194]
      └─ ... (no implementation details available)
  └─ uses_service UnitOfWork
    └─ method Table [L189]
      └─ ... (no implementation details available)

[web] PUT /api/firms/firm-account-types  (Workpapers.Next.API.Controllers.Firms.FirmsController.FirmAccountTypes)  [L209–L222] status=200 [auth=AuthorizationPolicies.Administrator]
  └─ calls FirmRepository.WriteQuery [L215]
  └─ write Firm [L215]
    └─ reads_from Firms
  └─ uses_service IControlledRepository<Firm>
    └─ method WriteQuery [L215]
      └─ ... (no implementation details available)
  └─ uses_service UserService
    └─ method GetFirmId [L213]
      └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetFirmId [L20-L295]

[web] GET /api/firms/{id:Guid}  (Workpapers.Next.API.Controllers.Firms.FirmsController.GetFirm)  [L88–L112] status=200
  └─ maps_to FirmDto [L96]
    └─ converts_to FirmWithStatsDto [L162]
  └─ maps_to FirmWithStatsDto [L96]
  └─ maps_to FirmWithStatsDto [L95]
  └─ maps_to FirmWithSubscriptionsDto [L95]
    └─ converts_to FirmWithStatsDto [L170]
  └─ uses_service IMapper
    └─ method Map [L95]
      └─ ... (no implementation details available)
  └─ uses_service UnitOfWork
    └─ method Table [L95]
      └─ ... (no implementation details available)
  └─ uses_service UserService
    └─ method IsSuperUser [L91]
      └─ implementation Workpapers.Next.ApplicationService.Services.UserService.IsSuperUser [L20-L295]

[web] GET /api/firms  (Workpapers.Next.API.Controllers.Firms.FirmsController.GetFirms)  [L56–L74] status=200 [auth=AuthorizationPolicies.SuperUser]
  └─ sends_request GetFirmsQuery [L68]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Firms.Firms.GetFirmsQueryHandler.Handle [L21–L39]
      └─ maps_to FirmDto [L34]
        └─ converts_to FirmWithStatsDto [L162]
      └─ uses_service IMapper
        └─ method ConfigurationProvider [L35]
          └─ ... (no implementation details available)
      └─ uses_service UnitOfWork
        └─ method Table [L34]
          └─ ... (no implementation details available)
  └─ sends_request GetPagedFirmsQuery [L70]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Firms.Firms.GetPagedFirmsQueryHandler.Handle [L38–L81]
      └─ uses_service UnitOfWork
        └─ method Table [L51]
          └─ ... (no implementation details available)

[web] PUT /api/firms/{id:Guid}  (Workpapers.Next.API.Controllers.Firms.FirmsController.PutFirm)  [L149–L168] status=200 [auth=AuthorizationPolicies.Administrator]
  └─ uses_service UnitOfWork
    └─ method Table [L156]
      └─ ... (no implementation details available)
  └─ uses_service UserService
    └─ method IsSuperUser [L153]
      └─ implementation Workpapers.Next.ApplicationService.Services.UserService.IsSuperUser [L20-L295]

[web] PUT /api/firms/{id:Guid}/options  (Workpapers.Next.API.Controllers.Firms.FirmsController.UpdateFirmOptions)  [L170–L183] status=200 [auth=AuthorizationPolicies.Administrator]
  └─ uses_service UnitOfWork
    └─ method Table [L177]
      └─ ... (no implementation details available)
  └─ uses_service UserService
    └─ method IsSuperUser [L174]
      └─ implementation Workpapers.Next.ApplicationService.Services.UserService.IsSuperUser [L20-L295]

[web] GET /health/  (Workpapers.Next.API.Controllers.HealthController.Alive)  [L9–L14] status=200 [AllowAnonymous]

[web] GET /health/api  (Workpapers.Next.API.Controllers.HealthController.Health)  [L16–L20] status=200 [AllowAnonymous]

[web] POST /api/data-cloud/binders  (Workpapers.Next.API.Controllers.Internal.DataCloud.DataCloudController.GetBindersBulk)  [L40–L49] status=201 [auth=AuthorizationPolicies.M2M,AuthorizationPolicies.RequireTenantId]
  └─ maps_to BinderUltraLightDto [L45]
    └─ automapper.registration WorkpapersMappingProfile (Binder->BinderUltraLightDto) [L440]
  └─ calls BinderRepository.ReadQuery [L45]
  └─ query Binder [L45]
    └─ reads_from Binders
  └─ uses_service IControlledRepository<Binder>
    └─ method ReadQuery [L45]
      └─ ... (no implementation details available)

[web] GET /api/internal/notification-subscriptions/record-templates  (Workpapers.Next.API.Controllers.Internal.NotificationSubscriptionController.GetUpdatedRecordTemplatesQuery)  [L26–L31] status=200 [auth=AuthorizationPolicies.M2M]
  └─ sends_request GetUpdatedRecordTemplateQuery [L29]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.NotificationSubscriptions.GetUpdatedRecordTemplateQueryHandler.Handle [L22–L62]
      └─ uses_service IControlledRepository<WorkpaperRecordTemplate>
        └─ method ReadQuery [L33]
          └─ ... (no implementation details available)

[web] GET /api/internal/workpapers/binders/exist-for-client/{dataverseClientId:guid}  (Workpapers.Next.API.Controllers.Internal.Workpapers.BindersController.CheckForClientBinders)  [L47–L56] status=200 [auth=AuthorizationPolicies.M2M,AuthorizationPolicies.RequireTenantId]
  └─ calls BinderRepository.ReadQuery [L50]
  └─ query Binder [L50]
    └─ reads_from Binders
  └─ uses_service IControlledRepository<Binder>
    └─ method ReadQuery [L50]
      └─ ... (no implementation details available)

[web] GET /api/internal/workpapers/binders/{binderId:Guid}/trial-balance  (Workpapers.Next.API.Controllers.Internal.Workpapers.BindersController.GetIndexAccountBalanceInfo)  [L35–L39] status=200 [auth=AuthorizationPolicies.M2M,AuthorizationPolicies.RequireTenantId]
  └─ sends_request GetIndexAccountBalanceInfoQuery [L38]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Workpapers.GetIndexAccountBalanceInfoQueryHandler.Handle [L36–L358]
      └─ maps_to AccountBalanceInfoDto [L65]
        └─ automapper.registration WorkpapersMappingProfile (Binder->AccountBalanceInfoDto) [L457]
      └─ uses_service IControlledRepository<Binder>
        └─ method ReadQuery [L65]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<Source>
        └─ method ReadQuery [L129]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<SourceAccount>
        └─ method ReadQuery [L74]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L63]
          └─ implementation Workpapers.Next.Services.Features.Requests.RequestProcessor.ProcessAsync [L9-L32]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle

[web] GET /api/internal/workpapers/binders/{binderId:Guid}/tax-info  (Workpapers.Next.API.Controllers.Internal.Workpapers.BindersController.ReadTaxDataFromDocument)  [L41–L45] status=200 [auth=AuthorizationPolicies.M2M,AuthorizationPolicies.RequireTenantId]
  └─ sends_request GetTaxDataFromBinderQuery [L44]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Binders.GetTaxDataFromBinderQueryHandler.Handle [L40–L360]
      └─ uses_service DataverseService
        └─ method GetStandardQueryParams [L355]
          └─ implementation Workpapers.Next.Dataverse.Service.DataverseService.GetStandardQueryParams [L17-L127]
      └─ uses_service IControlledRepository<Binder>
        └─ method ReadQuery [L61]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L63]
          └─ implementation Workpapers.Next.Services.Features.Requests.RequestProcessor.ProcessAsync [L9-L32]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle

[web] PUT /api/internal/workpapers/sources/account-change-notification/{fileId:guid}  (Workpapers.Next.API.Controllers.Internal.Workpapers.SourcesController.GetIndexAccountBalanceInfo)  [L29–L42] status=200 [auth=AuthorizationPolicies.M2M,AuthorizationPolicies.RequireTenantId]
  └─ calls SourceRepository.WriteQuery [L34]
  └─ write Source [L34]
  └─ uses_service IControlledRepository<Source>
    └─ method WriteQuery [L34]
      └─ ... (no implementation details available)

[web] GET /api/job-types/{id:Guid}  (Workpapers.Next.API.Controllers.JobTypesController.Get)  [L43–L51] status=200 [auth=AuthorizationPolicies.User]
  └─ maps_to JobTypeLightDto [L46]
    └─ automapper.registration WorkpapersMappingProfile (JobType->JobTypeLightDto) [L868]
  └─ calls JobTypeRepository.ReadQuery [L46]
  └─ query JobType [L46]
    └─ reads_from JobTypes
  └─ uses_service IControlledRepository<JobType>
    └─ method ReadQuery [L46]
      └─ ... (no implementation details available)

[web] GET /api/job-types/search  (Workpapers.Next.API.Controllers.JobTypesController.Search)  [L60–L66] status=200 [auth=AuthorizationPolicies.User]
  └─ sends_request FindJobTypesQuery [L63]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Workpapers.FindJobTypesQueryHandler.Handle [L32–L51]
      └─ uses_service IControlledRepository<JobType>
        └─ method ReadQuery [L45]
          └─ ... (no implementation details available)

[web] GET /api/files/download  (Workpapers.Next.API.Controllers.LegacyController.Download)  [L69–L87] status=200
  └─ uses_service StorageService
    └─ method CreateDownloadUrl [L84]
      └─ implementation Workpapers.Next.Data.Storage.StorageService.CreateDownloadUrl [L17-L282]
  └─ uses_service UnitOfWork
    └─ method Table [L72]
      └─ ... (no implementation details available)
  └─ uses_service UserService
    └─ method GetUser [L76]
      └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUser [L20-L295]
  └─ uses_storage StorageService.CreateDownloadUrl [L84]
  └─ sends_request GetTemplateForDateTimeQuery [L76]
    └─ handled_by Workpapers.Next.Data.Queries.Templates.GetTemplateForDateTimeQueryHandler.Handle [L12–L57]
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L23]
          └─ implementation Workpapers.Next.Services.Features.Requests.RequestProcessor.ProcessAsync [L9-L32]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle

[web] GET /api/worksheets/UserWorksheets  (Workpapers.Next.API.Controllers.LegacyController.GetForProduct)  [L50–L64] status=200
  └─ maps_to LegacyDocumentDto [L61]
  └─ uses_service IMapper
    └─ method Map [L61]
      └─ ... (no implementation details available)
  └─ uses_service UserService
    └─ method GetFirmId [L53]
      └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetFirmId [L20-L295]
  └─ sends_request GetProductQuery [L53]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Licensing.Products.GetProductQueryHandler.Handle [L57–L101]
      └─ uses_service UnitOfWork
        └─ method Table [L71]
          └─ ... (no implementation details available)
  └─ sends_request AllWorkpaperRecordTemplatesForProductV2Query [L58]
    └─ handled_by Workpapers.Next.Data.Queries.Templates.AllWorkpaperRecordTemplatesForProductQueryHandler.Handle [L18–L141]
      └─ maps_to SectionWithWorkpaperRecordTemplateIdsDto [L54]
      └─ maps_to WorkpaperRecordTemplateV2Dto [L88]
        └─ converts_to LegacyDocumentDto [L343]
        └─ converts_to WorkpaperRecordTemplateV2Dto [L290]
      └─ maps_to WorkpaperRecordTemplateV2Dto [L106]
        └─ converts_to LegacyDocumentDto [L343]
        └─ converts_to WorkpaperRecordTemplateV2Dto [L290]
      └─ uses_service IControlledRepository<ExcludedWorkpaperRecordTemplate>
        └─ method ReadQuery [L65]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<Product>
        └─ method ReadQuery [L54]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<WorkpaperRecordTemplate>
        └─ method ReadQuery [L69]
          └─ ... (no implementation details available)
      └─ uses_service IMapper
        └─ method ConfigurationProvider [L57]
          └─ ... (no implementation details available)

[web] GET /api/licensing  (Workpapers.Next.API.Controllers.LicensingController.GetLicensePackage)  [L49–L95] status=200 [auth=AuthorizationPolicies.User]
  └─ maps_to FirmWithSubscriptionsDto (var Firm) [L86]
    └─ converts_to FirmWithStatsDto [L170]
  └─ maps_to UserDto (var User) [L85]
  └─ uses_service IMapper
    └─ method Map [L85]
      └─ ... (no implementation details available)
  └─ uses_service UnitOfWork
    └─ method Table [L52]
      └─ ... (no implementation details available)
  └─ uses_service UserService
    └─ method GetUserId [L53]
      └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]

[web] GET /api/licensing/{productExcelId:int}  (Workpapers.Next.API.Controllers.LicensingController.GetLicensePackageForProduct)  [L97–L130] status=200 [auth=AuthorizationPolicies.User]
  └─ maps_to FirmDto (var Firm) [L106]
    └─ converts_to FirmWithStatsDto [L162]
  └─ maps_to UserDto (var User) [L105]
  └─ uses_service IMapper
    └─ method Map [L105]
      └─ ... (no implementation details available)
  └─ uses_service UnitOfWork
    └─ method Table [L100]
      └─ ... (no implementation details available)
  └─ uses_service UserService
    └─ method GetUserId [L100]
      └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
  └─ sends_request GetProductQuery [L113]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Licensing.Products.GetProductQueryHandler.Handle [L57–L101]
      └─ uses_service UnitOfWork
        └─ method Table [L71]
          └─ ... (no implementation details available)

[web] POST /api/offices  (Workpapers.Next.API.Controllers.OfficeController.CreateOffice)  [L102–L111] status=201 [auth=AuthorizationPolicies.Administrator]
  └─ maps_to OfficeDto [L110]
  └─ uses_service IMapper
    └─ method Map [L110]
      └─ ... (no implementation details available)
  └─ uses_service UnitOfWork
    └─ method Add [L108]
      └─ ... (no implementation details available)
  └─ uses_service UserService
    └─ method GetFirmId [L106]
      └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetFirmId [L20-L295]

[web] DELETE /api/offices/{id:Guid}  (Workpapers.Next.API.Controllers.OfficeController.DeleteOffice)  [L124–L133] status=200 [auth=AuthorizationPolicies.Administrator]
  └─ uses_service UnitOfWork
    └─ method Table [L128]
      └─ ... (no implementation details available)

[web] GET /api/offices/{id:Guid}  (Workpapers.Next.API.Controllers.OfficeController.GetOffice)  [L73–L79] status=200
  └─ maps_to OfficeDto [L76]
  └─ uses_service UnitOfWork
    └─ method Table [L76]
      └─ ... (no implementation details available)

[web] GET /api/offices  (Workpapers.Next.API.Controllers.OfficeController.GetOffices)  [L58–L71] status=200
  └─ maps_to OfficeLightDto [L63]
  └─ uses_service UnitOfWork
    └─ method Table [L63]
      └─ ... (no implementation details available)
  └─ uses_service UserService
    └─ method GetFirmId [L61]
      └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetFirmId [L20-L295]

[web] GET /api/offices/byfirm/{firmId:Guid}  (Workpapers.Next.API.Controllers.OfficeController.GetOfficesForFirm)  [L45–L56] status=200 [auth=AuthorizationPolicies.SuperUser]
  └─ maps_to OfficeLightDto [L49]
  └─ uses_service UnitOfWork
    └─ method Table [L49]
      └─ ... (no implementation details available)

[web] GET /api/offices/{id}/teams  (Workpapers.Next.API.Controllers.OfficeController.GetOfficeTeams)  [L93–L100] status=200
  └─ maps_to TeamDto [L96]
  └─ uses_service UnitOfWork
    └─ method Table [L96]
      └─ ... (no implementation details available)

[web] GET /api/offices/{id:Guid}/users  (Workpapers.Next.API.Controllers.OfficeController.GetOfficeUsers)  [L81–L91] status=200
  └─ maps_to UserOfficeDto [L84]
  └─ uses_service UnitOfWork
    └─ method Table [L84]
      └─ ... (no implementation details available)

[web] PUT /api/offices/{id:Guid}  (Workpapers.Next.API.Controllers.OfficeController.PutOffice)  [L113–L122] status=200 [auth=AuthorizationPolicies.Administrator]
  └─ uses_service UnitOfWork
    └─ method Table [L117]
      └─ ... (no implementation details available)

[web] DELETE /api/products/{id:Guid}  (Workpapers.Next.API.Controllers.ProductsController.Delete)  [L138–L152] status=200 [auth=AuthorizationPolicies.SuperUser]
  └─ uses_service UnitOfWork
    └─ method Table [L142]
      └─ ... (no implementation details available)

[web] GET /api/products/{id:Guid}  (Workpapers.Next.API.Controllers.ProductsController.Get)  [L70–L83] status=200
  └─ uses_service UserService
    └─ method GetFirmId [L73]
      └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetFirmId [L20-L295]
  └─ sends_request AllProductsForUserQuery [L73]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Licensing.Products.AllProductsForUserQueryHandler.Handle [L31–L65]
      └─ maps_to FirmWithSubscriptionsDto [L49]
        └─ converts_to FirmWithStatsDto [L170]
      └─ maps_to ProductLightDto [L45]
      └─ uses_service IMapper
        └─ method ConfigurationProvider [L46]
          └─ ... (no implementation details available)
      └─ uses_service UnitOfWork
        └─ method Table [L45]
          └─ ... (no implementation details available)

[web] GET /api/products/forsubscriptionunit/{subscriptionUnit}  (Workpapers.Next.API.Controllers.ProductsController.GetAllForSubscriptionUnit)  [L100–L108] status=200
  └─ maps_to ProductLightDto [L103]
  └─ uses_service UnitOfWork
    └─ method Table [L103]
      └─ ... (no implementation details available)

[web] GET /api/products/by-excel-id/{excelId:int}  (Workpapers.Next.API.Controllers.ProductsController.GetByExcelId)  [L85–L98] status=200
  └─ uses_service UserService
    └─ method GetFirmId [L88]
      └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetFirmId [L20-L295]
  └─ sends_request AllProductsForUserQuery [L88]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Licensing.Products.AllProductsForUserQueryHandler.Handle [L31–L65]
      └─ maps_to FirmWithSubscriptionsDto [L49]
        └─ converts_to FirmWithStatsDto [L170]
      └─ maps_to ProductLightDto [L45]
      └─ uses_service IMapper
        └─ method ConfigurationProvider [L46]
          └─ ... (no implementation details available)
      └─ uses_service UnitOfWork
        └─ method Table [L45]
          └─ ... (no implementation details available)

[web] POST /api/products  (Workpapers.Next.API.Controllers.ProductsController.Post)  [L126–L136] status=201 [auth=AuthorizationPolicies.SuperUser]
  └─ uses_service UnitOfWork
    └─ method Add [L133]
      └─ ... (no implementation details available)

[web] PUT /api/products/{id:Guid}  (Workpapers.Next.API.Controllers.ProductsController.Put)  [L110–L124] status=200 [auth=AuthorizationPolicies.SuperUser]
  └─ uses_service UnitOfWork
    └─ method Table [L114]
      └─ ... (no implementation details available)

[web] PUT /api/productsets/{id:int}/addproduct/{productId:Guid}  (Workpapers.Next.API.Controllers.ProductSetsController.AddProduct)  [L117–L134] status=200 [auth=AuthorizationPolicies.SuperUser]
  └─ uses_service UnitOfWork
    └─ method Table [L121]
      └─ ... (no implementation details available)

[web] DELETE /api/productsets/{id:int}  (Workpapers.Next.API.Controllers.ProductSetsController.DeleteProductSet)  [L101–L115] status=200 [auth=AuthorizationPolicies.SuperUser]
  └─ maps_to ProductSetDto [L114]
  └─ uses_service IMapper
    └─ method Map [L114]
      └─ ... (no implementation details available)
  └─ uses_service UnitOfWork
    └─ method Table [L105]
      └─ ... (no implementation details available)

[web] GET /api/productsets/{id:int}  (Workpapers.Next.API.Controllers.ProductSetsController.GetProductSet)  [L64–L74] status=200
  └─ maps_to ProductSetDto [L67]
  └─ uses_service UnitOfWork
    └─ method Table [L67]
      └─ ... (no implementation details available)

[web] GET /api/productsets  (Workpapers.Next.API.Controllers.ProductSetsController.GetProductSets)  [L43–L62] status=200
  └─ maps_to ProductSetDto [L58]
  └─ uses_service UnitOfWork
    └─ method Table [L58]
      └─ ... (no implementation details available)
  └─ sends_request GetProductSetsQuery [L54]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Licensing.ProductSets.GetProductSetsQueryHandler.Handle [L33–L71]
      └─ uses_service UnitOfWork
        └─ method Table [L46]
          └─ ... (no implementation details available)

[web] POST /api/productsets  (Workpapers.Next.API.Controllers.ProductSetsController.PostProductSet)  [L90–L99] status=201 [auth=AuthorizationPolicies.SuperUser]
  └─ maps_to ProductSetDto [L98]
  └─ uses_service IMapper
    └─ method Map [L98]
      └─ ... (no implementation details available)
  └─ uses_service UnitOfWork
    └─ method Add [L96]
      └─ ... (no implementation details available)

[web] PUT /api/productsets/{id:int}  (Workpapers.Next.API.Controllers.ProductSetsController.PutProductSet)  [L76–L88] status=200 [auth=AuthorizationPolicies.SuperUser]
  └─ uses_service UnitOfWork
    └─ method Table [L80]
      └─ ... (no implementation details available)

[web] PUT /api/productsets/{id:int}/removeproduct/{productId:guid}  (Workpapers.Next.API.Controllers.ProductSetsController.RemoveProduct)  [L136–L153] status=200 [auth=AuthorizationPolicies.SuperUser]
  └─ uses_service UnitOfWork
    └─ method Table [L140]
      └─ ... (no implementation details available)

[web] GET /api/reportance/accounts/  (Workpapers.Next.API.Controllers.Reportance.AccountsController.GetAccounts)  [L21–L27] status=200
  └─ uses_service UnitOfWork
    └─ method Table [L24]
      └─ ... (no implementation details available)

[web] GET /api/reportance/cirrus  (Workpapers.Next.API.Controllers.Reportance.CirrusController.GetFirmId)  [L101–L112] status=200
  └─ uses_service UnitOfWork
    └─ method Table [L103]
      └─ ... (no implementation details available)

[web] GET /api/reportance/cirrus/starters  (Workpapers.Next.API.Controllers.Reportance.CirrusController.GetStarters)  [L58–L69] status=200 [auth=AuthorizationPolicies.M2M]
  └─ maps_to StarterDto [L68]
  └─ uses_service IMapper
    └─ method Map [L68]
      └─ ... (no implementation details available)
  └─ sends_request AllStartersForProductQuery [L65]
    └─ handled_by Workpapers.Next.Data.Queries.Templates.Starters.AllStartersForProductQueryHandler.Handle [L17–L63]
      └─ uses_service UserService
        └─ method IsSuperUser [L35]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.IsSuperUser [L20-L295]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.IsSuperUser [L20-L295]
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L35]
          └─ implementation Workpapers.Next.Services.Features.Requests.RequestProcessor.ProcessAsync [L9-L32]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle
      └─ uses_service UnitOfWork
        └─ method Table [L40]
          └─ ... (no implementation details available)

[web] GET /api/reportance/cirrus/starters/{id:Guid}/download  (Workpapers.Next.API.Controllers.Reportance.CirrusController.StarterDownload)  [L71–L99] status=200
  └─ uses_client KeenClient [L90]
  └─ uses_service StorageService
    └─ method CreateDownloadUrl [L97]
      └─ implementation Workpapers.Next.Data.Storage.StorageService.CreateDownloadUrl [L17-L282]
  └─ uses_service UnitOfWork
    └─ method Table [L75]
      └─ ... (no implementation details available)
  └─ uses_storage StorageService.CreateDownloadUrl [L97]
  └─ sends_request GetProductQuery [L82]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Licensing.Products.GetProductQueryHandler.Handle [L57–L101]
      └─ uses_service UnitOfWork
        └─ method Table [L71]
          └─ ... (no implementation details available)

[web] POST /api/reportsettings/customise  (Workpapers.Next.API.Controllers.Reportance.FirmReportSettingsController.Customise)  [L87–L97] status=201 [auth=AuthorizationPolicies.Administrator]
  └─ uses_service UserService
    └─ method IsSuperUser [L91]
      └─ implementation Workpapers.Next.ApplicationService.Services.UserService.IsSuperUser [L20-L295]
  └─ sends_request GetFirmReportSettingQuery [L94]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.ReportanceDesktop.GetFirmReportSettingQueryHandler.Handle [L10–L49]
      └─ uses_service UnitOfWork
        └─ method Table [L24]
          └─ ... (no implementation details available)

[web] GET /api/reportsettings/defaultreporttemplate/id  (Workpapers.Next.API.Controllers.Reportance.FirmReportSettingsController.GetDefaultReportTemplateId)  [L51–L58] status=200
  └─ uses_service UserService
    └─ method IsSuperUser [L54]
      └─ implementation Workpapers.Next.ApplicationService.Services.UserService.IsSuperUser [L20-L295]
  └─ sends_request GetFirmReportSettingQuery [L55]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.ReportanceDesktop.GetFirmReportSettingQueryHandler.Handle [L10–L49]
      └─ uses_service UnitOfWork
        └─ method Table [L24]
          └─ ... (no implementation details available)

[web] GET /api/reportsettings/colour  (Workpapers.Next.API.Controllers.Reportance.FirmReportSettingsController.GetPrimaryColour)  [L42–L49] status=200
  └─ uses_service UserService
    └─ method IsSuperUser [L45]
      └─ implementation Workpapers.Next.ApplicationService.Services.UserService.IsSuperUser [L20-L295]
  └─ sends_request GetFirmReportSettingQuery [L46]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.ReportanceDesktop.GetFirmReportSettingQueryHandler.Handle [L10–L49]
      └─ uses_service UnitOfWork
        └─ method Table [L24]
          └─ ... (no implementation details available)

[web] DELETE /api/reportsettings/reset  (Workpapers.Next.API.Controllers.Reportance.FirmReportSettingsController.ResetToFactoryDefaults)  [L99–L110] status=200 [auth=AuthorizationPolicies.Administrator]
  └─ uses_service UnitOfWork
    └─ method Table [L103]
      └─ ... (no implementation details available)
  └─ uses_service UserService
    └─ method GetFirmId [L103]
      └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetFirmId [L20-L295]

[web] GET /api/reportsettings/status  (Workpapers.Next.API.Controllers.Reportance.FirmReportSettingsController.SettingsStatus)  [L72–L85] status=200
  └─ uses_service UnitOfWork
    └─ method Table [L77]
      └─ ... (no implementation details available)
  └─ uses_service UserService
    └─ method GetFirmId [L75]
      └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetFirmId [L20-L295]

[web] POST /api/reportsettings/layoutrules/  (Workpapers.Next.API.Controllers.Reportance.LayoutRulesController.CreateLayoutRule)  [L51–L58] status=201

[web] DELETE /api/reportsettings/layoutrules/{id:int}  (Workpapers.Next.API.Controllers.Reportance.LayoutRulesController.DeleteLayoutRule)  [L69–L76] status=200

[web] PUT /api/reportsettings/layoutrules/  (Workpapers.Next.API.Controllers.Reportance.LayoutRulesController.EditLayoutRule)  [L60–L67] status=200

[web] GET /api/reportsettings/layoutrules/{id:int}  (Workpapers.Next.API.Controllers.Reportance.LayoutRulesController.GetLayoutRule)  [L34–L40] status=200
  └─ maps_to LayoutRuleDto [L39]
  └─ uses_service IMapper
    └─ method Map [L39]
      └─ ... (no implementation details available)

[web] GET /api/reportsettings/layoutrules/  (Workpapers.Next.API.Controllers.Reportance.LayoutRulesController.GetLayoutRules)  [L42–L49] status=200
  └─ maps_to LayoutRuleDto [L48]
  └─ uses_service IMapper
    └─ method Map [L48]
      └─ ... (no implementation details available)

[web] PUT /api/reportsettings/layoutrules/{id:int}/reorder/{index:int}  (Workpapers.Next.API.Controllers.Reportance.LayoutRulesController.ReorderLayoutRule)  [L78–L89] status=200 [auth=AuthorizationPolicies.Administrator]

[web] POST /api/reportsettings/policies/  (Workpapers.Next.API.Controllers.Reportance.PoliciesController.AddPolicyBindingModel)  [L110–L126] status=201 [auth=AuthorizationPolicies.Administrator]
  └─ uses_service UnitOfWork
    └─ method Add [L117]
      └─ ... (no implementation details available)
  └─ uses_service UserService
    └─ method IsSuperUser [L114]
      └─ implementation Workpapers.Next.ApplicationService.Services.UserService.IsSuperUser [L20-L295]
  └─ sends_request GetFirmReportSettingQuery [L122]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.ReportanceDesktop.GetFirmReportSettingQueryHandler.Handle [L10–L49]
      └─ uses_service UnitOfWork
        └─ method Table [L24]
          └─ ... (no implementation details available)

[web] PUT /api/reportsettings/policies/options/{id}/confirm  (Workpapers.Next.API.Controllers.Reportance.PoliciesController.ConfirmPolicy)  [L202–L213] status=200 [auth=AuthorizationPolicies.Administrator]
  └─ uses_service UnitOfWork
    └─ method Table [L206]
      └─ ... (no implementation details available)
  └─ uses_service UserService
    └─ method GetFirmId [L207]
      └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetFirmId [L20-L295]

[web] DELETE /api/reportsettings/policies/{id}  (Workpapers.Next.API.Controllers.Reportance.PoliciesController.DeletePolicy)  [L141–L160] status=200 [auth=AuthorizationPolicies.Administrator]
  └─ uses_service UnitOfWork
    └─ method Table [L152]
      └─ ... (no implementation details available)
  └─ uses_service UserService
    └─ method IsSuperUser [L145]
      └─ implementation Workpapers.Next.ApplicationService.Services.UserService.IsSuperUser [L20-L295]
  └─ sends_request GetFirmReportSettingQuery [L150]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.ReportanceDesktop.GetFirmReportSettingQueryHandler.Handle [L10–L49]
      └─ uses_service UnitOfWork
        └─ method Table [L24]
          └─ ... (no implementation details available)

[web] GET /api/reportsettings/policies/{id}/withsettings  (Workpapers.Next.API.Controllers.Reportance.PoliciesController.GetOrderedPolicyForFirm)  [L58–L76] status=200
  └─ maps_to OrderedPolicy [L75]
    └─ converts_to OrderedPolicy [L17]
  └─ uses_service IMapper
    └─ method Map [L75]
      └─ ... (no implementation details available)
  └─ uses_service UnitOfWork
    └─ method Table [L63]
      └─ ... (no implementation details available)
  └─ uses_service UserService
    └─ method GetFirmId [L61]
      └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetFirmId [L20-L295]

[web] GET /api/reportsettings/policies/  (Workpapers.Next.API.Controllers.Reportance.PoliciesController.GetPolicies)  [L78–L92] status=200
  └─ maps_to OrderedPolicy [L91]
    └─ converts_to OrderedPolicy [L17]
  └─ uses_service IMapper
    └─ method Map [L91]
      └─ ... (no implementation details available)
  └─ uses_service UserService
    └─ method IsSuperUser [L82]
      └─ implementation Workpapers.Next.ApplicationService.Services.UserService.IsSuperUser [L20-L295]
  └─ sends_request GetFirmReportSettingQuery [L88]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.ReportanceDesktop.GetFirmReportSettingQueryHandler.Handle [L10–L49]
      └─ uses_service UnitOfWork
        └─ method Table [L24]
          └─ ... (no implementation details available)

[web] GET /api/reportsettings/policies/withparagraphs  (Workpapers.Next.API.Controllers.Reportance.PoliciesController.GetPoliciesWithParagraphs)  [L94–L108] status=200
  └─ maps_to OrderedPolicy [L107]
    └─ converts_to OrderedPolicy [L17]
  └─ uses_service IMapper
    └─ method Map [L107]
      └─ ... (no implementation details available)
  └─ uses_service UserService
    └─ method IsSuperUser [L98]
      └─ implementation Workpapers.Next.ApplicationService.Services.UserService.IsSuperUser [L20-L295]
  └─ sends_request GetFirmReportSettingQuery [L104]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.ReportanceDesktop.GetFirmReportSettingQueryHandler.Handle [L10–L49]
      └─ uses_service UnitOfWork
        └─ method Table [L24]
          └─ ... (no implementation details available)

[web] GET /api/reportsettings/policies/{id}  (Workpapers.Next.API.Controllers.Reportance.PoliciesController.GetPolicy)  [L46–L56] status=200
  └─ maps_to Policy [L49]
    └─ converts_to PolicyDto [L789]
    └─ converts_to PolicyLightDto [L792]
    └─ converts_to PolicyLightWithSuiteVariantsDto [L794]
    └─ converts_to Policy [L18]
  └─ uses_service UnitOfWork
    └─ method Table [L49]
      └─ ... (no implementation details available)
  └─ uses_service UserService
    └─ method GetFirmId [L52]
      └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetFirmId [L20-L295]

[web] PUT /api/reportsettings/policies/options/{id}/reorder/{index}  (Workpapers.Next.API.Controllers.Reportance.PoliciesController.ReorderPolicy)  [L182–L200] status=200 [auth=AuthorizationPolicies.Administrator]
  └─ uses_service UserService
    └─ method IsSuperUser [L186]
      └─ implementation Workpapers.Next.ApplicationService.Services.UserService.IsSuperUser [L20-L295]
  └─ sends_request GetFirmReportSettingQuery [L191]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.ReportanceDesktop.GetFirmReportSettingQueryHandler.Handle [L10–L49]
      └─ uses_service UnitOfWork
        └─ method Table [L24]
          └─ ... (no implementation details available)

[web] PUT /api/reportsettings/policies/  (Workpapers.Next.API.Controllers.Reportance.PoliciesController.SavePolicyBindingModel)  [L128–L139] status=200 [auth=AuthorizationPolicies.Administrator]
  └─ uses_service UserService
    └─ method IsSuperUser [L133]
      └─ implementation Workpapers.Next.ApplicationService.Services.UserService.IsSuperUser [L20-L295]
  └─ sends_request GetEditablePolicyQuery [L133]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.ReportanceDesktop.GetEditablePolicyQueryHandler.Handle [L13–L48]
      └─ uses_service RequestProcessor
        └─ method Process [L39]
          └─ implementation Workpapers.Next.Services.Features.Requests.RequestProcessor.Process [L9-L32]
      └─ uses_service UnitOfWork
        └─ method Table [L27]
          └─ ... (no implementation details available)

[web] PUT /api/reportsettings/policies/options/{id}  (Workpapers.Next.API.Controllers.Reportance.PoliciesController.UpdatePolicyOptions)  [L162–L180] status=200 [auth=AuthorizationPolicies.Administrator]
  └─ uses_service UserService
    └─ method IsSuperUser [L166]
      └─ implementation Workpapers.Next.ApplicationService.Services.UserService.IsSuperUser [L20-L295]
  └─ sends_request GetFirmReportSettingQuery [L171]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.ReportanceDesktop.GetFirmReportSettingQueryHandler.Handle [L10–L49]
      └─ uses_service UnitOfWork
        └─ method Table [L24]
          └─ ... (no implementation details available)

[web] POST /api/reportsettings/reporttemplates/  (Workpapers.Next.API.Controllers.Reportance.ReportTemplatesController.AddReportTemplate)  [L64–L75] status=201 [auth=AuthorizationPolicies.Administrator]
  └─ uses_service UnitOfWork
    └─ method Add [L72]
      └─ ... (no implementation details available)
  └─ uses_service UserService
    └─ method IsSuperUser [L68]
      └─ implementation Workpapers.Next.ApplicationService.Services.UserService.IsSuperUser [L20-L295]

[web] DELETE /api/reportsettings/reporttemplates/{id:Guid}  (Workpapers.Next.API.Controllers.Reportance.ReportTemplatesController.Delete)  [L111–L127] status=200 [auth=AuthorizationPolicies.Administrator]
  └─ uses_service UnitOfWork
    └─ method Table [L115]
      └─ ... (no implementation details available)

[web] GET /api/reportsettings/reporttemplates/{id:Guid}/download  (Workpapers.Next.API.Controllers.Reportance.ReportTemplatesController.Download)  [L129–L142] status=200
  └─ uses_service StorageService
    └─ method CreateDownloadUrl [L140]
      └─ implementation Workpapers.Next.Data.Storage.StorageService.CreateDownloadUrl [L17-L282]
  └─ uses_service UnitOfWork
    └─ method Table [L132]
      └─ ... (no implementation details available)
  └─ uses_storage StorageService.CreateDownloadUrl [L140]

[web] GET /api/reportsettings/reporttemplates/  (Workpapers.Next.API.Controllers.Reportance.ReportTemplatesController.Get)  [L52–L62] status=200
  └─ maps_to ReportTemplate [L56]
    └─ converts_to ReportTemplateDto [L534]
    └─ converts_to ReportTemplateLightDto [L546]
    └─ converts_to ReportTemplateModifiedInfoDto [L542]
    └─ converts_to ReportTemplate [L23]
  └─ uses_service UnitOfWork
    └─ method Table [L56]
      └─ ... (no implementation details available)
  └─ uses_service UserService
    └─ method GetFirmId [L55]
      └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetFirmId [L20-L295]

[web] PUT /api/reportsettings/reporttemplates/setdefault/{id:Guid}  (Workpapers.Next.API.Controllers.Reportance.ReportTemplatesController.SetDefault)  [L94–L109] status=200 [auth=AuthorizationPolicies.Administrator]
  └─ uses_service UnitOfWork
    └─ method Table [L101]
      └─ ... (no implementation details available)
  └─ uses_service UserService
    └─ method IsSuperUser [L98]
      └─ implementation Workpapers.Next.ApplicationService.Services.UserService.IsSuperUser [L20-L295]
  └─ sends_request GetFirmReportSettingQuery [L99]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.ReportanceDesktop.GetFirmReportSettingQueryHandler.Handle [L10–L49]
      └─ uses_service UnitOfWork
        └─ method Table [L24]
          └─ ... (no implementation details available)

[web] PUT /api/reportsettings/reporttemplates/{id:Guid}  (Workpapers.Next.API.Controllers.Reportance.ReportTemplatesController.UpdateReportTemplate)  [L77–L92] status=200 [auth=AuthorizationPolicies.Administrator]
  └─ uses_service UnitOfWork
    └─ method Table [L81]
      └─ ... (no implementation details available)

[web] DELETE /api/sections/{id:Guid}  (Workpapers.Next.API.Controllers.SectionsController.Delete)  [L107–L119] status=200 [auth=AuthorizationPolicies.SuperUser]
  └─ uses_service UnitOfWork
    └─ method Table [L111]
      └─ ... (no implementation details available)

[web] GET /api/sections/{id:Guid}  (Workpapers.Next.API.Controllers.SectionsController.Get)  [L48–L54] status=200
  └─ maps_to SectionLightDto [L51]
  └─ uses_service UnitOfWork
    └─ method Table [L51]
      └─ ... (no implementation details available)

[web] GET /api/sections/byproductnumber/{id:int}  (Workpapers.Next.API.Controllers.SectionsController.GetByProductId)  [L65–L81] status=200
  └─ maps_to SectionDto [L68]
  └─ uses_service UnitOfWork
    └─ method Table [L68]
      └─ ... (no implementation details available)

[web] POST /api/sections  (Workpapers.Next.API.Controllers.SectionsController.Post)  [L83–L91] status=201 [auth=AuthorizationPolicies.SuperUser]
  └─ maps_to SectionLightDto [L90]
  └─ uses_service IMapper
    └─ method Map [L90]
      └─ ... (no implementation details available)
  └─ uses_service UnitOfWork
    └─ method Add [L88]
      └─ ... (no implementation details available)

[web] PUT /api/sections/{id:Guid}  (Workpapers.Next.API.Controllers.SectionsController.Put)  [L93–L105] status=200 [auth=AuthorizationPolicies.SuperUser]
  └─ uses_service UnitOfWork
    └─ method Table [L97]
      └─ ... (no implementation details available)

[web] POST /api/source-accounts/standard-chart/for-binder/{binderId:guid}  (Workpapers.Next.API.Controllers.SourceAccountsController.BuildStandardChartForBinder)  [L231–L245] status=201 [auth=AuthorizationPolicies.User]
  └─ calls BinderRepository.ReadQuery [L236]
  └─ query Binder [L236]
    └─ reads_from Binders
  └─ uses_service IControlledRepository<Binder>
    └─ method ReadQuery [L236]
      └─ ... (no implementation details available)
  └─ sends_request CanIAccessBinderQuery [L234]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Binders.CanIAccessBinderQueryHandler.Handle [L60–L126]
      └─ uses_service UserService
        └─ method GetUserId [L91]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
      └─ uses_service RequestInfoService
        └─ method IsValidServiceAccountRequest [L89]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
      └─ uses_service TenantService
        └─ method GetCurrentTenant [L92]
          └─ implementation Workpapers.Next.Services.Features.Tenants.TenantService.GetCurrentTenant [L5-L22]
            └─ uses_service TenantIdentificationService
              └─ method GetCurrentTenant [L20]
                └─ implementation Workpapers.Next.ApplicationService.Services.TenantIdentificationService.GetCurrentTenant [L15-L131]
      └─ uses_service IControlledRepository<Binder>
        └─ method ReadQuery [L101]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L117]
          └─ implementation Workpapers.Next.Services.Features.Requests.RequestProcessor.ProcessAsync [L9-L32]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L121]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L109]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L92]
  └─ sends_request CreateHeaderSourceAccountsCommand [L244]
    └─ handled_by Workpapers.Next.Connections.Common.Commands.SourceAccounts.CreateHeaderSourceAccountsCommandHandler.Handle [L32–L256]
      └─ uses_service IControlledRepository<Binder>
        └─ method ReadQuery [L77]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<Client>
        └─ method ReadQuery [L72]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<MasterAccount>
        └─ method ReadQuery [L213]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<Source>
        └─ method ReadQuery [L67]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<SourceAccount>
        └─ method WriteQuery [L59]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<StandardAccount>
        └─ method ReadQuery [L186]
          └─ ... (no implementation details available)

[web] POST /api/source-accounts/  (Workpapers.Next.API.Controllers.SourceAccountsController.Create)  [L122–L149] status=201 [auth=AuthorizationPolicies.User]
  └─ calls SourceAccountRepository.Add [L146]
  └─ calls SourceAccountRepository.WriteQuery [L130]
  └─ calls SourceRepository.WriteQuery [L127]
  └─ insert SourceAccount [L146]
    └─ reads_from SourceAccounts
  └─ write SourceAccount [L130]
    └─ reads_from SourceAccounts
  └─ write Source [L127]
  └─ uses_service IControlledRepository<Source>
    └─ method WriteQuery [L127]
      └─ ... (no implementation details available)
  └─ uses_service IControlledRepository<SourceAccount>
    └─ method WriteQuery [L130]
      └─ ... (no implementation details available)

[web] POST /api/source-accounts/from-standard-account  (Workpapers.Next.API.Controllers.SourceAccountsController.CreateFromStandardAccount)  [L159–L168] status=201 [auth=AuthorizationPolicies.User]
  └─ sends_request CreateSourceAccountFromStandardAccountCommand [L164]
    └─ handled_by Workpapers.Next.ApplicationService.Commands.Workpapers.SourceData.SourceAccounts.CreateSourceAccountFromStandardAccountCommandHandler.Handle [L34–L104]
      └─ uses_service IControlledRepository<Binder>
        └─ method ReadQuery [L64]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<Client>
        └─ method ReadQuery [L63]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<Source>
        └─ method ReadQuery [L62]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<SourceAccount>
        └─ method WriteQuery [L61]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<StandardAccount>
        └─ method ReadQuery [L67]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L65]
          └─ implementation Workpapers.Next.Services.Features.Requests.RequestProcessor.ProcessAsync [L9-L32]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle

[web] DELETE /api/source-accounts/{id:Guid}  (Workpapers.Next.API.Controllers.SourceAccountsController.Delete)  [L302–L310] status=200 [auth=AuthorizationPolicies.User]
  └─ calls SourceAccountRepository.ReadQuery [L305]
  └─ query SourceAccount [L305]
    └─ reads_from SourceAccounts
  └─ uses_service IControlledRepository<SourceAccount>
    └─ method ReadQuery [L305]
      └─ ... (no implementation details available)
  └─ sends_request PurgeUnusedSourceAccountsCommand [L307]
    └─ handled_by Cirrus.ApplicationService.Accounting.Commands.PurgeUnusedSourceAccountsCommandHandler.Handle [L36–L161]
      └─ uses_service IControlledRepository<Account>
        └─ method WriteQuery [L91]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<AssetGroup>
        └─ method ReadQuery [L148]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<Distribution>
        └─ method ReadQuery [L130]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<SourceAccount>
        └─ method ReadQuery [L68]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L62]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)

[web] GET /api/source-accounts/{id:guid}  (Workpapers.Next.API.Controllers.SourceAccountsController.Get)  [L54–L58] status=200 [auth=AuthorizationPolicies.User]
  └─ sends_request GetSourceAccountByIdQuery [L57]

[web] GET /api/source-accounts/  (Workpapers.Next.API.Controllers.SourceAccountsController.GetAccounts)  [L60–L65] status=200 [auth=AuthorizationPolicies.User]
  └─ sends_request GetSourceAccountsByIdQuery [L64]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Workpapers.SourceAccounts.GetSourceAccountsByIdQueryHandler.Handle [L45–L95]
      └─ maps_to SourceAccountDto [L93]
      └─ uses_service IControlledRepository<SourceAccount>
        └─ method ReadQuery [L85]
          └─ ... (no implementation details available)
      └─ uses_service IMapper
        └─ method ConfigurationProvider [L93]
          └─ ... (no implementation details available)
      └─ uses_service SourceAccountsQueryProcessor
        └─ method ProcessSourceAccounts [L67]
          └─ ... (no implementation details available)

[web] GET /api/source-accounts/for-binder/{binderId:guid}  (Workpapers.Next.API.Controllers.SourceAccountsController.GetAllForBinder)  [L89–L107] status=200 [auth=AuthorizationPolicies.User]
  └─ calls BinderRepository.ReadQuery [L94]
  └─ query Binder [L94]
    └─ reads_from Binders
  └─ uses_service IControlledRepository<Binder>
    └─ method ReadQuery [L94]
      └─ ... (no implementation details available)
  └─ sends_request CanIAccessBinderQuery [L92]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Binders.CanIAccessBinderQueryHandler.Handle [L60–L126]
      └─ uses_service UserService
        └─ method GetUserId [L91]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
      └─ uses_service RequestInfoService
        └─ method IsValidServiceAccountRequest [L89]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
      └─ uses_service TenantService
        └─ method GetCurrentTenant [L92]
          └─ implementation Workpapers.Next.Services.Features.Tenants.TenantService.GetCurrentTenant [L5-L22]
            └─ uses_service TenantIdentificationService
              └─ method GetCurrentTenant [L20]
                └─ implementation Workpapers.Next.ApplicationService.Services.TenantIdentificationService.GetCurrentTenant [L15-L131]
      └─ uses_service IControlledRepository<Binder>
        └─ method ReadQuery [L101]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L117]
          └─ implementation Workpapers.Next.Services.Features.Requests.RequestProcessor.ProcessAsync [L9-L32]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L121]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L109]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L92]
  └─ sends_request GetSourceAccountsLightQuery [L105]
  └─ sends_request GetSourceAccountsQuery [L106]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Workpapers.SourceAccounts.GetSourceAccountsQueryHandler.Handle [L50–L99]
      └─ uses_service IControlledRepository<SourceAccount>
        └─ method ReadQuery [L78]
          └─ ... (no implementation details available)
      └─ uses_service IMapper
        └─ method ConfigurationProvider [L92]
          └─ ... (no implementation details available)
      └─ uses_service SourceAccountsQueryProcessor
        └─ method ProcessSourceAccounts [L95]
          └─ ... (no implementation details available)

[web] GET /api/source-accounts/for-source/{sourceId}  (Workpapers.Next.API.Controllers.SourceAccountsController.GetAllForSource)  [L71–L83] status=200 [auth=AuthorizationPolicies.User]
  └─ calls SourceRepository.ReadQuery [L74]
  └─ query Source [L74]
  └─ uses_service IControlledRepository<Source>
    └─ method ReadQuery [L74]
      └─ ... (no implementation details available)
  └─ sends_request GetSourceAccountsLightQuery [L81]
  └─ sends_request GetSourceAccountsQuery [L82]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Workpapers.SourceAccounts.GetSourceAccountsQueryHandler.Handle [L50–L99]
      └─ uses_service IControlledRepository<SourceAccount>
        └─ method ReadQuery [L78]
          └─ ... (no implementation details available)
      └─ uses_service IMapper
        └─ method ConfigurationProvider [L92]
          └─ ... (no implementation details available)
      └─ uses_service SourceAccountsQueryProcessor
        └─ method ProcessSourceAccounts [L95]
          └─ ... (no implementation details available)

[web] GET /api/source-accounts/for-report  (Workpapers.Next.API.Controllers.SourceAccountsController.GetForReport)  [L109–L114] status=200 [auth=AuthorizationPolicies.User]
  └─ sends_request GetSourceAccountsForReportQuery [L113]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Workpapers.SourceAccounts.GetSourceAccountsForReportQueryHandler.Handle [L38–L125]
      └─ maps_to SourceAccountForReportDto [L75]
        └─ automapper.registration WorkpapersMappingProfile (SourceAccount->SourceAccountForReportDto) [L606]
      └─ maps_to BinderAccountRecordDto [L97]
      └─ maps_to FirmTolerancesDto [L117]
        └─ automapper.registration WorkpapersMappingProfile (Firm->FirmTolerancesDto) [L177]
      └─ uses_service UserService
        └─ method GetFirmId [L116]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetFirmId [L20-L295]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetFirmId [L20-L295]
      └─ uses_service IControlledRepository<Binder>
        └─ method ReadQuery [L67]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<Firm>
        └─ method ReadQuery [L117]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<SourceAccount>
        └─ method ReadQuery [L75]
          └─ ... (no implementation details available)
      └─ uses_service IMapper
        └─ method ConfigurationProvider [L77]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L65]
          └─ implementation Workpapers.Next.Services.Features.Requests.RequestProcessor.ProcessAsync [L9-L32]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle

[web] PUT /api/source-accounts/move  (Workpapers.Next.API.Controllers.SourceAccountsController.Move)  [L292–L300] status=200 [auth=AuthorizationPolicies.User]
  └─ sends_request MoveAccountsCommand [L297]
    └─ handled_by Cirrus.ApplicationService.Accounting.Commands.Ledger.MoveAccountsCommandHandler.Handle [L55–L305]
      └─ uses_service IControlledRepository<Account>
        └─ method ReadQuery [L80]
          └─ ... (no implementation details available)
      └─ uses_service ILeadScheduleService (AddScoped)
        └─ method HasParentLeadSchedule [L198]
          └─ implementation Cirrus.ApplicationService.Features.LeadSchedules.LeadScheduleService.HasParentLeadSchedule [L14-L50]
      └─ uses_service ILogger
        └─ method LogWarning [L248]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L152]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)
      └─ logs ILogger [Warning] [L248]

[web] DELETE /api/source-accounts/purge-unused  (Workpapers.Next.API.Controllers.SourceAccountsController.PurgeUnused)  [L315–L320] status=200 [auth=AuthorizationPolicies.User]
  └─ sends_request PurgeUnusedSourceAccountsCommand [L318]
    └─ handled_by Cirrus.ApplicationService.Accounting.Commands.PurgeUnusedSourceAccountsCommandHandler.Handle [L36–L161]
      └─ uses_service IControlledRepository<Account>
        └─ method WriteQuery [L91]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<AssetGroup>
        └─ method ReadQuery [L148]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<Distribution>
        └─ method ReadQuery [L130]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<SourceAccount>
        └─ method ReadQuery [L68]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L62]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)

[web] PUT /api/source-accounts/{id:Guid}/reorder  (Workpapers.Next.API.Controllers.SourceAccountsController.Reorder)  [L254–L272] status=200 [auth=AuthorizationPolicies.User]
  └─ calls SourceAccountRepository.WriteQuery [L257]
  └─ write SourceAccount [L257]
    └─ reads_from SourceAccounts
  └─ uses_service IControlledRepository<SourceAccount>
    └─ method WriteQuery [L257]
      └─ ... (no implementation details available)

[web] PUT /api/source-accounts/header/{id:Guid}/reorder  (Workpapers.Next.API.Controllers.SourceAccountsController.ReorderAccounts)  [L277–L282] status=200 [auth=AuthorizationPolicies.User]
  └─ sends_request ReorderAccountsCommand [L280]
    └─ handled_by Cirrus.ApplicationService.Accounting.Commands.Ledger.ReorderAccountsCommandHandler.Handle [L53–L122]
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L69]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)

[web] PUT /api/source-accounts/{id:guid}/reset-source-system-id  (Workpapers.Next.API.Controllers.SourceAccountsController.ResetSourceSystemId)  [L190–L197] status=200 [auth=AuthorizationPolicies.User]
  └─ calls SourceAccountRepository.WriteQuery [L193]
  └─ write SourceAccount [L193]
    └─ reads_from SourceAccounts
  └─ uses_service IControlledRepository<SourceAccount>
    └─ method WriteQuery [L193]
      └─ ... (no implementation details available)

[web] PUT /api/source-accounts/{id:Guid}  (Workpapers.Next.API.Controllers.SourceAccountsController.Update)  [L178–L184] status=200 [auth=AuthorizationPolicies.User]
  └─ sends_request UpdateAccountCommand [L181]
    └─ handled_by Workpapers.Next.ApplicationService.Commands.Workpapers.SourceData.SourceAccounts.UpdateAccountCommandHandler.Handle [L38–L192]
      └─ uses_service LeadScheduleService
        └─ method HasParentLeadSchedule [L114]
          └─ implementation Workpapers.Next.ApplicationService.Features.LeadSchedules.LeadScheduleService.HasParentLeadSchedule [L15-L65]
      └─ uses_service IControlledRepository<SourceAccount>
        └─ method WriteQuery [L59]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<TransientAccountProperties>
        └─ method WriteQuery [L166]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L63]
          └─ implementation Workpapers.Next.Services.Features.Requests.RequestProcessor.ProcessAsync [L9-L32]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle

[web] PUT /api/source-accounts/bulk  (Workpapers.Next.API.Controllers.SourceAccountsController.UpdateBulk)  [L205–L224] status=200 [auth=AuthorizationPolicies.User]
  └─ calls SourceAccountRepository.WriteQuery [L208]
  └─ write SourceAccount [L208]
    └─ reads_from SourceAccounts
  └─ uses_service IControlledRepository<SourceAccount>
    └─ method WriteQuery [L208]
      └─ ... (no implementation details available)

[web] GET /api/starterPacks/  (Workpapers.Next.API.Controllers.StarterPackController.GetStarterPacks)  [L31–L38] status=200 [auth=AuthorizationPolicies.SuperUser]
  └─ maps_to StarterPackDto [L34]
  └─ uses_service UnitOfWork
    └─ method Table [L34]
      └─ ... (no implementation details available)

[web] GET /api/stats/binder-report/{firmId}  (Workpapers.Next.API.Controllers.StatsController.BinderRecordTemplates)  [L265–L280] status=200 [auth=AuthorizationPolicies.SuperUser]
  └─ sends_request BinderReportBaseQuery [L277]

[web] GET /api/stats/binder-type-usage  (Workpapers.Next.API.Controllers.StatsController.BinderTypeUsage)  [L145–L157] status=200 [auth=AuthorizationPolicies.SuperUser]
  └─ sends_request GetBinderTypeUsageQuery [L154]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Stats.GetBinderTypeUsageQueryHandler.Handle [L36–L90]
      └─ uses_service IControlledRepository<Binder>
        └─ method ReadQuery [L54]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<BinderType>
        └─ method ReadQuery [L70]
          └─ ... (no implementation details available)

[web] GET /api/stats/expiredtrials  (Workpapers.Next.API.Controllers.StatsController.ExpiredTrials)  [L30–L42] status=200 [auth=AuthorizationPolicies.SuperUser]
  └─ sends_request GetTrialExpiryQuery [L39]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Stats.GetTrialExpiryQueryHandler.Handle [L38–L84]
      └─ uses_service UnitOfWork
        └─ method Table [L54]
          └─ ... (no implementation details available)

[web] GET /api/stats/binder-type-usage/{firmId}  (Workpapers.Next.API.Controllers.StatsController.FirmBinderTypeUsage)  [L130–L143] status=200 [auth=AuthorizationPolicies.SuperUser]
  └─ sends_request GetBinderTypeUsageQuery [L140]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Stats.GetBinderTypeUsageQueryHandler.Handle [L36–L90]
      └─ uses_service IControlledRepository<Binder>
        └─ method ReadQuery [L54]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<BinderType>
        └─ method ReadQuery [L70]
          └─ ... (no implementation details available)

[web] GET /api/stats/firm-preferences  (Workpapers.Next.API.Controllers.StatsController.FirmPreferences)  [L252–L263] status=200 [auth=AuthorizationPolicies.SuperUser]
  └─ uses_cache IMemoryCache.GetOrCreateAsync [read] (key=FirmPreferences) [L255]
  └─ sends_request GetFirmPreferencesStatsQuery [L259]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Stats.GetFirmPreferencesStatsQueryHandler.Handle [L39–L213]
      └─ uses_service IControlledRepository<BinderColumnTemplateSet>
        └─ method ReadQuery [L136]
          └─ ... (no implementation details available)
      └─ uses_service List<FirmPreferenceStat>
        └─ method Add [L174]
          └─ ... (no implementation details available)
      └─ uses_service UnitOfWork
        └─ method Table [L68]
          └─ ... (no implementation details available)

[web] GET /api/stats/firmusage/{firmId}  (Workpapers.Next.API.Controllers.StatsController.FirmUsageSummary)  [L57–L69] status=200 [auth=AuthorizationPolicies.SuperUser]
  └─ sends_request GetFirmUsageSummaryQuery [L66]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Stats.GetFirmUsageSummaryQueryHandler.Handle [L47–L155]
      └─ uses_client KeenClient [L93]
      └─ uses_service KeenClient
        └─ method QueryAsync [L93]
          └─ ... (no implementation details available)
      └─ uses_service KeenQueryBuilder
        └─ method Build [L94]
          └─ ... (no implementation details available)
      └─ uses_service UnitOfWork
        └─ method Table [L88]
          └─ ... (no implementation details available)
      └─ uses_cache IMemoryCache.GetOrCreateAsync [read] (key=FirmUsage-period{*}-firmid{*}) [L70]

[web] GET /api/stats/usage/{firmId:guid}/template  (Workpapers.Next.API.Controllers.StatsController.GetFirmRecordTemplatesUsage)  [L71–L85] status=200 [auth=AuthorizationPolicies.SuperUser]
  └─ sends_request GetRecordTemplatesUsageQuery [L82]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Stats.GetRecordTemplatesUsageQueryHandler.Handle [L65–L237]
      └─ maps_to WorkpaperRecordTemplateUltraLightDto [L133]
        └─ automapper.registration WorkpapersMappingProfile (WorkpaperRecordTemplate->WorkpaperRecordTemplateUltraLightDto) [L216]
      └─ uses_client KeenClient [L154]
      └─ uses_service IControlledRepository<Binder>
        └─ method ReadQuery [L172]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<WorkpaperRecord>
        └─ method ReadQuery [L178]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<WorkpaperRecordTemplate>
        └─ method ReadQuery [L133]
          └─ ... (no implementation details available)
      └─ uses_service IMapper
        └─ method ConfigurationProvider [L135]
          └─ ... (no implementation details available)
      └─ uses_service KeenClient
        └─ method QueryAsync [L154]
          └─ ... (no implementation details available)
      └─ uses_service KeenQueryBuilder
        └─ method Build [L155]
          └─ ... (no implementation details available)
      └─ uses_cache IMemoryCache.GetOrCreateAsync [read] (key=TemplateUsage-period{*}-firmid{*}) [L102]

[web] GET /api/stats/usage/template  (Workpapers.Next.API.Controllers.StatsController.GetRecordTemplatesUsage)  [L87–L99] status=200 [auth=AuthorizationPolicies.SuperUser]
  └─ sends_request GetRecordTemplatesUsageQuery [L96]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Stats.GetRecordTemplatesUsageQueryHandler.Handle [L65–L237]
      └─ maps_to WorkpaperRecordTemplateUltraLightDto [L133]
        └─ automapper.registration WorkpapersMappingProfile (WorkpaperRecordTemplate->WorkpaperRecordTemplateUltraLightDto) [L216]
      └─ uses_client KeenClient [L154]
      └─ uses_service IControlledRepository<Binder>
        └─ method ReadQuery [L172]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<WorkpaperRecord>
        └─ method ReadQuery [L178]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<WorkpaperRecordTemplate>
        └─ method ReadQuery [L133]
          └─ ... (no implementation details available)
      └─ uses_service IMapper
        └─ method ConfigurationProvider [L135]
          └─ ... (no implementation details available)
      └─ uses_service KeenClient
        └─ method QueryAsync [L154]
          └─ ... (no implementation details available)
      └─ uses_service KeenQueryBuilder
        └─ method Build [L155]
          └─ ... (no implementation details available)
      └─ uses_cache IMemoryCache.GetOrCreateAsync [read] (key=TemplateUsage-period{*}-firmid{*}) [L102]

[web] GET /api/stats/licensesummary  (Workpapers.Next.API.Controllers.StatsController.LicenseSummary)  [L44–L55] status=200 [auth=AuthorizationPolicies.SuperUser]
  └─ sends_request GetLicenseSummaryQuery [L52]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Stats.GetLicenseSummaryQueryHandler.Handle [L40–L156]
      └─ uses_service UnitOfWork
        └─ method Table [L72]
          └─ ... (no implementation details available)
      └─ uses_cache IMemoryCache.GetOrCreateAsync [read] (key=LicenseSummary) [L53]

[web] GET /api/stats/newusers  (Workpapers.Next.API.Controllers.StatsController.NewUsers)  [L188–L200] status=200 [auth=AuthorizationPolicies.SuperUser]
  └─ sends_request GetNewUsersQuery [L197]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Stats.GetNewUsersQueryHandler.Handle [L37–L91]
      └─ uses_service UnitOfWork
        └─ method Table [L53]
          └─ ... (no implementation details available)

[web] GET /api/stats/productusage/{firmId}  (Workpapers.Next.API.Controllers.StatsController.ProductUsage)  [L101–L114] status=200 [auth=AuthorizationPolicies.SuperUser]
  └─ sends_request GetProductUsageQuery [L111]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Stats.GetProductUsageQueryHandler.Handle [L47–L133]
      └─ uses_client KeenClient [L96]
      └─ uses_service KeenClient
        └─ method QueryAsync [L96]
          └─ ... (no implementation details available)
      └─ uses_service KeenQueryBuilder
        └─ method Build [L97]
          └─ ... (no implementation details available)
      └─ uses_service UnitOfWork
        └─ method Table [L102]
          └─ ... (no implementation details available)
      └─ uses_cache IMemoryCache.GetOrCreateAsync [read] (key=ProductUsage-period{*}-firmid{*}) [L67]

[web] GET /api/stats/productusage  (Workpapers.Next.API.Controllers.StatsController.ProductUsageAllFirms)  [L116–L128] status=200 [auth=AuthorizationPolicies.SuperUser]
  └─ sends_request GetProductUsageQuery [L125]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Stats.GetProductUsageQueryHandler.Handle [L47–L133]
      └─ uses_client KeenClient [L96]
      └─ uses_service KeenClient
        └─ method QueryAsync [L96]
          └─ ... (no implementation details available)
      └─ uses_service KeenQueryBuilder
        └─ method Build [L97]
          └─ ... (no implementation details available)
      └─ uses_service UnitOfWork
        └─ method Table [L102]
          └─ ... (no implementation details available)
      └─ uses_cache IMemoryCache.GetOrCreateAsync [read] (key=ProductUsage-period{*}-firmid{*}) [L67]

[web] GET /api/stats/quarterlysummary  (Workpapers.Next.API.Controllers.StatsController.QuarterlySummary)  [L202–L213] status=200 [auth=AuthorizationPolicies.SuperUser]
  └─ uses_cache IMemoryCache.GetOrCreateAsync [read] (key=QuarterlySummary) [L205]
  └─ sends_request GetQuarterlySummaryQuery [L209]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Stats.GetQuarterlySummaryQueryHandler.Handle [L25–L155]
      └─ uses_client KeenClient [L82]
      └─ uses_service KeenClient
        └─ method QueryAsync [L82]
          └─ ... (no implementation details available)
      └─ uses_service KeenQueryBuilder
        └─ method Build [L83]
          └─ ... (no implementation details available)
      └─ uses_service UnitOfWork
        └─ method Table [L45]
          └─ ... (no implementation details available)

[web] GET /api/stats/starterusage/{firmId}  (Workpapers.Next.API.Controllers.StatsController.StarterUsage)  [L159–L172] status=200 [auth=AuthorizationPolicies.SuperUser]
  └─ sends_request GetStarterUsageQuery [L169]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Stats.GetStarterUsageQueryHandler.Handle [L47–L128]
      └─ uses_client KeenClient [L97]
      └─ uses_service KeenClient
        └─ method QueryAsync [L97]
          └─ ... (no implementation details available)
      └─ uses_service KeenQueryBuilder
        └─ method Build [L98]
          └─ ... (no implementation details available)
      └─ uses_service UnitOfWork
        └─ method Table [L106]
          └─ ... (no implementation details available)
      └─ uses_cache IMemoryCache.GetOrCreateAsync [read] (key=StarterUsage-period{*}-firmid{*}) [L68]

[web] GET /api/stats/starterusage  (Workpapers.Next.API.Controllers.StatsController.StarterUsageAllFirms)  [L174–L186] status=200 [auth=AuthorizationPolicies.SuperUser]
  └─ sends_request GetStarterUsageQuery [L183]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Stats.GetStarterUsageQueryHandler.Handle [L47–L128]
      └─ uses_client KeenClient [L97]
      └─ uses_service KeenClient
        └─ method QueryAsync [L97]
          └─ ... (no implementation details available)
      └─ uses_service KeenQueryBuilder
        └─ method Build [L98]
          └─ ... (no implementation details available)
      └─ uses_service UnitOfWork
        └─ method Table [L106]
          └─ ... (no implementation details available)
      └─ uses_cache IMemoryCache.GetOrCreateAsync [read] (key=StarterUsage-period{*}-firmid{*}) [L68]

[web] GET /api/stats/topfirms  (Workpapers.Next.API.Controllers.StatsController.TopFirms)  [L228–L239] status=200 [auth=AuthorizationPolicies.SuperUser]
  └─ uses_cache IMemoryCache.GetOrCreateAsync [read] (key=TopFirms-type{*}-period{*}) [L231]
  └─ sends_request GetTopFirmsQuery [L235]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.GetTopFirmsQueryHandler.Handle [L31–L105]
      └─ uses_client KeenClient [L84]
      └─ uses_service KeenClient
        └─ method QueryAsync [L84]
          └─ ... (no implementation details available)
      └─ uses_service KeenQueryBuilder
        └─ method Build [L85]
          └─ ... (no implementation details available)
      └─ uses_service UnitOfWork
        └─ method Table [L93]
          └─ ... (no implementation details available)

[web] GET /api/stats/topusers  (Workpapers.Next.API.Controllers.StatsController.TopUsers)  [L215–L226] status=200 [auth=AuthorizationPolicies.SuperUser]
  └─ uses_cache IMemoryCache.GetOrCreateAsync [read] (key=TopUsers-type{*}-period{*}) [L218]
  └─ sends_request GetTopUsersQuery [L222]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.GetTopUsersQueryHandler.Handle [L32–L91]
      └─ uses_client KeenClient [L64]
      └─ uses_service KeenClient
        └─ method QueryAsync [L64]
          └─ ... (no implementation details available)
      └─ uses_service KeenQueryBuilder
        └─ method Build [L65]
          └─ ... (no implementation details available)
      └─ uses_service UnitOfWork
        └─ method Table [L74]
          └─ ... (no implementation details available)

[web] POST /api/stats/workpapernousage  (Workpapers.Next.API.Controllers.StatsController.WorkpaperNoUsage)  [L241–L250] status=201 [auth=AuthorizationPolicies.SuperUser]
  └─ sends_request GetWorkpaperNoUsageQuery [L247]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.GetWorkpaperNoUsageQueryHandler.Handle [L32–L120]
      └─ uses_service UnitOfWork
        └─ method Table [L45]
          └─ ... (no implementation details available)

[web] DELETE /api/subscriptions/{id:int}  (Workpapers.Next.API.Controllers.SubscriptionsController.DeleteSubscription)  [L87–L100] status=200 [auth=AuthorizationPolicies.SuperUser]
  └─ maps_to SubscriptionDto [L99]
  └─ uses_service IMapper
    └─ method Map [L99]
      └─ ... (no implementation details available)
  └─ uses_service UnitOfWork
    └─ method Table [L90]
      └─ ... (no implementation details available)

[web] GET /api/subscriptions/{id:int}  (Workpapers.Next.API.Controllers.SubscriptionsController.GetSubscription)  [L38–L48] status=200 [auth=AuthorizationPolicies.SuperUser]
  └─ maps_to SubscriptionDto [L41]
  └─ uses_service UnitOfWork
    └─ method Table [L41]
      └─ ... (no implementation details available)

[web] GET /api/subscriptions/byfirm/{id:Guid}  (Workpapers.Next.API.Controllers.SubscriptionsController.GetSubscriptions)  [L50–L59] status=200 [auth=AuthorizationPolicies.SuperUser]
  └─ maps_to SubscriptionDto [L53]
  └─ uses_service UnitOfWork
    └─ method Table [L53]
      └─ ... (no implementation details available)

[web] POST /api/subscriptions  (Workpapers.Next.API.Controllers.SubscriptionsController.PostSubscription)  [L61–L72] status=201 [auth=AuthorizationPolicies.SuperUser]
  └─ maps_to SubscriptionDto [L71]
  └─ uses_service IMapper
    └─ method Map [L71]
      └─ ... (no implementation details available)
  └─ uses_service UnitOfWork
    └─ method Table [L64]
      └─ ... (no implementation details available)

[web] PUT /api/subscriptions/{id:int}  (Workpapers.Next.API.Controllers.SubscriptionsController.PutSubscription)  [L74–L85] status=200 [auth=AuthorizationPolicies.SuperUser]
  └─ uses_service UnitOfWork
    └─ method Table [L77]
      └─ ... (no implementation details available)

[web] PUT /api/teams/{id:Guid}/adduser/{userId:Guid}  (Workpapers.Next.API.Controllers.TeamController.AddUserToTeam)  [L121–L137] status=200 [auth=AuthorizationPolicies.Administrator]
  └─ uses_service UnitOfWork
    └─ method Table [L125]
      └─ ... (no implementation details available)

[web] GET /api/teams  (Workpapers.Next.API.Controllers.TeamController.CheckAuthorisation)  [L172–L180] status=200
  └─ uses_service UnitOfWork
    └─ method Table [L174]
      └─ ... (no implementation details available)

[web] POST /api/teams  (Workpapers.Next.API.Controllers.TeamController.CreateTeam)  [L94–L104] status=201 [auth=AuthorizationPolicies.Administrator]
  └─ maps_to TeamDto [L103]
  └─ uses_service IMapper
    └─ method Map [L103]
      └─ ... (no implementation details available)
  └─ uses_service UnitOfWork
    └─ method Add [L101]
      └─ ... (no implementation details available)
  └─ uses_service UserService
    └─ method GetFirmId [L98]
      └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetFirmId [L20-L295]

[web] DELETE /api/teams/{id}  (Workpapers.Next.API.Controllers.TeamController.DeleteTeam)  [L157–L170] status=200 [auth=AuthorizationPolicies.Administrator]
  └─ uses_service UnitOfWork
    └─ method Table [L161]
      └─ ... (no implementation details available)

[web] GET /api/teams/{id:Guid}  (Workpapers.Next.API.Controllers.TeamController.GetTeam)  [L70–L80] status=200
  └─ maps_to TeamDto [L79]
  └─ uses_service IMapper
    └─ method Map [L79]
      └─ ... (no implementation details available)
  └─ uses_service UnitOfWork
    └─ method Table [L73]
      └─ ... (no implementation details available)

[web] GET /api/teams/  (Workpapers.Next.API.Controllers.TeamController.GetTeams)  [L58–L68] status=200
  └─ maps_to TeamDto [L63]
  └─ uses_service UnitOfWork
    └─ method Table [L63]
      └─ ... (no implementation details available)
  └─ uses_service UserService
    └─ method GetFirmId [L61]
      └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetFirmId [L20-L295]

[web] GET /api/teams/byfirm/{id:Guid}  (Workpapers.Next.API.Controllers.TeamController.GetTeamsForFirm)  [L45–L56] status=200 [auth=AuthorizationPolicies.SuperUser]
  └─ maps_to TeamDto [L51]
  └─ uses_service UnitOfWork
    └─ method Table [L51]
      └─ ... (no implementation details available)

[web] GET /api/teams/{id:Guid}/users  (Workpapers.Next.API.Controllers.TeamController.GetTeamUsers)  [L82–L92] status=200
  └─ maps_to UserDto [L87]
  └─ uses_service UnitOfWork
    └─ method Table [L87]
      └─ ... (no implementation details available)

[web] PUT /api/teams/{id:Guid}  (Workpapers.Next.API.Controllers.TeamController.PutTeam)  [L106–L119] status=200 [auth=AuthorizationPolicies.Administrator]
  └─ uses_service UnitOfWork
    └─ method Table [L110]
      └─ ... (no implementation details available)

[web] PUT /api/teams/{id}/removeuser/{userId}  (Workpapers.Next.API.Controllers.TeamController.RemoveUserFromTeam)  [L139–L155] status=200 [auth=AuthorizationPolicies.Administrator]
  └─ uses_service UnitOfWork
    └─ method Table [L143]
      └─ ... (no implementation details available)

[web] POST /api/binder-column-template-sets  (Workpapers.Next.API.Controllers.Templates.BinderColumnTemplateSetsController.Create)  [L47–L55] status=201
  └─ sends_request CreateBinderColumnTemplateSet [L52]
    └─ handled_by Workpapers.Next.ApplicationService.Commands.Templates.BinderColumnTemplateSets.CreateBinderColumnTemplateSetHandler.Handle [L23–L58]
      └─ uses_service IControlledRepository<BinderColumnTemplateSet>
        └─ method Add [L37]
          └─ ... (no implementation details available)

[web] DELETE /api/binder-column-template-sets/{id:guid}  (Workpapers.Next.API.Controllers.Templates.BinderColumnTemplateSetsController.Delete)  [L73–L81] status=204
  └─ sends_request DeleteBinderColumnTemplateSet [L78]
    └─ handled_by Workpapers.Next.ApplicationService.Commands.Templates.BinderColumnTemplateSets.DeleteBinderColumnTemplateSetHandler.Handle [L26–L44]
      └─ uses_service IControlledRepository<BinderColumnTemplateSet>
        └─ method ReadQuery [L37]
          └─ ... (no implementation details available)

[web] GET /api/binder-column-template-sets/{id:guid}  (Workpapers.Next.API.Controllers.Templates.BinderColumnTemplateSetsController.Get)  [L35–L39] status=200
  └─ sends_request GetBinderColumnTemplateSet [L38]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Templates.GetBinderColumnTemplateSetHandler.Handle [L22–L40]
      └─ maps_to BinderColumnTemplateSetDto [L35]
        └─ automapper.registration WorkpapersMappingProfile (BinderColumnTemplateSet->BinderColumnTemplateSetDto) [L368]
      └─ uses_service IControlledRepository<BinderColumnTemplateSet>
        └─ method ReadQuery [L35]
          └─ ... (no implementation details available)

[web] GET /api/binder-column-template-sets  (Workpapers.Next.API.Controllers.Templates.BinderColumnTemplateSetsController.GetAll)  [L27–L33] status=200
  └─ sends_request GetBinderColumnTemplateSets [L32]
  └─ sends_request GetBinderColumnTemplateSetsLight [L31]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Templates.GetBinderColumnTemplateSetsHandler.Handle [L17–L46]
      └─ uses_service IControlledRepository<BinderColumnTemplateSet>
        └─ method ReadQuery [L40]
          └─ ... (no implementation details available)
      └─ uses_service IMapper
        └─ method ConfigurationProvider [L43]
          └─ ... (no implementation details available)

[web] GET /api/binder-column-template-sets/for-binder-type/{binderTypeId:guid}  (Workpapers.Next.API.Controllers.Templates.BinderColumnTemplateSetsController.GetForBinderType)  [L41–L45] status=200
  └─ sends_request GetBinderColumnTemplateSetForBinderType [L44]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Templates.GetBinderColumnTemplateSetForBinderTypeHandler.Handle [L24–L45]
      └─ maps_to BinderColumnTemplateSetDto [L37]
        └─ automapper.registration WorkpapersMappingProfile (BinderColumnTemplateSet->BinderColumnTemplateSetDto) [L368]
      └─ uses_service IControlledRepository<BinderColumnTemplateSet>
        └─ method ReadQuery [L37]
          └─ ... (no implementation details available)
      └─ uses_service IMapper
        └─ method ConfigurationProvider [L40]
          └─ ... (no implementation details available)

[web] PUT /api/binder-column-template-sets/{id:guid}  (Workpapers.Next.API.Controllers.Templates.BinderColumnTemplateSetsController.Update)  [L65–L71] status=200
  └─ sends_request UpdateBinderColumnTemplateSet [L68]
    └─ handled_by Workpapers.Next.ApplicationService.Commands.Templates.BinderColumnTemplateSets.UpdateBinderColumnTemplateSetHandler.Handle [L32–L51]
      └─ uses_service IControlledRepository<BinderColumnTemplateSet>
        └─ method ReadQuery [L43]
          └─ ... (no implementation details available)

[web] PUT /api/binder-column-template-sets  (Workpapers.Next.API.Controllers.Templates.BinderColumnTemplateSetsController.UpdateAll)  [L57–L63] status=200
  └─ sends_request CreateOrUpdateBinderColumnTemplateSets [L60]
    └─ handled_by Workpapers.Next.ApplicationService.Commands.Templates.BinderColumnTemplateSets.CreateOrUpdateBinderColumnTemplateSetsHandler.Handle [L22–L62]
      └─ uses_service IControlledRepository<BinderColumnTemplateSet>
        └─ method WriteQuery [L35]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L45]
          └─ implementation Workpapers.Next.Services.Features.Requests.RequestProcessor.ProcessAsync [L9-L32]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle

[web] GET /api/commands/{id:guid}  (Workpapers.Next.API.Controllers.Templates.CommandsController.Get)  [L66–L73] status=200
  └─ maps_to CommandDto [L69]
    └─ automapper.registration WorkpapersMappingProfile (Command->CommandDto) [L360]
  └─ calls CommandRepository.ReadQuery [L69]
  └─ query Command [L69]
    └─ reads_from Commands
  └─ uses_service IControlledRepository<Command>
    └─ method ReadQuery [L69]
      └─ ... (no implementation details available)

[web] GET /api/files/upload  (Workpapers.Next.API.Controllers.Templates.FilesController.UploadFileGet)  [L25–L32] status=200

[web] POST /api/files/upload  (Workpapers.Next.API.Controllers.Templates.FilesController.UploadFilePost)  [L34–L48] status=201
  └─ sends_request UploadChunkCommand [L37]
    └─ handled_by Cirrus.Services.Features.FileUpload.UploadChunkCommandHandler.Handle [L37–L139]
      └─ uses_service IStorageService (InstancePerLifetimeScope)
        └─ method UploadFile [L71]
          └─ implementation IStorageService.UploadFile [L9-L9]
          └─ ... (no implementation details available)
      └─ uses_storage IStorageService.UploadFile [L71]

[web] GET /api/named-ranges  (Workpapers.Next.API.Controllers.Templates.NamedRangesController.Get)  [L30–L47] status=200
  └─ calls NamedRangeRepository.ReadQuery [L33]
  └─ query NamedRange [L33]
    └─ reads_from NamedRanges
  └─ uses_service IControlledRepository<NamedRange>
    └─ method ReadQuery [L33]
      └─ ... (no implementation details available)

[web] POST /api/starters  (Workpapers.Next.API.Controllers.Templates.StartersController.AddStarter)  [L81–L92] status=201 [auth=AuthorizationPolicies.Administrator]
  └─ uses_service UnitOfWork
    └─ method Add [L89]
      └─ ... (no implementation details available)
  └─ uses_service UserService
    └─ method IsSuperUser [L85]
      └─ implementation Workpapers.Next.ApplicationService.Services.UserService.IsSuperUser [L20-L295]

[web] DELETE /api/starters/{id}  (Workpapers.Next.API.Controllers.Templates.StartersController.Delete)  [L113–L129] status=200 [auth=AuthorizationPolicies.Administrator]
  └─ uses_service UnitOfWork
    └─ method Table [L117]
      └─ ... (no implementation details available)

[web] GET /api/starters/{id:Guid}/download  (Workpapers.Next.API.Controllers.Templates.StartersController.Download)  [L131–L157] status=200
  └─ uses_client KeenClient [L148]
  └─ uses_service StorageService
    └─ method CreateDownloadUrl [L155]
      └─ implementation Workpapers.Next.Data.Storage.StorageService.CreateDownloadUrl [L17-L282]
  └─ uses_service UnitOfWork
    └─ method Table [L134]
      └─ ... (no implementation details available)
  └─ uses_service UserService
    └─ method GetFirmId [L140]
      └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetFirmId [L20-L295]
  └─ uses_storage StorageService.CreateDownloadUrl [L155]
  └─ sends_request GetProductQuery [L140]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Licensing.Products.GetProductQueryHandler.Handle [L57–L101]
      └─ uses_service UnitOfWork
        └─ method Table [L71]
          └─ ... (no implementation details available)

[web] GET /api/starters/byproduct/{ProductId:Guid}  (Workpapers.Next.API.Controllers.Templates.StartersController.GetByProduct)  [L61–L67] status=200
  └─ maps_to StarterDto [L66]
  └─ uses_service IMapper
    └─ method Map [L66]
      └─ ... (no implementation details available)
  └─ uses_service UserService
    └─ method GetUser [L64]
      └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUser [L20-L295]
  └─ sends_request AllStartersForProductQuery [L64]
    └─ handled_by Workpapers.Next.Data.Queries.Templates.Starters.AllStartersForProductQueryHandler.Handle [L17–L63]
      └─ uses_service UserService
        └─ method IsSuperUser [L35]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.IsSuperUser [L20-L295]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.IsSuperUser [L20-L295]
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L35]
          └─ implementation Workpapers.Next.Services.Features.Requests.RequestProcessor.ProcessAsync [L9-L32]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle
      └─ uses_service UnitOfWork
        └─ method Table [L40]
          └─ ... (no implementation details available)

[web] GET /api/starters/byproduct/{ProductId:Guid}/active  (Workpapers.Next.API.Controllers.Templates.StartersController.GetByProductActive)  [L72–L79] status=200
  └─ maps_to StarterDto [L78]
  └─ uses_service IMapper
    └─ method Map [L78]
      └─ ... (no implementation details available)
  └─ uses_service UserService
    └─ method GetUser [L75]
      └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUser [L20-L295]
  └─ sends_request AllStartersForProductQuery [L75]
    └─ handled_by Workpapers.Next.Data.Queries.Templates.Starters.AllStartersForProductQueryHandler.Handle [L17–L63]
      └─ uses_service UserService
        └─ method IsSuperUser [L35]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.IsSuperUser [L20-L295]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.IsSuperUser [L20-L295]
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L35]
          └─ implementation Workpapers.Next.Services.Features.Requests.RequestProcessor.ProcessAsync [L9-L32]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle
      └─ uses_service UnitOfWork
        └─ method Table [L40]
          └─ ... (no implementation details available)

[web] PUT /api/starters/{id:Guid}  (Workpapers.Next.API.Controllers.Templates.StartersController.UpdateStarter)  [L94–L111] status=200 [auth=AuthorizationPolicies.Administrator]
  └─ uses_service UnitOfWork
    └─ method Table [L98]
      └─ ... (no implementation details available)

[web] POST /api/template-help-contents  (Workpapers.Next.API.Controllers.Templates.TemplateHelpContentsController.CreateHelpContent)  [L60–L69] status=201 [auth=AuthorizationPolicies.Administrator]
  └─ maps_to TemplateHelpContentDto [L68]
  └─ calls TemplateHelpContentRepository.Add [L66]
  └─ insert TemplateHelpContent [L66]
    └─ reads_from TemplateHelpContents
  └─ uses_service IControlledRepository<TemplateHelpContent>
    └─ method Add [L66]
      └─ ... (no implementation details available)
  └─ uses_service IMapper
    └─ method Map [L68]
      └─ ... (no implementation details available)
  └─ uses_service UserService
    └─ method IsSuperUser [L65]
      └─ implementation Workpapers.Next.ApplicationService.Services.UserService.IsSuperUser [L20-L295]

[web] DELETE /api/template-help-contents/{id:Guid}  (Workpapers.Next.API.Controllers.Templates.TemplateHelpContentsController.DeleteHelpContent)  [L84–L95] status=200 [auth=AuthorizationPolicies.Administrator]
  └─ calls TemplateHelpContentRepository.Remove [L92]
  └─ calls TemplateHelpContentRepository.WriteQuery [L87]
  └─ delete TemplateHelpContent [L92]
    └─ reads_from TemplateHelpContents
  └─ write TemplateHelpContent [L87]
    └─ reads_from TemplateHelpContents
  └─ uses_service IControlledRepository<TemplateHelpContent>
    └─ method WriteQuery [L87]
      └─ ... (no implementation details available)
  └─ uses_service UserService
    └─ method IsSuperUser [L90]
      └─ implementation Workpapers.Next.ApplicationService.Services.UserService.IsSuperUser [L20-L295]

[web] GET /api/template-help-contents/for-template/{id:Guid}  (Workpapers.Next.API.Controllers.Templates.TemplateHelpContentsController.GetAllHelpContent)  [L50–L58] status=200 [auth=AuthorizationPolicies.Administrator]
  └─ maps_to TemplateHelpContentDto [L53]
    └─ automapper.registration WorkpapersMappingProfile (TemplateHelpContent->TemplateHelpContentDto) [L326]
  └─ calls TemplateHelpContentRepository.ReadQuery [L53]
  └─ query TemplateHelpContent [L53]
    └─ reads_from TemplateHelpContents
  └─ uses_service IControlledRepository<TemplateHelpContent>
    └─ method ReadQuery [L53]
      └─ ... (no implementation details available)

[web] GET /api/template-help-contents/{id:Guid}  (Workpapers.Next.API.Controllers.Templates.TemplateHelpContentsController.GetHelpContent)  [L41–L48] status=200 [auth=AuthorizationPolicies.Administrator]
  └─ maps_to TemplateHelpContentDto [L44]
    └─ automapper.registration WorkpapersMappingProfile (TemplateHelpContent->TemplateHelpContentDto) [L326]
  └─ calls TemplateHelpContentRepository.ReadQuery [L44]
  └─ query TemplateHelpContent [L44]
    └─ reads_from TemplateHelpContents
  └─ uses_service IControlledRepository<TemplateHelpContent>
    └─ method ReadQuery [L44]
      └─ ... (no implementation details available)

[web] PUT /api/template-help-contents/{id:Guid}  (Workpapers.Next.API.Controllers.Templates.TemplateHelpContentsController.UpdateHelpContent)  [L71–L82] status=200 [auth=AuthorizationPolicies.Administrator]
  └─ maps_to TemplateHelpContentDto [L81]
  └─ calls TemplateHelpContentRepository.WriteQuery [L74]
  └─ write TemplateHelpContent [L74]
    └─ reads_from TemplateHelpContents
  └─ uses_service IControlledRepository<TemplateHelpContent>
    └─ method WriteQuery [L74]
      └─ ... (no implementation details available)
  └─ uses_service IMapper
    └─ method Map [L81]
      └─ ... (no implementation details available)
  └─ uses_service UserService
    └─ method IsSuperUser [L77]
      └─ implementation Workpapers.Next.ApplicationService.Services.UserService.IsSuperUser [L20-L295]

[web] PUT /api/templates/{id:Guid}/approve-changes/{approvedVersion}  (Workpapers.Next.API.Controllers.Templates.TemplatesController.ApproveChanges)  [L109–L121] status=200 [auth=AuthorizationPolicies.Administrator]
  └─ uses_service UnitOfWork
    └─ method Table [L113]
      └─ ... (no implementation details available)

[web] POST /api/templates  (Workpapers.Next.API.Controllers.Templates.TemplatesController.CreateTemplate)  [L79–L92] status=201 [auth=AuthorizationPolicies.Administrator]
  └─ maps_to TemplateDto [L91]
  └─ uses_service IMapper
    └─ method Map [L91]
      └─ ... (no implementation details available)
  └─ uses_service UnitOfWork
    └─ method Add [L89]
      └─ ... (no implementation details available)
  └─ uses_service UserService
    └─ method GetUserId [L87]
      └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]

[web] DELETE /api/templates/{id:Guid}  (Workpapers.Next.API.Controllers.Templates.TemplatesController.Delete)  [L123–L136] status=200 [auth=AuthorizationPolicies.Administrator]
  └─ uses_service UnitOfWork
    └─ method Table [L127]
      └─ ... (no implementation details available)

[web] GET /api/templates/{id:Guid}/download  (Workpapers.Next.API.Controllers.Templates.TemplatesController.DownloadTemplate)  [L72–L77] status=200
  └─ sends_request DownloadTemplateQuery [L75]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Templates.DownloadTemplateQueryHandler.Handle [L24–L60]
      └─ uses_service StorageService
        └─ method CreateDownloadUrl [L58]
          └─ implementation Workpapers.Next.Data.Storage.StorageService.CreateDownloadUrl [L17-L282]
      └─ uses_service IControlledRepository<Template>
        └─ method ReadQuery [L45]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L57]
          └─ implementation Workpapers.Next.Services.Features.Requests.RequestProcessor.ProcessAsync [L9-L32]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle
      └─ uses_storage StorageService.CreateDownloadUrl [L58]

[web] GET /api/templates/{id:Guid}  (Workpapers.Next.API.Controllers.Templates.TemplatesController.Get)  [L63–L70] status=200
  └─ maps_to TemplateDto [L66]
  └─ uses_service UnitOfWork
    └─ method Table [L66]
      └─ ... (no implementation details available)

[web] GET /api/templates/for-workpaper-record-template/{id:Guid}  (Workpapers.Next.API.Controllers.Templates.TemplatesController.GetForWorkpaperRecordTemplate)  [L50–L61] status=200 [auth=AuthorizationPolicies.Administrator]
  └─ maps_to TemplateDto [L54]
  └─ uses_service UnitOfWork
    └─ method Table [L54]
      └─ ... (no implementation details available)

[web] PUT /api/templates/{id:Guid}  (Workpapers.Next.API.Controllers.Templates.TemplatesController.UpdateTemplate)  [L94–L107] status=200 [auth=AuthorizationPolicies.Administrator]
  └─ maps_to TemplateDto [L106]
  └─ uses_service IMapper
    └─ method Map [L106]
      └─ ... (no implementation details available)
  └─ uses_service UnitOfWork
    └─ method Table [L98]
      └─ ... (no implementation details available)

[web] GET /api/templates  (Workpapers.Next.API.Controllers.Templates.TemplatesController.UserAuthorisedForTemplate)  [L141–L156] status=200
  └─ uses_service UnitOfWork
    └─ method Table [L143]
      └─ ... (no implementation details available)
  └─ uses_service UserService
    └─ method IsSuperUser [L151]
      └─ implementation Workpapers.Next.ApplicationService.Services.UserService.IsSuperUser [L20-L295]

[web] POST /api/template-versions  (Workpapers.Next.API.Controllers.Templates.TemplateVersionsController.CreateTemplateVersion)  [L95–L110] status=201 [auth=AuthorizationPolicies.User,AuthorizationPolicies.Administrator]
  └─ maps_to TemplateVersionDto [L109]
  └─ uses_service IMapper
    └─ method Map [L109]
      └─ ... (no implementation details available)
  └─ uses_service UnitOfWork
    └─ method Add [L107]
      └─ ... (no implementation details available)
  └─ uses_service UserService
    └─ method GetUserId [L103]
      └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]

[web] DELETE /api/template-versions/{id:Guid}  (Workpapers.Next.API.Controllers.Templates.TemplateVersionsController.DeleteTemplateVersion)  [L143–L156] status=200 [auth=AuthorizationPolicies.User,AuthorizationPolicies.Administrator]
  └─ uses_service UnitOfWork
    └─ method Table [L147]
      └─ ... (no implementation details available)

[web] GET /api/template-versions/{id:Guid}/download  (Workpapers.Next.API.Controllers.Templates.TemplateVersionsController.DownloadTemplateVersion)  [L74–L82] status=200 [auth=AuthorizationPolicies.User,AuthorizationPolicies.Administrator]
  └─ uses_service StorageService
    └─ method CreateDownloadUrl [L81]
      └─ implementation Workpapers.Next.Data.Storage.StorageService.CreateDownloadUrl [L17-L282]
  └─ uses_service UnitOfWork
    └─ method Table [L78]
      └─ ... (no implementation details available)
  └─ uses_storage StorageService.CreateDownloadUrl [L81]

[web] GET /api/template-versions/{id:Guid}  (Workpapers.Next.API.Controllers.Templates.TemplateVersionsController.GetVersion)  [L48–L58] status=200 [auth=AuthorizationPolicies.User,AuthorizationPolicies.Administrator]
  └─ maps_to TemplateVersionDto [L52]
  └─ uses_service UnitOfWork
    └─ method Table [L52]
      └─ ... (no implementation details available)

[web] GET /api/template-versions/for-template/{id:Guid}  (Workpapers.Next.API.Controllers.Templates.TemplateVersionsController.GetVersions)  [L60–L72] status=200 [auth=AuthorizationPolicies.User,AuthorizationPolicies.Administrator]
  └─ maps_to TemplateVersionDto [L66]
  └─ uses_service UnitOfWork
    └─ method Table [L66]
      └─ ... (no implementation details available)

[web] PUT /api/template-versions/{id:Guid}/activate  (Workpapers.Next.API.Controllers.Templates.TemplateVersionsController.SetActive)  [L112–L124] status=200 [auth=AuthorizationPolicies.User,AuthorizationPolicies.Administrator]
  └─ maps_to TemplateVersionDto [L123]
  └─ uses_service IMapper
    └─ method Map [L123]
      └─ ... (no implementation details available)
  └─ uses_service UnitOfWork
    └─ method Table [L116]
      └─ ... (no implementation details available)

[web] GET /api/template-versions/{id:Guid}/reconciliation-fields  (Workpapers.Next.API.Controllers.Templates.TemplateVersionsController.TemplateVersionReconciliationFields)  [L84–L93] status=200 [auth=AuthorizationPolicies.User]
  └─ maps_to DefaultReconciliationFieldDto [L87]
  └─ uses_service UnitOfWork
    └─ method Table [L87]
      └─ ... (no implementation details available)

[web] PUT /api/template-versions/{id:Guid}  (Workpapers.Next.API.Controllers.Templates.TemplateVersionsController.UpdateTemplateVersion)  [L126–L141] status=200 [auth=AuthorizationPolicies.User,AuthorizationPolicies.Administrator]
  └─ maps_to TemplateVersionDto [L140]
  └─ uses_service IMapper
    └─ method Map [L140]
      └─ ... (no implementation details available)
  └─ uses_service UnitOfWork
    └─ method Table [L130]
      └─ ... (no implementation details available)
  └─ uses_service UserService
    └─ method GetUserId [L136]
      └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]

[web] GET /api/template-versions  (Workpapers.Next.API.Controllers.Templates.TemplateVersionsController.UserAuthorisedForTemplate)  [L161–L176] status=200 [auth=AuthorizationPolicies.User]
  └─ uses_service UnitOfWork
    └─ method Table [L163]
      └─ ... (no implementation details available)
  └─ uses_service UserService
    └─ method IsSuperUser [L171]
      └─ implementation Workpapers.Next.ApplicationService.Services.UserService.IsSuperUser [L20-L295]

[web] POST /api/workpaper-record-template-notes  (Workpapers.Next.API.Controllers.Templates.WorkpaperRecordTemplateNotesController.CreateWorkpaperRecordTemplateNotes)  [L62–L71] status=201 [auth=AuthorizationPolicies.SuperUser]
  └─ maps_to WorkpaperRecordTemplateNoteDto [L70]
  └─ uses_service IMapper
    └─ method Map [L70]
      └─ ... (no implementation details available)
  └─ uses_service UnitOfWork
    └─ method Add [L68]
      └─ ... (no implementation details available)
  └─ uses_service UserService
    └─ method GetUserId [L65]
      └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]

[web] DELETE /api/workpaper-record-template-notes/{id:Guid}  (Workpapers.Next.API.Controllers.Templates.WorkpaperRecordTemplateNotesController.Delete)  [L84–L92] status=200 [auth=AuthorizationPolicies.SuperUser]
  └─ uses_service UnitOfWork
    └─ method Table [L87]
      └─ ... (no implementation details available)

[web] GET /api/workpaper-record-template-notes/{id:Guid}  (Workpapers.Next.API.Controllers.Templates.WorkpaperRecordTemplateNotesController.GetNote)  [L53–L60] status=200 [auth=AuthorizationPolicies.SuperUser]
  └─ maps_to WorkpaperRecordTemplateNoteDto [L56]
  └─ uses_service UnitOfWork
    └─ method Table [L56]
      └─ ... (no implementation details available)

[web] GET /api/workpaper-record-template-notes/for-workpaper-record-template/{id:Guid}  (Workpapers.Next.API.Controllers.Templates.WorkpaperRecordTemplateNotesController.GetNotes)  [L42–L51] status=200 [auth=AuthorizationPolicies.SuperUser]
  └─ maps_to WorkpaperRecordTemplateNoteDto [L45]
  └─ uses_service UnitOfWork
    └─ method Table [L45]
      └─ ... (no implementation details available)

[web] PUT /api/workpaper-record-template-notes/{id:Guid}  (Workpapers.Next.API.Controllers.Templates.WorkpaperRecordTemplateNotesController.UpdateWorkpaperRecordTemplateNote)  [L73–L82] status=200 [auth=AuthorizationPolicies.SuperUser]
  └─ maps_to WorkpaperRecordTemplateNoteDto [L81]
  └─ uses_service IMapper
    └─ method Map [L81]
      └─ ... (no implementation details available)
  └─ uses_service UnitOfWork
    └─ method Table [L76]
      └─ ... (no implementation details available)

[web] POST /api/workpaper-record-templates  (Workpapers.Next.API.Controllers.Templates.WorkpaperRecordTemplatesController.CreateWorkpaperRecordTemplate)  [L99–L114] status=201 [auth=AuthorizationPolicies.Administrator]
  └─ uses_service UserService
    └─ method IsSuperUser [L106]
      └─ implementation Workpapers.Next.ApplicationService.Services.UserService.IsSuperUser [L20-L295]
  └─ sends_request CreateWorkpaperRecordTemplateCommand [L111]
    └─ handled_by Workpapers.Next.ApplicationService.Commands.WorkpaperTemplates.CreateOrUpdateWorkpaperRecordTemplateCommandHandler.Handle [L43–L91]
      └─ uses_service UserService
        └─ method GetUserId [L78]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
      └─ uses_service UnitOfWork
        └─ method Add [L61]
          └─ ... (no implementation details available)

[web] DELETE /api/workpaper-record-templates/hard-delete/{id:Guid}  (Workpapers.Next.API.Controllers.Templates.WorkpaperRecordTemplatesController.Delete)  [L160–L191] status=200 [auth=AuthorizationPolicies.Administrator]
  └─ calls ArchivedWorkpaperRecordTemplateMappingRepository.Add [L186]
  └─ calls ArchivedWorkpaperRecordTemplateMappingRepository.WriteQuery [L175]
  └─ calls WorkpaperRecordTemplateRepository.Remove [L188]
  └─ calls WorkpaperRecordTemplateRepository.WriteQuery [L165]
  └─ insert ArchivedWorkpaperRecordTemplateMapping [L186]
    └─ reads_from ArchivedWorkpaperRecordTemplateMappings
  └─ write ArchivedWorkpaperRecordTemplateMapping [L175]
    └─ reads_from ArchivedWorkpaperRecordTemplateMappings
  └─ delete WorkpaperRecordTemplate [L188]
    └─ reads_from WorkpaperTemplates
  └─ write WorkpaperRecordTemplate [L165]
    └─ reads_from WorkpaperTemplates
  └─ uses_service IControlledRepository<ArchivedWorkpaperRecordTemplateMapping>
    └─ method WriteQuery [L175]
      └─ ... (no implementation details available)
  └─ uses_service IControlledRepository<WorkpaperRecordTemplate>
    └─ method WriteQuery [L165]
      └─ ... (no implementation details available)

[web] GET /api/workpaper-record-templates/{id:Guid}/download-template  (Workpapers.Next.API.Controllers.Templates.WorkpaperRecordTemplatesController.DownloadTemplate)  [L84–L89] status=200
  └─ sends_request DownloadTemplateQuery [L88]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Templates.DownloadTemplateQueryHandler.Handle [L24–L60]
      └─ uses_service StorageService
        └─ method CreateDownloadUrl [L58]
          └─ implementation Workpapers.Next.Data.Storage.StorageService.CreateDownloadUrl [L17-L282]
      └─ uses_service IControlledRepository<Template>
        └─ method ReadQuery [L45]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L57]
          └─ implementation Workpapers.Next.Services.Features.Requests.RequestProcessor.ProcessAsync [L9-L32]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle
      └─ uses_storage StorageService.CreateDownloadUrl [L58]
  └─ sends_request GetWorkpaperRecordTemplateToInsertQuery [L87]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Templates.GetWorkpaperRecordTemplateToInsertQueryHandler.Handle [L36–L71]
      └─ maps_to TemplateLightDto [L69]
      └─ uses_service IControlledRepository<Binder>
        └─ method ReadQuery [L57]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<WorkpaperRecordTemplate>
        └─ method ReadQuery [L62]
          └─ ... (no implementation details available)
      └─ uses_service IMapper
        └─ method Map [L69]
          └─ ... (no implementation details available)

[web] GET /api/workpaper-record-templates/{id:Guid}  (Workpapers.Next.API.Controllers.Templates.WorkpaperRecordTemplatesController.Get)  [L72–L76] status=200
  └─ sends_request GetWorkpaperRecordTemplateQuery [L75]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Templates.GetWorkpaperRecordTemplateQueryHandler.Handle [L22–L144]
      └─ maps_to SectionLightDto [L82]
      └─ maps_to WorkpaperRecordTemplateAsFirmDto [L49]
      └─ maps_to WorkpaperRecordTemplateAsSuperDto [L48]
      └─ maps_to WorkpaperRecordTemplateLightWithTemplatesDto [L73]
      └─ maps_to WorkpaperRecordTemplateUltraLightDto [L56]
      └─ uses_service UserService
        └─ method IsSuperUser [L47]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.IsSuperUser [L20-L295]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.IsSuperUser [L20-L295]
      └─ uses_service IControlledRepository<ArchivedWorkpaperRecordTemplateMapping>
        └─ method ReadQuery [L56]
          └─ ... (no implementation details available)
      └─ uses_service IMapper
        └─ method ConfigurationProvider [L48]
          └─ ... (no implementation details available)
      └─ uses_service UnitOfWork
        └─ method Table [L51]
          └─ ... (no implementation details available)

[web] GET /api/workpaper-record-templates/archive-maps  (Workpapers.Next.API.Controllers.Templates.WorkpaperRecordTemplatesController.GetArchivedWorkpaperRecordTemplateMappings)  [L193–L201] status=200 [auth=AuthorizationPolicies.SuperUser]
  └─ maps_to ArchivedWorkpaperRecordTemplateMappingDto [L198]
    └─ automapper.registration WorkpapersMappingProfile (ArchivedWorkpaperRecordTemplateMapping->ArchivedWorkpaperRecordTemplateMappingDto) [L365]
  └─ calls ArchivedWorkpaperRecordTemplateMappingRepository.ReadQuery [L198]
  └─ query ArchivedWorkpaperRecordTemplateMapping [L198]
    └─ reads_from ArchivedWorkpaperRecordTemplateMappings
  └─ uses_service IControlledRepository<ArchivedWorkpaperRecordTemplateMapping>
    └─ method ReadQuery [L198]
      └─ ... (no implementation details available)

[web] GET /api/workpaper-record-templates/{id:Guid}/template  (Workpapers.Next.API.Controllers.Templates.WorkpaperRecordTemplatesController.GetTemplate)  [L78–L82] status=200
  └─ sends_request GetWorkpaperRecordTemplateToInsertQuery [L81]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Templates.GetWorkpaperRecordTemplateToInsertQueryHandler.Handle [L36–L71]
      └─ maps_to TemplateLightDto [L69]
      └─ uses_service IControlledRepository<Binder>
        └─ method ReadQuery [L57]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<WorkpaperRecordTemplate>
        └─ method ReadQuery [L62]
          └─ ... (no implementation details available)
      └─ uses_service IMapper
        └─ method Map [L69]
          └─ ... (no implementation details available)

[web] GET /api/workpaper-record-templates/{id:Guid}/sections  (Workpapers.Next.API.Controllers.Templates.WorkpaperRecordTemplatesController.GetTemplateSections)  [L91–L97] status=200
  └─ sends_request GetWorkpaperRecordTemplateSectionsQuery [L94]

[web] GET /api/workpaper-record-templates  (Workpapers.Next.API.Controllers.Templates.WorkpaperRecordTemplatesController.GetWorkpaperRecordTemplateParams)  [L231–L251] status=200
  └─ uses_service UnitOfWork
    └─ method Table [L236]
      └─ ... (no implementation details available)

[web] GET /api/workpaper-record-templates/global  (Workpapers.Next.API.Controllers.Templates.WorkpaperRecordTemplatesController.GlobalSearch)  [L66–L70] status=200
  └─ sends_request FindWorkpaperRecordTemplatesGlobalQuery [L69]

[web] GET /api/workpaper-record-templates  (Workpapers.Next.API.Controllers.Templates.WorkpaperRecordTemplatesController.Search)  [L60–L64] status=200
  └─ sends_request FindWorkpaperRecordTemplatesQuery [L63]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Workpapers.GetWorkpaperRecordTemplatesPagedQueryHandler.Handle [L62–L277]
      └─ maps_to SectionLightDto [L111]
      └─ uses_service UserService
        └─ method IsSuperUser [L97]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.IsSuperUser [L20-L295]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.IsSuperUser [L20-L295]
      └─ uses_service IControlledRepository<Binder>
        └─ method ReadQuery [L194]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<WorkpaperRecordTemplate>
        └─ method ReadQuery [L130]
          └─ ... (no implementation details available)
      └─ uses_service IMapper
        └─ method Map [L111]
          └─ ... (no implementation details available)
      └─ uses_service UnitOfWork
        └─ method Table [L97]
          └─ ... (no implementation details available)

[web] PUT /api/workpaper-record-templates/archive-maps/{workpaperRecordTemplateId:guid}  (Workpapers.Next.API.Controllers.Templates.WorkpaperRecordTemplatesController.UpdateArchivedWorkpaperRecordTemplateMapping)  [L203–L216] status=200 [auth=AuthorizationPolicies.SuperUser]
  └─ calls ArchivedWorkpaperRecordTemplateMappingRepository.WriteQuery [L209]
  └─ write ArchivedWorkpaperRecordTemplateMapping [L209]
    └─ reads_from ArchivedWorkpaperRecordTemplateMappings
  └─ uses_service IControlledRepository<ArchivedWorkpaperRecordTemplateMapping>
    └─ method WriteQuery [L209]
      └─ ... (no implementation details available)

[web] PUT /api/workpaper-record-templates/{id:Guid}/include/{include:bool}  (Workpapers.Next.API.Controllers.Templates.WorkpaperRecordTemplatesController.UpdateIncludes)  [L139–L158] status=200 [auth=AuthorizationPolicies.Administrator]
  └─ calls WorkpaperRecordTemplateRepository.WriteQuery [L146]
  └─ write WorkpaperRecordTemplate [L146]
    └─ reads_from WorkpaperTemplates
  └─ uses_service IControlledRepository<WorkpaperRecordTemplate>
    └─ method WriteQuery [L146]
      └─ ... (no implementation details available)
  └─ uses_service UserService
    └─ method GetFirmId [L144]
      └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetFirmId [L20-L295]

[web] PUT /api/workpaper-record-templates/{id:Guid}  (Workpapers.Next.API.Controllers.Templates.WorkpaperRecordTemplatesController.UpdateWorkpaperRecordTemplate)  [L116–L137] status=200 [auth=AuthorizationPolicies.Administrator]
  └─ calls WorkpaperRecordTemplateRepository.WriteQuery [L121]
  └─ write WorkpaperRecordTemplate [L121]
    └─ reads_from WorkpaperTemplates
  └─ uses_service IControlledRepository<WorkpaperRecordTemplate>
    └─ method WriteQuery [L121]
      └─ ... (no implementation details available)
  └─ uses_service UserService
    └─ method IsSuperUser [L123]
      └─ implementation Workpapers.Next.ApplicationService.Services.UserService.IsSuperUser [L20-L295]
  └─ sends_request UpdateWorkpaperRecordTemplateCommand [L134]

[web] POST /api/useroffices/  (Workpapers.Next.API.Controllers.UserOfficesController.Create)  [L80–L90] status=201 [auth=admin]
  └─ uses_service UnitOfWork
    └─ method Add [L87]
      └─ ... (no implementation details available)
  └─ uses_service UserService
    └─ method GetFirmId [L86]
      └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetFirmId [L20-L295]

[web] DELETE /api/useroffices/{id:int}  (Workpapers.Next.API.Controllers.UserOfficesController.Delete)  [L107–L115] status=200 [auth=admin]
  └─ uses_service UnitOfWork
    └─ method Table [L110]
      └─ ... (no implementation details available)

[web] GET /api/useroffices/{id}  (Workpapers.Next.API.Controllers.UserOfficesController.Get)  [L48–L55] status=200
  └─ maps_to UserOfficeDto [L51]
  └─ uses_service UnitOfWork
    └─ method Table [L51]
      └─ ... (no implementation details available)

[web] GET /api/useroffices/foroffice/{officeId:Guid}  (Workpapers.Next.API.Controllers.UserOfficesController.GetAllForOffice)  [L64–L74] status=200
  └─ maps_to UserOfficeDto [L67]
  └─ uses_service UnitOfWork
    └─ method Table [L67]
      └─ ... (no implementation details available)

[web] PUT /api/useroffices/{id}  (Workpapers.Next.API.Controllers.UserOfficesController.Update)  [L95–L102] status=200 [auth=admin]
  └─ uses_service UnitOfWork
    └─ method Table [L98]
      └─ ... (no implementation details available)

[web] GET /api/users/checkemail  (Workpapers.Next.API.Controllers.UsersController.CheckEmail)  [L221–L231] status=200
  └─ calls UserRepository.ReadQuery [L228]
  └─ query User [L228]
  └─ uses_service IControlledRepository<User>
    └─ method ReadQuery [L228]
      └─ ... (no implementation details available)

[web] DELETE /api/users/{id}  (Workpapers.Next.API.Controllers.UsersController.Delete)  [L207–L219] status=200 [auth=AuthorizationPolicies.Administrator]
  └─ calls UserRepository.WriteQuery [L211]
  └─ write User [L211]
  └─ uses_service IControlledRepository<User>
    └─ method WriteQuery [L211]
      └─ ... (no implementation details available)

[web] GET /api/users/{id:Guid}  (Workpapers.Next.API.Controllers.UsersController.Get)  [L108–L117] status=200
  └─ maps_to UserDto [L111]
    └─ automapper.registration ExternalApiMappingProfile (User->UserDto) [L61]
    └─ automapper.registration CirrusMappingProfile (User->UserDto) [L110]
    └─ automapper.registration WorkpapersMappingProfile (User->UserDto) [L106]
    └─ automapper.registration DataverseMappingProfile (User->UserDto) [L77]
  └─ calls UserRepository.ReadQuery [L111]
  └─ query User [L111]
  └─ uses_service IControlledRepository<User>
    └─ method ReadQuery [L111]
      └─ ... (no implementation details available)

[web] GET /api/users/all  (Workpapers.Next.API.Controllers.UsersController.GetAll)  [L56–L70] status=200 [auth=AuthorizationPolicies.SuperUser]
  └─ sends_request GetPagedUsersQuery [L69]

[web] GET /api/users  (Workpapers.Next.API.Controllers.UsersController.GetAllMyFirm)  [L72–L89] status=200
  └─ sends_request GetUsersQuery [L86]
    └─ handled_by DataGet.Integrations.Fyi.Api.Queries.GetUsersQueryHandler.Handle [L19–L36]
      └─ uses_service FyiService
        └─ method GetUsers [L30]
          └─ implementation DataGet.Integrations.Fyi.Api.FyiService.GetUsers [L30-L166]
  └─ sends_request GetPagedUsersQuery [L88]

[web] GET /api/users/fromcentral/{id}  (Workpapers.Next.API.Controllers.UsersController.GetByCentralId)  [L119–L129] status=200 [auth=AuthorizationPolicies.User]
  └─ maps_to UserDto (var user) [L123]
  └─ calls UserRepository.ReadQuery [L123]
  └─ query User [L123]
  └─ uses_service IControlledRepository<User>
    └─ method ReadQuery [L123]
      └─ ... (no implementation details available)
  └─ uses_service IMapper
    └─ method Map [L123]
      └─ ... (no implementation details available)

[web] GET /api/users/byfirm/{firmId:Guid}  (Workpapers.Next.API.Controllers.UsersController.GetForFirm)  [L91–L106] status=200 [auth=AuthorizationPolicies.SuperUser]
  └─ sends_request GetPagedUsersQuery [L105]

[web] GET /api/users/intercom-profile  (Workpapers.Next.API.Controllers.UsersController.GetIntercomProfile)  [L149–L155] status=200 [auth=AuthorizationPolicies.User]
  └─ sends_request GetIntercomProfileQuery [L153]
    └─ handled_by Cirrus.Central.Dataverse.Queries.GetIntercomProfileQueryHandler.Handle [L24–L61]
      └─ uses_service UserService
        └─ method GetUser [L42]
          └─ implementation Cirrus.ApplicationService.Services.UserService.GetUser [L14-L122]
      └─ uses_service TenantService
        └─ method GetCurrentTenant [L39]
          └─ implementation Cirrus.Central.Tenants.TenantService.GetCurrentTenant [L26-L139]
          └─ implementation Cirrus.Central.Tenants.TenantService.GetCurrentTenant [L26-L139]
      └─ uses_service DataverseService
        └─ method Get [L52]
          └─ implementation Cirrus.Central.Features.MachineToMachine.DataverseService.Get [L14-L66]
  └─ returns IntercomProfileDto [L153]

[web] GET /api/users/profile  (Workpapers.Next.API.Controllers.UsersController.GetMyProfile)  [L131–L147] status=200 [auth=AuthorizationPolicies.User]
  └─ maps_to UserProfileDto [L135]
    └─ automapper.registration DataverseMappingProfile (User->UserProfileDto) [L93]
    └─ automapper.registration CirrusMappingProfile (User->UserProfileDto) [L115]
    └─ automapper.registration WorkpapersMappingProfile (User->UserProfileDto) [L109]
  └─ calls UserRepository.ReadQuery [L135]
  └─ query User [L135]
  └─ uses_service FirmSettingsService
    └─ method GetCurrentSettings [L137]
      └─ implementation Workpapers.Next.API.Features.FirmSettings.FirmSettingsService.GetCurrentSettings [L23-L154]
      └─ implementation Workpapers.Next.API.Features.FirmSettings.FirmSettingsService.GetCurrentSettings [L23-L154]
  └─ uses_service IControlledRepository<User>
    └─ method ReadQuery [L135]
      └─ ... (no implementation details available)
  └─ uses_service FirmFeatureFlagService
    └─ method GetAvailableFeaturesForFirm [L144]
      └─ implementation Workpapers.Next.ApplicationService.Features.FeatureFlags.FirmFeatureFlagService.GetAvailableFeaturesForFirm [L14-L110]
  └─ uses_service UserService
    └─ method GetUserId [L135]
      └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
  └─ sends_request GetDataverseProfileQuery [L139]
    └─ handled_by Cirrus.Central.Dataverse.Queries.GetDataverseProfileQueryHandler.Handle [L25–L66]
      └─ uses_service FirmSettingsService
        └─ method StoreSettings [L57]
          └─ implementation Cirrus.ApplicationService.Firm.FirmSettingsService.StoreSettings [L15-L112]
      └─ uses_service UserService
        └─ method GetUser [L46]
          └─ implementation Cirrus.ApplicationService.Services.UserService.GetUser [L14-L122]
      └─ uses_service TenantService
        └─ method GetCurrentTenant [L43]
          └─ implementation Cirrus.Central.Tenants.TenantService.GetCurrentTenant [L26-L139]
          └─ implementation Cirrus.Central.Tenants.TenantService.GetCurrentTenant [L26-L139]
      └─ uses_service DataverseService
        └─ method Get [L56]
          └─ implementation Cirrus.Central.Features.MachineToMachine.DataverseService.Get [L14-L66]
  └─ returns DataverseProfileDto [L139]

[web] POST /api/users/{id}/request-identity-account  (Workpapers.Next.API.Controllers.UsersController.Invite)  [L178–L190] status=201 [auth=AuthorizationPolicies.Administrator]
  └─ calls UserRepository.WriteQuery [L182]
  └─ write User [L182]
  └─ uses_service IControlledRepository<User>
    └─ method WriteQuery [L182]
      └─ ... (no implementation details available)

[web] POST /api/users  (Workpapers.Next.API.Controllers.UsersController.Post)  [L157–L164] status=201 [auth=AuthorizationPolicies.Administrator]
  └─ sends_request CreateUserCommand [L161]
    └─ handled_by Workpapers.Next.Data.Commands.Users.CreateUserCommandHandler.Handle [L12–L33]
      └─ uses_service UnitOfWork
        └─ method Table [L25]
          └─ ... (no implementation details available)

[web] PUT /api/users/{id}  (Workpapers.Next.API.Controllers.UsersController.Put)  [L192–L205] status=200 [auth=AuthorizationPolicies.User]
  └─ calls UserRepository.WriteQuery [L196]
  └─ write User [L196]
  └─ uses_service IControlledRepository<User>
    └─ method WriteQuery [L196]
      └─ ... (no implementation details available)

[web] POST /api/users/{id}/resendinvite  (Workpapers.Next.API.Controllers.UsersController.ResendInvite)  [L166–L176] status=201 [auth=AuthorizationPolicies.Administrator]
  └─ calls UserRepository.WriteQuery [L170]
  └─ write User [L170]
  └─ uses_service IControlledRepository<User>
    └─ method WriteQuery [L170]
      └─ ... (no implementation details available)
  └─ sends_request ResendIdentityInviteCommand [L173]
    └─ handled_by Workpapers.Next.ApplicationService.Commands.Identity.ResendIdentityInviteCommandHandler.Handle [L25–L50]
      └─ uses_service DataverseService
        └─ method Post [L39]
          └─ implementation Workpapers.Next.Dataverse.Service.DataverseService.Post [L17-L127]

[web] GET /api/wholesalers  (Workpapers.Next.API.Controllers.WholesalerController.GetWholesalers)  [L31–L38] status=200 [auth=AuthorizationPolicies.SuperUser]
  └─ maps_to WholesalerDto [L34]
  └─ uses_service UnitOfWork
    └─ method Table [L34]
      └─ ... (no implementation details available)

[web] GET /api/workpaperitems  (Workpapers.Next.API.Controllers.WorkpaperItemsController.CheckIsAuthorized)  [L268–L278] status=200
  └─ uses_service UnitOfWork
    └─ method Table [L270]
      └─ ... (no implementation details available)
  └─ uses_service UserService
    └─ method GetFirmId [L272]
      └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetFirmId [L20-L295]

[web] DELETE /api/workpaperitems/{id}  (Workpapers.Next.API.Controllers.WorkpaperItemsController.Delete)  [L213–L223] status=200
  └─ uses_service UnitOfWork
    └─ method Table [L216]
      └─ ... (no implementation details available)

[web] GET /api/workpaperitems/{id:guid}  (Workpapers.Next.API.Controllers.WorkpaperItemsController.Get)  [L58–L70] status=200
  └─ maps_to WorkpaperItemWithConversationDto [L61]
  └─ uses_service UnitOfWork
    └─ method Table [L61]
      └─ ... (no implementation details available)

[web] GET /api/workpaperitems/byworkbook/{workbookId}/{worksheetId}/byrangename/{rangeName}  (Workpapers.Next.API.Controllers.WorkpaperItemsController.GetByRange)  [L151–L164] status=200
  └─ maps_to WorkpaperItemDto [L154]
  └─ uses_service UnitOfWork
    └─ method Table [L154]
      └─ ... (no implementation details available)

[web] GET /api/workpaperitems/byuser/count  (Workpapers.Next.API.Controllers.WorkpaperItemsController.GetCountForUser)  [L85–L93] status=200
  └─ uses_service UnitOfWork
    └─ method Table [L89]
      └─ ... (no implementation details available)
  └─ uses_service UserService
    └─ method GetUserId [L90]
      └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]

[web] GET /api/workpaperitems/byuser  (Workpapers.Next.API.Controllers.WorkpaperItemsController.GetForUser)  [L72–L83] status=200
  └─ maps_to WorkpaperItemDto [L76]
  └─ uses_service UnitOfWork
    └─ method Table [L76]
      └─ ... (no implementation details available)
  └─ uses_service UserService
    └─ method GetUserId [L77]
      └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]

[web] GET /api/workpaperitems/byworkbook/{workbookId}  (Workpapers.Next.API.Controllers.WorkpaperItemsController.GetForWorkbook)  [L95–L105] status=200
  └─ maps_to WorkpaperItemDto [L98]
  └─ uses_service UnitOfWork
    └─ method Table [L98]
      └─ ... (no implementation details available)

[web] GET /api/workpaperitems/byworkbook/{workbookId}/detailed  (Workpapers.Next.API.Controllers.WorkpaperItemsController.GetForWorkbookDetailed)  [L107–L117] status=200
  └─ maps_to WorkpaperItemWithConversationDto [L110]
  └─ uses_service UnitOfWork
    └─ method Table [L110]
      └─ ... (no implementation details available)

[web] GET /api/workpaperitems/byworkbook/unresolved/{workbookId}  (Workpapers.Next.API.Controllers.WorkpaperItemsController.GetForWorkbookUnresolved)  [L119–L137] status=200
  └─ uses_service UnitOfWork
    └─ method Table [L122]
      └─ ... (no implementation details available)

[web] GET /api/workpaperitems/byworkbook/{workbookId}/{worksheetId}  (Workpapers.Next.API.Controllers.WorkpaperItemsController.GetForWorksheet)  [L139–L149] status=200
  └─ maps_to WorkpaperItemDto [L142]
  └─ uses_service UnitOfWork
    └─ method Table [L142]
      └─ ... (no implementation details available)

[web] POST /api/workpaperitems/{workpaperItemId:Guid}/postmessage  (Workpapers.Next.API.Controllers.WorkpaperItemsController.Post)  [L174–L188] status=201
  └─ calls ConversationRepository.WriteQuery [L182]
  └─ write Conversation [L182]
    └─ reads_from Conversations
  └─ uses_service IControlledRepository<Conversation>
    └─ method WriteQuery [L182]
      └─ ... (no implementation details available)
  └─ uses_service UnitOfWork
    └─ method Table [L177]
      └─ ... (no implementation details available)
  └─ uses_service UserService
    └─ method GetUserId [L185]
      └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]

[web] PUT /api/workpaperitems/  (Workpapers.Next.API.Controllers.WorkpaperItemsController.Put)  [L190–L196] status=200
  └─ sends_request CreateUpdateWorkpaperItemCommand [L193]
    └─ handled_by Workpapers.Next.Data.Commands.WorkpaperItems.CreateUpdateWorkpaperItemCommandHandler.Handle [L15–L58]
      └─ uses_service UserService
        └─ method GetUserId [L34]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
      └─ uses_service UnitOfWork
        └─ method Add [L36]
          └─ ... (no implementation details available)

[web] PUT /api/workpaperitems/rollover  (Workpapers.Next.API.Controllers.WorkpaperItemsController.Rollover)  [L225–L256] status=200
  └─ uses_service UnitOfWork
    └─ method Table [L228]
      └─ ... (no implementation details available)
  └─ sends_request RolloverWorkpaperItemCommand [L252]
    └─ handled_by Workpapers.Next.Data.Commands.WorkpaperItems.RolloverWorkpaperItemCommandHandler.Handle [L11–L29]
      └─ uses_service UnitOfWork
        └─ method Add [L25]
          └─ ... (no implementation details available)

[web] PUT /api/workpaperitems/updatestatusbulk  (Workpapers.Next.API.Controllers.WorkpaperItemsController.UpdateStatus)  [L198–L211] status=200
  └─ uses_service UnitOfWork
    └─ method Table [L204]
      └─ ... (no implementation details available)

[web] GET /api/ato/export-pdf  (Workpapers.Next.API.Controllers.Workpapers.AtoController.ExportIcaItaToPdf)  [L90–L108] status=200 [auth=AuthorizationPolicies.User]

[web] GET /api/ato/activity-statements  (Workpapers.Next.API.Controllers.Workpapers.AtoController.GetActivityStatements)  [L34–L40] status=200 [auth=AuthorizationPolicies.User]
  └─ sends_request GetActivityStatementsQuery [L37]
    └─ handled_by GovLink.Application.Queries.ActivityStatements.GetActivityStatementQueryHandler.Handle [L90–L198]
      └─ uses_client IAtoClient [L110]
      └─ uses_service IAtoClient (AddScoped)
        └─ method RequestAsync [L110]
          └─ ... (no implementation details available)
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Workpapers.GovLink.GetActivityStatementsQueryHandler.Handle [L32–L66]
      └─ uses_client DataGetClient [L60]
        └─ calls GetActivityStatementsDetail (GET /api/gov-link/activity-statements/detail?clientABN={*}&clientABNBranch={*}&clientId={*}&clientTFN={*}&endDate={*}&forceSync={*}&softwareSubscriptionId={*}&startDate={*}&taxAgentABN={*}&taxAgentNumber={*}, method=GetActivityStatementsAsync, target=DataGet.Api, query=clientABN={*}&clientABNBranch={*}&clientId={*}&clientTFN={*}&endDate={*}&forceSync={*}&softwareSubscriptionId={*}&startDate={*}&taxAgentABN={*}&taxAgentNumber={*}) [L214]
          └─ target_service DataGet.Api
            └─ [web] GET /api/gov-link/activity-statements/detail  (DataGet.Api.Controllers.GovLink.ActivityStatementController.GetActivityStatementsDetail)  [L33–L42] status=200 [auth=Authentication.MachineToMachinePolicy]
      └─ uses_service DataGetClient
        └─ method GetActivityStatementsAsync [L60]
          └─ implementation Workpapers.Next.DataGet.Client.DataGetClient.GetActivityStatementsAsync [L32-L506]
            └─ calls GetActivityStatementsDetail [L214]
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L52]
          └─ implementation Workpapers.Next.Services.Features.Requests.RequestProcessor.ProcessAsync [L9-L32]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle

[web] GET /api/ato/activity-statements/summary  (Workpapers.Next.API.Controllers.Workpapers.AtoController.GetActivityStatementSummary)  [L42–L48] status=200 [auth=AuthorizationPolicies.User]
  └─ sends_request GetActivityStatementSummaryQuery [L45]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Workpapers.GovLink.GetActivityStatementSummaryQueryHandler.Handle [L31–L64]
      └─ uses_client DataGetClient [L58]
        └─ calls GetActivityStatementSummary (GET /api/gov-link/activity-statements/summary?clientABN={*}&clientABNBranch={*}&clientId={*}&clientTFN={*}&endDate={*}&forceSync={*}&softwareSubscriptionId={*}&startDate={*}&taxAgentABN={*}&taxAgentNumber={*}, method=GetActivityStatementSummaryAsync, target=DataGet.Api, query=clientABN={*}&clientABNBranch={*}&clientId={*}&clientTFN={*}&endDate={*}&forceSync={*}&softwareSubscriptionId={*}&startDate={*}&taxAgentABN={*}&taxAgentNumber={*}) [L231]
          └─ target_service DataGet.Api
            └─ [web] GET /api/gov-link/activity-statements/summary  (DataGet.Api.Controllers.GovLink.ActivityStatementController.GetActivityStatementSummary)  [L44–L53] status=200 [auth=Authentication.MachineToMachinePolicy]
      └─ uses_service DataGetClient
        └─ method GetActivityStatementSummaryAsync [L58]
          └─ implementation Workpapers.Next.DataGet.Client.DataGetClient.GetActivityStatementSummaryAsync [L32-L506]
            └─ calls GetActivityStatementSummary [L231]
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L50]
          └─ implementation Workpapers.Next.Services.Features.Requests.RequestProcessor.ProcessAsync [L9-L32]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle

[web] GET /api/ato/client-account-transactions  (Workpapers.Next.API.Controllers.Workpapers.AtoController.GetClientAccountTransactions)  [L50–L60] status=200 [auth=AuthorizationPolicies.User]
  └─ sends_request GetClientAccountTransactionsQuery [L56]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Workpapers.GovLink.GetClientAccountTransactionsQueryHandler.Handle [L36–L77]
      └─ uses_client DataGetClient [L64]
        └─ calls GetTransactionDetail (GET /api/gov-link/client-accounts/detail?clientABN={*}&clientABNBranch={*}&clientAccountType={*}&clientId={*}&clientTFN={*}&endDate={*}&forceSync={*}&softwareSubscriptionId={*}&startDate={*}&taxAgentABN={*}&taxAgentNumber={*}, method=GetClientAccountDetailsAsync, target=DataGet.Api, query=clientABN={*}&clientABNBranch={*}&clientAccountType={*}&clientId={*}&clientTFN={*}&endDate={*}&forceSync={*}&softwareSubscriptionId={*}&startDate={*}&taxAgentABN={*}&taxAgentNumber={*}) [L250]
          └─ target_service DataGet.Api
            └─ [web] GET /api/gov-link/client-accounts/detail  (DataGet.Api.Controllers.GovLink.ClientAccountController.GetTransactionDetail)  [L22–L31] status=200 [auth=Authentication.MachineToMachinePolicy]
      └─ uses_service DataGetClient
        └─ method GetClientAccountDetailsAsync [L64]
          └─ implementation Workpapers.Next.DataGet.Client.DataGetClient.GetClientAccountDetailsAsync [L32-L506]
            └─ calls GetTransactionDetail [L250]
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L55]
          └─ implementation Workpapers.Next.Services.Features.Requests.RequestProcessor.ProcessAsync [L9-L32]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle

[web] GET /api/ato/client-account-transactions/summary  (Workpapers.Next.API.Controllers.Workpapers.AtoController.GetClientAccountTransactionSummary)  [L62–L72] status=200 [auth=AuthorizationPolicies.User]
  └─ sends_request GetClientAccountTransactionSummaryQuery [L68]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Workpapers.GovLink.GetClientAccountTransactionSummaryQueryHandler.Handle [L35–L70]
      └─ uses_client DataGetClient [L64]
        └─ calls GetTransactionSummary (GET /api/gov-link/client-accounts/summary?clientABN={*}&clientABNBranch={*}&clientAccountType={*}&clientId={*}&clientTFN={*}&endDate={*}&forceSync={*}&softwareSubscriptionId={*}&startDate={*}&taxAgentABN={*}&taxAgentNumber={*}, method=GetClientAccountSummaryAsync, target=DataGet.Api, query=clientABN={*}&clientABNBranch={*}&clientAccountType={*}&clientId={*}&clientTFN={*}&endDate={*}&forceSync={*}&softwareSubscriptionId={*}&startDate={*}&taxAgentABN={*}&taxAgentNumber={*}) [L269]
          └─ target_service DataGet.Api
            └─ [web] GET /api/gov-link/client-accounts/summary  (DataGet.Api.Controllers.GovLink.ClientAccountController.GetTransactionSummary)  [L33–L42] status=200 [auth=Authentication.MachineToMachinePolicy]
      └─ uses_service DataGetClient
        └─ method GetClientAccountSummaryAsync [L64]
          └─ implementation Workpapers.Next.DataGet.Client.DataGetClient.GetClientAccountSummaryAsync [L32-L506]
            └─ calls GetTransactionSummary [L269]
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L54]
          └─ implementation Workpapers.Next.Services.Features.Requests.RequestProcessor.ProcessAsync [L9-L32]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle

[web] GET /api/ato/individual-income-tax-returns  (Workpapers.Next.API.Controllers.Workpapers.AtoController.GetIndividualIncomeTaxReturns)  [L74–L80] status=200 [auth=AuthorizationPolicies.User]
  └─ sends_request GetIndividualIncomeTaxReturnQuery [L77]
    └─ handled_by GovLink.Application.Queries.IITR.GetIndividualIncomeTaxReturnQueryHandler.Handle [L89–L120]
      └─ uses_client IAtoClient [L103]
      └─ uses_service IAtoClient (AddScoped)
        └─ method RequestAsync [L103]
          └─ ... (no implementation details available)
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Workpapers.GovLink.GetIndividualIncomeTaxReturnQueryHandler.Handle [L33–L73]
      └─ uses_client DataGetClient [L60]
      └─ uses_service DataGetClient
        └─ method GetIndividualIncomeTaxReturnAsync [L60]
          └─ implementation Workpapers.Next.DataGet.Client.DataGetClient.GetIndividualIncomeTaxReturnAsync [L32-L506]
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L52]
          └─ implementation Workpapers.Next.Services.Features.Requests.RequestProcessor.ProcessAsync [L9-L32]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle
  └─ returns IndividualIncomeTaxReturnDto [L77]

[web] GET /api/ato/individual-income-tax-returns/summary  (Workpapers.Next.API.Controllers.Workpapers.AtoController.GetIndividualIncomeTaxReturnSummary)  [L82–L88] status=200 [auth=AuthorizationPolicies.User]
  └─ sends_request GetIndividualIncomeTaxReturnSummaryQuery [L85]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Workpapers.GovLink.GetIndividualIncomeTaxReturnSummaryQueryHandler.Handle [L32–L72]
      └─ uses_client DataGetClient [L59]
        └─ calls GetReportSummary (GET /api/gov-link/individual-income-tax-returns/summary?clientABN={*}&clientABNBranch={*}&clientId={*}&clientTFN={*}&endDate={*}&forceSync={*}&softwareSubscriptionId={*}&startDate={*}&targetFinancialYear={*}&taxAgentABN={*}&taxAgentNumber={*}, method=GetIndividualIncomeTaxReturnSummaryAsync, target=DataGet.Api, query=clientABN={*}&clientABNBranch={*}&clientId={*}&clientTFN={*}&endDate={*}&forceSync={*}&softwareSubscriptionId={*}&startDate={*}&targetFinancialYear={*}&taxAgentABN={*}&taxAgentNumber={*}) [L307]
          └─ target_service DataGet.Api
            └─ [web] GET /api/gov-link/individual-income-tax-returns/summary  (DataGet.Api.Controllers.GovLink.IndividualIncomeTaxReturnController.GetReportSummary)  [L34–L42] status=200 [auth=Authentication.MachineToMachinePolicy]
      └─ uses_service DataGetClient
        └─ method GetIndividualIncomeTaxReturnSummaryAsync [L59]
          └─ implementation Workpapers.Next.DataGet.Client.DataGetClient.GetIndividualIncomeTaxReturnSummaryAsync [L32-L506]
            └─ calls GetReportSummary [L307]
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L51]
          └─ implementation Workpapers.Next.Services.Features.Requests.RequestProcessor.ProcessAsync [L9-L32]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle

[web] GET /api/ato/profile-compare  (Workpapers.Next.API.Controllers.Workpapers.AtoController.GetProfileComparison)  [L110–L116] status=200 [auth=AuthorizationPolicies.User]
  └─ sends_request GetIndividualIncomeTaxReturnProfileCompareQuery [L113]
    └─ handled_by GovLink.Application.Queries.IITR.GetIndividualIncomeTaxReturnProfileCompareQueryHandler.Handle [L116–L134]
      └─ uses_client IAtoClient [L130]
      └─ uses_service IAtoClient (AddScoped)
        └─ method RequestAsync [L130]
          └─ ... (no implementation details available)
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Workpapers.GovLink.GetIndividualIncomeTaxReturnProfileCompareQueryHandler.Handle [L33–L73]
      └─ uses_client DataGetClient [L60]
        └─ calls GetProfileComparison (GET /api/gov-link/individual-income-tax-returns/profile-compare?clientABN={*}&clientABNBranch={*}&clientId={*}&clientTFN={*}&endDate={*}&forceSync={*}&softwareSubscriptionId={*}&startDate={*}&targetFinancialYear={*}&taxAgentABN={*}&taxAgentNumber={*}, method=GetProfileCompareAsync, target=DataGet.Api, query=clientABN={*}&clientABNBranch={*}&clientId={*}&clientTFN={*}&endDate={*}&forceSync={*}&softwareSubscriptionId={*}&startDate={*}&targetFinancialYear={*}&taxAgentABN={*}&taxAgentNumber={*}) [L325]
          └─ target_service DataGet.Api
            └─ [web] GET /api/gov-link/individual-income-tax-returns/profile-compare  (DataGet.Api.Controllers.GovLink.IndividualIncomeTaxReturnController.GetProfileComparison)  [L44–L53] status=200 [auth=Authentication.MachineToMachinePolicy]
      └─ uses_service DataGetClient
        └─ method GetProfileCompareAsync [L60]
          └─ implementation Workpapers.Next.DataGet.Client.DataGetClient.GetProfileCompareAsync [L32-L506]
            └─ calls GetProfileComparison [L325]
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L52]
          └─ implementation Workpapers.Next.Services.Features.Requests.RequestProcessor.ProcessAsync [L9-L32]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle
  └─ returns ProfileCompareDto [L113]

[web] GET /api/ato/gov-link/activity-statements  (Workpapers.Next.API.Controllers.Workpapers.AtoController.RefreshActivityStatements)  [L118–L125] status=200 [auth=AuthorizationPolicies.User,AuthorizationPolicies.GovLink]
  └─ sends_request GetActivityStatementsQuery [L122]
    └─ handled_by GovLink.Application.Queries.ActivityStatements.GetActivityStatementQueryHandler.Handle [L90–L198]
      └─ uses_client IAtoClient [L110]
      └─ uses_service IAtoClient (AddScoped)
        └─ method RequestAsync [L110]
          └─ ... (no implementation details available)
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Workpapers.GovLink.GetActivityStatementsQueryHandler.Handle [L32–L66]
      └─ uses_client DataGetClient [L60]
        └─ calls GetActivityStatementsDetail (GET /api/gov-link/activity-statements/detail?clientABN={*}&clientABNBranch={*}&clientId={*}&clientTFN={*}&endDate={*}&forceSync={*}&softwareSubscriptionId={*}&startDate={*}&taxAgentABN={*}&taxAgentNumber={*}, method=GetActivityStatementsAsync, target=DataGet.Api, query=clientABN={*}&clientABNBranch={*}&clientId={*}&clientTFN={*}&endDate={*}&forceSync={*}&softwareSubscriptionId={*}&startDate={*}&taxAgentABN={*}&taxAgentNumber={*}) [L214]
          └─ target_service DataGet.Api
            └─ [web] GET /api/gov-link/activity-statements/detail  (DataGet.Api.Controllers.GovLink.ActivityStatementController.GetActivityStatementsDetail)  [L33–L42] status=200 [auth=Authentication.MachineToMachinePolicy]
      └─ uses_service DataGetClient
        └─ method GetActivityStatementsAsync [L60]
          └─ implementation Workpapers.Next.DataGet.Client.DataGetClient.GetActivityStatementsAsync [L32-L506]
            └─ calls GetActivityStatementsDetail [L214]
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L52]
          └─ implementation Workpapers.Next.Services.Features.Requests.RequestProcessor.ProcessAsync [L9-L32]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle

[web] GET /api/ato/gov-link/activity-statements/summary  (Workpapers.Next.API.Controllers.Workpapers.AtoController.RefreshActivityStatementSummary)  [L127–L134] status=200 [auth=AuthorizationPolicies.User,AuthorizationPolicies.GovLink]
  └─ sends_request GetActivityStatementSummaryQuery [L131]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Workpapers.GovLink.GetActivityStatementSummaryQueryHandler.Handle [L31–L64]
      └─ uses_client DataGetClient [L58]
        └─ calls GetActivityStatementSummary (GET /api/gov-link/activity-statements/summary?clientABN={*}&clientABNBranch={*}&clientId={*}&clientTFN={*}&endDate={*}&forceSync={*}&softwareSubscriptionId={*}&startDate={*}&taxAgentABN={*}&taxAgentNumber={*}, method=GetActivityStatementSummaryAsync, target=DataGet.Api, query=clientABN={*}&clientABNBranch={*}&clientId={*}&clientTFN={*}&endDate={*}&forceSync={*}&softwareSubscriptionId={*}&startDate={*}&taxAgentABN={*}&taxAgentNumber={*}) [L231]
          └─ target_service DataGet.Api
            └─ [web] GET /api/gov-link/activity-statements/summary  (DataGet.Api.Controllers.GovLink.ActivityStatementController.GetActivityStatementSummary)  [L44–L53] status=200 [auth=Authentication.MachineToMachinePolicy]
      └─ uses_service DataGetClient
        └─ method GetActivityStatementSummaryAsync [L58]
          └─ implementation Workpapers.Next.DataGet.Client.DataGetClient.GetActivityStatementSummaryAsync [L32-L506]
            └─ calls GetActivityStatementSummary [L231]
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L50]
          └─ implementation Workpapers.Next.Services.Features.Requests.RequestProcessor.ProcessAsync [L9-L32]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle

[web] GET /api/ato/gov-link/client-account-transactions  (Workpapers.Next.API.Controllers.Workpapers.AtoController.RefreshClientAccountTransactions)  [L136–L147] status=200 [auth=AuthorizationPolicies.User,AuthorizationPolicies.GovLink]
  └─ sends_request GetClientAccountTransactionsQuery [L143]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Workpapers.GovLink.GetClientAccountTransactionsQueryHandler.Handle [L36–L77]
      └─ uses_client DataGetClient [L64]
        └─ calls GetTransactionDetail (GET /api/gov-link/client-accounts/detail?clientABN={*}&clientABNBranch={*}&clientAccountType={*}&clientId={*}&clientTFN={*}&endDate={*}&forceSync={*}&softwareSubscriptionId={*}&startDate={*}&taxAgentABN={*}&taxAgentNumber={*}, method=GetClientAccountDetailsAsync, target=DataGet.Api, query=clientABN={*}&clientABNBranch={*}&clientAccountType={*}&clientId={*}&clientTFN={*}&endDate={*}&forceSync={*}&softwareSubscriptionId={*}&startDate={*}&taxAgentABN={*}&taxAgentNumber={*}) [L250]
          └─ target_service DataGet.Api
            └─ [web] GET /api/gov-link/client-accounts/detail  (DataGet.Api.Controllers.GovLink.ClientAccountController.GetTransactionDetail)  [L22–L31] status=200 [auth=Authentication.MachineToMachinePolicy]
      └─ uses_service DataGetClient
        └─ method GetClientAccountDetailsAsync [L64]
          └─ implementation Workpapers.Next.DataGet.Client.DataGetClient.GetClientAccountDetailsAsync [L32-L506]
            └─ calls GetTransactionDetail [L250]
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L55]
          └─ implementation Workpapers.Next.Services.Features.Requests.RequestProcessor.ProcessAsync [L9-L32]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle

[web] GET /api/ato/gov-link/client-account-transactions/summary  (Workpapers.Next.API.Controllers.Workpapers.AtoController.RefreshClientAccountTransactionSummary)  [L149–L160] status=200 [auth=AuthorizationPolicies.User,AuthorizationPolicies.GovLink]
  └─ sends_request GetClientAccountTransactionSummaryQuery [L156]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Workpapers.GovLink.GetClientAccountTransactionSummaryQueryHandler.Handle [L35–L70]
      └─ uses_client DataGetClient [L64]
        └─ calls GetTransactionSummary (GET /api/gov-link/client-accounts/summary?clientABN={*}&clientABNBranch={*}&clientAccountType={*}&clientId={*}&clientTFN={*}&endDate={*}&forceSync={*}&softwareSubscriptionId={*}&startDate={*}&taxAgentABN={*}&taxAgentNumber={*}, method=GetClientAccountSummaryAsync, target=DataGet.Api, query=clientABN={*}&clientABNBranch={*}&clientAccountType={*}&clientId={*}&clientTFN={*}&endDate={*}&forceSync={*}&softwareSubscriptionId={*}&startDate={*}&taxAgentABN={*}&taxAgentNumber={*}) [L269]
          └─ target_service DataGet.Api
            └─ [web] GET /api/gov-link/client-accounts/summary  (DataGet.Api.Controllers.GovLink.ClientAccountController.GetTransactionSummary)  [L33–L42] status=200 [auth=Authentication.MachineToMachinePolicy]
      └─ uses_service DataGetClient
        └─ method GetClientAccountSummaryAsync [L64]
          └─ implementation Workpapers.Next.DataGet.Client.DataGetClient.GetClientAccountSummaryAsync [L32-L506]
            └─ calls GetTransactionSummary [L269]
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L54]
          └─ implementation Workpapers.Next.Services.Features.Requests.RequestProcessor.ProcessAsync [L9-L32]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle

[web] GET /api/ato/gov-link/individual-income-tax-returns  (Workpapers.Next.API.Controllers.Workpapers.AtoController.RefreshIndividualIncomeTaxReturns)  [L162–L169] status=200 [auth=AuthorizationPolicies.User,AuthorizationPolicies.GovLink]
  └─ sends_request GetIndividualIncomeTaxReturnQuery [L166]
    └─ handled_by GovLink.Application.Queries.IITR.GetIndividualIncomeTaxReturnQueryHandler.Handle [L89–L120]
      └─ uses_client IAtoClient [L103]
      └─ uses_service IAtoClient (AddScoped)
        └─ method RequestAsync [L103]
          └─ ... (no implementation details available)
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Workpapers.GovLink.GetIndividualIncomeTaxReturnQueryHandler.Handle [L33–L73]
      └─ uses_client DataGetClient [L60]
      └─ uses_service DataGetClient
        └─ method GetIndividualIncomeTaxReturnAsync [L60]
          └─ implementation Workpapers.Next.DataGet.Client.DataGetClient.GetIndividualIncomeTaxReturnAsync [L32-L506]
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L52]
          └─ implementation Workpapers.Next.Services.Features.Requests.RequestProcessor.ProcessAsync [L9-L32]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle
  └─ returns IndividualIncomeTaxReturnDto [L166]

[web] GET /api/ato/gov-link/individual-income-tax-returns/summary  (Workpapers.Next.API.Controllers.Workpapers.AtoController.RefreshIndividualIncomeTaxReturnSummary)  [L171–L178] status=200 [auth=AuthorizationPolicies.User,AuthorizationPolicies.GovLink]
  └─ sends_request GetIndividualIncomeTaxReturnSummaryQuery [L175]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Workpapers.GovLink.GetIndividualIncomeTaxReturnSummaryQueryHandler.Handle [L32–L72]
      └─ uses_client DataGetClient [L59]
        └─ calls GetReportSummary (GET /api/gov-link/individual-income-tax-returns/summary?clientABN={*}&clientABNBranch={*}&clientId={*}&clientTFN={*}&endDate={*}&forceSync={*}&softwareSubscriptionId={*}&startDate={*}&targetFinancialYear={*}&taxAgentABN={*}&taxAgentNumber={*}, method=GetIndividualIncomeTaxReturnSummaryAsync, target=DataGet.Api, query=clientABN={*}&clientABNBranch={*}&clientId={*}&clientTFN={*}&endDate={*}&forceSync={*}&softwareSubscriptionId={*}&startDate={*}&targetFinancialYear={*}&taxAgentABN={*}&taxAgentNumber={*}) [L307]
          └─ target_service DataGet.Api
            └─ [web] GET /api/gov-link/individual-income-tax-returns/summary  (DataGet.Api.Controllers.GovLink.IndividualIncomeTaxReturnController.GetReportSummary)  [L34–L42] status=200 [auth=Authentication.MachineToMachinePolicy]
      └─ uses_service DataGetClient
        └─ method GetIndividualIncomeTaxReturnSummaryAsync [L59]
          └─ implementation Workpapers.Next.DataGet.Client.DataGetClient.GetIndividualIncomeTaxReturnSummaryAsync [L32-L506]
            └─ calls GetReportSummary [L307]
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L51]
          └─ implementation Workpapers.Next.Services.Features.Requests.RequestProcessor.ProcessAsync [L9-L32]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle

[web] GET /api/ato/gov-link/profile-compare  (Workpapers.Next.API.Controllers.Workpapers.AtoController.RefreshProfileComparison)  [L180–L187] status=200 [auth=AuthorizationPolicies.User,AuthorizationPolicies.GovLink]
  └─ sends_request GetIndividualIncomeTaxReturnProfileCompareQuery [L184]
    └─ handled_by GovLink.Application.Queries.IITR.GetIndividualIncomeTaxReturnProfileCompareQueryHandler.Handle [L116–L134]
      └─ uses_client IAtoClient [L130]
      └─ uses_service IAtoClient (AddScoped)
        └─ method RequestAsync [L130]
          └─ ... (no implementation details available)
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Workpapers.GovLink.GetIndividualIncomeTaxReturnProfileCompareQueryHandler.Handle [L33–L73]
      └─ uses_client DataGetClient [L60]
        └─ calls GetProfileComparison (GET /api/gov-link/individual-income-tax-returns/profile-compare?clientABN={*}&clientABNBranch={*}&clientId={*}&clientTFN={*}&endDate={*}&forceSync={*}&softwareSubscriptionId={*}&startDate={*}&targetFinancialYear={*}&taxAgentABN={*}&taxAgentNumber={*}, method=GetProfileCompareAsync, target=DataGet.Api, query=clientABN={*}&clientABNBranch={*}&clientId={*}&clientTFN={*}&endDate={*}&forceSync={*}&softwareSubscriptionId={*}&startDate={*}&targetFinancialYear={*}&taxAgentABN={*}&taxAgentNumber={*}) [L325]
          └─ target_service DataGet.Api
            └─ [web] GET /api/gov-link/individual-income-tax-returns/profile-compare  (DataGet.Api.Controllers.GovLink.IndividualIncomeTaxReturnController.GetProfileComparison)  [L44–L53] status=200 [auth=Authentication.MachineToMachinePolicy]
      └─ uses_service DataGetClient
        └─ method GetProfileCompareAsync [L60]
          └─ implementation Workpapers.Next.DataGet.Client.DataGetClient.GetProfileCompareAsync [L32-L506]
            └─ calls GetProfileComparison [L325]
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L52]
          └─ implementation Workpapers.Next.Services.Features.Requests.RequestProcessor.ProcessAsync [L9-L32]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle
  └─ returns ProfileCompareDto [L184]

[web] POST /api/audit-trail/binders/{binderId:guid}  (Workpapers.Next.API.Controllers.Workpapers.AuditHistoriesController.CreateAuditMessageForBinder)  [L46–L52] status=201 [auth=AuthorizationPolicies.User]
  └─ sends_request CreateAuditMessageForBinderCommand [L49]
    └─ handled_by Workpapers.Next.ApplicationService.Commands.AuditHistories.CreateAuditMessageForBinderCommandHandler.Handle [L94–L145]
      └─ uses_service UserService
        └─ method GetUserIdIfPresent [L117]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserIdIfPresent [L20-L295]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserIdIfPresent [L20-L295]
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L113]
          └─ implementation Workpapers.Next.Services.Features.Requests.RequestProcessor.ProcessAsync [L9-L32]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle
      └─ uses_service AuditHistoryStorageService
        └─ method QueueLog [L142]
          └─ implementation Workpapers.Next.Data.Storage.AuditHistory.AuditHistoryStorageService.QueueLog [L19-L174]
      └─ uses_storage AuditHistoryStorageService.QueueLog [L142]

[web] GET /api/audit-trail/search  (Workpapers.Next.API.Controllers.Workpapers.AuditHistoriesController.Search)  [L27–L44] status=200 [auth=AuthorizationPolicies.User]
  └─ sends_request GetAuditHistoriesQuery [L40]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.AuditHistories.GetAuditHistoriesQueryHandler.Handle [L28–L184]
      └─ uses_service IControlledRepository<Binder>
        └─ method ReadQuery [L56]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<WorkpaperRecord>
        └─ method ReadQuery [L142]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<Worksheet>
        └─ method ReadQuery [L101]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L68]
          └─ implementation Workpapers.Next.Services.Features.Requests.RequestProcessor.ProcessAsync [L9-L32]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle
      └─ uses_service AuditHistoryStorageService
        └─ method GetLogs [L182]
          └─ implementation Workpapers.Next.Data.Storage.AuditHistory.AuditHistoryStorageService.GetLogs [L19-L174]
      └─ uses_storage AuditHistoryStorageService.GetLogs [L182]
  └─ sends_request CanIAccessBinderQuery [L36]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Binders.CanIAccessBinderQueryHandler.Handle [L60–L126]
      └─ uses_service UserService
        └─ method GetUserId [L91]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
      └─ uses_service RequestInfoService
        └─ method IsValidServiceAccountRequest [L89]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
      └─ uses_service TenantService
        └─ method GetCurrentTenant [L92]
          └─ implementation Workpapers.Next.Services.Features.Tenants.TenantService.GetCurrentTenant [L5-L22]
            └─ uses_service TenantIdentificationService
              └─ method GetCurrentTenant [L20]
                └─ implementation Workpapers.Next.ApplicationService.Services.TenantIdentificationService.GetCurrentTenant [L15-L131]
      └─ uses_service IControlledRepository<Binder>
        └─ method ReadQuery [L101]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L117]
          └─ implementation Workpapers.Next.Services.Features.Requests.RequestProcessor.ProcessAsync [L9-L32]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L121]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L109]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L92]

[web] POST /api/binders/{binderId:guid}/automation-runs  (Workpapers.Next.API.Controllers.Workpapers.AutomationBots.AutomationRunsController.CreateAutomationRun)  [L70–L80] status=201 [auth=AuthorizationPolicies.User]
  └─ sends_request CreateAutomationRunCommand [L77]
    └─ handled_by Workpapers.Next.ApplicationService.Commands.Workpapers.AutomationBots.CreateAutomationRunCommandHandler.Handle [L30–L86]
      └─ maps_to AutomationRunDto [L72]
        └─ converts_to AutomationRunUpdateModel [L960]
      └─ uses_service IBotService (AddScoped)
        └─ method GetBot [L62]
          └─ implementation Workpapers.Next.ApplicationService.Features.AutomationBots.Services.BotService.GetBot [L22-L111]
      └─ uses_service IControlledRepository<AutomationRun>
        └─ method Add [L70]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<Binder>
        └─ method ReadQuery [L54]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<SourceAccount>
        └─ method ReadQuery [L64]
          └─ ... (no implementation details available)
      └─ uses_service IMapper
        └─ method Map [L72]
          └─ ... (no implementation details available)
  └─ sends_request CanIAccessBinderQuery [L74]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Binders.CanIAccessBinderQueryHandler.Handle [L60–L126]
      └─ uses_service UserService
        └─ method GetUserId [L91]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
      └─ uses_service RequestInfoService
        └─ method IsValidServiceAccountRequest [L89]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
      └─ uses_service TenantService
        └─ method GetCurrentTenant [L92]
          └─ implementation Workpapers.Next.Services.Features.Tenants.TenantService.GetCurrentTenant [L5-L22]
            └─ uses_service TenantIdentificationService
              └─ method GetCurrentTenant [L20]
                └─ implementation Workpapers.Next.ApplicationService.Services.TenantIdentificationService.GetCurrentTenant [L15-L131]
      └─ uses_service IControlledRepository<Binder>
        └─ method ReadQuery [L101]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L117]
          └─ implementation Workpapers.Next.Services.Features.Requests.RequestProcessor.ProcessAsync [L9-L32]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L121]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L109]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L92]

[web] DELETE /api/binders/{binderId:guid}/automation-runs/{id:guid}  (Workpapers.Next.API.Controllers.Workpapers.AutomationBots.AutomationRunsController.DeleteAutomationRun)  [L92–L101] status=204 [auth=AuthorizationPolicies.User]
  └─ sends_request DeleteAutomationRunCommand [L98]
    └─ handled_by Workpapers.Next.ApplicationService.Commands.Workpapers.AutomationBots.DeleteAutomationRunCommandHandler.Handle [L33–L82]
      └─ uses_service IControlledRepository<AutomationRun>
        └─ method WriteQuery [L57]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<Binder>
        └─ method WriteQuery [L54]
          └─ ... (no implementation details available)
      └─ uses_service JournalServiceFactory
        └─ method GetService [L75]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L79]
          └─ implementation Workpapers.Next.Services.Features.Requests.RequestProcessor.ProcessAsync [L9-L32]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle
  └─ sends_request CanIAccessBinderQuery [L96]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Binders.CanIAccessBinderQueryHandler.Handle [L60–L126]
      └─ uses_service UserService
        └─ method GetUserId [L91]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
      └─ uses_service RequestInfoService
        └─ method IsValidServiceAccountRequest [L89]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
      └─ uses_service TenantService
        └─ method GetCurrentTenant [L92]
          └─ implementation Workpapers.Next.Services.Features.Tenants.TenantService.GetCurrentTenant [L5-L22]
            └─ uses_service TenantIdentificationService
              └─ method GetCurrentTenant [L20]
                └─ implementation Workpapers.Next.ApplicationService.Services.TenantIdentificationService.GetCurrentTenant [L15-L131]
      └─ uses_service IControlledRepository<Binder>
        └─ method ReadQuery [L101]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L117]
          └─ implementation Workpapers.Next.Services.Features.Requests.RequestProcessor.ProcessAsync [L9-L32]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L121]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L109]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L92]

[web] PUT /api/binders/{binderId:guid}/automation-runs/{id:guid}/execute  (Workpapers.Next.API.Controllers.Workpapers.AutomationBots.AutomationRunsController.ExecuteStage)  [L82–L90] status=200 [auth=AuthorizationPolicies.User]
  └─ sends_request ExecuteBotStageCommand [L87]
    └─ handled_by Workpapers.Next.ApplicationService.Commands.Workpapers.AutomationBots.ExecuteBotStageCommandHandler.Handle [L49–L75]
      └─ maps_to AutomationRunDto [L73]
        └─ converts_to AutomationRunUpdateModel [L960]
      └─ maps_to AutomationRunDto [L69]
        └─ converts_to AutomationRunUpdateModel [L960]
      └─ uses_service IBotService (AddScoped)
        └─ method ExecuteStage [L68]
          └─ implementation Workpapers.Next.ApplicationService.Features.AutomationBots.Services.BotService.ExecuteStage [L22-L111]
      └─ uses_service IControlledRepository<AutomationRun>
        └─ method WriteQuery [L64]
          └─ ... (no implementation details available)
      └─ uses_service IMapper
        └─ method Map [L69]
          └─ ... (no implementation details available)
  └─ sends_request CanIAccessBinderQuery [L85]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Binders.CanIAccessBinderQueryHandler.Handle [L60–L126]
      └─ uses_service UserService
        └─ method GetUserId [L91]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
      └─ uses_service RequestInfoService
        └─ method IsValidServiceAccountRequest [L89]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
      └─ uses_service TenantService
        └─ method GetCurrentTenant [L92]
          └─ implementation Workpapers.Next.Services.Features.Tenants.TenantService.GetCurrentTenant [L5-L22]
            └─ uses_service TenantIdentificationService
              └─ method GetCurrentTenant [L20]
                └─ implementation Workpapers.Next.ApplicationService.Services.TenantIdentificationService.GetCurrentTenant [L15-L131]
      └─ uses_service IControlledRepository<Binder>
        └─ method ReadQuery [L101]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L117]
          └─ implementation Workpapers.Next.Services.Features.Requests.RequestProcessor.ProcessAsync [L9-L32]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L121]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L109]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L92]

[web] GET /api/binders/{binderId:guid}/automation-runs/{id:guid}  (Workpapers.Next.API.Controllers.Workpapers.AutomationBots.AutomationRunsController.Get)  [L34–L42] status=200 [auth=AuthorizationPolicies.User]
  └─ sends_request CanIAccessBinderQuery [L37]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Binders.CanIAccessBinderQueryHandler.Handle [L60–L126]
      └─ uses_service UserService
        └─ method GetUserId [L91]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
      └─ uses_service RequestInfoService
        └─ method IsValidServiceAccountRequest [L89]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
      └─ uses_service TenantService
        └─ method GetCurrentTenant [L92]
          └─ implementation Workpapers.Next.Services.Features.Tenants.TenantService.GetCurrentTenant [L5-L22]
            └─ uses_service TenantIdentificationService
              └─ method GetCurrentTenant [L20]
                └─ implementation Workpapers.Next.ApplicationService.Services.TenantIdentificationService.GetCurrentTenant [L15-L131]
      └─ uses_service IControlledRepository<Binder>
        └─ method ReadQuery [L101]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L117]
          └─ implementation Workpapers.Next.Services.Features.Requests.RequestProcessor.ProcessAsync [L9-L32]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L121]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L109]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L92]
  └─ sends_request GetAutomationRunLightQuery [L40]
  └─ sends_request GetAutomationRunQuery [L41]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Workpapers.AutomationBots.GetAutomationRunQueryHandler.Handle [L49–L118]
      └─ maps_to AutomationRunDto [L70]
        └─ automapper.registration WorkpapersMappingProfile (AutomationRun->AutomationRunDto) [L920]
        └─ converts_to AutomationRunUpdateModel [L960]
      └─ maps_to AutomationRunLightDto [L85]
        └─ automapper.registration WorkpapersMappingProfile (AutomationRun->AutomationRunLightDto) [L914]
      └─ maps_to AutomationRunStageDto [L89]
        └─ converts_to AutomationRunStageModel [L961]
      └─ uses_service IControlledRepository<AutomationRun>
        └─ method ReadQuery [L70]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<Binder>
        └─ method ReadQuery [L74]
          └─ ... (no implementation details available)
      └─ uses_service IMapper
        └─ method ConfigurationProvider [L93]
          └─ ... (no implementation details available)
      └─ uses_service BotService
        └─ method GetStageDefinitions [L107]
          └─ implementation Workpapers.Next.ApplicationService.Features.AutomationBots.Services.BotService.GetStageDefinitions [L22-L111]

[web] GET /api/binders/{binderId:guid}/automation-runs  (Workpapers.Next.API.Controllers.Workpapers.AutomationBots.AutomationRunsController.GetAll)  [L44–L50] status=200 [auth=AuthorizationPolicies.User]
  └─ sends_request CanIAccessBinderQuery [L47]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Binders.CanIAccessBinderQueryHandler.Handle [L60–L126]
      └─ uses_service UserService
        └─ method GetUserId [L91]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
      └─ uses_service RequestInfoService
        └─ method IsValidServiceAccountRequest [L89]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
      └─ uses_service TenantService
        └─ method GetCurrentTenant [L92]
          └─ implementation Workpapers.Next.Services.Features.Tenants.TenantService.GetCurrentTenant [L5-L22]
            └─ uses_service TenantIdentificationService
              └─ method GetCurrentTenant [L20]
                └─ implementation Workpapers.Next.ApplicationService.Services.TenantIdentificationService.GetCurrentTenant [L15-L131]
      └─ uses_service IControlledRepository<Binder>
        └─ method ReadQuery [L101]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L117]
          └─ implementation Workpapers.Next.Services.Features.Requests.RequestProcessor.ProcessAsync [L9-L32]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L121]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L109]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L92]
  └─ sends_request GetAutomationRunsQuery [L49]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Workpapers.AutomationBots.GetAutomationRunsQueryHandler.Handle [L35–L93]
      └─ maps_to AutomationRunLightDto [L56]
        └─ automapper.registration WorkpapersMappingProfile (AutomationRun->AutomationRunLightDto) [L914]
      └─ maps_to AutomationRunStageDto [L67]
        └─ converts_to AutomationRunStageModel [L961]
      └─ uses_service IControlledRepository<AutomationRun>
        └─ method ReadQuery [L56]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<Binder>
        └─ method ReadQuery [L62]
          └─ ... (no implementation details available)
      └─ uses_service IMapper
        └─ method ConfigurationProvider [L59]
          └─ ... (no implementation details available)
      └─ uses_service BotService
        └─ method GetStageDefinitions [L82]
          └─ implementation Workpapers.Next.ApplicationService.Features.AutomationBots.Services.BotService.GetStageDefinitions [L22-L111]

[web] GET /api/binders/{binderId:guid}/automation-runs/{id:guid}/stage-definitions  (Workpapers.Next.API.Controllers.Workpapers.AutomationBots.AutomationRunsController.GetStageDefinitions)  [L52–L58] status=200 [auth=AuthorizationPolicies.User]
  └─ sends_request CanIAccessBinderQuery [L55]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Binders.CanIAccessBinderQueryHandler.Handle [L60–L126]
      └─ uses_service UserService
        └─ method GetUserId [L91]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
      └─ uses_service RequestInfoService
        └─ method IsValidServiceAccountRequest [L89]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
      └─ uses_service TenantService
        └─ method GetCurrentTenant [L92]
          └─ implementation Workpapers.Next.Services.Features.Tenants.TenantService.GetCurrentTenant [L5-L22]
            └─ uses_service TenantIdentificationService
              └─ method GetCurrentTenant [L20]
                └─ implementation Workpapers.Next.ApplicationService.Services.TenantIdentificationService.GetCurrentTenant [L15-L131]
      └─ uses_service IControlledRepository<Binder>
        └─ method ReadQuery [L101]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L117]
          └─ implementation Workpapers.Next.Services.Features.Requests.RequestProcessor.ProcessAsync [L9-L32]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L121]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L109]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L92]
  └─ sends_request GetStageDefinitionsForAutomationRunQuery [L57]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Workpapers.AutomationBots.GetStageDefinitionsForAutomationRunQueryHandler.Handle [L30–L53]
      └─ maps_to StageDefinitionDto [L51]
      └─ uses_service IControlledRepository<AutomationRun>
        └─ method ReadQuery [L45]
          └─ ... (no implementation details available)
      └─ uses_service IMapper
        └─ method Map [L51]
          └─ ... (no implementation details available)
      └─ uses_service BotService
        └─ method GetStageDefinitions [L51]
          └─ implementation Workpapers.Next.ApplicationService.Features.AutomationBots.Services.BotService.GetStageDefinitions [L22-L111]

[web] GET /api/binders/{binderId:guid}/automation-runs/{id:guid}/stages  (Workpapers.Next.API.Controllers.Workpapers.AutomationBots.AutomationRunsController.GetStages)  [L60–L68] status=200 [auth=AuthorizationPolicies.User]
  └─ sends_request CanIAccessBinderQuery [L63]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Binders.CanIAccessBinderQueryHandler.Handle [L60–L126]
      └─ uses_service UserService
        └─ method GetUserId [L91]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
      └─ uses_service RequestInfoService
        └─ method IsValidServiceAccountRequest [L89]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
      └─ uses_service TenantService
        └─ method GetCurrentTenant [L92]
          └─ implementation Workpapers.Next.Services.Features.Tenants.TenantService.GetCurrentTenant [L5-L22]
            └─ uses_service TenantIdentificationService
              └─ method GetCurrentTenant [L20]
                └─ implementation Workpapers.Next.ApplicationService.Services.TenantIdentificationService.GetCurrentTenant [L15-L131]
      └─ uses_service IControlledRepository<Binder>
        └─ method ReadQuery [L101]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L117]
          └─ implementation Workpapers.Next.Services.Features.Requests.RequestProcessor.ProcessAsync [L9-L32]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L121]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L109]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L92]
  └─ sends_request GetStageForAutomationRunQuery [L66]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Workpapers.AutomationBots.GetStagesForAutomationRunQueryHandler.Handle [L49–L138]
      └─ maps_to AutomationRunAccountDto [L83]
        └─ converts_to AutomationRunAccountModel [L962]
      └─ maps_to AutomationRunDatumDto [L95]
        └─ converts_to AutomationRunDatumModel [L965]
      └─ maps_to AutomationRunDocumentDto [L99]
        └─ converts_to AutomationRunDocumentModel [L968]
      └─ maps_to AutomationRunJournalDto [L87]
        └─ converts_to AutomationRunJournalModel [L963]
      └─ maps_to AutomationRunRecordDto [L91]
        └─ converts_to AutomationRunRecordModel [L964]
      └─ maps_to AutomationRunStageDto [L70]
        └─ converts_to AutomationRunStageModel [L961]
      └─ maps_to AutomationRunStageDto [L63]
        └─ converts_to AutomationRunStageModel [L961]
      └─ uses_service IControlledRepository<AutomationRun>
        └─ method ReadQuery [L122]
          └─ ... (no implementation details available)
      └─ uses_service IMapper
        └─ method ConfigurationProvider [L64]
          └─ ... (no implementation details available)
  └─ sends_request GetStageForAutomationRunWithDataQuery [L67]

[web] POST /api/binder-automation-rules/  (Workpapers.Next.API.Controllers.Workpapers.BinderAutomationRulesController.Create)  [L61–L68] status=201 [auth=AuthorizationPolicies.Administrator]
  └─ calls BinderAutomationRuleRepository.Add [L65]
  └─ insert BinderAutomationRule [L65]
    └─ reads_from BinderAutomationRules
  └─ uses_service IControlledRepository<BinderAutomationRule>
    └─ method Add [L65]
      └─ ... (no implementation details available)

[web] DELETE /api/binder-automation-rules/{id:Guid}  (Workpapers.Next.API.Controllers.Workpapers.BinderAutomationRulesController.Delete)  [L93–L104] status=200 [auth=AuthorizationPolicies.Administrator]
  └─ calls BinderAutomationRuleRepository.Remove [L101]
  └─ calls BinderAutomationRuleRepository.WriteQuery [L96]
  └─ delete BinderAutomationRule [L101]
    └─ reads_from BinderAutomationRules
  └─ write BinderAutomationRule [L96]
    └─ reads_from BinderAutomationRules
  └─ uses_service IControlledRepository<BinderAutomationRule>
    └─ method WriteQuery [L96]
      └─ ... (no implementation details available)

[web] GET /api/binder-automation-rules/{id:Guid}  (Workpapers.Next.API.Controllers.Workpapers.BinderAutomationRulesController.Get)  [L52–L59] status=200 [auth=AuthorizationPolicies.Administrator]
  └─ maps_to BinderAutomationRuleDto [L55]
    └─ automapper.registration WorkpapersMappingProfile (BinderAutomationRule->BinderAutomationRuleDto) [L1021]
  └─ calls BinderAutomationRuleRepository.ReadQuery [L55]
  └─ query BinderAutomationRule [L55]
    └─ reads_from BinderAutomationRules
  └─ uses_service IControlledRepository<BinderAutomationRule>
    └─ method ReadQuery [L55]
      └─ ... (no implementation details available)

[web] GET /api/binder-automation-rules/  (Workpapers.Next.API.Controllers.Workpapers.BinderAutomationRulesController.GetAll)  [L41–L50] status=200 [auth=AuthorizationPolicies.Administrator]
  └─ maps_to BinderAutomationRuleDto [L44]
    └─ automapper.registration WorkpapersMappingProfile (BinderAutomationRule->BinderAutomationRuleDto) [L1021]
  └─ calls BinderAutomationRuleRepository.ReadQuery [L44]
  └─ query BinderAutomationRule [L44]
    └─ reads_from BinderAutomationRules
  └─ uses_service IControlledRepository<BinderAutomationRule>
    └─ method ReadQuery [L44]
      └─ ... (no implementation details available)

[web] PUT /api/binder-automation-rules/{id:Guid}  (Workpapers.Next.API.Controllers.Workpapers.BinderAutomationRulesController.Update)  [L70–L81] status=200 [auth=AuthorizationPolicies.Administrator]
  └─ calls BinderAutomationRuleRepository.WriteQuery [L73]
  └─ write BinderAutomationRule [L73]
    └─ reads_from BinderAutomationRules
  └─ uses_service IControlledRepository<BinderAutomationRule>
    └─ method WriteQuery [L73]
      └─ ... (no implementation details available)

[web] PUT /api/binder-automation-rules/  (Workpapers.Next.API.Controllers.Workpapers.BinderAutomationRulesController.UpdateAll)  [L83–L91] status=200 [auth=AuthorizationPolicies.Administrator]
  └─ uses_service IMapper
    └─ method Map [L88]
      └─ ... (no implementation details available)
  └─ sends_request CreateOrUpdateBinderAutomationRules [L86]
    └─ handled_by Workpapers.Next.ApplicationService.Commands.Workpapers.BinderAutomationRules.CreateOrUpdateBinderAutomationRulesHandler.Handle [L24–L82]
      └─ uses_service IControlledRepository<BinderAutomationRule>
        └─ method WriteQuery [L35]
          └─ ... (no implementation details available)

[web] GET /api/binder-data/tax  (Workpapers.Next.API.Controllers.Workpapers.BinderDataController.ReadTaxDataFromDocument)  [L27–L34] status=200 [auth=AuthorizationPolicies.User]
  └─ sends_request GetTaxDataFromBinderQuery [L31]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Binders.GetTaxDataFromBinderQueryHandler.Handle [L40–L360]
      └─ uses_service DataverseService
        └─ method GetStandardQueryParams [L355]
          └─ implementation Workpapers.Next.Dataverse.Service.DataverseService.GetStandardQueryParams [L17-L127]
      └─ uses_service IControlledRepository<Binder>
        └─ method ReadQuery [L61]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L63]
          └─ implementation Workpapers.Next.Services.Features.Requests.RequestProcessor.ProcessAsync [L9-L32]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle

[web] POST /api/binder-document-defaults/  (Workpapers.Next.API.Controllers.Workpapers.BinderDocumentDefaultsController.Create)  [L67–L75] status=201
  └─ calls BinderDocumentDefaultsRepository.Add [L72]
  └─ insert BinderDocumentDefaults [L72]
    └─ reads_from BinderDocumentDefaults
  └─ uses_service IControlledRepository<BinderDocumentDefaults>
    └─ method Add [L72]
      └─ ... (no implementation details available)

[web] DELETE /api/binder-document-defaults/{id:Guid}  (Workpapers.Next.API.Controllers.Workpapers.BinderDocumentDefaultsController.Delete)  [L89–L99] status=200
  └─ calls BinderDocumentDefaultsRepository.Remove [L96]
  └─ calls BinderDocumentDefaultsRepository.WriteQuery [L92]
  └─ delete BinderDocumentDefaults [L96]
    └─ reads_from BinderDocumentDefaults
  └─ write BinderDocumentDefaults [L92]
    └─ reads_from BinderDocumentDefaults
  └─ uses_service IControlledRepository<BinderDocumentDefaults>
    └─ method WriteQuery [L92]
      └─ ... (no implementation details available)

[web] GET /api/binder-document-defaults/  (Workpapers.Next.API.Controllers.Workpapers.BinderDocumentDefaultsController.Get)  [L50–L65] status=200
  └─ maps_to BinderDocumentDefaultsDto [L53]
    └─ automapper.registration WorkpapersMappingProfile (BinderDocumentDefaults->BinderDocumentDefaultsDto) [L897]
  └─ calls BinderDocumentDefaultsRepository.ReadQuery [L53]
  └─ query BinderDocumentDefaults [L53]
    └─ reads_from BinderDocumentDefaults
  └─ uses_service IControlledRepository<BinderDocumentDefaults>
    └─ method ReadQuery [L53]
      └─ ... (no implementation details available)

[web] GET /api/binder-document-defaults/for-binder/{id:Guid}  (Workpapers.Next.API.Controllers.Workpapers.BinderDocumentDefaultsController.GetByBinderType)  [L44–L48] status=200
  └─ sends_request GetBinderTemplateDocumentDefaultsQuery [L47]

[web] PUT /api/binder-document-defaults/{id:Guid}  (Workpapers.Next.API.Controllers.Workpapers.BinderDocumentDefaultsController.Update)  [L77–L87] status=200
  └─ calls BinderDocumentDefaultsRepository.WriteQuery [L80]
  └─ write BinderDocumentDefaults [L80]
    └─ reads_from BinderDocumentDefaults
  └─ uses_service IControlledRepository<BinderDocumentDefaults>
    └─ method WriteQuery [L80]
      └─ ... (no implementation details available)

[web] GET /api/binders/{binderId:guid}/documents/  (Workpapers.Next.API.Controllers.Workpapers.BinderDocumentsController.FindDocuments)  [L23–L28] status=200 [auth=AuthorizationPolicies.User]

[web] GET /api/export/binders/{binderId:guid}/trial-balance  (Workpapers.Next.API.Controllers.Workpapers.BinderExportController.GetTrialBalanceExportData)  [L39–L63] status=200 [auth=AuthorizationPolicies.User]
  └─ sends_request GetTrialBalanceExportDataQuery [L60]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Binders.GetTrialBalanceExportDataQueryHandler.Handle [L32–L160]
      └─ uses_service IControlledRepository<Binder>
        └─ method ReadQuery [L50]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<SourceAccount>
        └─ method ReadQuery [L113]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L61]
          └─ implementation Workpapers.Next.Services.Features.Requests.RequestProcessor.ProcessAsync [L9-L32]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle

[web] POST /api/export/binders/{binderId:guid}  (Workpapers.Next.API.Controllers.Workpapers.BinderExportController.StartBinderExport)  [L29–L37] status=201 [auth=AuthorizationPolicies.User]
  └─ sends_request CanIAccessBinderQuery [L33]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Binders.CanIAccessBinderQueryHandler.Handle [L60–L126]
      └─ uses_service UserService
        └─ method GetUserId [L91]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
      └─ uses_service RequestInfoService
        └─ method IsValidServiceAccountRequest [L89]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
      └─ uses_service TenantService
        └─ method GetCurrentTenant [L92]
          └─ implementation Workpapers.Next.Services.Features.Tenants.TenantService.GetCurrentTenant [L5-L22]
            └─ uses_service TenantIdentificationService
              └─ method GetCurrentTenant [L20]
                └─ implementation Workpapers.Next.ApplicationService.Services.TenantIdentificationService.GetCurrentTenant [L15-L131]
      └─ uses_service IControlledRepository<Binder>
        └─ method ReadQuery [L101]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L117]
          └─ implementation Workpapers.Next.Services.Features.Requests.RequestProcessor.ProcessAsync [L9-L32]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L121]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L109]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L92]
  └─ sends_request ExportPdfCommand [L35]
    └─ handled_by Workpapers.Next.Export.Commands.ExportPdfCommandHandler.Handle [L59–L492]
      └─ uses_service DataverseService
        └─ method GetStandardQueryParams [L237]
          └─ implementation Workpapers.Next.Dataverse.Service.DataverseService.GetStandardQueryParams [L17-L127]
      └─ uses_service DocRaptorConfiguration
        └─ method ApiKey [L410]
          └─ ... (no implementation details available)
      └─ uses_service ExportConfiguration
        └─ method MaxDocumentPackageSizeMb [L268]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L92]
          └─ implementation Workpapers.Next.Services.Features.Requests.RequestProcessor.ProcessAsync [L9-L32]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle
      └─ uses_service UserService
        └─ method GetUser [L238]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUser [L20-L295]

[web] POST /api/binder-export-defaults/  (Workpapers.Next.API.Controllers.Workpapers.BinderExportDefaultsController.Create)  [L43–L50] status=201
  └─ calls BinderExportDefaultsRepository.Add [L47]
  └─ insert BinderExportDefaults [L47]
    └─ reads_from BinderExportDefaults
  └─ uses_service IControlledRepository<BinderExportDefaults>
    └─ method Add [L47]
      └─ ... (no implementation details available)

[web] GET /api/binder-export-defaults/  (Workpapers.Next.API.Controllers.Workpapers.BinderExportDefaultsController.Get)  [L33–L41] status=200
  └─ maps_to BinderExportDefaultsDto [L36]
    └─ automapper.registration WorkpapersMappingProfile (BinderExportDefaults->BinderExportDefaultsDto) [L910]
  └─ calls BinderExportDefaultsRepository.ReadQuery [L36]
  └─ query BinderExportDefaults [L36]
    └─ reads_from BinderExportDefaults
  └─ uses_service IControlledRepository<BinderExportDefaults>
    └─ method ReadQuery [L36]
      └─ ... (no implementation details available)

[web] PUT /api/binder-export-defaults/{id:Guid}  (Workpapers.Next.API.Controllers.Workpapers.BinderExportDefaultsController.Update)  [L52–L62] status=200
  └─ calls BinderExportDefaultsRepository.WriteQuery [L55]
  └─ write BinderExportDefaults [L55]
    └─ reads_from BinderExportDefaults
  └─ uses_service IControlledRepository<BinderExportDefaults>
    └─ method WriteQuery [L55]
      └─ ... (no implementation details available)

[web] POST /api/binder-fields/  (Workpapers.Next.API.Controllers.Workpapers.BinderFieldsController.Create)  [L71–L86] status=201 [auth=AuthorizationPolicies.SuperUser]
  └─ calls BinderFieldRepository.Add [L83]
  └─ calls BinderFieldRepository.ReadQuery [L75]
  └─ insert BinderField [L83]
    └─ reads_from BinderFields
  └─ query BinderField [L75]
    └─ reads_from BinderFields
  └─ uses_service IControlledRepository<BinderField>
    └─ method ReadQuery [L75]
      └─ ... (no implementation details available)

[web] DELETE /api/binder-fields/{id:Guid}  (Workpapers.Next.API.Controllers.Workpapers.BinderFieldsController.Delete)  [L105–L114] status=200 [auth=AuthorizationPolicies.SuperUser]
  └─ calls BinderFieldRepository.Remove [L111]
  └─ calls BinderFieldRepository.WriteQuery [L109]
  └─ delete BinderField [L111]
    └─ reads_from BinderFields
  └─ write BinderField [L109]
    └─ reads_from BinderFields
  └─ uses_service IControlledRepository<BinderField>
    └─ method WriteQuery [L109]
      └─ ... (no implementation details available)

[web] GET /api/binder-fields/{id:Guid}  (Workpapers.Next.API.Controllers.Workpapers.BinderFieldsController.Get)  [L61–L69] status=200 [auth=AuthorizationPolicies.SuperUser]
  └─ maps_to BinderFieldDto [L65]
    └─ automapper.registration WorkpapersMappingProfile (BinderField->BinderFieldDto) [L428]
  └─ calls BinderFieldRepository.ReadQuery [L65]
  └─ query BinderField [L65]
    └─ reads_from BinderFields
  └─ uses_service IControlledRepository<BinderField>
    └─ method ReadQuery [L65]
      └─ ... (no implementation details available)

[web] GET /api/binder-fields/  (Workpapers.Next.API.Controllers.Workpapers.BinderFieldsController.GetAll)  [L50–L58] status=200 [auth=AuthorizationPolicies.SuperUser]
  └─ maps_to BinderFieldDto [L54]
    └─ automapper.registration WorkpapersMappingProfile (BinderField->BinderFieldDto) [L428]
  └─ calls BinderFieldRepository.ReadQuery [L54]
  └─ query BinderField [L54]
    └─ reads_from BinderFields
  └─ uses_service IControlledRepository<BinderField>
    └─ method ReadQuery [L54]
      └─ ... (no implementation details available)

[web] GET /api/binder-fields/for-binder-type/{binderTypeId:Guid}  (Workpapers.Next.API.Controllers.Workpapers.BinderFieldsController.GetAllByProduct)  [L36–L48] status=200 [auth=AuthorizationPolicies.User]
  └─ maps_to BinderFieldDto [L40]
    └─ automapper.registration WorkpapersMappingProfile (BinderField->BinderFieldDto) [L428]
  └─ calls BinderFieldRepository.ReadQuery [L40]
  └─ query BinderField [L40]
    └─ reads_from BinderFields
  └─ uses_service IControlledRepository<BinderField>
    └─ method ReadQuery [L40]
      └─ ... (no implementation details available)

[web] PUT /api/binder-fields/{id:Guid}  (Workpapers.Next.API.Controllers.Workpapers.BinderFieldsController.Update)  [L88–L103] status=200 [auth=AuthorizationPolicies.SuperUser]
  └─ calls BinderFieldRepository.ReadQuery [L94]
  └─ calls BinderFieldRepository.WriteQuery [L92]
  └─ query BinderField [L94]
    └─ reads_from BinderFields
  └─ write BinderField [L92]
    └─ reads_from BinderFields
  └─ uses_service IControlledRepository<BinderField>
    └─ method WriteQuery [L92]
      └─ ... (no implementation details available)

[web] PUT /api/binders/{binderId:guid}/hyperlinks/bulk-update  (Workpapers.Next.API.Controllers.Workpapers.BinderHyperlinksController.BulkUpdateHyperlinks)  [L55–L63] status=200 [auth=AuthorizationPolicies.User]
  └─ sends_request BulkUpdateBinderHyperlinksCommand [L60]
    └─ handled_by Workpapers.Next.ApplicationService.Commands.Workpapers.WorkpaperRecords.BulkUpdateBinderHyperlinksCommandHandler.Handle [L36–L267]
      └─ maps_to RecordStatusDto [L230]
        └─ automapper.registration ExternalApiMappingProfile (RecordStatus->RecordStatusDto) [L158]
        └─ automapper.registration WorkpapersMappingProfile (RecordStatus->RecordStatusDto) [L400]
      └─ uses_service IControlledRepository<Binder>
        └─ method ReadQuery [L64]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<Hyperlink> (AddScoped)
        └─ method WriteQuery [L79]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<RecordStatus> (AddScoped)
        └─ method ReadQuery [L230]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<WorkpaperRecord>
        └─ method WriteQuery [L172]
          └─ ... (no implementation details available)
      └─ uses_service IMapper
        └─ method ConfigurationProvider [L232]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L70]
          └─ implementation Workpapers.Next.Services.Features.Requests.RequestProcessor.ProcessAsync [L9-L32]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle

[web] DELETE /api/binders/{binderId:guid}/hyperlinks/by-document/{documentId:guid}  (Workpapers.Next.API.Controllers.Workpapers.BinderHyperlinksController.DeleteByDocument)  [L31–L40] status=204 [auth=AuthorizationPolicies.User]
  └─ sends_request DeleteHyperlinksLinkedToDocumentCommand [L37]
    └─ handled_by Workpapers.Next.ApplicationService.Commands.Workpapers.Binders.DeleteHyperlinksLinkedToDocumentCommandHandler.Handle [L42–L134]
      └─ uses_service IControlledRepository<Matter>
        └─ method WriteQuery [L113]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<WorkpaperRecord>
        └─ method WriteQuery [L96]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<Worksheet>
        └─ method WriteQuery [L79]
          └─ ... (no implementation details available)
  └─ sends_request CanIAccessBinderQuery [L36]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Binders.CanIAccessBinderQueryHandler.Handle [L60–L126]
      └─ uses_service UserService
        └─ method GetUserId [L91]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
      └─ uses_service RequestInfoService
        └─ method IsValidServiceAccountRequest [L89]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
      └─ uses_service TenantService
        └─ method GetCurrentTenant [L92]
          └─ implementation Workpapers.Next.Services.Features.Tenants.TenantService.GetCurrentTenant [L5-L22]
            └─ uses_service TenantIdentificationService
              └─ method GetCurrentTenant [L20]
                └─ implementation Workpapers.Next.ApplicationService.Services.TenantIdentificationService.GetCurrentTenant [L15-L131]
      └─ uses_service IControlledRepository<Binder>
        └─ method ReadQuery [L101]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L117]
          └─ implementation Workpapers.Next.Services.Features.Requests.RequestProcessor.ProcessAsync [L9-L32]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L121]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L109]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L92]

[web] DELETE /api/binders/{binderId:guid}/hyperlinks/by-document  (Workpapers.Next.API.Controllers.Workpapers.BinderHyperlinksController.DeleteByDocuments)  [L42–L53] status=204 [auth=AuthorizationPolicies.User]
  └─ sends_request DeleteHyperlinksLinkedToDocumentsCommand [L50]
  └─ sends_request CanIAccessBinderQuery [L49]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Binders.CanIAccessBinderQueryHandler.Handle [L60–L126]
      └─ uses_service UserService
        └─ method GetUserId [L91]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
      └─ uses_service RequestInfoService
        └─ method IsValidServiceAccountRequest [L89]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
      └─ uses_service TenantService
        └─ method GetCurrentTenant [L92]
          └─ implementation Workpapers.Next.Services.Features.Tenants.TenantService.GetCurrentTenant [L5-L22]
            └─ uses_service TenantIdentificationService
              └─ method GetCurrentTenant [L20]
                └─ implementation Workpapers.Next.ApplicationService.Services.TenantIdentificationService.GetCurrentTenant [L15-L131]
      └─ uses_service IControlledRepository<Binder>
        └─ method ReadQuery [L101]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L117]
          └─ implementation Workpapers.Next.Services.Features.Requests.RequestProcessor.ProcessAsync [L9-L32]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L121]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L109]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L92]

[web] GET /api/binder-index/account-balance-info  (Workpapers.Next.API.Controllers.Workpapers.BinderIndexController.GetIndexAccountBalanceInfo)  [L23–L27] status=200 [auth=AuthorizationPolicies.User]
  └─ sends_request GetIndexAccountBalanceInfoQuery [L26]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Workpapers.GetIndexAccountBalanceInfoQueryHandler.Handle [L36–L358]
      └─ maps_to AccountBalanceInfoDto [L65]
        └─ automapper.registration WorkpapersMappingProfile (Binder->AccountBalanceInfoDto) [L457]
      └─ uses_service IControlledRepository<Binder>
        └─ method ReadQuery [L65]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<Source>
        └─ method ReadQuery [L129]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<SourceAccount>
        └─ method ReadQuery [L74]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L63]
          └─ implementation Workpapers.Next.Services.Features.Requests.RequestProcessor.ProcessAsync [L9-L32]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle

[web] GET /api/binder-roll-over/stored-binder  (Workpapers.Next.API.Controllers.Workpapers.BinderRollOverController.GetBinder)  [L64–L74] status=200 [auth=AuthorizationPolicies.User]
  └─ uses_service StorageService
    └─ method GetStream [L70]
      └─ implementation Workpapers.Next.Data.Storage.StorageService.GetStream [L17-L282]
  └─ uses_service TenantService
    └─ method GetCurrentTenant [L67]
      └─ implementation Workpapers.Next.Services.Features.Tenants.TenantService.GetCurrentTenant [L5-L22]
        └─ uses_service TenantIdentificationService
          └─ method GetCurrentTenant [L20]
            └─ implementation Workpapers.Next.ApplicationService.Services.TenantIdentificationService.GetCurrentTenant [L15-L131]
  └─ uses_storage StorageService.GetStream [L70]

[web] GET /api/binder-roll-over/range-values  (Workpapers.Next.API.Controllers.Workpapers.BinderRollOverController.GetRangeValues)  [L51–L62] status=200 [auth=AuthorizationPolicies.User]
  └─ uses_service StorageService
    └─ method GetStream [L56]
      └─ implementation Workpapers.Next.Data.Storage.StorageService.GetStream [L17-L282]
  └─ uses_service TenantService
    └─ method GetCurrentTenant [L54]
      └─ implementation Workpapers.Next.Services.Features.Tenants.TenantService.GetCurrentTenant [L5-L22]
        └─ uses_service TenantIdentificationService
          └─ method GetCurrentTenant [L20]
            └─ implementation Workpapers.Next.ApplicationService.Services.TenantIdentificationService.GetCurrentTenant [L15-L131]
  └─ uses_storage StorageService.GetStream [L56]

[web] PUT /api/binder-roll-over/  (Workpapers.Next.API.Controllers.Workpapers.BinderRollOverController.RollOver)  [L76–L89] status=200 [auth=AuthorizationPolicies.User]
  └─ calls BinderRepository.WriteQuery [L79]
  └─ write Binder [L79]
    └─ reads_from Binders
  └─ uses_service IControlledRepository<Binder>
    └─ method WriteQuery [L79]
      └─ ... (no implementation details available)
  └─ sends_request RollOverBinderCommand [L86]
    └─ handled_by Workpapers.Next.ApplicationService.Commands.Workpapers.Binders.RollOverBinderCommandHandler.Handle [L57–L911]
      └─ maps_to BinderSectionCreateModel [L251]
      └─ maps_to RollOverHyperlinkModel [L353]
      └─ maps_to RollOverMatterModel [L349]
      └─ maps_to RollOverRecordModel [L368]
      └─ maps_to RollOverRecordModel [L345]
      └─ uses_service UserService
        └─ method GetUserId [L179]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
      └─ uses_service TenantService
        └─ method GetCurrentTenant [L146]
          └─ implementation Workpapers.Next.Services.Features.Tenants.TenantService.GetCurrentTenant [L5-L22]
            └─ uses_service TenantIdentificationService
              └─ method GetCurrentTenant [L20]
                └─ implementation Workpapers.Next.ApplicationService.Services.TenantIdentificationService.GetCurrentTenant [L15-L131]
      └─ uses_service IControlledRepository<ArchivedWorkpaperRecordTemplateMapping>
        └─ method ReadQuery [L320]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<Binder>
        └─ method ReadQuery [L251]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<Matter>
        └─ method ReadQuery [L157]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<MatterStatus> (AddScoped)
        └─ method ReadQuery [L165]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<RollOverHyperlink>
        └─ method WriteQuery [L237]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<RollOverMatter>
        └─ method WriteQuery [L233]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<RollOverRecord>
        └─ method WriteQuery [L224]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<RollOverWorksheet>
        └─ method WriteQuery [L229]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<WorkpaperRecord>
        └─ method ReadQuery [L298]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<WorkpaperRecordTemplate>
        └─ method ReadQuery [L499]
          └─ ... (no implementation details available)
      └─ uses_service IMapper
        └─ method ConfigurationProvider [L254]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L112]
          └─ implementation Workpapers.Next.Services.Features.Requests.RequestProcessor.ProcessAsync [L9-L32]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle
      └─ uses_service UnitOfWork
        └─ method Table [L387]
          └─ ... (no implementation details available)
  └─ sends_request CanIAccessBinderQuery [L85]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Binders.CanIAccessBinderQueryHandler.Handle [L60–L126]
      └─ uses_service UserService
        └─ method GetUserId [L91]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
      └─ uses_service RequestInfoService
        └─ method IsValidServiceAccountRequest [L89]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
      └─ uses_service TenantService
        └─ method GetCurrentTenant [L92]
          └─ implementation Workpapers.Next.Services.Features.Tenants.TenantService.GetCurrentTenant [L5-L22]
            └─ uses_service TenantIdentificationService
              └─ method GetCurrentTenant [L20]
                └─ implementation Workpapers.Next.ApplicationService.Services.TenantIdentificationService.GetCurrentTenant [L15-L131]
      └─ uses_service IControlledRepository<Binder>
        └─ method ReadQuery [L101]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L117]
          └─ implementation Workpapers.Next.Services.Features.Requests.RequestProcessor.ProcessAsync [L9-L32]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L121]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L109]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L92]

[web] PUT /api/binder-roll-over/validate  (Workpapers.Next.API.Controllers.Workpapers.BinderRollOverController.ValidateRolloverFile)  [L91–L115] status=200 [auth=AuthorizationPolicies.User]
  └─ sends_request GetRollOverFileCommand [L94]
    └─ handled_by Workpapers.Next.ApplicationService.Commands.Workpapers.Binders.GetRollOverFileCommandHandler.Handle [L27–L67]
      └─ uses_service StorageService
        └─ method GetFileBytes [L56]
          └─ implementation Workpapers.Next.Data.Storage.StorageService.GetFileBytes [L17-L282]
      └─ uses_service IHttpClientFactory
        └─ method CreateClient [L65]
          └─ ... (no implementation details available)
      └─ uses_storage StorageService.GetFileBytes [L56]
  └─ sends_request ValidateRollOverFileCommand [L112]
    └─ handled_by Workpapers.Next.ApplicationService.Commands.Workpapers.Binders.ValidateRollOverFileCommandHandler.Handle [L26–L64]

[web] PUT /api/binders/{id:Guid}/activate  (Workpapers.Next.API.Controllers.Workpapers.BindersController.Activate)  [L336–L346] status=200 [auth=AuthorizationPolicies.User]
  └─ calls BinderRepository.WriteQuery [L342]
  └─ write Binder [L342]
    └─ reads_from Binders
  └─ uses_service IControlledRepository<Binder>
    └─ method WriteQuery [L342]
      └─ ... (no implementation details available)
  └─ uses_service UserService
    └─ method GetUserId [L343]
      └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
  └─ sends_request CanIAccessBinderQuery [L340]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Binders.CanIAccessBinderQueryHandler.Handle [L60–L126]
      └─ uses_service UserService
        └─ method GetUserId [L91]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
      └─ uses_service RequestInfoService
        └─ method IsValidServiceAccountRequest [L89]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
      └─ uses_service TenantService
        └─ method GetCurrentTenant [L92]
          └─ implementation Workpapers.Next.Services.Features.Tenants.TenantService.GetCurrentTenant [L5-L22]
            └─ uses_service TenantIdentificationService
              └─ method GetCurrentTenant [L20]
                └─ implementation Workpapers.Next.ApplicationService.Services.TenantIdentificationService.GetCurrentTenant [L15-L131]
      └─ uses_service IControlledRepository<Binder>
        └─ method ReadQuery [L101]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L117]
          └─ implementation Workpapers.Next.Services.Features.Requests.RequestProcessor.ProcessAsync [L9-L32]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L121]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L109]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L92]

[web] PUT /api/binders/{id:Guid}/ato-data-initialised  (Workpapers.Next.API.Controllers.Workpapers.BindersController.AtoDataInitialised)  [L405–L415] status=200 [auth=AuthorizationPolicies.User]
  └─ calls BinderRepository.WriteQuery [L411]
  └─ write Binder [L411]
    └─ reads_from Binders
  └─ uses_service IControlledRepository<Binder>
    └─ method WriteQuery [L411]
      └─ ... (no implementation details available)
  └─ sends_request CanIAccessBinderQuery [L409]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Binders.CanIAccessBinderQueryHandler.Handle [L60–L126]
      └─ uses_service UserService
        └─ method GetUserId [L91]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
      └─ uses_service RequestInfoService
        └─ method IsValidServiceAccountRequest [L89]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
      └─ uses_service TenantService
        └─ method GetCurrentTenant [L92]
          └─ implementation Workpapers.Next.Services.Features.Tenants.TenantService.GetCurrentTenant [L5-L22]
            └─ uses_service TenantIdentificationService
              └─ method GetCurrentTenant [L20]
                └─ implementation Workpapers.Next.ApplicationService.Services.TenantIdentificationService.GetCurrentTenant [L15-L131]
      └─ uses_service IControlledRepository<Binder>
        └─ method ReadQuery [L101]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L117]
          └─ implementation Workpapers.Next.Services.Features.Requests.RequestProcessor.ProcessAsync [L9-L32]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L121]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L109]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L92]

[web] PUT /api/binders/{id:Guid}/bulk-insert-initialised  (Workpapers.Next.API.Controllers.Workpapers.BindersController.BulkInsertInitialised)  [L393–L403] status=200 [auth=AuthorizationPolicies.User]
  └─ calls BinderRepository.WriteQuery [L399]
  └─ write Binder [L399]
    └─ reads_from Binders
  └─ uses_service IControlledRepository<Binder>
    └─ method WriteQuery [L399]
      └─ ... (no implementation details available)
  └─ sends_request CanIAccessBinderQuery [L397]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Binders.CanIAccessBinderQueryHandler.Handle [L60–L126]
      └─ uses_service UserService
        └─ method GetUserId [L91]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
      └─ uses_service RequestInfoService
        └─ method IsValidServiceAccountRequest [L89]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
      └─ uses_service TenantService
        └─ method GetCurrentTenant [L92]
          └─ implementation Workpapers.Next.Services.Features.Tenants.TenantService.GetCurrentTenant [L5-L22]
            └─ uses_service TenantIdentificationService
              └─ method GetCurrentTenant [L20]
                └─ implementation Workpapers.Next.ApplicationService.Services.TenantIdentificationService.GetCurrentTenant [L15-L131]
      └─ uses_service IControlledRepository<Binder>
        └─ method ReadQuery [L101]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L117]
          └─ implementation Workpapers.Next.Services.Features.Requests.RequestProcessor.ProcessAsync [L9-L32]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L121]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L109]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L92]

[web] PUT /api/binders/bulk  (Workpapers.Next.API.Controllers.Workpapers.BindersController.BulkUpdate)  [L313–L334] status=200 [auth=AuthorizationPolicies.User]
  └─ calls BinderRepository.WriteQuery [L325]
  └─ write Binder [L325]
    └─ reads_from Binders
  └─ uses_service IControlledRepository<Binder>
    └─ method WriteQuery [L325]
      └─ ... (no implementation details available)
  └─ sends_request CanIAccessBinderQuery [L328]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Binders.CanIAccessBinderQueryHandler.Handle [L60–L126]
      └─ uses_service UserService
        └─ method GetUserId [L91]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
      └─ uses_service RequestInfoService
        └─ method IsValidServiceAccountRequest [L89]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
      └─ uses_service TenantService
        └─ method GetCurrentTenant [L92]
          └─ implementation Workpapers.Next.Services.Features.Tenants.TenantService.GetCurrentTenant [L5-L22]
            └─ uses_service TenantIdentificationService
              └─ method GetCurrentTenant [L20]
                └─ implementation Workpapers.Next.ApplicationService.Services.TenantIdentificationService.GetCurrentTenant [L15-L131]
      └─ uses_service IControlledRepository<Binder>
        └─ method ReadQuery [L101]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L117]
          └─ implementation Workpapers.Next.Services.Features.Requests.RequestProcessor.ProcessAsync [L9-L32]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L121]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L109]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L92]

[web] GET /api/binders/exist-for-firm  (Workpapers.Next.API.Controllers.Workpapers.BindersController.CheckForBinders)  [L127–L135] status=200 [auth=AuthorizationPolicies.User]
  └─ calls BinderRepository.ReadQuery [L131]
  └─ query Binder [L131]
    └─ reads_from Binders
  └─ uses_service IControlledRepository<Binder>
    └─ method ReadQuery [L131]
      └─ ... (no implementation details available)

[web] POST /api/binders/  (Workpapers.Next.API.Controllers.Workpapers.BindersController.Create)  [L189–L242] status=201 [auth=AuthorizationPolicies.User]
  └─ calls BinderRepository.Add [L221]
  └─ insert Binder [L221]
    └─ reads_from Binders
  └─ uses_service IControlledRepository<Binder>
    └─ method Add [L221]
      └─ ... (no implementation details available)
  └─ uses_service UserService
    └─ method GetUser [L229]
      └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUser [L20-L295]
  └─ sends_request CreateBinderDocumentCommand [L229]
    └─ handled_by Workpapers.Next.ApplicationService.Commands.Binders.CreateBinderDocumentCommandHandler.Handle [L32–L66]
      └─ uses_service DataverseService
        └─ method GetStandardQueryParams [L60]
          └─ implementation Workpapers.Next.Dataverse.Service.DataverseService.GetStandardQueryParams [L17-L127]
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L51]
          └─ implementation Workpapers.Next.Services.Features.Requests.RequestProcessor.ProcessAsync [L9-L32]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle
  └─ sends_request CanBinderBeCreatedQuery [L215]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Binders.CanBinderBeCreatedQueryHandler.Handle [L36–L151]
      └─ maps_to BinderTemplateDto [L77]
        └─ automapper.registration WorkpapersMappingProfile (BinderTemplate->BinderTemplateDto) [L726]
      └─ uses_service IControlledRepository<BinderTemplate>
        └─ method ReadQuery [L77]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<WorkpaperRecordTemplate>
        └─ method ReadQuery [L117]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L63]
          └─ implementation Workpapers.Next.Services.Features.Requests.RequestProcessor.ProcessAsync [L9-L32]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle

[web] POST /api/binders/create-excel-document  (Workpapers.Next.API.Controllers.Workpapers.BindersController.CreateExcelDocument)  [L244–L256] status=201 [auth=AuthorizationPolicies.User]
  └─ calls BinderRepository.WriteQuery [L248]
  └─ write Binder [L248]
    └─ reads_from Binders
  └─ uses_service IControlledRepository<Binder>
    └─ method WriteQuery [L248]
      └─ ... (no implementation details available)
  └─ uses_service UserService
    └─ method GetUser [L251]
      └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUser [L20-L295]
  └─ sends_request CreateBinderDocumentCommand [L251]
    └─ handled_by Workpapers.Next.ApplicationService.Commands.Binders.CreateBinderDocumentCommandHandler.Handle [L32–L66]
      └─ uses_service DataverseService
        └─ method GetStandardQueryParams [L60]
          └─ implementation Workpapers.Next.Dataverse.Service.DataverseService.GetStandardQueryParams [L17-L127]
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L51]
          └─ implementation Workpapers.Next.Services.Features.Requests.RequestProcessor.ProcessAsync [L9-L32]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle
  └─ sends_request CanIAccessBinderQuery [L249]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Binders.CanIAccessBinderQueryHandler.Handle [L60–L126]
      └─ uses_service UserService
        └─ method GetUserId [L91]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
      └─ uses_service RequestInfoService
        └─ method IsValidServiceAccountRequest [L89]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
      └─ uses_service TenantService
        └─ method GetCurrentTenant [L92]
          └─ implementation Workpapers.Next.Services.Features.Tenants.TenantService.GetCurrentTenant [L5-L22]
            └─ uses_service TenantIdentificationService
              └─ method GetCurrentTenant [L20]
                └─ implementation Workpapers.Next.ApplicationService.Services.TenantIdentificationService.GetCurrentTenant [L15-L131]
      └─ uses_service IControlledRepository<Binder>
        └─ method ReadQuery [L101]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L117]
          └─ implementation Workpapers.Next.Services.Features.Requests.RequestProcessor.ProcessAsync [L9-L32]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L121]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L109]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L92]

[web] PUT /api/binders/{id:Guid}/data-version  (Workpapers.Next.API.Controllers.Workpapers.BindersController.DataVersion)  [L348–L358] status=200 [auth=AuthorizationPolicies.User]
  └─ calls BinderRepository.WriteQuery [L354]
  └─ write Binder [L354]
    └─ reads_from Binders
  └─ uses_service IControlledRepository<Binder>
    └─ method WriteQuery [L354]
      └─ ... (no implementation details available)
  └─ sends_request CanIAccessBinderQuery [L352]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Binders.CanIAccessBinderQueryHandler.Handle [L60–L126]
      └─ uses_service UserService
        └─ method GetUserId [L91]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
      └─ uses_service RequestInfoService
        └─ method IsValidServiceAccountRequest [L89]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
      └─ uses_service TenantService
        └─ method GetCurrentTenant [L92]
          └─ implementation Workpapers.Next.Services.Features.Tenants.TenantService.GetCurrentTenant [L5-L22]
            └─ uses_service TenantIdentificationService
              └─ method GetCurrentTenant [L20]
                └─ implementation Workpapers.Next.ApplicationService.Services.TenantIdentificationService.GetCurrentTenant [L15-L131]
      └─ uses_service IControlledRepository<Binder>
        └─ method ReadQuery [L101]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L117]
          └─ implementation Workpapers.Next.Services.Features.Requests.RequestProcessor.ProcessAsync [L9-L32]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L121]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L109]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L92]

[web] DELETE /api/binders/{id:Guid}  (Workpapers.Next.API.Controllers.Workpapers.BindersController.Delete)  [L475–L511] status=204 [auth=AuthorizationPolicies.User]
  └─ calls BinderRepository.Remove [L502]
  └─ calls BinderRepository.WriteQuery [L481]
  └─ delete Binder [L502]
    └─ reads_from Binders
  └─ write Binder [L481]
    └─ reads_from Binders
  └─ uses_service DataverseService
    └─ method GetStandardQueryParams [L490]
      └─ implementation Workpapers.Next.Dataverse.Service.DataverseService.GetStandardQueryParams [L17-L127]
  └─ uses_service IControlledRepository<Binder>
    └─ method WriteQuery [L481]
      └─ ... (no implementation details available)
  └─ uses_service UserService
    └─ method GetUser [L491]
      └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUser [L20-L295]
  └─ sends_request CreateDataverseAuditHistoryCommand [L504]
    └─ handled_by Cirrus.ApplicationService.Accounting.Commands.Firm.CreateDataverseAuditHistoryQueryHandler.Handle [L37–L84]
      └─ uses_service DataverseService
        └─ method Post [L75]
          └─ implementation Cirrus.Central.Features.MachineToMachine.DataverseService.Post [L14-L66]
      └─ uses_service ITenantService (AddScoped)
        └─ method GetCurrentTenant [L52]
          └─ implementation ITenantService.GetCurrentTenant [L14-L14]
          └─ ... (no implementation details available)
      └─ uses_service IUserService (InstancePerLifetimeScope)
        └─ method GetUser [L53]
          └─ implementation IUserService.GetUser [L18-L18]
          └─ ... (no implementation details available)
  └─ sends_request CanIAccessBinderQuery [L483]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Binders.CanIAccessBinderQueryHandler.Handle [L60–L126]
      └─ uses_service UserService
        └─ method GetUserId [L91]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
      └─ uses_service RequestInfoService
        └─ method IsValidServiceAccountRequest [L89]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
      └─ uses_service TenantService
        └─ method GetCurrentTenant [L92]
          └─ implementation Workpapers.Next.Services.Features.Tenants.TenantService.GetCurrentTenant [L5-L22]
            └─ uses_service TenantIdentificationService
              └─ method GetCurrentTenant [L20]
                └─ implementation Workpapers.Next.ApplicationService.Services.TenantIdentificationService.GetCurrentTenant [L15-L131]
      └─ uses_service IControlledRepository<Binder>
        └─ method ReadQuery [L101]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L117]
          └─ implementation Workpapers.Next.Services.Features.Requests.RequestProcessor.ProcessAsync [L9-L32]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L121]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L109]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L92]

[web] GET /api/binders/download-binder/{binderId}  (Workpapers.Next.API.Controllers.Workpapers.BindersController.Download)  [L176–L187] status=200 [auth=AuthorizationPolicies.User]
  └─ maps_to BinderUltraLightDto [L182]
    └─ automapper.registration WorkpapersMappingProfile (Binder->BinderUltraLightDto) [L440]
  └─ calls BinderRepository.ReadQuery [L182]
  └─ query Binder [L182]
    └─ reads_from Binders
  └─ uses_service IControlledRepository<Binder>
    └─ method ReadQuery [L182]
      └─ ... (no implementation details available)
  └─ sends_request CanIAccessBinderQuery [L180]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Binders.CanIAccessBinderQueryHandler.Handle [L60–L126]
      └─ uses_service UserService
        └─ method GetUserId [L91]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
      └─ uses_service RequestInfoService
        └─ method IsValidServiceAccountRequest [L89]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
      └─ uses_service TenantService
        └─ method GetCurrentTenant [L92]
          └─ implementation Workpapers.Next.Services.Features.Tenants.TenantService.GetCurrentTenant [L5-L22]
            └─ uses_service TenantIdentificationService
              └─ method GetCurrentTenant [L20]
                └─ implementation Workpapers.Next.ApplicationService.Services.TenantIdentificationService.GetCurrentTenant [L15-L131]
      └─ uses_service IControlledRepository<Binder>
        └─ method ReadQuery [L101]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L117]
          └─ implementation Workpapers.Next.Services.Features.Requests.RequestProcessor.ProcessAsync [L9-L32]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L121]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L109]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L92]

[web] PUT /api/binders/{id:Guid}/source-account/{sourceAccountId:Guid}  (Workpapers.Next.API.Controllers.Workpapers.BindersController.FlagSourceAccount)  [L378–L391] status=200 [auth=AuthorizationPolicies.User]
  └─ calls BinderRepository.WriteQuery [L382]
  └─ write Binder [L382]
    └─ reads_from Binders
  └─ uses_service IControlledRepository<Binder>
    └─ method WriteQuery [L382]
      └─ ... (no implementation details available)
  └─ sends_request CanIAccessBinderQuery [L386]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Binders.CanIAccessBinderQueryHandler.Handle [L60–L126]
      └─ uses_service UserService
        └─ method GetUserId [L91]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
      └─ uses_service RequestInfoService
        └─ method IsValidServiceAccountRequest [L89]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
      └─ uses_service TenantService
        └─ method GetCurrentTenant [L92]
          └─ implementation Workpapers.Next.Services.Features.Tenants.TenantService.GetCurrentTenant [L5-L22]
            └─ uses_service TenantIdentificationService
              └─ method GetCurrentTenant [L20]
                └─ implementation Workpapers.Next.ApplicationService.Services.TenantIdentificationService.GetCurrentTenant [L15-L131]
      └─ uses_service IControlledRepository<Binder>
        └─ method ReadQuery [L101]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L117]
          └─ implementation Workpapers.Next.Services.Features.Requests.RequestProcessor.ProcessAsync [L9-L32]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L121]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L109]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L92]

[web] GET /api/binders/{id:Guid}  (Workpapers.Next.API.Controllers.Workpapers.BindersController.Get)  [L137–L174] status=200 [auth=AuthorizationPolicies.User]
  └─ maps_to BinderDto [L151]
    └─ automapper.registration ExternalApiMappingProfile (Binder->BinderDto) [L58]
    └─ automapper.registration WorkpapersMappingProfile (Binder->BinderDto) [L450]
  └─ maps_to BinderUltraLightDto [L145]
    └─ automapper.registration WorkpapersMappingProfile (Binder->BinderUltraLightDto) [L440]
  └─ calls BinderRepository.ReadQuery [L145]
  └─ query Binder [L145]
    └─ reads_from Binders
  └─ uses_service ICirrusQueryService (AddScoped)
    └─ method GetDatasetsForFile [L159]
      └─ implementation Workpapers.Next.CirrusServices.CirrusQueryService.GetDatasetsForFile [L18-L250]
  └─ uses_service IControlledRepository<Binder>
    └─ method ReadQuery [L145]
      └─ ... (no implementation details available)
  └─ sends_request CanIAccessBinderQuery [L141]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Binders.CanIAccessBinderQueryHandler.Handle [L60–L126]
      └─ uses_service UserService
        └─ method GetUserId [L91]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
      └─ uses_service RequestInfoService
        └─ method IsValidServiceAccountRequest [L89]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
      └─ uses_service TenantService
        └─ method GetCurrentTenant [L92]
          └─ implementation Workpapers.Next.Services.Features.Tenants.TenantService.GetCurrentTenant [L5-L22]
            └─ uses_service TenantIdentificationService
              └─ method GetCurrentTenant [L20]
                └─ implementation Workpapers.Next.ApplicationService.Services.TenantIdentificationService.GetCurrentTenant [L15-L131]
      └─ uses_service IControlledRepository<Binder>
        └─ method ReadQuery [L101]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L117]
          └─ implementation Workpapers.Next.Services.Features.Requests.RequestProcessor.ProcessAsync [L9-L32]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L121]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L109]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L92]

[web] GET /api/binders/{id:Guid}/export-details  (Workpapers.Next.API.Controllers.Workpapers.BindersController.GetBinderExportedDetails)  [L462–L473] status=200 [auth=AuthorizationPolicies.User]
  └─ maps_to ExportedBinderDetail [L468]
    └─ automapper.registration WorkpapersMappingProfile (Binder->ExportedBinderDetail) [L472]
  └─ calls BinderRepository.ReadQuery [L468]
  └─ query Binder [L468]
    └─ reads_from Binders
  └─ uses_service IControlledRepository<Binder>
    └─ method ReadQuery [L468]
      └─ ... (no implementation details available)
  └─ sends_request CanIAccessBinderQuery [L466]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Binders.CanIAccessBinderQueryHandler.Handle [L60–L126]
      └─ uses_service UserService
        └─ method GetUserId [L91]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
      └─ uses_service RequestInfoService
        └─ method IsValidServiceAccountRequest [L89]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
      └─ uses_service TenantService
        └─ method GetCurrentTenant [L92]
          └─ implementation Workpapers.Next.Services.Features.Tenants.TenantService.GetCurrentTenant [L5-L22]
            └─ uses_service TenantIdentificationService
              └─ method GetCurrentTenant [L20]
                └─ implementation Workpapers.Next.ApplicationService.Services.TenantIdentificationService.GetCurrentTenant [L15-L131]
      └─ uses_service IControlledRepository<Binder>
        └─ method ReadQuery [L101]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L117]
          └─ implementation Workpapers.Next.Services.Features.Requests.RequestProcessor.ProcessAsync [L9-L32]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L121]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L109]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L92]

[web] GET /api/binders  (Workpapers.Next.API.Controllers.Workpapers.BindersController.GetCreateBinderParams)  [L541–L566] status=200
  └─ calls BinderTemplateRepository.ReadQuery [L543]
  └─ query BinderTemplate [L543]
    └─ reads_from BinderTemplates
  └─ uses_service IControlledRepository<BinderTemplate>
    └─ method ReadQuery [L543]
      └─ ... (no implementation details available)
  └─ uses_service IControlledRepository<RecordStatus> (AddScoped)
    └─ method WriteQuery [L556]
      └─ ... (no implementation details available)
  └─ uses_service UserService
    └─ method GetUser [L565]
      └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUser [L20-L295]

[web] GET /api/binders  (Workpapers.Next.API.Controllers.Workpapers.BindersController.GetUpdateBinderParams)  [L518–L539] status=200
  └─ calls BinderColumnDataRepository.WriteQuery [L531]
  └─ write BinderColumnData [L531]
    └─ reads_from BinderColumnData
  └─ query BinderStatus [L523]
    └─ reads_from BinderStatuss
  └─ uses_service IControlledRepository<BinderColumnData>
    └─ method WriteQuery [L531]
      └─ ... (no implementation details available)
  └─ uses_service IControlledRepository<BinderStatus> (AddScoped)
    └─ method ReadQuery [L523]
      └─ ... (no implementation details available)

[web] POST /api/binders/{id:Guid}/log-sharepoint-error  (Workpapers.Next.API.Controllers.Workpapers.BindersController.LogSharePointError)  [L360–L376] status=201 [auth=AuthorizationPolicies.User]
  └─ calls BinderRepository.WriteQuery [L366]
  └─ write Binder [L366]
    └─ reads_from Binders
  └─ uses_service IControlledRepository<Binder>
    └─ method WriteQuery [L366]
      └─ ... (no implementation details available)
  └─ sends_request CanIAccessBinderQuery [L364]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Binders.CanIAccessBinderQueryHandler.Handle [L60–L126]
      └─ uses_service UserService
        └─ method GetUserId [L91]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
      └─ uses_service RequestInfoService
        └─ method IsValidServiceAccountRequest [L89]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
      └─ uses_service TenantService
        └─ method GetCurrentTenant [L92]
          └─ implementation Workpapers.Next.Services.Features.Tenants.TenantService.GetCurrentTenant [L5-L22]
            └─ uses_service TenantIdentificationService
              └─ method GetCurrentTenant [L20]
                └─ implementation Workpapers.Next.ApplicationService.Services.TenantIdentificationService.GetCurrentTenant [L15-L131]
      └─ uses_service IControlledRepository<Binder>
        └─ method ReadQuery [L101]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L117]
          └─ implementation Workpapers.Next.Services.Features.Requests.RequestProcessor.ProcessAsync [L9-L32]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L121]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L109]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L92]

[web] GET /api/binders  (Workpapers.Next.API.Controllers.Workpapers.BindersController.MapDataverseIds)  [L581–L627] status=200
  └─ calls UserRepository.ReadQuery [L606]
  └─ query User [L606]
  └─ query BinderStatus [L585]
    └─ reads_from BinderStatuss
  └─ uses_service IControlledRepository<BinderStatus> (AddScoped)
    └─ method ReadQuery [L585]
      └─ ... (no implementation details available)
  └─ uses_service IControlledRepository<User>
    └─ method ReadQuery [L606]
      └─ ... (no implementation details available)

[web] PUT /api/binders/restore-binder/{id:Guid}  (Workpapers.Next.API.Controllers.Workpapers.BindersController.RestoreBinder)  [L417–L447] status=200 [auth=AuthorizationPolicies.User]
  └─ uses_service DataverseService
    └─ method GetStandardQueryParams [L431]
      └─ implementation Workpapers.Next.Dataverse.Service.DataverseService.GetStandardQueryParams [L17-L127]
  └─ uses_service UserService
    └─ method GetUser [L432]
      └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUser [L20-L295]
  └─ sends_request CanIAccessBinderQuery [L424]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Binders.CanIAccessBinderQueryHandler.Handle [L60–L126]
      └─ uses_service UserService
        └─ method GetUserId [L91]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
      └─ uses_service RequestInfoService
        └─ method IsValidServiceAccountRequest [L89]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
      └─ uses_service TenantService
        └─ method GetCurrentTenant [L92]
          └─ implementation Workpapers.Next.Services.Features.Tenants.TenantService.GetCurrentTenant [L5-L22]
            └─ uses_service TenantIdentificationService
              └─ method GetCurrentTenant [L20]
                └─ implementation Workpapers.Next.ApplicationService.Services.TenantIdentificationService.GetCurrentTenant [L15-L131]
      └─ uses_service IControlledRepository<Binder>
        └─ method ReadQuery [L101]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L117]
          └─ implementation Workpapers.Next.Services.Features.Requests.RequestProcessor.ProcessAsync [L9-L32]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L121]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L109]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L92]

[web] GET /api/binders/  (Workpapers.Next.API.Controllers.Workpapers.BindersController.Search)  [L109–L114] status=200 [auth=AuthorizationPolicies.User]
  └─ sends_request FindBindersQuery [L113]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Binders.FindBindersQueryHandler.Handle [L48–L167]
      └─ uses_service FirmSettingsService
        └─ method GetCurrentSettings [L89]
          └─ implementation Workpapers.Next.API.Features.FirmSettings.FirmSettingsService.GetCurrentSettings [L23-L154]
          └─ implementation Workpapers.Next.API.Features.FirmSettings.FirmSettingsService.GetCurrentSettings [L23-L154]
      └─ uses_service UserService
        └─ method GetUser [L89]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUser [L20-L295]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUser [L20-L295]
      └─ uses_service IControlledRepository<Binder>
        └─ method ReadQuery [L90]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<BinderStatus> (AddScoped)
        └─ method ReadQuery [L104]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<Client>
        └─ method ReadQuery [L81]
          └─ ... (no implementation details available)

[web] GET /api/binders/client-queries  (Workpapers.Next.API.Controllers.Workpapers.BindersController.SearchClientQuery)  [L116–L121] status=200 [auth=AuthorizationPolicies.User]
  └─ sends_request FindClientQueriesForBindersQuery [L120]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Binders.FindClientQueryHandler.Handle [L40–L119]
      └─ uses_service FirmSettingsService
        └─ method GetCurrentSettings [L85]
          └─ implementation Workpapers.Next.API.Features.FirmSettings.FirmSettingsService.GetCurrentSettings [L23-L154]
          └─ implementation Workpapers.Next.API.Features.FirmSettings.FirmSettingsService.GetCurrentSettings [L23-L154]
      └─ uses_service UserService
        └─ method GetUser [L85]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUser [L20-L295]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUser [L20-L295]
      └─ uses_service IControlledRepository<Binder>
        └─ method ReadQuery [L84]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<Client>
        └─ method ReadQuery [L70]
          └─ ... (no implementation details available)

[web] PUT /api/binders/{id:Guid}  (Workpapers.Next.API.Controllers.Workpapers.BindersController.Update)  [L281–L311] status=200 [auth=AuthorizationPolicies.User]
  └─ calls BinderRepository.WriteQuery [L285]
  └─ calls SourceRepository.ReadQuery [L297]
  └─ write Binder [L285]
    └─ reads_from Binders
  └─ query Source [L297]
  └─ uses_service IControlledRepository<Binder>
    └─ method WriteQuery [L285]
      └─ ... (no implementation details available)
  └─ uses_service IControlledRepository<Source>
    └─ method ReadQuery [L297]
      └─ ... (no implementation details available)
  └─ sends_request AreBinderColumnDatasetsValidQuery [L304]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Binders.AreBinderColumnDatasetsValidQueryHandler.Handle [L29–L76]
      └─ uses_service ICirrusQueryService (AddScoped)
        └─ method GetDatasetsForFile [L42]
          └─ implementation Workpapers.Next.CirrusServices.CirrusQueryService.GetDatasetsForFile [L18-L250]
  └─ sends_request CanIAccessBinderQuery [L291]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Binders.CanIAccessBinderQueryHandler.Handle [L60–L126]
      └─ uses_service UserService
        └─ method GetUserId [L91]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
      └─ uses_service RequestInfoService
        └─ method IsValidServiceAccountRequest [L89]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
      └─ uses_service TenantService
        └─ method GetCurrentTenant [L92]
          └─ implementation Workpapers.Next.Services.Features.Tenants.TenantService.GetCurrentTenant [L5-L22]
            └─ uses_service TenantIdentificationService
              └─ method GetCurrentTenant [L20]
                └─ implementation Workpapers.Next.ApplicationService.Services.TenantIdentificationService.GetCurrentTenant [L15-L131]
      └─ uses_service IControlledRepository<Binder>
        └─ method ReadQuery [L101]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L117]
          └─ implementation Workpapers.Next.Services.Features.Requests.RequestProcessor.ProcessAsync [L9-L32]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L121]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L109]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L92]

[web] PUT /api/binders/{binderId}/columns  (Workpapers.Next.API.Controllers.Workpapers.BindersController.UpdateColumns)  [L258–L279] status=200 [auth=AuthorizationPolicies.User]
  └─ calls BinderRepository.WriteQuery [L264]
  └─ calls BinderColumnDataRepository.WriteQuery [L266]
  └─ write Binder [L264]
    └─ reads_from Binders
  └─ write BinderColumnData [L266]
    └─ reads_from BinderColumnData
  └─ uses_service IControlledRepository<Binder>
    └─ method WriteQuery [L264]
      └─ ... (no implementation details available)
  └─ uses_service IControlledRepository<BinderColumnData>
    └─ method WriteQuery [L266]
      └─ ... (no implementation details available)
  └─ sends_request AreBinderColumnDatasetsValidQuery [L273]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Binders.AreBinderColumnDatasetsValidQueryHandler.Handle [L29–L76]
      └─ uses_service ICirrusQueryService (AddScoped)
        └─ method GetDatasetsForFile [L42]
          └─ implementation Workpapers.Next.CirrusServices.CirrusQueryService.GetDatasetsForFile [L18-L250]
  └─ sends_request CanIAccessBinderQuery [L262]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Binders.CanIAccessBinderQueryHandler.Handle [L60–L126]
      └─ uses_service UserService
        └─ method GetUserId [L91]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
      └─ uses_service RequestInfoService
        └─ method IsValidServiceAccountRequest [L89]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
      └─ uses_service TenantService
        └─ method GetCurrentTenant [L92]
          └─ implementation Workpapers.Next.Services.Features.Tenants.TenantService.GetCurrentTenant [L5-L22]
            └─ uses_service TenantIdentificationService
              └─ method GetCurrentTenant [L20]
                └─ implementation Workpapers.Next.ApplicationService.Services.TenantIdentificationService.GetCurrentTenant [L15-L131]
      └─ uses_service IControlledRepository<Binder>
        └─ method ReadQuery [L101]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L117]
          └─ implementation Workpapers.Next.Services.Features.Requests.RequestProcessor.ProcessAsync [L9-L32]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L121]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L109]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L92]

[web] PUT /api/binders/{id:Guid}/export-details  (Workpapers.Next.API.Controllers.Workpapers.BindersController.UpdateExportDetails)  [L449–L460] status=200 [auth=AuthorizationPolicies.User]
  └─ calls BinderRepository.WriteQuery [L455]
  └─ write Binder [L455]
    └─ reads_from Binders
  └─ uses_service IControlledRepository<Binder>
    └─ method WriteQuery [L455]
      └─ ... (no implementation details available)
  └─ uses_service UserService
    └─ method GetUserId [L456]
      └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
  └─ sends_request CanIAccessBinderQuery [L453]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Binders.CanIAccessBinderQueryHandler.Handle [L60–L126]
      └─ uses_service UserService
        └─ method GetUserId [L91]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
      └─ uses_service RequestInfoService
        └─ method IsValidServiceAccountRequest [L89]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
      └─ uses_service TenantService
        └─ method GetCurrentTenant [L92]
          └─ implementation Workpapers.Next.Services.Features.Tenants.TenantService.GetCurrentTenant [L5-L22]
            └─ uses_service TenantIdentificationService
              └─ method GetCurrentTenant [L20]
                └─ implementation Workpapers.Next.ApplicationService.Services.TenantIdentificationService.GetCurrentTenant [L15-L131]
      └─ uses_service IControlledRepository<Binder>
        └─ method ReadQuery [L101]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L117]
          └─ implementation Workpapers.Next.Services.Features.Requests.RequestProcessor.ProcessAsync [L9-L32]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L121]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L109]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L92]

[web] GET /api/binders  (Workpapers.Next.API.Controllers.Workpapers.BindersController.UpdateMatterCounts)  [L629–L636] status=200

[web] POST /api/binder-sections/  (Workpapers.Next.API.Controllers.Workpapers.BinderSectionsController.Create)  [L68–L83] status=201 [auth=AuthorizationPolicies.User]
  └─ maps_to BinderSectionDto [L82]
  └─ calls BinderSectionRepository.Add [L80]
  └─ calls BinderSectionRepository.WriteQuery [L73]
  └─ insert BinderSection [L80]
    └─ reads_from BinderSections
  └─ write BinderSection [L73]
    └─ reads_from BinderSections
  └─ uses_service IControlledRepository<BinderSection>
    └─ method WriteQuery [L73]
      └─ ... (no implementation details available)
  └─ uses_service IMapper
    └─ method Map [L82]
      └─ ... (no implementation details available)
  └─ sends_request CanIAccessBinderQuery [L71]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Binders.CanIAccessBinderQueryHandler.Handle [L60–L126]
      └─ uses_service UserService
        └─ method GetUserId [L91]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
      └─ uses_service RequestInfoService
        └─ method IsValidServiceAccountRequest [L89]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
      └─ uses_service TenantService
        └─ method GetCurrentTenant [L92]
          └─ implementation Workpapers.Next.Services.Features.Tenants.TenantService.GetCurrentTenant [L5-L22]
            └─ uses_service TenantIdentificationService
              └─ method GetCurrentTenant [L20]
                └─ implementation Workpapers.Next.ApplicationService.Services.TenantIdentificationService.GetCurrentTenant [L15-L131]
      └─ uses_service IControlledRepository<Binder>
        └─ method ReadQuery [L101]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L117]
          └─ implementation Workpapers.Next.Services.Features.Requests.RequestProcessor.ProcessAsync [L9-L32]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L121]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L109]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L92]

[web] DELETE /api/binder-sections/{id:Guid}  (Workpapers.Next.API.Controllers.Workpapers.BinderSectionsController.Delete)  [L100–L114] status=200 [auth=AuthorizationPolicies.User]
  └─ calls BinderSectionRepository.Remove [L111]
  └─ calls BinderSectionRepository.WriteQuery [L103]
  └─ delete BinderSection [L111]
    └─ reads_from BinderSections
  └─ write BinderSection [L103]
    └─ reads_from BinderSections
  └─ uses_service IControlledRepository<BinderSection>
    └─ method WriteQuery [L103]
      └─ ... (no implementation details available)
  └─ sends_request CanIAccessBinderQuery [L108]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Binders.CanIAccessBinderQueryHandler.Handle [L60–L126]
      └─ uses_service UserService
        └─ method GetUserId [L91]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
      └─ uses_service RequestInfoService
        └─ method IsValidServiceAccountRequest [L89]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
      └─ uses_service TenantService
        └─ method GetCurrentTenant [L92]
          └─ implementation Workpapers.Next.Services.Features.Tenants.TenantService.GetCurrentTenant [L5-L22]
            └─ uses_service TenantIdentificationService
              └─ method GetCurrentTenant [L20]
                └─ implementation Workpapers.Next.ApplicationService.Services.TenantIdentificationService.GetCurrentTenant [L15-L131]
      └─ uses_service IControlledRepository<Binder>
        └─ method ReadQuery [L101]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L117]
          └─ implementation Workpapers.Next.Services.Features.Requests.RequestProcessor.ProcessAsync [L9-L32]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L121]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L109]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L92]
  └─ sends_request CanIDeleteBinderSectionQuery [L109]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Workpapers.CanIDeleteBinderSectionQueryHandler.Handle [L17–L34]

[web] GET /api/binder-sections/{id:Guid}  (Workpapers.Next.API.Controllers.Workpapers.BinderSectionsController.Get)  [L41–L51] status=200 [auth=AuthorizationPolicies.User]
  └─ maps_to BinderSectionDto [L44]
    └─ automapper.registration ExternalApiMappingProfile (BinderSection->BinderSectionDto) [L189]
    └─ automapper.registration WorkpapersMappingProfile (BinderSection->BinderSectionDto) [L465]
  └─ calls BinderSectionRepository.ReadQuery [L44]
  └─ query BinderSection [L44]
    └─ reads_from BinderSections
  └─ uses_service IControlledRepository<BinderSection>
    └─ method ReadQuery [L44]
      └─ ... (no implementation details available)
  └─ sends_request CanIAccessBinderQuery [L48]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Binders.CanIAccessBinderQueryHandler.Handle [L60–L126]
      └─ uses_service UserService
        └─ method GetUserId [L91]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
      └─ uses_service RequestInfoService
        └─ method IsValidServiceAccountRequest [L89]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
      └─ uses_service TenantService
        └─ method GetCurrentTenant [L92]
          └─ implementation Workpapers.Next.Services.Features.Tenants.TenantService.GetCurrentTenant [L5-L22]
            └─ uses_service TenantIdentificationService
              └─ method GetCurrentTenant [L20]
                └─ implementation Workpapers.Next.ApplicationService.Services.TenantIdentificationService.GetCurrentTenant [L15-L131]
      └─ uses_service IControlledRepository<Binder>
        └─ method ReadQuery [L101]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L117]
          └─ implementation Workpapers.Next.Services.Features.Requests.RequestProcessor.ProcessAsync [L9-L32]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L121]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L109]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L92]

[web] GET /api/binder-sections/for-binder/{binderId:Guid}  (Workpapers.Next.API.Controllers.Workpapers.BinderSectionsController.GetForBinder)  [L53–L66] status=200 [auth=AuthorizationPolicies.User]
  └─ maps_to BinderSectionDto [L58]
    └─ automapper.registration ExternalApiMappingProfile (BinderSection->BinderSectionDto) [L189]
    └─ automapper.registration WorkpapersMappingProfile (BinderSection->BinderSectionDto) [L465]
  └─ calls BinderSectionRepository.ReadQuery [L58]
  └─ query BinderSection [L58]
    └─ reads_from BinderSections
  └─ uses_service IControlledRepository<BinderSection>
    └─ method ReadQuery [L58]
      └─ ... (no implementation details available)
  └─ sends_request CanIAccessBinderQuery [L56]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Binders.CanIAccessBinderQueryHandler.Handle [L60–L126]
      └─ uses_service UserService
        └─ method GetUserId [L91]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
      └─ uses_service RequestInfoService
        └─ method IsValidServiceAccountRequest [L89]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
      └─ uses_service TenantService
        └─ method GetCurrentTenant [L92]
          └─ implementation Workpapers.Next.Services.Features.Tenants.TenantService.GetCurrentTenant [L5-L22]
            └─ uses_service TenantIdentificationService
              └─ method GetCurrentTenant [L20]
                └─ implementation Workpapers.Next.ApplicationService.Services.TenantIdentificationService.GetCurrentTenant [L15-L131]
      └─ uses_service IControlledRepository<Binder>
        └─ method ReadQuery [L101]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L117]
          └─ implementation Workpapers.Next.Services.Features.Requests.RequestProcessor.ProcessAsync [L9-L32]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L121]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L109]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L92]

[web] PUT /api/binder-sections/{id:Guid}/reorder  (Workpapers.Next.API.Controllers.Workpapers.BinderSectionsController.Reorder)  [L122–L138] status=200 [auth=AuthorizationPolicies.User]
  └─ calls BinderSectionRepository.WriteQuery [L129]
  └─ calls BinderSectionRepository.ReadQuery [L125]
  └─ query BinderSection [L125]
    └─ reads_from BinderSections
  └─ write BinderSection [L129]
    └─ reads_from BinderSections
  └─ uses_service IControlledRepository<BinderSection>
    └─ method ReadQuery [L125]
      └─ ... (no implementation details available)
  └─ uses_service IMapper
    └─ method Map [L137]
      └─ ... (no implementation details available)
  └─ sends_request CanIAccessBinderQuery [L127]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Binders.CanIAccessBinderQueryHandler.Handle [L60–L126]
      └─ uses_service UserService
        └─ method GetUserId [L91]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
      └─ uses_service RequestInfoService
        └─ method IsValidServiceAccountRequest [L89]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
      └─ uses_service TenantService
        └─ method GetCurrentTenant [L92]
          └─ implementation Workpapers.Next.Services.Features.Tenants.TenantService.GetCurrentTenant [L5-L22]
            └─ uses_service TenantIdentificationService
              └─ method GetCurrentTenant [L20]
                └─ implementation Workpapers.Next.ApplicationService.Services.TenantIdentificationService.GetCurrentTenant [L15-L131]
      └─ uses_service IControlledRepository<Binder>
        └─ method ReadQuery [L101]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L117]
          └─ implementation Workpapers.Next.Services.Features.Requests.RequestProcessor.ProcessAsync [L9-L32]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L121]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L109]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L92]

[web] PUT /api/binder-sections/{id:Guid}  (Workpapers.Next.API.Controllers.Workpapers.BinderSectionsController.Update)  [L85–L98] status=200 [auth=AuthorizationPolicies.User]
  └─ calls BinderSectionRepository.WriteQuery [L88]
  └─ write BinderSection [L88]
    └─ reads_from BinderSections
  └─ uses_service IControlledRepository<BinderSection>
    └─ method WriteQuery [L88]
      └─ ... (no implementation details available)
  └─ sends_request CanIAccessBinderQuery [L93]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Binders.CanIAccessBinderQueryHandler.Handle [L60–L126]
      └─ uses_service UserService
        └─ method GetUserId [L91]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
      └─ uses_service RequestInfoService
        └─ method IsValidServiceAccountRequest [L89]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
      └─ uses_service TenantService
        └─ method GetCurrentTenant [L92]
          └─ implementation Workpapers.Next.Services.Features.Tenants.TenantService.GetCurrentTenant [L5-L22]
            └─ uses_service TenantIdentificationService
              └─ method GetCurrentTenant [L20]
                └─ implementation Workpapers.Next.ApplicationService.Services.TenantIdentificationService.GetCurrentTenant [L15-L131]
      └─ uses_service IControlledRepository<Binder>
        └─ method ReadQuery [L101]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L117]
          └─ implementation Workpapers.Next.Services.Features.Requests.RequestProcessor.ProcessAsync [L9-L32]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L121]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L109]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L92]

[web] POST /api/binder-status-requirements/  (Workpapers.Next.API.Controllers.Workpapers.BinderStatusRequirementsController.Create)  [L43–L50] status=201
  └─ calls BinderStatusRequirementsRepository.Add [L47]
  └─ insert BinderStatusRequirements [L47]
    └─ reads_from BinderStatusRequirements
  └─ uses_service IControlledRepository<BinderStatusRequirements>
    └─ method Add [L47]
      └─ ... (no implementation details available)

[web] GET /api/binder-status-requirements/  (Workpapers.Next.API.Controllers.Workpapers.BinderStatusRequirementsController.Get)  [L33–L41] status=200
  └─ maps_to BinderStatusRequirementsDto [L36]
    └─ automapper.registration WorkpapersMappingProfile (BinderStatusRequirements->BinderStatusRequirementsDto) [L911]
  └─ calls BinderStatusRequirementsRepository.ReadQuery [L36]
  └─ query BinderStatusRequirements [L36]
    └─ reads_from BinderStatusRequirements
  └─ uses_service IControlledRepository<BinderStatusRequirements>
    └─ method ReadQuery [L36]
      └─ ... (no implementation details available)

[web] PUT /api/binder-status-requirements/{id:Guid}  (Workpapers.Next.API.Controllers.Workpapers.BinderStatusRequirementsController.Update)  [L52–L62] status=200
  └─ calls BinderStatusRequirementsRepository.WriteQuery [L55]
  └─ write BinderStatusRequirements [L55]
    └─ reads_from BinderStatusRequirements
  └─ uses_service IControlledRepository<BinderStatusRequirements>
    └─ method WriteQuery [L55]
      └─ ... (no implementation details available)

[web] POST /api/binder-templates/  (Workpapers.Next.API.Controllers.Workpapers.BinderTemplatesController.Create)  [L89–L99] status=201 [auth=AuthorizationPolicies.Administrator]
  └─ calls BinderTemplateRepository.Add [L96]
  └─ insert BinderTemplate [L96]
    └─ reads_from BinderTemplates
  └─ uses_service IControlledRepository<BinderTemplate>
    └─ method Add [L96]
      └─ ... (no implementation details available)

[web] DELETE /api/binder-templates/{id:Guid}  (Workpapers.Next.API.Controllers.Workpapers.BinderTemplatesController.Delete)  [L113–L127] status=200 [auth=AuthorizationPolicies.Administrator]
  └─ calls BinderTemplateRepository.WriteQuery [L119]
  └─ write BinderTemplate [L119]
    └─ reads_from BinderTemplates
  └─ uses_service IControlledRepository<BinderTemplate>
    └─ method WriteQuery [L119]
      └─ ... (no implementation details available)
  └─ uses_service UserService
    └─ method IsSuperUser [L117]
      └─ implementation Workpapers.Next.ApplicationService.Services.UserService.IsSuperUser [L20-L295]

[web] GET /api/binder-templates/{id:Guid}  (Workpapers.Next.API.Controllers.Workpapers.BinderTemplatesController.Get)  [L49–L73] status=200 [auth=AuthorizationPolicies.Administrator]
  └─ maps_to BinderRecordTemplateDto [L59]
  └─ maps_to BinderTemplateDto [L55]
    └─ automapper.registration WorkpapersMappingProfile (BinderTemplate->BinderTemplateDto) [L726]
  └─ calls ExcludedBinderTemplateRepository.ReadQuery [L70]
  └─ calls BinderTemplateRepository.ReadQuery [L55]
  └─ query BinderTemplate [L55]
    └─ reads_from BinderTemplates
  └─ query ExcludedBinderTemplate [L70]
    └─ reads_from ExcludedBinderTemplates
  └─ uses_service IControlledRepository<BinderTemplate>
    └─ method ReadQuery [L55]
      └─ ... (no implementation details available)
  └─ uses_service IControlledRepository<ExcludedBinderTemplate>
    └─ method ReadQuery [L70]
      └─ ... (no implementation details available)
  └─ uses_service UserService
    └─ method IsSuperUser [L53]
      └─ implementation Workpapers.Next.ApplicationService.Services.UserService.IsSuperUser [L20-L295]

[web] GET /api/binder-templates/global  (Workpapers.Next.API.Controllers.Workpapers.BinderTemplatesController.GlobalSearch)  [L82–L87] status=200 [auth=AuthorizationPolicies.Administrator]
  └─ sends_request GetBinderTemplatesGlobalQuery [L86]

[web] GET /api/binder-templates/  (Workpapers.Next.API.Controllers.Workpapers.BinderTemplatesController.Search)  [L75–L80] status=200 [auth=AuthorizationPolicies.User]
  └─ sends_request GetBinderTemplatesQuery [L79]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Templates.BinderTemplates.GetBinderTemplatesQueryHandler.Handle [L47–L136]
      └─ uses_service UserService
        └─ method IsSuperUser [L96]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.IsSuperUser [L20-L295]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.IsSuperUser [L20-L295]
      └─ uses_service IControlledRepository<BinderTemplate>
        └─ method ReadQuery [L98]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<ExcludedBinderTemplate>
        └─ method ReadQuery [L132]
          └─ ... (no implementation details available)

[web] PUT /api/binder-templates/{id:Guid}  (Workpapers.Next.API.Controllers.Workpapers.BinderTemplatesController.Update)  [L101–L111] status=200 [auth=AuthorizationPolicies.Administrator]
  └─ calls BinderTemplateRepository.WriteQuery [L107]
  └─ write BinderTemplate [L107]
    └─ reads_from BinderTemplates
  └─ uses_service IControlledRepository<BinderTemplate>
    └─ method WriteQuery [L107]
      └─ ... (no implementation details available)

[web] PUT /api/binder-templates/{id:Guid}/include/{include:bool}  (Workpapers.Next.API.Controllers.Workpapers.BinderTemplatesController.UpdateInclude)  [L129–L140] status=200 [auth=AuthorizationPolicies.Administrator]
  └─ calls BinderTemplateRepository.WriteQuery [L133]
  └─ write BinderTemplate [L133]
    └─ reads_from BinderTemplates
  └─ uses_service IControlledRepository<BinderTemplate>
    └─ method WriteQuery [L133]
      └─ ... (no implementation details available)

[web] PUT /api/binder-types/{id:guid}/record-template-set  (Workpapers.Next.API.Controllers.Workpapers.BinderTypesController.CreateOrUpdateBinderRecordTemplates)  [L109–L128] status=200
  └─ calls BinderTypeRecordTemplateSetRepository.Add [L122]
  └─ calls BinderTypeRecordTemplateSetRepository.WriteQuery [L114]
  └─ insert BinderTypeRecordTemplateSet [L122]
    └─ reads_from BinderTypeRecordTemplateSets
  └─ write BinderTypeRecordTemplateSet [L114]
    └─ reads_from BinderTypeRecordTemplateSets
  └─ uses_service IControlledRepository<BinderTypeRecordTemplateSet>
    └─ method WriteQuery [L114]
      └─ ... (no implementation details available)

[web] GET /api/binder-types/  (Workpapers.Next.API.Controllers.Workpapers.BinderTypesController.GetAll)  [L48–L54] status=200
  └─ sends_request GetValidBinderTypesQuery [L51]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Binders.GetValidBinderTypesQueryHandler.Handle [L31–L77]
      └─ maps_to BinderTypeLightDto [L69]
        └─ automapper.registration WorkpapersMappingProfile (BinderType->BinderTypeLightDto) [L762]
      └─ uses_service IControlledRepository<BinderTemplate>
        └─ method ReadQuery [L57]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<BinderType>
        └─ method ReadQuery [L69]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<ExcludedBinderTemplate>
        └─ method ReadQuery [L55]
          └─ ... (no implementation details available)
      └─ uses_service IMapper
        └─ method ConfigurationProvider [L72]
          └─ ... (no implementation details available)

[web] GET /api/binder-types/{id:guid}/record-templates  (Workpapers.Next.API.Controllers.Workpapers.BinderTypesController.GetBinderRecordTemplates)  [L56–L92] status=200
  └─ maps_to BinderRecordTemplateDto [L84]
  └─ calls BinderTypeRecordTemplateSetRepository.ReadQuery [L59]
  └─ query BinderTypeRecordTemplateSet [L59]
    └─ reads_from BinderTypeRecordTemplateSets
  └─ uses_service IControlledRepository<BinderTypeRecordTemplateSet>
    └─ method ReadQuery [L59]
      └─ ... (no implementation details available)

[web] GET /api/binder-types/{id:guid}/record-template-set  (Workpapers.Next.API.Controllers.Workpapers.BinderTypesController.GetBinderTypeRecordTemplates)  [L94–L107] status=200
  └─ calls BinderTypeRecordTemplateSetRepository.ReadQuery [L100]
  └─ query BinderTypeRecordTemplateSet [L100]
    └─ reads_from BinderTypeRecordTemplateSets
  └─ uses_service IControlledRepository<BinderTypeRecordTemplateSet>
    └─ method ReadQuery [L100]
      └─ ... (no implementation details available)

[web] PUT /api/classifications/parse-account-numbers/{system}  (Workpapers.Next.API.Controllers.Workpapers.ClassificationsController.ParseAccountNumbers)  [L28–L32] status=200 [auth=AuthorizationPolicies.User]
  └─ sends_request ParseClassificationFromNumberQuery [L31]
    └─ handled_by Cirrus.ApplicationService.Accounting.Queries.ParseClassificationFromNumberQueryHandler.Handle [L27–L286]

[web] POST /api/sources/export/  (Workpapers.Next.API.Controllers.Workpapers.ExportSourcesController.Create)  [L79–L86] status=201 [auth=AuthorizationPolicies.User]
  └─ sends_request CreateExportSourceCommand [L84]
    └─ handled_by Workpapers.Next.ApplicationService.Commands.Workpapers.SourceData.ExportSources.CreateExportSourceCommandHandler.Handle [L28–L76]
      └─ uses_service IControlledRepository<ExportSource>
        └─ method Add [L45]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<SourceType>
        └─ method ReadQuery [L65]
          └─ ... (no implementation details available)

[web] POST /api/sources/export/{id:guid}/journal  (Workpapers.Next.API.Controllers.Workpapers.ExportSourcesController.CreateJournal)  [L88–L93] status=201 [auth=AuthorizationPolicies.User]
  └─ sends_request PostExportSourceJournalCommand [L91]
    └─ handled_by Workpapers.Next.ApplicationService.Commands.Workpapers.SourceData.ExportSources.PostExportSourceJournalCommandHandler.Handle [L32–L82]
      └─ uses_client DataGetClient [L47]
        └─ calls PostJournal (POST /api/accounting-file/{fileId}/journal?apiType={*}, method=CreateJournalAsync, target=DataGet.Api, query=apiType={*}) [L127]
          └─ target_service DataGet.Api
            └─ [web] POST /api/accounting-file/{fileId}/journal  (DataGet.Api.Controllers.Connections.AccountingFileController.PostJournal)  [L79–L87] status=201 [auth=Authentication.MachineToMachinePolicy]
              └─ sends_request PostJournalCommand [L83]
                └─ handled_by Cirrus.Connections.DataGet.Commands.PostJournalCommandHandler.Handle [L30–L135]
                  └─ uses_client IDatagetClient [L82]
                  └─ uses_service IControlledRepository<SourceAccount>
                    └─ method WriteQuery [L56]
                      └─ ... (no implementation details available)
                  └─ uses_service IControlledRepository<SourceDivision>
                    └─ method ReadQuery [L76]
                      └─ ... (no implementation details available)
                  └─ uses_service IDatagetClient (InstancePerLifetimeScope)
                    └─ method CreateJournalAsync [L82]
                      └─ ... (no implementation details available)
                  └─ uses_service IDatagetFileIdService (InstancePerLifetimeScope)
                    └─ method GetFileIdFromSource [L52]
                      └─ implementation Cirrus.Connections.DataGet.Services.DatagetFileIdService.GetFileIdFromSource [L14-L37]
              └─ returns JournalPostResponse [L83]
      └─ uses_service DataGetClient
        └─ method CreateJournalAsync [L47]
          └─ implementation Workpapers.Next.DataGet.Client.DataGetClient.CreateJournalAsync [L32-L506]
            └─ calls PostJournal [L127]
      └─ uses_service IControlledRepository<ExportSource>
        └─ method ReadQuery [L45]
          └─ ... (no implementation details available)

[web] DELETE /api/sources/export/{id:guid}  (Workpapers.Next.API.Controllers.Workpapers.ExportSourcesController.Delete)  [L108–L116] status=204 [auth=AuthorizationPolicies.User]
  └─ sends_request DeleteExportSourceCommand [L113]
    └─ handled_by Workpapers.Next.ApplicationService.Commands.Workpapers.SourceData.ExportSources.DeleteExportSourceCommandHandler.Handle [L23–L41]
      └─ uses_service IControlledRepository<ExportSource>
        └─ method ReadQuery [L34]
          └─ ... (no implementation details available)

[web] GET /api/sources/export/{id:guid}  (Workpapers.Next.API.Controllers.Workpapers.ExportSourcesController.Get)  [L34–L38] status=200 [auth=AuthorizationPolicies.User]
  └─ sends_request GetExportSourceQuery [L37]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Workpapers.SourceData.ExportSources.GetExportSourceQueryHandler.Handle [L26–L43]
      └─ maps_to ExportSourceDto [L39]
        └─ automapper.registration WorkpapersMappingProfile (ExportSource->ExportSourceDto) [L602]
      └─ uses_service IControlledRepository<ExportSource>
        └─ method ReadQuery [L39]
          └─ ... (no implementation details available)

[web] GET /api/sources/export/{id:guid}/accounts  (Workpapers.Next.API.Controllers.Workpapers.ExportSourcesController.GetAccounts)  [L68–L73] status=200 [auth=AuthorizationPolicies.User]
  └─ sends_request GetExportSourceAccountsQuery [L71]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Workpapers.SourceData.ExportSources.GetExportSourceAccountsQueryHandler.Handle [L29–L68]
      └─ uses_client DataGetClient [L46]
        └─ calls GetAccounts (GET /api/accounting-file/{fileId}/accounts?apiType={*}&password={*}&username={*}, method=GetAccountsAsync, target=DataGet.Api, query=apiType={*}&password={*}&username={*}) [L65]
          └─ target_service DataGet.Api
            └─ [web] GET /api/accounting-file/{fileId}/accounts  (DataGet.Api.Controllers.Connections.AccountingFileController.GetAccounts)  [L44–L52] status=200 [auth=Authentication.MachineToMachinePolicy]
              └─ sends_request GetAccountsQuery [L48]
                └─ handled_by Cirrus.Connections.DataGet.Queries.GetAccountsQueryHandler.Handle [L25–L59]
                  └─ uses_client DataGetClient [L40]
                    └─ calls GetAccounts (GET /api/accounting-file/{fileId}/accounts?apiType={*}&password={*}&username={*}, method=GetAccountsAsync, target=DataGet.Api, query=apiType={*}&password={*}&username={*}) [L65]
                      └─ target_service DataGet.Api (see previous expansion)
                  └─ uses_service DatagetFileIdService
                    └─ method GetFileIdFromSource [L38]
                      └─ implementation Cirrus.Connections.DataGet.Services.DatagetFileIdService.GetFileIdFromSource [L14-L37]
                  └─ uses_service DataGetClient
                    └─ method GetAccountsAsync [L40]
                      └─ implementation Cirrus.Connections.DataGet.Client.DataGetClient.GetAccountsAsync [L15-L302]
                        └─ calls GetAccounts [L106]
      └─ uses_service DataGetClient
        └─ method GetAccountsAsync [L46]
          └─ implementation Workpapers.Next.DataGet.Client.DataGetClient.GetAccountsAsync [L32-L506]
            └─ calls GetAccounts [L65]
      └─ uses_service IControlledRepository<ExportSource>
        └─ method ReadQuery [L42]
          └─ ... (no implementation details available)

[web] GET /api/sources/export/for-client/{clientId:Guid}  (Workpapers.Next.API.Controllers.Workpapers.ExportSourcesController.GetForClient)  [L44–L48] status=200 [auth=AuthorizationPolicies.User]
  └─ sends_request GetExportSourcesForClientQuery [L47]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Workpapers.SourceData.ExportSources.GetExportSourcesForClientQueryHandler.Handle [L29–L47]
      └─ maps_to ExportSourceLightDto [L42]
        └─ automapper.registration WorkpapersMappingProfile (ExportSource->ExportSourceLightDto) [L601]
      └─ uses_service IControlledRepository<ExportSource>
        └─ method ReadQuery [L42]
          └─ ... (no implementation details available)
      └─ uses_service IMapper
        └─ method ConfigurationProvider [L44]
          └─ ... (no implementation details available)

[web] GET /api/sources/export/{id:guid}/journal-for-binder/{binderId:guid}  (Workpapers.Next.API.Controllers.Workpapers.ExportSourcesController.GetJournal)  [L61–L66] status=200 [auth=AuthorizationPolicies.User]
  └─ sends_request GetExportSourceJournalQuery [L64]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Workpapers.SourceData.ExportSources.GetExportSourceJournalQueryHandler.Handle [L38–L265]
      └─ maps_to SourceAccountUltraLightDto [L139]
        └─ automapper.registration CirrusMappingProfile (SourceAccount->SourceAccountUltraLightDto) [L260]
        └─ automapper.registration WorkpapersMappingProfile (SourceAccount->SourceAccountUltraLightDto) [L615]
      └─ uses_service IControlledRepository<Binder>
        └─ method ReadQuery [L90]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<ExportSource>
        └─ method ReadQuery [L69]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<SourceAccount>
        └─ method ReadQuery [L108]
          └─ ... (no implementation details available)
      └─ uses_service IMapper
        └─ method ConfigurationProvider [L141]
          └─ ... (no implementation details available)
      └─ uses_service ISwingingAccountService (AddScoped)
        └─ method GetSwingingAccounts [L80]
          └─ implementation Workpapers.Next.Services.SwingingAccounts.SwingingAccountService.GetSwingingAccounts [L14-L91]
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L106]
          └─ implementation Workpapers.Next.Services.Features.Requests.RequestProcessor.ProcessAsync [L9-L32]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle

[web] GET /api/sources/export/types  (Workpapers.Next.API.Controllers.Workpapers.ExportSourcesController.GetSourceTypes)  [L54–L59] status=200 [auth=AuthorizationPolicies.User]
  └─ sends_request GetSourceTypesQuery [L58]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Workpapers.SourceData.SourceTypes.GetSourceTypesQueryHandler.Handle [L33–L62]
      └─ maps_to SourceTypeLightDto [L58]
      └─ uses_service IControlledRepository<SourceType>
        └─ method ReadQuery [L46]
          └─ ... (no implementation details available)
      └─ uses_service IMapper
        └─ method ConfigurationProvider [L59]
          └─ ... (no implementation details available)

[web] PUT /api/sources/export/{id:guid}  (Workpapers.Next.API.Controllers.Workpapers.ExportSourcesController.Update)  [L98–L103] status=200 [auth=AuthorizationPolicies.User]
  └─ sends_request UpdateExportSourceCommand [L101]
    └─ handled_by Workpapers.Next.ApplicationService.Commands.Workpapers.SourceData.ExportSources.UpdateExportSourceCommandHandler.Handle [L30–L82]
      └─ uses_service IControlledRepository<ExportSource>
        └─ method WriteQuery [L43]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<SourceType>
        └─ method ReadQuery [L71]
          └─ ... (no implementation details available)

[web] GET /api/hmrc  (Workpapers.Next.API.Controllers.Workpapers.HmrcController.GetBinder)  [L98–L103] status=200 [auth=AuthorizationPolicies.User]
  └─ calls BinderRepository.ReadQuery [L100]
  └─ query Binder [L100]
    └─ reads_from Binders
  └─ uses_service IControlledRepository<Binder>
    └─ method ReadQuery [L100]
      └─ ... (no implementation details available)

[web] GET /api/hmrc/feedback  (Workpapers.Next.API.Controllers.Workpapers.HmrcController.GetFraudHeaderFeedback)  [L89–L96] status=200 [auth=AuthorizationPolicies.User]
  └─ sends_request GetHmrcFraudHeaderFeedbackQuery [L93]
    └─ handled_by DataGet.Integrations.Hmrc.Api.Queries.GetHmrcFraudHeaderFeedbackQueryHandler.Handle [L14–L27]
      └─ uses_client HmrcClient [L25]
      └─ uses_service HmrcClient
        └─ method GetFraudHeaderFeedback [L25]
          └─ implementation DataGet.Integrations.Hmrc.Api.Services.HmrcClient.GetFraudHeaderFeedback [L35-L298]

[web] POST /api/hmrc/vat/obligations  (Workpapers.Next.API.Controllers.Workpapers.HmrcController.GetVatObligations)  [L47–L66] status=201 [auth=AuthorizationPolicies.User]
  └─ sends_request GetVatObligationsQuery [L65]
    └─ handled_by DataGet.Integrations.Hmrc.Api.Queries.Vat.GetVatObligationsQueryHandler.Handle [L22–L35]
      └─ uses_client HmrcClient [L33]
      └─ uses_service HmrcClient
        └─ method GetVatObligations [L33]
          └─ implementation DataGet.Integrations.Hmrc.Api.Services.HmrcClient.GetVatObligations [L35-L298]
  └─ sends_request CanIAccessBinderQuery [L52]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Binders.CanIAccessBinderQueryHandler.Handle [L60–L126]
      └─ uses_service UserService
        └─ method GetUserId [L91]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
      └─ uses_service RequestInfoService
        └─ method IsValidServiceAccountRequest [L89]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
      └─ uses_service TenantService
        └─ method GetCurrentTenant [L92]
          └─ implementation Workpapers.Next.Services.Features.Tenants.TenantService.GetCurrentTenant [L5-L22]
            └─ uses_service TenantIdentificationService
              └─ method GetCurrentTenant [L20]
                └─ implementation Workpapers.Next.ApplicationService.Services.TenantIdentificationService.GetCurrentTenant [L15-L131]
      └─ uses_service IControlledRepository<Binder>
        └─ method ReadQuery [L101]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L117]
          └─ implementation Workpapers.Next.Services.Features.Requests.RequestProcessor.ProcessAsync [L9-L32]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L121]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L109]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L92]

[web] POST /api/hmrc/vat/package/{vrn}  (Workpapers.Next.API.Controllers.Workpapers.HmrcController.GetVatPackage)  [L37–L45] status=201 [auth=AuthorizationPolicies.User]
  └─ sends_request GetVatPackageQuery [L42]
    └─ handled_by DataGet.Integrations.Hmrc.Api.Queries.Vat.GetVatPackageQueryHandler.Handle [L11–L39]
      └─ uses_client HmrcClient [L24]
      └─ uses_service HmrcClient
        └─ method GetVatLiabilities [L24]
          └─ implementation DataGet.Integrations.Hmrc.Api.Services.HmrcClient.GetVatLiabilities [L35-L298]
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L26]
          └─ implementation DataGet.Services.Features.Requests.RequestProcessor.ProcessAsync [L7-L35]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle
  └─ returns VatPackageDto [L42]

[web] POST /api/hmrc/vat/submit  (Workpapers.Next.API.Controllers.Workpapers.HmrcController.SubmitVatReturn)  [L68–L78] status=201 [auth=AuthorizationPolicies.User]
  └─ sends_request SubmitVatReturnCommand [L77]
    └─ handled_by DataGet.Integrations.Hmrc.Api.Commands.Vat.SubmitVatReturnCommandHandler.Handle [L14–L28]
      └─ uses_client HmrcClient [L25]
      └─ uses_service HmrcClient
        └─ method SubmitVatReturn [L25]
          └─ implementation DataGet.Integrations.Hmrc.Api.Services.HmrcClient.SubmitVatReturn [L35-L298]
  └─ sends_request CanIAccessBinderQuery [L72]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Binders.CanIAccessBinderQueryHandler.Handle [L60–L126]
      └─ uses_service UserService
        └─ method GetUserId [L91]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
      └─ uses_service RequestInfoService
        └─ method IsValidServiceAccountRequest [L89]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
      └─ uses_service TenantService
        └─ method GetCurrentTenant [L92]
          └─ implementation Workpapers.Next.Services.Features.Tenants.TenantService.GetCurrentTenant [L5-L22]
            └─ uses_service TenantIdentificationService
              └─ method GetCurrentTenant [L20]
                └─ implementation Workpapers.Next.ApplicationService.Services.TenantIdentificationService.GetCurrentTenant [L15-L131]
      └─ uses_service IControlledRepository<Binder>
        └─ method ReadQuery [L101]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L117]
          └─ implementation Workpapers.Next.Services.Features.Requests.RequestProcessor.ProcessAsync [L9-L32]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L121]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L109]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L92]

[web] POST /api/hmrc/validate  (Workpapers.Next.API.Controllers.Workpapers.HmrcController.ValidateFraudHeaders)  [L80–L87] status=201 [auth=AuthorizationPolicies.User]
  └─ sends_request ValidateHmrcFraudHeadersQuery [L84]
    └─ handled_by DataGet.Integrations.Hmrc.Api.Queries.ValidateHmrcFraudHeadersQueryHandler.Handle [L22–L35]
      └─ uses_client HmrcClient [L33]
      └─ uses_service HmrcClient
        └─ method ValidateFraudHeaders [L33]
          └─ implementation DataGet.Integrations.Hmrc.Api.Services.HmrcClient.ValidateFraudHeaders [L35-L298]
      └─ validation _hmrcClient.ValidateFraudHeaders [L33]

[web] GET /api/import-runs/{id:guid}  (Workpapers.Next.API.Controllers.Workpapers.ImportRunController.Get)  [L51–L64] status=200 [auth=AuthorizationPolicies.User]
  └─ maps_to JournalLightDto [L60]
  └─ maps_to ImportRunDto [L54]
    └─ automapper.registration CirrusMappingProfile (ImportRun->ImportRunDto) [L517]
    └─ automapper.registration WorkpapersMappingProfile (ImportRun->ImportRunDto) [L817]
  └─ calls ImportRunRepository.ReadQuery [L54]
  └─ query ImportRun [L54]
    └─ reads_from ImportRuns
  └─ uses_service IControlledRepository<ImportRun>
    └─ method ReadQuery [L54]
      └─ ... (no implementation details available)
  └─ uses_service IMapper
    └─ method Map [L60]
      └─ ... (no implementation details available)
  └─ sends_request GetImportRunJournalsQuery [L59]
    └─ handled_by Cirrus.ApplicationService.Accounting.Queries.Ledger.GetImportRunJournalsQueryHandler.Handle [L28–L83]
      └─ maps_to JournalCreateModel [L59]
        └─ converts_to JournalLightDto [L491]
        └─ converts_to JournalLightDto [L861]
  └─ sends_request CanIAccessBinderQuery [L57]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Binders.CanIAccessBinderQueryHandler.Handle [L60–L126]
      └─ uses_service UserService
        └─ method GetUserId [L91]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
      └─ uses_service RequestInfoService
        └─ method IsValidServiceAccountRequest [L89]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
      └─ uses_service TenantService
        └─ method GetCurrentTenant [L92]
          └─ implementation Workpapers.Next.Services.Features.Tenants.TenantService.GetCurrentTenant [L5-L22]
            └─ uses_service TenantIdentificationService
              └─ method GetCurrentTenant [L20]
                └─ implementation Workpapers.Next.ApplicationService.Services.TenantIdentificationService.GetCurrentTenant [L15-L131]
      └─ uses_service IControlledRepository<Binder>
        └─ method ReadQuery [L101]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L117]
          └─ implementation Workpapers.Next.Services.Features.Requests.RequestProcessor.ProcessAsync [L9-L32]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L121]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L109]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L92]

[web] GET /api/import-runs/compare  (Workpapers.Next.API.Controllers.Workpapers.ImportRunController.GetComparison)  [L97–L105] status=200 [auth=AuthorizationPolicies.User]
  └─ sends_request GetCompareImportRunsQuery [L102]
    └─ handled_by Cirrus.ApplicationService.Accounting.Queries.Ledger.GetCompareImportRunsQueryHandler.Handle [L33–L165]

[web] GET /api/import-runs/for-binder  (Workpapers.Next.API.Controllers.Workpapers.ImportRunController.GetForBinder)  [L70–L90] status=200 [auth=AuthorizationPolicies.User]
  └─ maps_to ImportRunLightDto [L82]
    └─ automapper.registration CirrusMappingProfile (ImportRun->ImportRunLightDto) [L513]
    └─ automapper.registration WorkpapersMappingProfile (ImportRun->ImportRunLightDto) [L816]
  └─ calls BinderRepository.ReadQuery [L73]
  └─ calls ImportRunRepository.ReadQuery [L82]
  └─ query ImportRun [L82]
    └─ reads_from ImportRuns
  └─ query Binder [L73]
    └─ reads_from Binders
  └─ uses_service IControlledRepository<Binder>
    └─ method ReadQuery [L73]
      └─ ... (no implementation details available)
  └─ uses_service IControlledRepository<ImportRun>
    └─ method ReadQuery [L82]
      └─ ... (no implementation details available)
  └─ sends_request CanIAccessBinderQuery [L77]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Binders.CanIAccessBinderQueryHandler.Handle [L60–L126]
      └─ uses_service UserService
        └─ method GetUserId [L91]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
      └─ uses_service RequestInfoService
        └─ method IsValidServiceAccountRequest [L89]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
      └─ uses_service TenantService
        └─ method GetCurrentTenant [L92]
          └─ implementation Workpapers.Next.Services.Features.Tenants.TenantService.GetCurrentTenant [L5-L22]
            └─ uses_service TenantIdentificationService
              └─ method GetCurrentTenant [L20]
                └─ implementation Workpapers.Next.ApplicationService.Services.TenantIdentificationService.GetCurrentTenant [L15-L131]
      └─ uses_service IControlledRepository<Binder>
        └─ method ReadQuery [L101]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L117]
          └─ implementation Workpapers.Next.Services.Features.Requests.RequestProcessor.ProcessAsync [L9-L32]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L121]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L109]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L92]

[web] PUT /api/import-runs/reinstate  (Workpapers.Next.API.Controllers.Workpapers.ImportRunController.Reinstate)  [L111–L115] status=200 [auth=AuthorizationPolicies.User]
  └─ sends_request ReinstateImportRunCommand [L114]
    └─ handled_by Workpapers.Next.ApplicationService.Commands.Workpapers.ImportRuns.ReinstateImportRunCommandHandler.Handle [L25–L72]
      └─ uses_service IControlledRepository<Binder>
        └─ method WriteQuery [L58]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<ImportRun>
        └─ method WriteQuery [L43]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L61]
          └─ implementation Workpapers.Next.Services.Features.Requests.RequestProcessor.ProcessAsync [L9-L32]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle

[web] POST /api/journals/balancing-journal/{binderColumnId:guid}  (Workpapers.Next.API.Controllers.Workpapers.JournalController.Create)  [L208–L215] status=201 [auth=AuthorizationPolicies.User]
  └─ sends_request ExportBalancingJournalCommand [L212]
    └─ handled_by Cirrus.ApplicationService.Accounting.Commands.ExportBalancingJournalCommandHandler.Handle [L45–L182]
      └─ uses_service ApiService (SingleInstance)
        └─ method GetFeatures [L172]
          └─ implementation Cirrus.ApplicationService.Accounting.Services.ApiService.GetFeatures [L14-L75]
      └─ uses_service IControlledRepository<Dataset>
        └─ method WriteQuery [L66]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<Journal>
        └─ method Add [L98]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L177]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)
  └─ returns JournalExportResponse [L212]

[web] DELETE /api/journals/{id:guid}  (Workpapers.Next.API.Controllers.Workpapers.JournalController.Delete)  [L269–L277] status=200 [auth=AuthorizationPolicies.User]
  └─ calls JournalRepository.WriteQuery [L272]
  └─ write Journal [L272]
  └─ uses_service IControlledRepository<Journal>
    └─ method WriteQuery [L272]
      └─ ... (no implementation details available)
  └─ sends_request CanIAccessBinderQuery [L273]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Binders.CanIAccessBinderQueryHandler.Handle [L60–L126]
      └─ uses_service UserService
        └─ method GetUserId [L91]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
      └─ uses_service RequestInfoService
        └─ method IsValidServiceAccountRequest [L89]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
      └─ uses_service TenantService
        └─ method GetCurrentTenant [L92]
          └─ implementation Workpapers.Next.Services.Features.Tenants.TenantService.GetCurrentTenant [L5-L22]
            └─ uses_service TenantIdentificationService
              └─ method GetCurrentTenant [L20]
                └─ implementation Workpapers.Next.ApplicationService.Services.TenantIdentificationService.GetCurrentTenant [L15-L131]
      └─ uses_service IControlledRepository<Binder>
        └─ method ReadQuery [L101]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L117]
          └─ implementation Workpapers.Next.Services.Features.Requests.RequestProcessor.ProcessAsync [L9-L32]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L121]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L109]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L92]

[web] GET /api/journals/{id:guid}  (Workpapers.Next.API.Controllers.Workpapers.JournalController.Get)  [L66–L98] status=200 [auth=AuthorizationPolicies.User]
  └─ maps_to JournalDto [L91]
  └─ calls BinderRepository.ReadQuery [L75]
  └─ query Binder [L75]
    └─ reads_from Binders
  └─ uses_service IControlledRepository<Binder>
    └─ method ReadQuery [L75]
      └─ ... (no implementation details available)
  └─ sends_request CanIAccessBinderQuery [L94]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Binders.CanIAccessBinderQueryHandler.Handle [L60–L126]
      └─ uses_service UserService
        └─ method GetUserId [L91]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
      └─ uses_service RequestInfoService
        └─ method IsValidServiceAccountRequest [L89]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
      └─ uses_service TenantService
        └─ method GetCurrentTenant [L92]
          └─ implementation Workpapers.Next.Services.Features.Tenants.TenantService.GetCurrentTenant [L5-L22]
            └─ uses_service TenantIdentificationService
              └─ method GetCurrentTenant [L20]
                └─ implementation Workpapers.Next.ApplicationService.Services.TenantIdentificationService.GetCurrentTenant [L15-L131]
      └─ uses_service IControlledRepository<Binder>
        └─ method ReadQuery [L101]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L117]
          └─ implementation Workpapers.Next.Services.Features.Requests.RequestProcessor.ProcessAsync [L9-L32]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L121]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L109]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L92]
  └─ sends_request CanIAccessBinderQuery [L73]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Binders.CanIAccessBinderQueryHandler.Handle [L60–L126]
      └─ uses_service UserService
        └─ method GetUserId [L91]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
      └─ uses_service RequestInfoService
        └─ method IsValidServiceAccountRequest [L89]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
      └─ uses_service TenantService
        └─ method GetCurrentTenant [L92]
          └─ implementation Workpapers.Next.Services.Features.Tenants.TenantService.GetCurrentTenant [L5-L22]
            └─ uses_service TenantIdentificationService
              └─ method GetCurrentTenant [L20]
                └─ implementation Workpapers.Next.ApplicationService.Services.TenantIdentificationService.GetCurrentTenant [L15-L131]
      └─ uses_service IControlledRepository<Binder>
        └─ method ReadQuery [L101]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L117]
          └─ implementation Workpapers.Next.Services.Features.Requests.RequestProcessor.ProcessAsync [L9-L32]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L121]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L109]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L92]

[web] GET /api/journals/for-binder-column/{binderColumnId:guid}  (Workpapers.Next.API.Controllers.Workpapers.JournalController.GetForBinderColumn)  [L118–L137] status=200 [auth=AuthorizationPolicies.User]
  └─ maps_to JournalLightDto [L131]
  └─ calls JournalRepository.ReadQuery [L129]
  └─ calls BinderRepository.ReadQuery [L121]
  └─ query Binder [L121]
    └─ reads_from Binders
  └─ query Journal [L129]
  └─ uses_service IControlledRepository<Binder>
    └─ method ReadQuery [L121]
      └─ ... (no implementation details available)
  └─ uses_service IControlledRepository<Journal>
    └─ method ReadQuery [L129]
      └─ ... (no implementation details available)
  └─ sends_request CanIAccessBinderQuery [L125]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Binders.CanIAccessBinderQueryHandler.Handle [L60–L126]
      └─ uses_service UserService
        └─ method GetUserId [L91]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
      └─ uses_service RequestInfoService
        └─ method IsValidServiceAccountRequest [L89]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
      └─ uses_service TenantService
        └─ method GetCurrentTenant [L92]
          └─ implementation Workpapers.Next.Services.Features.Tenants.TenantService.GetCurrentTenant [L5-L22]
            └─ uses_service TenantIdentificationService
              └─ method GetCurrentTenant [L20]
                └─ implementation Workpapers.Next.ApplicationService.Services.TenantIdentificationService.GetCurrentTenant [L15-L131]
      └─ uses_service IControlledRepository<Binder>
        └─ method ReadQuery [L101]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L117]
          └─ implementation Workpapers.Next.Services.Features.Requests.RequestProcessor.ProcessAsync [L9-L32]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L121]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L109]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L92]

[web] GET /api/journals/for-worksheet/{worksheetId:guid}  (Workpapers.Next.API.Controllers.Workpapers.JournalController.GetForWorksheet)  [L142–L158] status=200 [auth=AuthorizationPolicies.User]
  └─ calls BinderRepository.ReadQuery [L147]
  └─ query Binder [L147]
    └─ reads_from Binders
  └─ uses_service IControlledRepository<Binder>
    └─ method ReadQuery [L147]
      └─ ... (no implementation details available)
  └─ sends_request CanIAccessBinderQuery [L145]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Binders.CanIAccessBinderQueryHandler.Handle [L60–L126]
      └─ uses_service UserService
        └─ method GetUserId [L91]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
      └─ uses_service RequestInfoService
        └─ method IsValidServiceAccountRequest [L89]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
      └─ uses_service TenantService
        └─ method GetCurrentTenant [L92]
          └─ implementation Workpapers.Next.Services.Features.Tenants.TenantService.GetCurrentTenant [L5-L22]
            └─ uses_service TenantIdentificationService
              └─ method GetCurrentTenant [L20]
                └─ implementation Workpapers.Next.ApplicationService.Services.TenantIdentificationService.GetCurrentTenant [L15-L131]
      └─ uses_service IControlledRepository<Binder>
        └─ method ReadQuery [L101]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L117]
          └─ implementation Workpapers.Next.Services.Features.Requests.RequestProcessor.ProcessAsync [L9-L32]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L121]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L109]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L92]

[web] GET /api/journals/for-binder-column/{binderColumnId:guid}/report  (Workpapers.Next.API.Controllers.Workpapers.JournalController.GetJournalReport)  [L164–L168] status=200 [auth=AuthorizationPolicies.User]
  └─ sends_request GetJournalReportQuery [L167]
    └─ handled_by Cirrus.ApplicationService.Accounting.Queries.GetJournalReportQueryHandler.Handle [L42–L90]
      └─ uses_service GetJournalsWithTransactionsQuery
        └─ method Execute [L72]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<Dataset>
        └─ method ReadQuery [L63]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L57]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)

[web] GET /api/journals/  (Workpapers.Next.API.Controllers.Workpapers.JournalController.GetJournals)  [L104–L112] status=200 [auth=AuthorizationPolicies.User]
  └─ sends_request CanIAccessBinderQuery [L107]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Binders.CanIAccessBinderQueryHandler.Handle [L60–L126]
      └─ uses_service UserService
        └─ method GetUserId [L91]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
      └─ uses_service RequestInfoService
        └─ method IsValidServiceAccountRequest [L89]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
      └─ uses_service TenantService
        └─ method GetCurrentTenant [L92]
          └─ implementation Workpapers.Next.Services.Features.Tenants.TenantService.GetCurrentTenant [L5-L22]
            └─ uses_service TenantIdentificationService
              └─ method GetCurrentTenant [L20]
                └─ implementation Workpapers.Next.ApplicationService.Services.TenantIdentificationService.GetCurrentTenant [L15-L131]
      └─ uses_service IControlledRepository<Binder>
        └─ method ReadQuery [L101]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L117]
          └─ implementation Workpapers.Next.Services.Features.Requests.RequestProcessor.ProcessAsync [L9-L32]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L121]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L109]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L92]
  └─ sends_request GetJournalsQuery [L109]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Journals.GetJournalsQueryHandler.Handle [L28–L53]
      └─ uses_service IControlledRepository<Binder>
        └─ method ReadQuery [L41]
          └─ ... (no implementation details available)
      └─ uses_service JournalServiceFactory
        └─ method GetService [L49]
          └─ ... (no implementation details available)

[web] GET /api/journals/package  (Workpapers.Next.API.Controllers.Workpapers.JournalController.GetPackage)  [L186–L191] status=200 [auth=AuthorizationPolicies.User]
  └─ sends_request GetJournalPackageQuery [L190]
    └─ handled_by Cirrus.ApplicationService.Accounting.Queries.GetJournalPackageQueryHandler.Handle [L56–L244]
      └─ maps_to AccountLightListForJournalDto [L115]
        └─ automapper.registration CirrusMappingProfile (Account->AccountLightListForJournalDto) [L318]
      └─ maps_to StandardAccountLightListForJournalDto [L155]
        └─ automapper.registration CirrusMappingProfile (StandardAccount->StandardAccountLightListForJournalDto) [L447]
      └─ maps_to CachedSourceAccountDto [L134]
        └─ automapper.registration CirrusMappingProfile (CachedSourceAccount->CachedSourceAccountDto) [L287]
      └─ maps_to DivisionLightDto [L166]
        └─ automapper.registration CirrusMappingProfile (Division->DivisionLightDto) [L226]
      └─ maps_to SourceAccountLightDto [L124]
        └─ automapper.registration CirrusMappingProfile (SourceAccount->SourceAccountLightDto) [L262]
        └─ automapper.registration WorkpapersMappingProfile (SourceAccount->SourceAccountLightDto) [L617]
        └─ converts_to SourceAccountInJournalModel [L269]
        └─ converts_to LinkedSourceAccount [L72]
        └─ converts_to MappingSourceAccountModel [L830]
      └─ uses_service IControlledRepository<Account>
        └─ method ReadQuery [L115]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<CachedSourceAccount>
        └─ method ReadQuery [L134]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<Dataset>
        └─ method ReadQuery [L99]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<Division>
        └─ method ReadQuery [L166]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<Journal>
        └─ method ReadQuery [L177]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<SourceAccount>
        └─ method ReadQuery [L124]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<StandardAccount>
        └─ method ReadQuery [L155]
          └─ ... (no implementation details available)
      └─ uses_service IMapper
        └─ method ConfigurationProvider [L121]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L95]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)
  └─ returns JournalPackageDto [L190] [return]

[web] GET /api/journals/{binderId:guid}/report/profit-reconciliation  (Workpapers.Next.API.Controllers.Workpapers.JournalController.GetProfitReconciliationReport)  [L174–L180] status=200 [auth=AuthorizationPolicies.User]
  └─ sends_request GetProfitReconciliationReportQuery [L179]
    └─ handled_by Cirrus.ApplicationService.Accounting.Queries.GetProfitReconciliationReportQueryHandler.Handle [L31–L155]
      └─ uses_service IControlledRepository<Journal>
        └─ method ReadQuery [L46]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L44]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)
  └─ sends_request CanIAccessBinderQuery [L177]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Binders.CanIAccessBinderQueryHandler.Handle [L60–L126]
      └─ uses_service UserService
        └─ method GetUserId [L91]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
      └─ uses_service RequestInfoService
        └─ method IsValidServiceAccountRequest [L89]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
      └─ uses_service TenantService
        └─ method GetCurrentTenant [L92]
          └─ implementation Workpapers.Next.Services.Features.Tenants.TenantService.GetCurrentTenant [L5-L22]
            └─ uses_service TenantIdentificationService
              └─ method GetCurrentTenant [L20]
                └─ implementation Workpapers.Next.ApplicationService.Services.TenantIdentificationService.GetCurrentTenant [L15-L131]
      └─ uses_service IControlledRepository<Binder>
        └─ method ReadQuery [L101]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L117]
          └─ implementation Workpapers.Next.Services.Features.Requests.RequestProcessor.ProcessAsync [L9-L32]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L121]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L109]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L92]

[web] POST /api/journals/{id}/excel-import  (Workpapers.Next.API.Controllers.Workpapers.JournalController.ImportFromExcelFile)  [L256–L264] status=201 [auth=AuthorizationPolicies.User]
  └─ sends_request ParseUploadedExcelFileToImportModelCommand [L261]
    └─ handled_by Cirrus.ApplicationService.Accounting.Commands.ParseUploadedExcelFileToImportModelCommandHandler.Handle [L25–L60]
      └─ uses_service IStorageService (InstancePerLifetimeScope)
        └─ method GetFileBytes [L54]
          └─ implementation IStorageService.GetFileBytes [L9-L9]
          └─ ... (no implementation details available)
      └─ uses_storage IStorageService.GetFileBytes [L54]
  └─ sends_request CanIAccessBinderQuery [L259]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Binders.CanIAccessBinderQueryHandler.Handle [L60–L126]
      └─ uses_service UserService
        └─ method GetUserId [L91]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
      └─ uses_service RequestInfoService
        └─ method IsValidServiceAccountRequest [L89]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
      └─ uses_service TenantService
        └─ method GetCurrentTenant [L92]
          └─ implementation Workpapers.Next.Services.Features.Tenants.TenantService.GetCurrentTenant [L5-L22]
            └─ uses_service TenantIdentificationService
              └─ method GetCurrentTenant [L20]
                └─ implementation Workpapers.Next.ApplicationService.Services.TenantIdentificationService.GetCurrentTenant [L15-L131]
      └─ uses_service IControlledRepository<Binder>
        └─ method ReadQuery [L101]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L117]
          └─ implementation Workpapers.Next.Services.Features.Requests.RequestProcessor.ProcessAsync [L9-L32]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L121]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L109]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L92]
  └─ returns TrialBalanceParseResult [L261]

[web] PUT /api/journals/unarchive/{id:guid}  (Workpapers.Next.API.Controllers.Workpapers.JournalController.Unarchive)  [L243–L251] status=200 [auth=AuthorizationPolicies.User]
  └─ sends_request CanIAccessBinderQuery [L247]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Binders.CanIAccessBinderQueryHandler.Handle [L60–L126]
      └─ uses_service UserService
        └─ method GetUserId [L91]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
      └─ uses_service RequestInfoService
        └─ method IsValidServiceAccountRequest [L89]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
      └─ uses_service TenantService
        └─ method GetCurrentTenant [L92]
          └─ implementation Workpapers.Next.Services.Features.Tenants.TenantService.GetCurrentTenant [L5-L22]
            └─ uses_service TenantIdentificationService
              └─ method GetCurrentTenant [L20]
                └─ implementation Workpapers.Next.ApplicationService.Services.TenantIdentificationService.GetCurrentTenant [L15-L131]
      └─ uses_service IControlledRepository<Binder>
        └─ method ReadQuery [L101]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L117]
          └─ implementation Workpapers.Next.Services.Features.Requests.RequestProcessor.ProcessAsync [L9-L32]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L121]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L109]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L92]

[web] DELETE /api/journals/balancing-journal/{journalId}  (Workpapers.Next.API.Controllers.Workpapers.JournalController.UndoBalancingJournal)  [L220–L227] status=200 [auth=AuthorizationPolicies.User]
  └─ sends_request UndoBalancingJournalCommand [L224]
    └─ handled_by Cirrus.ApplicationService.Accounting.Commands.UndoBalancingJournalCommandHandler.Handle [L34–L94]
      └─ calls JournalRepository.Remove [L68]
      └─ calls JournalRepository.WriteQueryWithArchived [L64]
      └─ calls JournalRepository.WriteQuery [L53]
      └─ uses_service ApiService (SingleInstance)
        └─ method GetFeatures [L81]
          └─ implementation Cirrus.ApplicationService.Accounting.Services.ApiService.GetFeatures [L14-L75]
      └─ uses_service ILogger<UndoBalancingJournalCommandHandler>
        └─ method LogError [L90]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L57]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)
      └─ logs ILogger<UndoBalancingJournalCommandHandler> [Error] [L90]

[web] PUT /api/journals/{id:Guid}  (Workpapers.Next.API.Controllers.Workpapers.JournalController.Update)  [L232–L238] status=200 [auth=AuthorizationPolicies.User]
  └─ sends_request UpdateJournalCommand [L236]

[web] PUT /api/key-values/bulk-value-update  (Workpapers.Next.API.Controllers.Workpapers.KeyValuesController.BulkValueUpdate)  [L37–L73] status=200 [auth=AuthorizationPolicies.User]
  └─ calls BinderRepository.WriteQuery [L41]
  └─ calls WorksheetRepository.WriteQuery [L50]
  └─ write Binder [L41]
    └─ reads_from Binders
  └─ write Worksheet [L50]
    └─ reads_from Worksheets
  └─ uses_service IControlledRepository<Binder>
    └─ method WriteQuery [L41]
      └─ ... (no implementation details available)
  └─ uses_service IControlledRepository<Worksheet>
    └─ method WriteQuery [L50]
      └─ ... (no implementation details available)
  └─ uses_service UserService
    └─ method GetUserId [L69]
      └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]

[web] GET /api/ledger-reports/{binderColumnDataId:Guid}/source-accounts  (Workpapers.Next.API.Controllers.Workpapers.LedgerReportController.GetLedgerForSourceAccounts)  [L80–L114] status=200 [auth=AuthorizationPolicies.User]
  └─ calls BinderColumnDataRepository.ReadQuery [L97]
  └─ query BinderColumnData [L97]
    └─ reads_from BinderColumnData
  └─ uses_service IControlledRepository<BinderColumnData>
    └─ method ReadQuery [L97]
      └─ ... (no implementation details available)
  └─ sends_request GetGeneralLedgerBySourceAccountQuery [L112]
    └─ handled_by Cirrus.ApplicationService.Accounting.Queries.GetGeneralLedgerBySourceAccountQueryHandler.Handle [L54–L242]
      └─ maps_to SourceAccountMappingDto [L201]
        └─ automapper.registration CirrusMappingProfile (SourceAccount->SourceAccountMappingDto) [L274]
        └─ automapper.registration WorkpapersMappingProfile (SourceAccount->SourceAccountMappingDto) [L613]
      └─ maps_to SourceLightDto [L181]
      └─ uses_service ApiService (SingleInstance)
        └─ method GetFeatures [L186]
          └─ implementation Cirrus.ApplicationService.Accounting.Services.ApiService.GetFeatures [L14-L75]
      └─ uses_service GetGeneralLedgerForDatesQuery
        └─ method Execute [L79]
          └─ ... (no implementation details available)
      └─ uses_service GetTrialBalanceForDatesQuery
        └─ method Execute [L149]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<Dataset>
        └─ method ReadQuery [L121]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<SourceAccount>
        └─ method ReadQuery [L136]
          └─ ... (no implementation details available)
      └─ uses_service IMapper
        └─ method ConfigurationProvider [L184]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L206]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)
  └─ sends_request CanIAccessBinderQuery [L101]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Binders.CanIAccessBinderQueryHandler.Handle [L60–L126]
      └─ uses_service UserService
        └─ method GetUserId [L91]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
      └─ uses_service RequestInfoService
        └─ method IsValidServiceAccountRequest [L89]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
      └─ uses_service TenantService
        └─ method GetCurrentTenant [L92]
          └─ implementation Workpapers.Next.Services.Features.Tenants.TenantService.GetCurrentTenant [L5-L22]
            └─ uses_service TenantIdentificationService
              └─ method GetCurrentTenant [L20]
                └─ implementation Workpapers.Next.ApplicationService.Services.TenantIdentificationService.GetCurrentTenant [L15-L131]
      └─ uses_service IControlledRepository<Binder>
        └─ method ReadQuery [L101]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L117]
          └─ implementation Workpapers.Next.Services.Features.Requests.RequestProcessor.ProcessAsync [L9-L32]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L121]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L109]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L92]

[web] GET /api/ledger-reports/{binderColumnDataId:Guid}/trial-balance  (Workpapers.Next.API.Controllers.Workpapers.LedgerReportController.GetTrialBalance)  [L41–L74] status=200 [auth=AuthorizationPolicies.User]
  └─ calls BinderColumnDataRepository.ReadQuery [L50]
  └─ query BinderColumnData [L50]
    └─ reads_from BinderColumnData
  └─ uses_service IControlledRepository<BinderColumnData>
    └─ method ReadQuery [L50]
      └─ ... (no implementation details available)
  └─ sends_request GetTrialBalanceWithAdjustmentsQuery [L64]
    └─ handled_by Cirrus.ApplicationService.Accounting.Queries.GetTrialBalanceWithAdjustmentsQueryHandler.Handle [L44–L100]
      └─ uses_service GetTrialBalanceForDatesQuery
        └─ method ExecuteWithSourceAccountInfoDto [L97]
          └─ ... (no implementation details available)
  └─ sends_request CanIAccessBinderQuery [L55]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Binders.CanIAccessBinderQueryHandler.Handle [L60–L126]
      └─ uses_service UserService
        └─ method GetUserId [L91]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
      └─ uses_service RequestInfoService
        └─ method IsValidServiceAccountRequest [L89]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
      └─ uses_service TenantService
        └─ method GetCurrentTenant [L92]
          └─ implementation Workpapers.Next.Services.Features.Tenants.TenantService.GetCurrentTenant [L5-L22]
            └─ uses_service TenantIdentificationService
              └─ method GetCurrentTenant [L20]
                └─ implementation Workpapers.Next.ApplicationService.Services.TenantIdentificationService.GetCurrentTenant [L15-L131]
      └─ uses_service IControlledRepository<Binder>
        └─ method ReadQuery [L101]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L117]
          └─ implementation Workpapers.Next.Services.Features.Requests.RequestProcessor.ProcessAsync [L9-L32]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L121]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L109]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L92]
  └─ sends_request GetTrialBalanceForDatesQuery [L65]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.LedgerReports.GetTrialBalanceForDatesQueryHandler.Handle [L45–L251]
      └─ uses_service IControlledRepository<SourceAccount>
        └─ method ReadQuery [L85]
          └─ ... (no implementation details available)

[web] POST /api/loan-matrices/copy-from-prior  (Workpapers.Next.API.Controllers.Workpapers.LoanMatricesController.CopyFromPriorMatrix)  [L84–L90] status=201 [auth=AuthorizationPolicies.User]
  └─ sends_request CreateLoanMatrixFromPriorMatrixCommand [L87]
    └─ handled_by Workpapers.Next.ApplicationService.Commands.Workpapers.LoanMatrices.CreateLoanMatrixFromPriorMatrixCommandHandler.Handle [L29–L92]
      └─ uses_service IControlledRepository<Binder>
        └─ method ReadQuery [L42]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<LoanMatrix>
        └─ method WriteQuery [L51]
          └─ ... (no implementation details available)

[web] POST /api/loan-matrices/  (Workpapers.Next.API.Controllers.Workpapers.LoanMatricesController.Create)  [L76–L82] status=201 [auth=AuthorizationPolicies.User]
  └─ sends_request CreateLoanMatrixCommand [L79]
    └─ handled_by Workpapers.Next.ApplicationService.Commands.Workpapers.LoanMatrices.CreateLoanMatrixCommandHandler.Handle [L18–L34]
      └─ uses_service IControlledRepository<LoanMatrix>
        └─ method Add [L30]
          └─ ... (no implementation details available)

[web] DELETE /api/loan-matrices/{id:guid}  (Workpapers.Next.API.Controllers.Workpapers.LoanMatricesController.Delete)  [L117–L123] status=200 [auth=AuthorizationPolicies.User]
  └─ sends_request DeleteLoanMatrixCommand [L120]
    └─ handled_by Workpapers.Next.ApplicationService.Commands.Workpapers.LoanMatrices.DeleteLoanMatrixCommandHandler.Handle [L23–L40]
      └─ uses_service IControlledRepository<LoanMatrix>
        └─ method WriteQuery [L34]
          └─ ... (no implementation details available)

[web] GET /api/loan-matrices/{id:guid}  (Workpapers.Next.API.Controllers.Workpapers.LoanMatricesController.Get)  [L35–L39] status=200 [auth=AuthorizationPolicies.User]
  └─ sends_request GetLoanMatrixQuery [L38]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Workpapers.LoanMatrices.GetLoanMatrixQueryHandler.Handle [L31–L86]
      └─ maps_to LoanMatrixDto [L58]
        └─ automapper.registration WorkpapersMappingProfile (LoanMatrix->LoanMatrixDto) [L997]
      └─ uses_service FirmSettingsService
        └─ method GetCurrentSettings [L76]
          └─ implementation Workpapers.Next.API.Features.FirmSettings.FirmSettingsService.GetCurrentSettings [L23-L154]
          └─ implementation Workpapers.Next.API.Features.FirmSettings.FirmSettingsService.GetCurrentSettings [L23-L154]
      └─ uses_service UserService
        └─ method GetUser [L76]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUser [L20-L295]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUser [L20-L295]
      └─ uses_service IControlledRepository<Client>
        └─ method ReadQuery [L74]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<LoanMatrix>
        └─ method ReadQuery [L58]
          └─ ... (no implementation details available)

[web] GET /api/loan-matrices/  (Workpapers.Next.API.Controllers.Workpapers.LoanMatricesController.GetAll)  [L70–L74] status=200 [auth=AuthorizationPolicies.User]
  └─ sends_request GetLoanMatricesQuery [L73]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Workpapers.LoanMatrices.GetLoanMatricesQueryHandler.Handle [L28–L46]
      └─ maps_to LoanMatrixLightDto [L41]
        └─ automapper.registration WorkpapersMappingProfile (LoanMatrix->LoanMatrixLightDto) [L996]
      └─ uses_service IControlledRepository<LoanMatrix>
        └─ method ReadQuery [L41]
          └─ ... (no implementation details available)
      └─ uses_service IMapper
        └─ method ConfigurationProvider [L43]
          └─ ... (no implementation details available)

[web] GET /api/loan-matrices/for-binder/{binderId:guid}  (Workpapers.Next.API.Controllers.Workpapers.LoanMatricesController.GetForBinderId)  [L58–L62] status=200 [auth=AuthorizationPolicies.User]
  └─ sends_request GetLoanMatrixForBinderQuery [L61]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Workpapers.LoanMatrices.GetLoanMatrixForBinderQueryHandler.Handle [L33–L102]
      └─ maps_to LoanMatrixDto [L69]
        └─ automapper.registration WorkpapersMappingProfile (LoanMatrix->LoanMatrixDto) [L997]
      └─ uses_service FirmSettingsService
        └─ method GetCurrentSettings [L92]
          └─ implementation Workpapers.Next.API.Features.FirmSettings.FirmSettingsService.GetCurrentSettings [L23-L154]
          └─ implementation Workpapers.Next.API.Features.FirmSettings.FirmSettingsService.GetCurrentSettings [L23-L154]
      └─ uses_service UserService
        └─ method GetUser [L92]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUser [L20-L295]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUser [L20-L295]
      └─ uses_service IControlledRepository<Client>
        └─ method ReadQuery [L90]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<LoanMatrix>
        └─ method ReadQuery [L69]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<WorkpaperRecord>
        └─ method ReadQuery [L62]
          └─ ... (no implementation details available)
      └─ uses_service IMapper
        └─ method ConfigurationProvider [L71]
          └─ ... (no implementation details available)

[web] GET /api/loan-matrices/for-client-group/{clientGroupId:guid}  (Workpapers.Next.API.Controllers.Workpapers.LoanMatricesController.GetForClientGroup)  [L47–L51] status=200 [auth=AuthorizationPolicies.User]
  └─ sends_request GetLoanMatrixByClientGroupQuery [L50]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Workpapers.LoanMatrices.GetLoanMatrixByClientGroupQueryHandler.Handle [L36–L94]
      └─ maps_to LoanMatrixDto [L63]
        └─ automapper.registration WorkpapersMappingProfile (LoanMatrix->LoanMatrixDto) [L997]
      └─ uses_service FirmSettingsService
        └─ method GetCurrentSettings [L84]
          └─ implementation Workpapers.Next.API.Features.FirmSettings.FirmSettingsService.GetCurrentSettings [L23-L154]
          └─ implementation Workpapers.Next.API.Features.FirmSettings.FirmSettingsService.GetCurrentSettings [L23-L154]
      └─ uses_service UserService
        └─ method GetUser [L84]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUser [L20-L295]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUser [L20-L295]
      └─ uses_service IControlledRepository<Client>
        └─ method ReadQuery [L82]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<LoanMatrix>
        └─ method ReadQuery [L63]
          └─ ... (no implementation details available)
      └─ uses_service IMapper
        └─ method ConfigurationProvider [L66]
          └─ ... (no implementation details available)

[web] PUT /api/loan-matrices/refresh-balances  (Workpapers.Next.API.Controllers.Workpapers.LoanMatricesController.RefreshBalances)  [L108–L115] status=200 [auth=AuthorizationPolicies.User]
  └─ sends_request RefreshLoanMatrixBalancesCommand [L112]
    └─ handled_by Workpapers.Next.ApplicationService.Commands.Workpapers.LoanMatrices.RefreshLoanMatrixBalancesCommandHandler.Handle [L36–L115]
      └─ uses_service UserService
        └─ method GetUser [L93]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUser [L20-L295]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUser [L20-L295]
      └─ uses_service IControlledRepository<Binder>
        └─ method ReadQuery [L92]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<LoanMatrix>
        └─ method WriteQuery [L60]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L102]
          └─ implementation Workpapers.Next.Services.Features.Requests.RequestProcessor.ProcessAsync [L9-L32]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle
      └─ uses_service FirmSettingsService
        └─ method GetCurrentSettings [L93]
          └─ implementation Workpapers.Next.API.Features.FirmSettings.FirmSettingsService.GetCurrentSettings [L23-L154]

[web] PUT /api/loan-matrices/{id:guid}  (Workpapers.Next.API.Controllers.Workpapers.LoanMatricesController.Update)  [L92–L98] status=200 [auth=AuthorizationPolicies.User]
  └─ sends_request UpdateLoanMatrixCommand [L95]
    └─ handled_by Workpapers.Next.ApplicationService.Commands.Workpapers.LoanMatrices.UpdateLoanMatrixCommandHandler.Handle [L29–L66]
      └─ uses_service IControlledRepository<Client>
        └─ method ReadQuery [L55]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<LoanMatrix>
        └─ method WriteQuery [L42]
          └─ ... (no implementation details available)

[web] GET /api/master-accounts/{id:int}  (Workpapers.Next.API.Controllers.Workpapers.MasterAccountsController.Get)  [L47–L55] status=200 [auth=AuthorizationPolicies.Administrator]
  └─ maps_to MasterAccountDto [L50]
    └─ automapper.registration CirrusMappingProfile (MasterAccount->MasterAccountDto) [L301]
    └─ automapper.registration WorkpapersMappingProfile (MasterAccount->MasterAccountDto) [L703]
  └─ calls MasterAccountRepository.ReadQuery [L50]
  └─ query MasterAccount [L50]
    └─ reads_from MasterAccounts
  └─ uses_service IControlledRepository<MasterAccount>
    └─ method ReadQuery [L50]
      └─ ... (no implementation details available)

[web] GET /api/master-accounts  (Workpapers.Next.API.Controllers.Workpapers.MasterAccountsController.GetMasterAccounts)  [L61–L70] status=200 [auth=AuthorizationPolicies.Administrator]
  └─ maps_to MasterAccountDto [L64]
    └─ automapper.registration CirrusMappingProfile (MasterAccount->MasterAccountDto) [L301]
    └─ automapper.registration WorkpapersMappingProfile (MasterAccount->MasterAccountDto) [L703]
  └─ calls MasterAccountRepository.ReadQuery [L64]
  └─ query MasterAccount [L64]
    └─ reads_from MasterAccounts
  └─ uses_service IControlledRepository<MasterAccount>
    └─ method ReadQuery [L64]
      └─ ... (no implementation details available)

[web] GET /api/master-accounts/search  (Workpapers.Next.API.Controllers.Workpapers.MasterAccountsController.Search)  [L76–L80] status=200 [auth=AuthorizationPolicies.Administrator]
  └─ sends_request FindMasterAccountsQuery [L79]
    └─ handled_by Cirrus.ApplicationService.MasterAccounting.Queries.FindMasterAccountsQueryHandler.Handle [L42–L100]
      └─ uses_service IControlledRepository<MasterAccount>
        └─ method ReadQuery [L58]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<StandardChart>
        └─ method ReadQuery [L63]
          └─ ... (no implementation details available)

[web] PUT /api/master-accounts/{id:int}/name-variants  (Workpapers.Next.API.Controllers.Workpapers.MasterAccountsController.UpdateMasterAccountNameVariants)  [L89–L97] status=200 [auth=AuthorizationPolicies.Administrator]
  └─ calls MasterAccountRepository.WriteQuery [L94]
  └─ write MasterAccount [L94]
    └─ reads_from MasterAccounts
  └─ uses_service IControlledRepository<MasterAccount>
    └─ method WriteQuery [L94]
      └─ ... (no implementation details available)

[web] POST /api/matching-rules/source/{sourceId}/apply  (Workpapers.Next.API.Controllers.Workpapers.MatchingRulesController.ApplyRule)  [L98–L107] status=201 [auth=AuthorizationPolicies.User]
  └─ sends_request ApplyMatchingRuleCommand [L104]

[web] POST /api/matching-rules/source/{sourceId}/apply-all  (Workpapers.Next.API.Controllers.Workpapers.MatchingRulesController.ApplyRules)  [L86–L93] status=201 [auth=AuthorizationPolicies.User]
  └─ sends_request ApplyMatchingRulesCommand [L90]
    └─ handled_by Cirrus.ApplicationService.Accounting.Commands.ApplyMatchingRulesCommandHandler.Handle [L96–L646]
      └─ uses_service IAccountTypeProvider
        └─ method GetAccountTypesWithJurisdictionAsync [L238]
          └─ ... (no implementation details available)
      └─ uses_service IBenchmarkCodeSetProvider
        └─ method GetBenchmarkCodeSetAsync [L225]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<Account>
        └─ method WriteQuery [L190]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<File>
        └─ method ReadQuery [L173]
          └─ ... (no implementation details available)
      └─ uses_service IMatchingRuleProvider
        └─ method GetRulesForFileAsync [L146]
          └─ ... (no implementation details available)

[web] POST /api/matching-rules/  (Workpapers.Next.API.Controllers.Workpapers.MatchingRulesController.Create)  [L113–L129] status=201 [auth=AuthorizationPolicies.Administrator]
  └─ calls MatchingRuleRepository.Add [L126]
  └─ calls MatchingRuleRepository.WriteQuery [L120]
  └─ insert MatchingRule [L126]
    └─ reads_from MatchingRules
  └─ write MatchingRule [L120]
    └─ reads_from MatchingRules
  └─ uses_service IControlledRepository<MatchingRule>
    └─ method WriteQuery [L120]
      └─ ... (no implementation details available)

[web] DELETE /api/matching-rules/{id:Guid}  (Workpapers.Next.API.Controllers.Workpapers.MatchingRulesController.Delete)  [L180–L191] status=200 [auth=AuthorizationPolicies.Administrator]
  └─ calls MatchingRuleRepository.Remove [L188]
  └─ calls MatchingRuleRepository.WriteQuery [L184]
  └─ delete MatchingRule [L188]
    └─ reads_from MatchingRules
  └─ write MatchingRule [L184]
    └─ reads_from MatchingRules
  └─ uses_service IControlledRepository<MatchingRule>
    └─ method WriteQuery [L184]
      └─ ... (no implementation details available)

[web] GET /api/matching-rules/{id:Guid}  (Workpapers.Next.API.Controllers.Workpapers.MatchingRulesController.Get)  [L54–L63] status=200 [auth=AuthorizationPolicies.User]
  └─ maps_to MatchingRuleDto [L58]
    └─ automapper.registration CirrusMappingProfile (MatchingRule->MatchingRuleDto) [L230]
    └─ automapper.registration WorkpapersMappingProfile (MatchingRule->MatchingRuleDto) [L887]
  └─ calls MatchingRuleRepository.ReadQuery [L58]
  └─ query MatchingRule [L58]
    └─ reads_from MatchingRules
  └─ uses_service IControlledRepository<MatchingRule>
    └─ method ReadQuery [L58]
      └─ ... (no implementation details available)

[web] GET /api/matching-rules/rule-set/{ruleSetId:guid}  (Workpapers.Next.API.Controllers.Workpapers.MatchingRulesController.GetAllFromSet)  [L72–L81] status=200 [auth=AuthorizationPolicies.User]
  └─ maps_to MatchingRuleDto [L76]
    └─ automapper.registration CirrusMappingProfile (MatchingRule->MatchingRuleDto) [L230]
    └─ automapper.registration WorkpapersMappingProfile (MatchingRule->MatchingRuleDto) [L887]
  └─ calls MatchingRuleRepository.ReadQuery [L76]
  └─ query MatchingRule [L76]
    └─ reads_from MatchingRules
  └─ uses_service IControlledRepository<MatchingRule>
    └─ method ReadQuery [L76]
      └─ ... (no implementation details available)

[web] PUT /api/matching-rules/{id}/reorder  (Workpapers.Next.API.Controllers.Workpapers.MatchingRulesController.Reorder)  [L154–L175] status=200 [auth=AuthorizationPolicies.Administrator,admin]
  └─ calls MatchingRuleRepository.WriteQuery [L166]
  └─ calls MatchingRuleRepository.ReadQuery [L158]
  └─ query MatchingRule [L158]
    └─ reads_from MatchingRules
  └─ write MatchingRule [L166]
    └─ reads_from MatchingRules
  └─ uses_service IControlledRepository<MatchingRule>
    └─ method ReadQuery [L158]
      └─ ... (no implementation details available)

[web] PUT /api/matching-rules/{id:Guid}  (Workpapers.Next.API.Controllers.Workpapers.MatchingRulesController.Update)  [L134–L146] status=200 [auth=AuthorizationPolicies.Administrator]
  └─ calls MatchingRuleRepository.WriteQuery [L138]
  └─ write MatchingRule [L138]
    └─ reads_from MatchingRules
  └─ uses_service IControlledRepository<MatchingRule>
    └─ method WriteQuery [L138]
      └─ ... (no implementation details available)

[web] POST /api/matching-rule-sets/  (Workpapers.Next.API.Controllers.Workpapers.MatchingRuleSetsController.Create)  [L59–L66] status=201 [auth=AuthorizationPolicies.Administrator]
  └─ calls MatchingRuleSetRepository.Add [L63]
  └─ insert MatchingRuleSet [L63]
    └─ reads_from MatchingRuleSets
  └─ uses_service IControlledRepository<MatchingRuleSet>
    └─ method Add [L63]
      └─ ... (no implementation details available)

[web] POST /api/matching-rule-sets/default/{id:Guid}  (Workpapers.Next.API.Controllers.Workpapers.MatchingRuleSetsController.CreateFromDefault)  [L68–L74] status=201 [auth=AuthorizationPolicies.Administrator]
  └─ sends_request CreateRuleSetFromMasterCommand [L71]
    └─ handled_by Workpapers.Next.ApplicationService.Commands.Workpapers.MatchingRuleSets.CreateRuleSetFromMasterCommandHandler.Handle [L26–L124]
      └─ uses_service TenantService
        └─ method GetCurrentTenant [L68]
          └─ implementation Workpapers.Next.Services.Features.Tenants.TenantService.GetCurrentTenant [L5-L22]
            └─ uses_service TenantIdentificationService
              └─ method GetCurrentTenant [L20]
                └─ implementation Workpapers.Next.ApplicationService.Services.TenantIdentificationService.GetCurrentTenant [L15-L131]
      └─ uses_service IControlledRepository<Firm>
        └─ method ReadQuery [L69]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<MatchingRule>
        └─ method ReadQuery [L73]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<MatchingRuleSet>
        └─ method ReadQuery [L50]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<StandardAccount>
        └─ method ReadQuery [L98]
          └─ ... (no implementation details available)

[web] DELETE /api/matching-rule-sets/{id:Guid}  (Workpapers.Next.API.Controllers.Workpapers.MatchingRuleSetsController.Delete)  [L86–L91] status=200 [auth=AuthorizationPolicies.Administrator]
  └─ calls MatchingRuleSetRepository.Remove [L90]
  └─ calls MatchingRuleSetRepository.WriteQuery [L89]
  └─ delete MatchingRuleSet [L90]
    └─ reads_from MatchingRuleSets
  └─ write MatchingRuleSet [L89]
    └─ reads_from MatchingRuleSets
  └─ uses_service IControlledRepository<MatchingRuleSet>
    └─ method WriteQuery [L89]
      └─ ... (no implementation details available)

[web] GET /api/matching-rule-sets/{id}  (Workpapers.Next.API.Controllers.Workpapers.MatchingRuleSetsController.Get)  [L40–L46] status=200 [auth=AuthorizationPolicies.Administrator]
  └─ maps_to MatchingRuleSetDto [L43]
    └─ automapper.registration WorkpapersMappingProfile (MatchingRuleSet->MatchingRuleSetDto) [L889]
    └─ automapper.registration CirrusMappingProfile (MatchingRuleSet->MatchingRuleSetDto) [L229]
  └─ calls MatchingRuleSetRepository.ReadQuery [L43]
  └─ query MatchingRuleSet [L43]
    └─ reads_from MatchingRuleSets
  └─ uses_service IControlledRepository<MatchingRuleSet>
    └─ method ReadQuery [L43]
      └─ ... (no implementation details available)

[web] GET /api/matching-rule-sets/  (Workpapers.Next.API.Controllers.Workpapers.MatchingRuleSetsController.GetAll)  [L48–L57] status=200 [auth=AuthorizationPolicies.Administrator]
  └─ maps_to MatchingRuleSetDto [L51]
    └─ automapper.registration WorkpapersMappingProfile (MatchingRuleSet->MatchingRuleSetDto) [L889]
    └─ automapper.registration CirrusMappingProfile (MatchingRuleSet->MatchingRuleSetDto) [L229]
  └─ calls MatchingRuleSetRepository.ReadQuery [L51]
  └─ query MatchingRuleSet [L51]
    └─ reads_from MatchingRuleSets
  └─ uses_service IControlledRepository<MatchingRuleSet>
    └─ method ReadQuery [L51]
      └─ ... (no implementation details available)

[web] PUT /api/matching-rule-sets/{id:Guid}  (Workpapers.Next.API.Controllers.Workpapers.MatchingRuleSetsController.Update)  [L76–L81] status=200 [auth=AuthorizationPolicies.Administrator]
  └─ calls MatchingRuleSetRepository.WriteQuery [L79]
  └─ write MatchingRuleSet [L79]
    └─ reads_from MatchingRuleSets
  └─ uses_service IControlledRepository<MatchingRuleSet>
    └─ method WriteQuery [L79]
      └─ ... (no implementation details available)

[web] DELETE /api/matters/  (Workpapers.Next.API.Controllers.Workpapers.MattersController.BulkDelete)  [L157–L178] status=200 [auth=AuthorizationPolicies.User]
  └─ calls MatterRepository.WriteQuery [L163]
  └─ write Matter [L163]
    └─ reads_from Matters
  └─ uses_service IControlledRepository<Matter>
    └─ method WriteQuery [L163]
      └─ ... (no implementation details available)
  └─ sends_request CanIAccessBinderQuery [L169]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Binders.CanIAccessBinderQueryHandler.Handle [L60–L126]
      └─ uses_service UserService
        └─ method GetUserId [L91]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
      └─ uses_service RequestInfoService
        └─ method IsValidServiceAccountRequest [L89]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
      └─ uses_service TenantService
        └─ method GetCurrentTenant [L92]
          └─ implementation Workpapers.Next.Services.Features.Tenants.TenantService.GetCurrentTenant [L5-L22]
            └─ uses_service TenantIdentificationService
              └─ method GetCurrentTenant [L20]
                └─ implementation Workpapers.Next.ApplicationService.Services.TenantIdentificationService.GetCurrentTenant [L15-L131]
      └─ uses_service IControlledRepository<Binder>
        └─ method ReadQuery [L101]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L117]
          └─ implementation Workpapers.Next.Services.Features.Requests.RequestProcessor.ProcessAsync [L9-L32]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L121]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L109]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L92]

[web] PUT /api/matters/bulk  (Workpapers.Next.API.Controllers.Workpapers.MattersController.BulkUpdate)  [L122–L142] status=200 [auth=AuthorizationPolicies.User]
  └─ calls MatterRepository.WriteQuery [L128]
  └─ write Matter [L128]
    └─ reads_from Matters
  └─ uses_service IControlledRepository<Matter>
    └─ method WriteQuery [L128]
      └─ ... (no implementation details available)
  └─ sends_request CanIAccessBinderQuery [L134]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Binders.CanIAccessBinderQueryHandler.Handle [L60–L126]
      └─ uses_service UserService
        └─ method GetUserId [L91]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
      └─ uses_service RequestInfoService
        └─ method IsValidServiceAccountRequest [L89]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
      └─ uses_service TenantService
        └─ method GetCurrentTenant [L92]
          └─ implementation Workpapers.Next.Services.Features.Tenants.TenantService.GetCurrentTenant [L5-L22]
            └─ uses_service TenantIdentificationService
              └─ method GetCurrentTenant [L20]
                └─ implementation Workpapers.Next.ApplicationService.Services.TenantIdentificationService.GetCurrentTenant [L15-L131]
      └─ uses_service IControlledRepository<Binder>
        └─ method ReadQuery [L101]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L117]
          └─ implementation Workpapers.Next.Services.Features.Requests.RequestProcessor.ProcessAsync [L9-L32]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L121]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L109]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L92]

[web] POST /api/matters/  (Workpapers.Next.API.Controllers.Workpapers.MattersController.Create)  [L96–L105] status=201 [auth=AuthorizationPolicies.User]
  └─ sends_request CreateMatterCommand [L102]
    └─ handled_by Workpapers.Next.ApplicationService.Commands.Workpapers.Matters.CreateMatterCommandHandler.Handle [L28–L99]
      └─ uses_service UserService
        └─ method GetUserId [L72]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
      └─ uses_service IControlledRepository<Matter>
        └─ method WriteQuery [L52]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<MatterStatus> (AddScoped)
        └─ method ReadQuery [L84]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<WorkpaperRecord>
        └─ method ReadQuery [L89]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<Worksheet>
        └─ method ReadQuery [L93]
          └─ ... (no implementation details available)
  └─ sends_request CanIAccessBinderQuery [L101]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Binders.CanIAccessBinderQueryHandler.Handle [L60–L126]
      └─ uses_service UserService
        └─ method GetUserId [L91]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
      └─ uses_service RequestInfoService
        └─ method IsValidServiceAccountRequest [L89]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
      └─ uses_service TenantService
        └─ method GetCurrentTenant [L92]
          └─ implementation Workpapers.Next.Services.Features.Tenants.TenantService.GetCurrentTenant [L5-L22]
            └─ uses_service TenantIdentificationService
              └─ method GetCurrentTenant [L20]
                └─ implementation Workpapers.Next.ApplicationService.Services.TenantIdentificationService.GetCurrentTenant [L15-L131]
      └─ uses_service IControlledRepository<Binder>
        └─ method ReadQuery [L101]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L117]
          └─ implementation Workpapers.Next.Services.Features.Requests.RequestProcessor.ProcessAsync [L9-L32]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L121]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L109]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L92]

[web] DELETE /api/matters/{id:Guid}  (Workpapers.Next.API.Controllers.Workpapers.MattersController.Delete)  [L145–L155] status=200 [auth=AuthorizationPolicies.User]
  └─ calls MatterRepository.WriteQuery [L148]
  └─ write Matter [L148]
    └─ reads_from Matters
  └─ uses_service IControlledRepository<Matter>
    └─ method WriteQuery [L148]
      └─ ... (no implementation details available)
  └─ sends_request CanIAccessBinderQuery [L150]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Binders.CanIAccessBinderQueryHandler.Handle [L60–L126]
      └─ uses_service UserService
        └─ method GetUserId [L91]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
      └─ uses_service RequestInfoService
        └─ method IsValidServiceAccountRequest [L89]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
      └─ uses_service TenantService
        └─ method GetCurrentTenant [L92]
          └─ implementation Workpapers.Next.Services.Features.Tenants.TenantService.GetCurrentTenant [L5-L22]
            └─ uses_service TenantIdentificationService
              └─ method GetCurrentTenant [L20]
                └─ implementation Workpapers.Next.ApplicationService.Services.TenantIdentificationService.GetCurrentTenant [L15-L131]
      └─ uses_service IControlledRepository<Binder>
        └─ method ReadQuery [L101]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L117]
          └─ implementation Workpapers.Next.Services.Features.Requests.RequestProcessor.ProcessAsync [L9-L32]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L121]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L109]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L92]

[web] GET /api/matters/find  (Workpapers.Next.API.Controllers.Workpapers.MattersController.FindMatters)  [L53–L61] status=200 [auth=AuthorizationPolicies.User]
  └─ sends_request CanIAccessBinderQuery [L56]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Binders.CanIAccessBinderQueryHandler.Handle [L60–L126]
      └─ uses_service UserService
        └─ method GetUserId [L91]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
      └─ uses_service RequestInfoService
        └─ method IsValidServiceAccountRequest [L89]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
      └─ uses_service TenantService
        └─ method GetCurrentTenant [L92]
          └─ implementation Workpapers.Next.Services.Features.Tenants.TenantService.GetCurrentTenant [L5-L22]
            └─ uses_service TenantIdentificationService
              └─ method GetCurrentTenant [L20]
                └─ implementation Workpapers.Next.ApplicationService.Services.TenantIdentificationService.GetCurrentTenant [L15-L131]
      └─ uses_service IControlledRepository<Binder>
        └─ method ReadQuery [L101]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L117]
          └─ implementation Workpapers.Next.Services.Features.Requests.RequestProcessor.ProcessAsync [L9-L32]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L121]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L109]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L92]
  └─ sends_request FindMattersQuery [L58]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Workpapers.Matters.FindMattersQueryHandler.Handle [L49–L188]
      └─ maps_to MatterWithMessagesDto [L120]
        └─ automapper.registration ExternalApiMappingProfile (Matter->MatterWithMessagesDto) [L210]
        └─ automapper.registration WorkpapersMappingProfile (Matter->MatterWithMessagesDto) [L784]
      └─ maps_to MatterWithMessagesDto [L109]
        └─ automapper.registration ExternalApiMappingProfile (Matter->MatterWithMessagesDto) [L210]
        └─ automapper.registration WorkpapersMappingProfile (Matter->MatterWithMessagesDto) [L784]
      └─ maps_to MatterWithMessagesDto [L99]
      └─ uses_service IControlledRepository<Matter>
        └─ method ReadQuery [L67]
          └─ ... (no implementation details available)
      └─ uses_service IMapper
        └─ method ConfigurationProvider [L99]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L157]
          └─ implementation Workpapers.Next.Services.Features.Requests.RequestProcessor.ProcessAsync [L9-L32]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle

[web] GET /api/matters/{id:Guid}  (Workpapers.Next.API.Controllers.Workpapers.MattersController.Get)  [L63–L73] status=200 [auth=AuthorizationPolicies.User]
  └─ sends_request CanIAccessBinderQuery [L70]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Binders.CanIAccessBinderQueryHandler.Handle [L60–L126]
      └─ uses_service UserService
        └─ method GetUserId [L91]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
      └─ uses_service RequestInfoService
        └─ method IsValidServiceAccountRequest [L89]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
      └─ uses_service TenantService
        └─ method GetCurrentTenant [L92]
          └─ implementation Workpapers.Next.Services.Features.Tenants.TenantService.GetCurrentTenant [L5-L22]
            └─ uses_service TenantIdentificationService
              └─ method GetCurrentTenant [L20]
                └─ implementation Workpapers.Next.ApplicationService.Services.TenantIdentificationService.GetCurrentTenant [L15-L131]
      └─ uses_service IControlledRepository<Binder>
        └─ method ReadQuery [L101]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L117]
          └─ implementation Workpapers.Next.Services.Features.Requests.RequestProcessor.ProcessAsync [L9-L32]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L121]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L109]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L92]
  └─ sends_request FindMatterByIdQuery [L66]

[web] GET /api/matters/bulk  (Workpapers.Next.API.Controllers.Workpapers.MattersController.GetBulk)  [L75–L94] status=200 [auth=AuthorizationPolicies.User]
  └─ sends_request CanIAccessBinderQuery [L90]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Binders.CanIAccessBinderQueryHandler.Handle [L60–L126]
      └─ uses_service UserService
        └─ method GetUserId [L91]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
      └─ uses_service RequestInfoService
        └─ method IsValidServiceAccountRequest [L89]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
      └─ uses_service TenantService
        └─ method GetCurrentTenant [L92]
          └─ implementation Workpapers.Next.Services.Features.Tenants.TenantService.GetCurrentTenant [L5-L22]
            └─ uses_service TenantIdentificationService
              └─ method GetCurrentTenant [L20]
                └─ implementation Workpapers.Next.ApplicationService.Services.TenantIdentificationService.GetCurrentTenant [L15-L131]
      └─ uses_service IControlledRepository<Binder>
        └─ method ReadQuery [L101]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L117]
          └─ implementation Workpapers.Next.Services.Features.Requests.RequestProcessor.ProcessAsync [L9-L32]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L121]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L109]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L92]
  └─ sends_request FindMattersByIdsQuery [L81]

[web] GET /api/matters  (Workpapers.Next.API.Controllers.Workpapers.MattersController.GetParams)  [L232–L240] status=200 [auth=AuthorizationPolicies.User]
  └─ uses_service IControlledRepository<MatterStatus> (AddScoped)
    └─ method ReadQuery [L235]
      └─ ... (no implementation details available)
  └─ uses_service UserService
    └─ method GetUserId [L239]
      └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]

[web] PUT /api/matters/move  (Workpapers.Next.API.Controllers.Workpapers.MattersController.Move)  [L218–L230] status=200 [auth=AuthorizationPolicies.User]
  └─ sends_request MoveMattersCommand [L227]
    └─ handled_by Workpapers.Next.ApplicationService.Commands.Workpapers.Matters.MoveMattersCommandHandler.Handle [L38–L168]
      └─ uses_service IControlledRepository<Matter>
        └─ method ReadQuery [L55]
          └─ ... (no implementation details available)

[web] PUT /api/matters/{id:Guid}/reorder  (Workpapers.Next.API.Controllers.Workpapers.MattersController.Reorder)  [L187–L216] status=200 [auth=AuthorizationPolicies.User]
  └─ calls MatterRepository.WriteQuery [L197]
  └─ calls MatterRepository.ReadQuery [L190]
  └─ query Matter [L190]
    └─ reads_from Matters
  └─ write Matter [L197]
    └─ reads_from Matters
  └─ uses_service IControlledRepository<Matter>
    └─ method ReadQuery [L190]
      └─ ... (no implementation details available)
  └─ uses_service IMapper
    └─ method Map [L215]
      └─ ... (no implementation details available)
  └─ sends_request CanIAccessBinderQuery [L195]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Binders.CanIAccessBinderQueryHandler.Handle [L60–L126]
      └─ uses_service UserService
        └─ method GetUserId [L91]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
      └─ uses_service RequestInfoService
        └─ method IsValidServiceAccountRequest [L89]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
      └─ uses_service TenantService
        └─ method GetCurrentTenant [L92]
          └─ implementation Workpapers.Next.Services.Features.Tenants.TenantService.GetCurrentTenant [L5-L22]
            └─ uses_service TenantIdentificationService
              └─ method GetCurrentTenant [L20]
                └─ implementation Workpapers.Next.ApplicationService.Services.TenantIdentificationService.GetCurrentTenant [L15-L131]
      └─ uses_service IControlledRepository<Binder>
        └─ method ReadQuery [L101]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L117]
          └─ implementation Workpapers.Next.Services.Features.Requests.RequestProcessor.ProcessAsync [L9-L32]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L121]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L109]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L92]

[web] PUT /api/matters/{id:Guid}  (Workpapers.Next.API.Controllers.Workpapers.MattersController.Update)  [L107–L119] status=200 [auth=AuthorizationPolicies.User]
  └─ calls MatterRepository.WriteQuery [L110]
  └─ write Matter [L110]
    └─ reads_from Matters
  └─ uses_service IControlledRepository<Matter>
    └─ method WriteQuery [L110]
      └─ ... (no implementation details available)
  └─ sends_request CanIAccessBinderQuery [L112]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Binders.CanIAccessBinderQueryHandler.Handle [L60–L126]
      └─ uses_service UserService
        └─ method GetUserId [L91]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
      └─ uses_service RequestInfoService
        └─ method IsValidServiceAccountRequest [L89]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
      └─ uses_service TenantService
        └─ method GetCurrentTenant [L92]
          └─ implementation Workpapers.Next.Services.Features.Tenants.TenantService.GetCurrentTenant [L5-L22]
            └─ uses_service TenantIdentificationService
              └─ method GetCurrentTenant [L20]
                └─ implementation Workpapers.Next.ApplicationService.Services.TenantIdentificationService.GetCurrentTenant [L15-L131]
      └─ uses_service IControlledRepository<Binder>
        └─ method ReadQuery [L101]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L117]
          └─ implementation Workpapers.Next.Services.Features.Requests.RequestProcessor.ProcessAsync [L9-L32]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L121]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L109]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L92]

[web] GET /api/matter-templates/download-bulk-upload-template  (Workpapers.Next.API.Controllers.Workpapers.MatterTemplatesController.DownloadBulkUploadTemplate)  [L79–L85] status=200 [auth=AuthorizationPolicies.Administrator]

[web] GET /api/matter-templates/{id:Guid}  (Workpapers.Next.API.Controllers.Workpapers.MatterTemplatesController.Get)  [L58–L65] status=200 [auth=AuthorizationPolicies.Administrator]
  └─ maps_to MatterTemplateDto [L61]
    └─ automapper.registration WorkpapersMappingProfile (MatterTemplate->MatterTemplateDto) [L790]
  └─ calls MatterTemplateRepository.ReadQuery [L61]
  └─ query MatterTemplate [L61]
    └─ reads_from MatterTemplates
  └─ uses_service IControlledRepository<MatterTemplate>
    └─ method ReadQuery [L61]
      └─ ... (no implementation details available)

[web] GET /api/matter-templates/for-workpaper-record-template/{workpaperRecordTemplateId:Guid}  (Workpapers.Next.API.Controllers.Workpapers.MatterTemplatesController.GetAllByWorkpaperRecord)  [L48–L56] status=200 [auth=AuthorizationPolicies.Administrator]
  └─ calls MatterTemplateRepository.ReadQuery [L51]
  └─ query MatterTemplate [L51]
    └─ reads_from MatterTemplates
  └─ uses_service IControlledRepository<MatterTemplate>
    └─ method ReadQuery [L51]
      └─ ... (no implementation details available)

[web] POST /api/matter-templates/create-checklist-models  (Workpapers.Next.API.Controllers.Workpapers.MatterTemplatesController.ParseBulkMatterUploadTemplate)  [L87–L109] status=201 [auth=AuthorizationPolicies.Administrator]
  └─ uses_service StorageService
    └─ method GetFileBytes [L91]
      └─ implementation Workpapers.Next.Data.Storage.StorageService.GetFileBytes [L17-L282]
  └─ uses_storage StorageService.GetFileBytes [L91]

[web] PUT /api/matter-templates/for-super-workpaper-record-template/{workpaperRecordTemplateId:Guid}  (Workpapers.Next.API.Controllers.Workpapers.MatterTemplatesController.UpdateFirmMatterTemplatesForSuperWorkpaperTemplate)  [L67–L77] status=200 [auth=AuthorizationPolicies.Administrator]
  └─ sends_request UpdateFirmMatterTemplatesForSuperWorkpaperTemplateCommand [L74]
    └─ handled_by Workpapers.Next.ApplicationService.Commands.Workpapers.Matters.UpdateFirmMatterTemplatesForSuperWorkpaperTemplateCommandHandler.Handle [L32–L64]
      └─ uses_service UserService
        └─ method IsSuperUser [L50]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.IsSuperUser [L20-L295]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.IsSuperUser [L20-L295]
      └─ uses_service IControlledRepository<WorkpaperRecordTemplate>
        └─ method WriteQuery [L53]
          └─ ... (no implementation details available)

[web] POST /api/matter-text-templates/  (Workpapers.Next.API.Controllers.Workpapers.MatterTextTemplatesController.Create)  [L140–L151] status=201 [auth=AuthorizationPolicies.Administrator]
  └─ calls MatterTextTemplateRepository.Add [L148]
  └─ insert MatterTextTemplate [L148]
    └─ reads_from MatterTextTemplates
  └─ uses_service IControlledRepository<MatterTextTemplate>
    └─ method Add [L148]
      └─ ... (no implementation details available)
  └─ uses_service UserService
    └─ method IsSuperUser [L144]
      └─ implementation Workpapers.Next.ApplicationService.Services.UserService.IsSuperUser [L20-L295]

[web] DELETE /api/matter-text-templates/{id:Guid}  (Workpapers.Next.API.Controllers.Workpapers.MatterTextTemplatesController.Delete)  [L167–L179] status=200 [auth=AuthorizationPolicies.Administrator]
  └─ calls MatterTextTemplateRepository.Remove [L176]
  └─ calls MatterTextTemplateRepository.WriteQuery [L171]
  └─ delete MatterTextTemplate [L176]
    └─ reads_from MatterTextTemplates
  └─ write MatterTextTemplate [L171]
    └─ reads_from MatterTextTemplates
  └─ uses_service IControlledRepository<MatterTextTemplate>
    └─ method WriteQuery [L171]
      └─ ... (no implementation details available)
  └─ uses_service UserService
    └─ method IsSuperUser [L173]
      └─ implementation Workpapers.Next.ApplicationService.Services.UserService.IsSuperUser [L20-L295]

[web] GET /api/matter-text-templates/{id:Guid}  (Workpapers.Next.API.Controllers.Workpapers.MatterTextTemplatesController.Get)  [L130–L138] status=200 [auth=AuthorizationPolicies.User]
  └─ maps_to MatterTextTemplateDto [L134]
    └─ automapper.registration WorkpapersMappingProfile (MatterTextTemplate->MatterTextTemplateDto) [L800]
  └─ calls MatterTextTemplateRepository.ReadQuery [L134]
  └─ query MatterTextTemplate [L134]
    └─ reads_from MatterTextTemplates
  └─ uses_service IControlledRepository<MatterTextTemplate>
    └─ method ReadQuery [L134]
      └─ ... (no implementation details available)

[web] GET /api/matter-text-templates  (Workpapers.Next.API.Controllers.Workpapers.MatterTextTemplatesController.GetBinderParams)  [L181–L215] status=200
  └─ calls BinderRepository.ReadQuery [L183]
  └─ calls WorkpaperRecordRepository.ReadQuery [L190]
  └─ calls WorksheetRepository.ReadQuery [L205]
  └─ query Binder [L183]
    └─ reads_from Binders
  └─ query WorkpaperRecord [L190]
    └─ reads_from WorkpaperRecords
  └─ query Worksheet [L205]
    └─ reads_from Worksheets
  └─ uses_service IControlledRepository<Binder>
    └─ method ReadQuery [L183]
      └─ ... (no implementation details available)
  └─ uses_service IControlledRepository<WorkpaperRecord>
    └─ method ReadQuery [L190]
      └─ ... (no implementation details available)
  └─ uses_service IControlledRepository<Worksheet>
    └─ method ReadQuery [L205]
      └─ ... (no implementation details available)

[web] GET /api/matter-text-templates/for-binder/{binderId:guid}  (Workpapers.Next.API.Controllers.Workpapers.MatterTextTemplatesController.GetForBinder)  [L80–L109] status=200 [auth=AuthorizationPolicies.User]
  └─ uses_service IMatterTextParsingService (AddScoped)
    └─ method ParseMatterText [L103]
      └─ implementation Workpapers.Next.ApplicationService.Features.MatterTextParsing.MatterTextParsingService.ParseMatterText [L18-L194]
  └─ sends_request GetMatterTextTemplatesWithWorkpaperRecordTemplateQuery [L97]

[web] GET /api/matter-text-templates/for-workpaper-record-template/{workpaperRecordTemplateId:guid}  (Workpapers.Next.API.Controllers.Workpapers.MatterTextTemplatesController.GetForWorkpaperRecordTemplate)  [L111–L128] status=200 [auth=AuthorizationPolicies.User]
  └─ sends_request GetMatterTextTemplatesWithWorkpaperRecordTemplateQuery [L123]

[web] GET /api/matter-text-templates/  (Workpapers.Next.API.Controllers.Workpapers.MatterTextTemplatesController.Search)  [L59–L78] status=200 [auth=AuthorizationPolicies.User]
  └─ sends_request GetMatterTextTemplatesQuery [L73]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Workpapers.Matters.GetMatterTextTemplatesQueryHandler.Handle [L124–L217]
      └─ maps_to WorkpaperRecordTemplateLightDto [L155]
        └─ automapper.registration WorkpapersMappingProfile (WorkpaperRecordTemplate->WorkpaperRecordTemplateLightDto) [L221]
      └─ uses_service IControlledRepository<MatterTextTemplate>
        └─ method ReadQuery [L174]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<WorkpaperRecordTemplate>
        └─ method ReadQuery [L155]
          └─ ... (no implementation details available)

[web] PUT /api/matter-text-templates/{id:Guid}  (Workpapers.Next.API.Controllers.Workpapers.MatterTextTemplatesController.Update)  [L153–L165] status=200 [auth=AuthorizationPolicies.Administrator]
  └─ calls MatterTextTemplateRepository.WriteQuery [L157]
  └─ write MatterTextTemplate [L157]
    └─ reads_from MatterTextTemplates
  └─ uses_service IControlledRepository<MatterTextTemplate>
    └─ method WriteQuery [L157]
      └─ ... (no implementation details available)
  └─ uses_service UserService
    └─ method IsSuperUser [L159]
      └─ implementation Workpapers.Next.ApplicationService.Services.UserService.IsSuperUser [L20-L295]

[web] GET /api/message-notifications/  (Workpapers.Next.API.Controllers.Workpapers.MessageNotificationController.GetAll)  [L26–L32] status=200 [auth=AuthorizationPolicies.User]
  └─ sends_request GetMessageNotificationsQuery [L29]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.MessageNotification.GetMessageNotificationsQueryHandler.Handle [L40–L129]
      └─ maps_to UserUltraLightDto [L116]
      └─ uses_service UserService
        └─ method GetUser [L66]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUser [L20-L295]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUser [L20-L295]
      └─ uses_service TenantService
        └─ method GetCurrentTenant [L65]
          └─ implementation Workpapers.Next.Services.Features.Tenants.TenantService.GetCurrentTenant [L5-L22]
            └─ uses_service TenantIdentificationService
              └─ method GetCurrentTenant [L20]
                └─ implementation Workpapers.Next.ApplicationService.Services.TenantIdentificationService.GetCurrentTenant [L15-L131]
      └─ uses_service DataverseService
        └─ method Get [L70]
          └─ implementation Workpapers.Next.Dataverse.Service.DataverseService.Get [L17-L127]
      └─ uses_service IControlledRepository<User>
        └─ method ReadQuery [L110]
          └─ ... (no implementation details available)
      └─ uses_service IMapper
        └─ method Map [L116]
          └─ ... (no implementation details available)

[web] PUT /api/proposed-items/decline  (Workpapers.Next.API.Controllers.Workpapers.ProposedItemsController.DeclineProposal)  [L160–L175] status=200 [auth=AuthorizationPolicies.User]
  └─ calls BinderRepository.ReadQuery [L163]
  └─ calls ProposedItemRepository.WriteQuery [L169]
  └─ query Binder [L163]
    └─ reads_from Binders
  └─ write ProposedItem [L169]
    └─ reads_from ProposedItems
  └─ uses_service IControlledRepository<Binder>
    └─ method ReadQuery [L163]
      └─ ... (no implementation details available)
  └─ uses_service IControlledRepository<ProposedItem>
    └─ method WriteQuery [L169]
      └─ ... (no implementation details available)
  └─ sends_request CanIAccessBinderQuery [L167]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Binders.CanIAccessBinderQueryHandler.Handle [L60–L126]
      └─ uses_service UserService
        └─ method GetUserId [L91]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
      └─ uses_service RequestInfoService
        └─ method IsValidServiceAccountRequest [L89]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
      └─ uses_service TenantService
        └─ method GetCurrentTenant [L92]
          └─ implementation Workpapers.Next.Services.Features.Tenants.TenantService.GetCurrentTenant [L5-L22]
            └─ uses_service TenantIdentificationService
              └─ method GetCurrentTenant [L20]
                └─ implementation Workpapers.Next.ApplicationService.Services.TenantIdentificationService.GetCurrentTenant [L15-L131]
      └─ uses_service IControlledRepository<Binder>
        └─ method ReadQuery [L101]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L117]
          └─ implementation Workpapers.Next.Services.Features.Requests.RequestProcessor.ProcessAsync [L9-L32]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L121]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L109]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L92]

[web] PUT /api/proposed-items/decline-all  (Workpapers.Next.API.Controllers.Workpapers.ProposedItemsController.DeclineUnacceptedRecordProposals)  [L177–L197] status=200 [auth=AuthorizationPolicies.User]
  └─ calls BinderRepository.ReadQuery [L180]
  └─ calls ProposedItemRepository.WriteQuery [L186]
  └─ query Binder [L180]
    └─ reads_from Binders
  └─ write ProposedItem [L186]
    └─ reads_from ProposedItems
  └─ uses_service IControlledRepository<Binder>
    └─ method ReadQuery [L180]
      └─ ... (no implementation details available)
  └─ uses_service IControlledRepository<ProposedItem>
    └─ method WriteQuery [L186]
      └─ ... (no implementation details available)
  └─ sends_request CanIAccessBinderQuery [L184]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Binders.CanIAccessBinderQueryHandler.Handle [L60–L126]
      └─ uses_service UserService
        └─ method GetUserId [L91]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
      └─ uses_service RequestInfoService
        └─ method IsValidServiceAccountRequest [L89]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
      └─ uses_service TenantService
        └─ method GetCurrentTenant [L92]
          └─ implementation Workpapers.Next.Services.Features.Tenants.TenantService.GetCurrentTenant [L5-L22]
            └─ uses_service TenantIdentificationService
              └─ method GetCurrentTenant [L20]
                └─ implementation Workpapers.Next.ApplicationService.Services.TenantIdentificationService.GetCurrentTenant [L15-L131]
      └─ uses_service IControlledRepository<Binder>
        └─ method ReadQuery [L101]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L117]
          └─ implementation Workpapers.Next.Services.Features.Requests.RequestProcessor.ProcessAsync [L9-L32]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L121]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L109]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L92]

[web] GET /api/proposed-items/automation-bots/for-account  (Workpapers.Next.API.Controllers.Workpapers.ProposedItemsController.GetAllProposedAutomatonBotsForSourceAccount)  [L98–L115] status=200 [auth=AuthorizationPolicies.User]
  └─ maps_to ProposedAutomationRunDto [L105]
    └─ automapper.registration WorkpapersMappingProfile (ProposedItem->ProposedAutomationRunDto) [L974]
  └─ calls BinderRepository.ReadQuery [L102]
  └─ calls ProposedItemRepository.ReadQuery [L105]
  └─ query Binder [L102]
    └─ reads_from Binders
  └─ query ProposedItem [L105]
    └─ reads_from ProposedItems
  └─ uses_service IControlledRepository<Binder>
    └─ method ReadQuery [L102]
      └─ ... (no implementation details available)
  └─ uses_service IControlledRepository<ProposedItem>
    └─ method ReadQuery [L105]
      └─ ... (no implementation details available)
  └─ sends_request CanIAccessBinderQuery [L101]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Binders.CanIAccessBinderQueryHandler.Handle [L60–L126]
      └─ uses_service UserService
        └─ method GetUserId [L91]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
      └─ uses_service RequestInfoService
        └─ method IsValidServiceAccountRequest [L89]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
      └─ uses_service TenantService
        └─ method GetCurrentTenant [L92]
          └─ implementation Workpapers.Next.Services.Features.Tenants.TenantService.GetCurrentTenant [L5-L22]
            └─ uses_service TenantIdentificationService
              └─ method GetCurrentTenant [L20]
                └─ implementation Workpapers.Next.ApplicationService.Services.TenantIdentificationService.GetCurrentTenant [L15-L131]
      └─ uses_service IControlledRepository<Binder>
        └─ method ReadQuery [L101]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L117]
          └─ implementation Workpapers.Next.Services.Features.Requests.RequestProcessor.ProcessAsync [L9-L32]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L121]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L109]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L92]

[web] GET /api/proposed-items/automation-bots  (Workpapers.Next.API.Controllers.Workpapers.ProposedItemsController.GetProposedAutomatonBots)  [L79–L96] status=200 [auth=AuthorizationPolicies.User]
  └─ maps_to ProposedAutomationRunDto [L86]
    └─ automapper.registration WorkpapersMappingProfile (ProposedItem->ProposedAutomationRunDto) [L974]
  └─ calls BinderRepository.ReadQuery [L83]
  └─ calls ProposedItemRepository.ReadQuery [L86]
  └─ query Binder [L83]
    └─ reads_from Binders
  └─ query ProposedItem [L86]
    └─ reads_from ProposedItems
  └─ uses_service IControlledRepository<Binder>
    └─ method ReadQuery [L83]
      └─ ... (no implementation details available)
  └─ uses_service IControlledRepository<ProposedItem>
    └─ method ReadQuery [L86]
      └─ ... (no implementation details available)
  └─ sends_request CanIAccessBinderQuery [L82]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Binders.CanIAccessBinderQueryHandler.Handle [L60–L126]
      └─ uses_service UserService
        └─ method GetUserId [L91]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
      └─ uses_service RequestInfoService
        └─ method IsValidServiceAccountRequest [L89]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
      └─ uses_service TenantService
        └─ method GetCurrentTenant [L92]
          └─ implementation Workpapers.Next.Services.Features.Tenants.TenantService.GetCurrentTenant [L5-L22]
            └─ uses_service TenantIdentificationService
              └─ method GetCurrentTenant [L20]
                └─ implementation Workpapers.Next.ApplicationService.Services.TenantIdentificationService.GetCurrentTenant [L15-L131]
      └─ uses_service IControlledRepository<Binder>
        └─ method ReadQuery [L101]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L117]
          └─ implementation Workpapers.Next.Services.Features.Requests.RequestProcessor.ProcessAsync [L9-L32]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L121]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L109]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L92]

[web] GET /api/proposed-items/record-templates  (Workpapers.Next.API.Controllers.Workpapers.ProposedItemsController.GetProposedRecordTemplates)  [L49–L77] status=200 [auth=AuthorizationPolicies.User]
  └─ maps_to ProposedRecordTemplateDto [L54]
    └─ automapper.registration WorkpapersMappingProfile (ProposedItem->ProposedRecordTemplateDto) [L985]
  └─ calls ProposedItemRepository.ReadQuery [L54]
  └─ query ProposedItem [L54]
    └─ reads_from ProposedItems
  └─ uses_service IControlledRepository<ProposedItem>
    └─ method ReadQuery [L54]
      └─ ... (no implementation details available)
  └─ sends_request CanIAccessBinderQuery [L52]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Binders.CanIAccessBinderQueryHandler.Handle [L60–L126]
      └─ uses_service UserService
        └─ method GetUserId [L91]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
      └─ uses_service RequestInfoService
        └─ method IsValidServiceAccountRequest [L89]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
      └─ uses_service TenantService
        └─ method GetCurrentTenant [L92]
          └─ implementation Workpapers.Next.Services.Features.Tenants.TenantService.GetCurrentTenant [L5-L22]
            └─ uses_service TenantIdentificationService
              └─ method GetCurrentTenant [L20]
                └─ implementation Workpapers.Next.ApplicationService.Services.TenantIdentificationService.GetCurrentTenant [L15-L131]
      └─ uses_service IControlledRepository<Binder>
        └─ method ReadQuery [L101]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L117]
          └─ implementation Workpapers.Next.Services.Features.Requests.RequestProcessor.ProcessAsync [L9-L32]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L121]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L109]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L92]
  └─ sends_request FilterValidRecordTemplatesForBinderQuery [L69]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Workpapers.GetValidRecordTemplatesForBinderQueryHandler.Handle [L34–L103]
      └─ uses_service UserService
        └─ method GetFirmId [L71]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetFirmId [L20-L295]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetFirmId [L20-L295]
      └─ uses_service IControlledRepository<Binder>
        └─ method ReadQuery [L59]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<WorkpaperRecordTemplate>
        └─ method ReadQuery [L65]
          └─ ... (no implementation details available)
      └─ uses_service UnitOfWork
        └─ method Table [L75]
          └─ ... (no implementation details available)

[web] PUT /api/proposed-items/automation-bots/refresh  (Workpapers.Next.API.Controllers.Workpapers.ProposedItemsController.RefreshAutomationBots)  [L141–L158] status=200 [auth=AuthorizationPolicies.User]
  └─ calls BinderRepository.WriteQuery [L144]
  └─ write Binder [L144]
    └─ reads_from Binders
  └─ uses_service IControlledRepository<Binder>
    └─ method WriteQuery [L144]
      └─ ... (no implementation details available)
  └─ sends_request CreateUpdateProposedItemsCommand [L155]
    └─ handled_by Workpapers.Next.ApplicationService.Commands.Workpapers.ProposedItems.CreateUpdateProposedItemsCommandHandler.Handle [L36–L184]
      └─ uses_service IControlledRepository<ProposedItem>
        └─ method WriteQuery [L63]
          └─ ... (no implementation details available)
  └─ sends_request CanIAccessBinderQuery [L152]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Binders.CanIAccessBinderQueryHandler.Handle [L60–L126]
      └─ uses_service UserService
        └─ method GetUserId [L91]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
      └─ uses_service RequestInfoService
        └─ method IsValidServiceAccountRequest [L89]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
      └─ uses_service TenantService
        └─ method GetCurrentTenant [L92]
          └─ implementation Workpapers.Next.Services.Features.Tenants.TenantService.GetCurrentTenant [L5-L22]
            └─ uses_service TenantIdentificationService
              └─ method GetCurrentTenant [L20]
                └─ implementation Workpapers.Next.ApplicationService.Services.TenantIdentificationService.GetCurrentTenant [L15-L131]
      └─ uses_service IControlledRepository<Binder>
        └─ method ReadQuery [L101]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L117]
          └─ implementation Workpapers.Next.Services.Features.Requests.RequestProcessor.ProcessAsync [L9-L32]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L121]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L109]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L92]
  └─ sends_request GetAutomationProposalsQuery [L154]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Workpapers.AutomationBots.GetAutomationProposalsQueryHandler.Handle [L35–L222]
      └─ uses_service IControlledRepository<AutomationRun>
        └─ method ReadQuery [L96]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<Binder>
        └─ method ReadQuery [L59]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<SourceAccount>
        └─ method ReadQuery [L103]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L78]
          └─ implementation Workpapers.Next.Services.Features.Requests.RequestProcessor.ProcessAsync [L9-L32]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle
      └─ uses_service BotService
        └─ method GetBotDefinitions [L66]
          └─ implementation Workpapers.Next.ApplicationService.Features.AutomationBots.Services.BotService.GetBotDefinitions [L22-L111]

[web] PUT /api/proposed-items/record-templates/refresh  (Workpapers.Next.API.Controllers.Workpapers.ProposedItemsController.RefreshRecordTemplates)  [L117–L139] status=200 [auth=AuthorizationPolicies.User]
  └─ calls BinderRepository.WriteQuery [L120]
  └─ write Binder [L120]
    └─ reads_from Binders
  └─ uses_service IControlledRepository<Binder>
    └─ method WriteQuery [L120]
      └─ ... (no implementation details available)
  └─ sends_request CreateUpdateProposedItemsCommand [L136]
    └─ handled_by Workpapers.Next.ApplicationService.Commands.Workpapers.ProposedItems.CreateUpdateProposedItemsCommandHandler.Handle [L36–L184]
      └─ uses_service IControlledRepository<ProposedItem>
        └─ method WriteQuery [L63]
          └─ ... (no implementation details available)
  └─ sends_request CanIAccessBinderQuery [L128]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Binders.CanIAccessBinderQueryHandler.Handle [L60–L126]
      └─ uses_service UserService
        └─ method GetUserId [L91]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
      └─ uses_service RequestInfoService
        └─ method IsValidServiceAccountRequest [L89]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
      └─ uses_service TenantService
        └─ method GetCurrentTenant [L92]
          └─ implementation Workpapers.Next.Services.Features.Tenants.TenantService.GetCurrentTenant [L5-L22]
            └─ uses_service TenantIdentificationService
              └─ method GetCurrentTenant [L20]
                └─ implementation Workpapers.Next.ApplicationService.Services.TenantIdentificationService.GetCurrentTenant [L15-L131]
      └─ uses_service IControlledRepository<Binder>
        └─ method ReadQuery [L101]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L117]
          └─ implementation Workpapers.Next.Services.Features.Requests.RequestProcessor.ProcessAsync [L9-L32]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L121]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L109]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L92]
  └─ sends_request GetProposedRecordTemplatesQuery [L135]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Workpapers.GetProposedRecordTemplatesQueryHandler.Handle [L45–L242]
      └─ maps_to SourceAccountUltraLightDto [L106]
        └─ automapper.registration CirrusMappingProfile (SourceAccount->SourceAccountUltraLightDto) [L260]
        └─ automapper.registration WorkpapersMappingProfile (SourceAccount->SourceAccountUltraLightDto) [L615]
      └─ maps_to BinderTemplateDto [L95]
        └─ automapper.registration WorkpapersMappingProfile (BinderTemplate->BinderTemplateDto) [L726]
      └─ maps_to WorkpaperRecordTemplateUltraLightDto [L167]
        └─ automapper.registration WorkpapersMappingProfile (WorkpaperRecordTemplate->WorkpaperRecordTemplateUltraLightDto) [L216]
      └─ maps_to WorkpaperRecordTemplateUltraLightDto [L129]
        └─ automapper.registration WorkpapersMappingProfile (WorkpaperRecordTemplate->WorkpaperRecordTemplateUltraLightDto) [L216]
      └─ uses_service IControlledRepository<Binder>
        └─ method ReadQuery [L83]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<BinderTemplate>
        └─ method ReadQuery [L95]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<Client>
        └─ method ReadQuery [L89]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<RollOverRecord>
        └─ method ReadQuery [L156]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<SourceAccount>
        └─ method ReadQuery [L106]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<WorkpaperRecordTemplate>
        └─ method ReadQuery [L129]
          └─ ... (no implementation details available)
      └─ uses_service IMapper
        └─ method ConfigurationProvider [L109]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L98]
          └─ implementation Workpapers.Next.Services.Features.Requests.RequestProcessor.ProcessAsync [L9-L32]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle
      └─ uses_service UnitOfWork
        └─ method LocalTable [L154]
          └─ ... (no implementation details available)

[web] GET /api/sources  (Workpapers.Next.API.Controllers.Workpapers.SourcesController.CheckForDuplicateSource)  [L540–L560] status=200 [auth=AuthorizationPolicies.User]
  └─ calls SourceRepository.ReadQuery [L548]
  └─ query Source [L548]
  └─ uses_service IControlledRepository<Source>
    └─ method ReadQuery [L548]
      └─ ... (no implementation details available)

[web] POST /api/sources/  (Workpapers.Next.API.Controllers.Workpapers.SourcesController.Create)  [L118–L135] status=201 [auth=AuthorizationPolicies.User]
  └─ calls SourceRepository.Add [L132]
  └─ insert Source [L132]
  └─ query SourceType [L123]
  └─ uses_service IControlledRepository<Source>
    └─ method Add [L132]
      └─ ... (no implementation details available)
  └─ uses_service IControlledRepository<SourceType>
    └─ method ReadQuery [L123]
      └─ ... (no implementation details available)

[web] POST /api/sources/{type}/create-access-token  (Workpapers.Next.API.Controllers.Workpapers.SourcesController.CreateAccessToken)  [L179–L185] status=201 [auth=AuthorizationPolicies.User]
  └─ uses_service IConnectionApiService (AddSingleton)
    └─ method GetApiMethods [L182]
      └─ implementation Workpapers.Next.ApplicationService.Features.Connections.ConnectionApiService.GetApiMethods [L20-L75]
  └─ uses_service UserService
    └─ method GetUserId [L182]
      └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]

[web] DELETE /api/sources/{id:Guid}  (Workpapers.Next.API.Controllers.Workpapers.SourcesController.Delete)  [L163–L169] status=200 [auth=AuthorizationPolicies.User]
  └─ sends_request DeleteSourceCommand [L166]
    └─ handled_by Workpapers.Next.ApplicationService.Commands.Workpapers.SourceData.Sources.DeleteSourceCommandHandler.Handle [L26–L58]
      └─ uses_service IControlledRepository<Binder>
        └─ method ReadQuery [L50]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<Source>
        └─ method WriteQuery [L41]
          └─ ... (no implementation details available)

[web] GET /api/sources/{id}  (Workpapers.Next.API.Controllers.Workpapers.SourcesController.Get)  [L78–L86] status=200 [auth=AuthorizationPolicies.User]
  └─ maps_to SourceDto [L81]
    └─ automapper.registration ExternalApiMappingProfile (Source->SourceDto) [L95]
    └─ automapper.registration CirrusMappingProfile (Source->SourceDto) [L216]
    └─ automapper.registration WorkpapersMappingProfile (Source->SourceDto) [L598]
  └─ calls SourceRepository.ReadQuery [L81]
  └─ query Source [L81]
  └─ uses_service IControlledRepository<Source>
    └─ method ReadQuery [L81]
      └─ ... (no implementation details available)

[web] GET /api/sources/{type}/files  (Workpapers.Next.API.Controllers.Workpapers.SourcesController.GetAccountingFiles)  [L197–L203] status=200 [auth=AuthorizationPolicies.User]
  └─ uses_service IConnectionApiService (AddSingleton)
    └─ method GetApiMethods [L200]
      └─ implementation Workpapers.Next.ApplicationService.Features.Connections.ConnectionApiService.GetApiMethods [L20-L75]

[web] PUT /api/sources/{type}/reimport-accounts  (Workpapers.Next.API.Controllers.Workpapers.SourcesController.GetAccounts)  [L225–L234] status=200 [auth=AuthorizationPolicies.User]
  └─ sends_request ImportAccountsFromApi [L231]
    └─ handled_by Workpapers.Next.ApplicationService.Commands.Workpapers.SourceData.SourceAccounts.ImportAccountsFromApiHandler.Handle [L33–L64]
      └─ uses_service IControlledRepository<Binder>
        └─ method ReadQuery [L46]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L59]
          └─ implementation Workpapers.Next.Services.Features.Requests.RequestProcessor.ProcessAsync [L9-L32]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle
  └─ sends_request CanIAccessBinderQuery [L228]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Binders.CanIAccessBinderQueryHandler.Handle [L60–L126]
      └─ uses_service UserService
        └─ method GetUserId [L91]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
      └─ uses_service RequestInfoService
        └─ method IsValidServiceAccountRequest [L89]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
      └─ uses_service TenantService
        └─ method GetCurrentTenant [L92]
          └─ implementation Workpapers.Next.Services.Features.Tenants.TenantService.GetCurrentTenant [L5-L22]
            └─ uses_service TenantIdentificationService
              └─ method GetCurrentTenant [L20]
                └─ implementation Workpapers.Next.ApplicationService.Services.TenantIdentificationService.GetCurrentTenant [L15-L131]
      └─ uses_service IControlledRepository<Binder>
        └─ method ReadQuery [L101]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L117]
          └─ implementation Workpapers.Next.Services.Features.Requests.RequestProcessor.ProcessAsync [L9-L32]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L121]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L109]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L92]

[web] GET /api/sources/{type}/api-features  (Workpapers.Next.API.Controllers.Workpapers.SourcesController.GetApiFeatures)  [L478–L484] status=200 [auth=AuthorizationPolicies.User]
  └─ uses_service IConnectionApiService (AddSingleton)
    └─ method GetFeatures [L481]
      └─ implementation Workpapers.Next.ApplicationService.Features.Connections.ConnectionApiService.GetFeatures [L20-L75]

[web] GET /api/sources/{type}/authorization-url  (Workpapers.Next.API.Controllers.Workpapers.SourcesController.GetAuthorizationUrl)  [L171–L177] status=200 [auth=AuthorizationPolicies.User]
  └─ uses_service IConnectionApiService (AddSingleton)
    └─ method GetApiMethods [L174]
      └─ implementation Workpapers.Next.ApplicationService.Features.Connections.ConnectionApiService.GetApiMethods [L20-L75]
  └─ uses_service UserService
    └─ method GetUserId [L174]
      └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]

[web] GET /api/sources/{type}/bas  (Workpapers.Next.API.Controllers.Workpapers.SourcesController.GetBas)  [L237–L258] status=200 [auth=AuthorizationPolicies.User]
  └─ uses_service IConnectionApiService (AddSingleton)
    └─ method GetApiMethods [L255]
      └─ implementation Workpapers.Next.ApplicationService.Features.Connections.ConnectionApiService.GetApiMethods [L20-L75]
  └─ sends_request CanIAccessBinderQuery [L242]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Binders.CanIAccessBinderQueryHandler.Handle [L60–L126]
      └─ uses_service UserService
        └─ method GetUserId [L91]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
      └─ uses_service RequestInfoService
        └─ method IsValidServiceAccountRequest [L89]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
      └─ uses_service TenantService
        └─ method GetCurrentTenant [L92]
          └─ implementation Workpapers.Next.Services.Features.Tenants.TenantService.GetCurrentTenant [L5-L22]
            └─ uses_service TenantIdentificationService
              └─ method GetCurrentTenant [L20]
                └─ implementation Workpapers.Next.ApplicationService.Services.TenantIdentificationService.GetCurrentTenant [L15-L131]
      └─ uses_service IControlledRepository<Binder>
        └─ method ReadQuery [L101]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L117]
          └─ implementation Workpapers.Next.Services.Features.Requests.RequestProcessor.ProcessAsync [L9-L32]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L121]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L109]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L92]

[web] GET /api/sources  (Workpapers.Next.API.Controllers.Workpapers.SourcesController.GetBinder)  [L532–L538] status=200 [auth=AuthorizationPolicies.User]
  └─ calls BinderRepository.ReadQuery [L534]
  └─ query Binder [L534]
    └─ reads_from Binders
  └─ uses_service IControlledRepository<Binder>
    └─ method ReadQuery [L534]
      └─ ... (no implementation details available)

[web] GET /api/sources/taxonomy  (Workpapers.Next.API.Controllers.Workpapers.SourcesController.GetBinderTaxonomy)  [L433–L439] status=200 [auth=AuthorizationPolicies.User]
  └─ sends_request GetBinderTaxonomyQuery [L436]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Binders.GetBinderTaxonomyQueryHandler.Handle [L32–L113]
      └─ uses_service IControlledRepository<Binder>
        └─ method ReadQuery [L58]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<SourceAccount>
        └─ method ReadQuery [L92]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L56]
          └─ implementation Workpapers.Next.Services.Features.Requests.RequestProcessor.ProcessAsync [L9-L32]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle
      └─ uses_service ConnectionApiService
        └─ method GetApiMethods [L86]
          └─ implementation Workpapers.Next.ApplicationService.Features.Connections.ConnectionApiService.GetApiMethods [L20-L75]

[web] GET /api/sources/{type}/creditors  (Workpapers.Next.API.Controllers.Workpapers.SourcesController.GetCreditors)  [L283–L310] status=200 [auth=AuthorizationPolicies.User]
  └─ calls WorkpaperRecordRepository.ReadQuery [L301]
  └─ query WorkpaperRecord [L301]
    └─ reads_from WorkpaperRecords
  └─ uses_service IConnectionApiService (AddSingleton)
    └─ method GetApiMethods [L307]
      └─ implementation Workpapers.Next.ApplicationService.Features.Connections.ConnectionApiService.GetApiMethods [L20-L75]
  └─ uses_service IControlledRepository<WorkpaperRecord>
    └─ method ReadQuery [L301]
      └─ ... (no implementation details available)
  └─ sends_request CanIAccessBinderQuery [L288]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Binders.CanIAccessBinderQueryHandler.Handle [L60–L126]
      └─ uses_service UserService
        └─ method GetUserId [L91]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
      └─ uses_service RequestInfoService
        └─ method IsValidServiceAccountRequest [L89]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
      └─ uses_service TenantService
        └─ method GetCurrentTenant [L92]
          └─ implementation Workpapers.Next.Services.Features.Tenants.TenantService.GetCurrentTenant [L5-L22]
            └─ uses_service TenantIdentificationService
              └─ method GetCurrentTenant [L20]
                └─ implementation Workpapers.Next.ApplicationService.Services.TenantIdentificationService.GetCurrentTenant [L15-L131]
      └─ uses_service IControlledRepository<Binder>
        └─ method ReadQuery [L101]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L117]
          └─ implementation Workpapers.Next.Services.Features.Requests.RequestProcessor.ProcessAsync [L9-L32]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L121]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L109]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L92]

[web] GET /api/sources/{type}/debtors  (Workpapers.Next.API.Controllers.Workpapers.SourcesController.GetDebtors)  [L312–L339] status=200 [auth=AuthorizationPolicies.User]
  └─ calls WorkpaperRecordRepository.ReadQuery [L330]
  └─ query WorkpaperRecord [L330]
    └─ reads_from WorkpaperRecords
  └─ uses_service IConnectionApiService (AddSingleton)
    └─ method GetApiMethods [L336]
      └─ implementation Workpapers.Next.ApplicationService.Features.Connections.ConnectionApiService.GetApiMethods [L20-L75]
  └─ uses_service IControlledRepository<WorkpaperRecord>
    └─ method ReadQuery [L330]
      └─ ... (no implementation details available)
  └─ sends_request CanIAccessBinderQuery [L317]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Binders.CanIAccessBinderQueryHandler.Handle [L60–L126]
      └─ uses_service UserService
        └─ method GetUserId [L91]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
      └─ uses_service RequestInfoService
        └─ method IsValidServiceAccountRequest [L89]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
      └─ uses_service TenantService
        └─ method GetCurrentTenant [L92]
          └─ implementation Workpapers.Next.Services.Features.Tenants.TenantService.GetCurrentTenant [L5-L22]
            └─ uses_service TenantIdentificationService
              └─ method GetCurrentTenant [L20]
                └─ implementation Workpapers.Next.ApplicationService.Services.TenantIdentificationService.GetCurrentTenant [L15-L131]
      └─ uses_service IControlledRepository<Binder>
        └─ method ReadQuery [L101]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L117]
          └─ implementation Workpapers.Next.Services.Features.Requests.RequestProcessor.ProcessAsync [L9-L32]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L121]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L109]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L92]

[web] GET /api/sources/{type}/fixed-assets-workpaper-report  (Workpapers.Next.API.Controllers.Workpapers.SourcesController.GetFixedAssetsReport)  [L449–L453] status=200 [auth=AuthorizationPolicies.User]
  └─ sends_request GetFixedAssetReportQuery [L452]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Workpapers.GetFixedAssetReportQueryHandler.Handle [L32–L126]
      └─ uses_service IControlledRepository<Binder>
        └─ method ReadQuery [L81]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<SourceAccount>
        └─ method ReadQuery [L98]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L58]
          └─ implementation Workpapers.Next.Services.Features.Requests.RequestProcessor.ProcessAsync [L9-L32]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle
      └─ uses_service ConnectionApiService
        └─ method GetApiMethods [L72]
          └─ implementation Workpapers.Next.ApplicationService.Features.Connections.ConnectionApiService.GetApiMethods [L20-L75]

[web] GET /api/sources/for-client/{clientId:Guid}  (Workpapers.Next.API.Controllers.Workpapers.SourcesController.GetForClient)  [L92–L102] status=200 [auth=AuthorizationPolicies.User]
  └─ maps_to SourceDto [L95]
    └─ automapper.registration ExternalApiMappingProfile (Source->SourceDto) [L95]
    └─ automapper.registration CirrusMappingProfile (Source->SourceDto) [L216]
    └─ automapper.registration WorkpapersMappingProfile (Source->SourceDto) [L598]
  └─ calls SourceRepository.ReadQuery [L95]
  └─ query Source [L95]
  └─ uses_service IControlledRepository<Source>
    └─ method ReadQuery [L95]
      └─ ... (no implementation details available)

[web] GET /api/sources/{type}/ledger  (Workpapers.Next.API.Controllers.Workpapers.SourcesController.GetGeneralLedger)  [L341–L402] status=200 [auth=AuthorizationPolicies.User]
  └─ sends_request GetGeneralLedgerBySourceAccountQuery [L379]
    └─ handled_by Cirrus.ApplicationService.Accounting.Queries.GetGeneralLedgerBySourceAccountQueryHandler.Handle [L54–L242]
      └─ maps_to SourceAccountMappingDto [L201]
        └─ automapper.registration CirrusMappingProfile (SourceAccount->SourceAccountMappingDto) [L274]
        └─ automapper.registration WorkpapersMappingProfile (SourceAccount->SourceAccountMappingDto) [L613]
      └─ maps_to SourceLightDto [L181]
      └─ uses_service ApiService (SingleInstance)
        └─ method GetFeatures [L186]
          └─ implementation Cirrus.ApplicationService.Accounting.Services.ApiService.GetFeatures [L14-L75]
      └─ uses_service GetGeneralLedgerForDatesQuery
        └─ method Execute [L79]
          └─ ... (no implementation details available)
      └─ uses_service GetTrialBalanceForDatesQuery
        └─ method Execute [L149]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<Dataset>
        └─ method ReadQuery [L121]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<SourceAccount>
        └─ method ReadQuery [L136]
          └─ ... (no implementation details available)
      └─ uses_service IMapper
        └─ method ConfigurationProvider [L184]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L206]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)
  └─ sends_request CanIAccessBinderQuery [L356]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Binders.CanIAccessBinderQueryHandler.Handle [L60–L126]
      └─ uses_service UserService
        └─ method GetUserId [L91]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
      └─ uses_service RequestInfoService
        └─ method IsValidServiceAccountRequest [L89]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
      └─ uses_service TenantService
        └─ method GetCurrentTenant [L92]
          └─ implementation Workpapers.Next.Services.Features.Tenants.TenantService.GetCurrentTenant [L5-L22]
            └─ uses_service TenantIdentificationService
              └─ method GetCurrentTenant [L20]
                └─ implementation Workpapers.Next.ApplicationService.Services.TenantIdentificationService.GetCurrentTenant [L15-L131]
      └─ uses_service IControlledRepository<Binder>
        └─ method ReadQuery [L101]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L117]
          └─ implementation Workpapers.Next.Services.Features.Requests.RequestProcessor.ProcessAsync [L9-L32]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L121]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L109]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L92]

[web] GET /api/sources/{type}/ledger/for-worksheet  (Workpapers.Next.API.Controllers.Workpapers.SourcesController.GetGeneralLedgerForWorksheet)  [L404–L431] status=200 [auth=AuthorizationPolicies.User]
  └─ calls WorkpaperRecordRepository.ReadQuery [L417]
  └─ query WorkpaperRecord [L417]
    └─ reads_from WorkpaperRecords
  └─ uses_service IControlledRepository<WorkpaperRecord>
    └─ method ReadQuery [L417]
      └─ ... (no implementation details available)

[web] GET /api/sources/{type}/journal-url  (Workpapers.Next.API.Controllers.Workpapers.SourcesController.GetJournalUrl)  [L455–L476] status=200 [auth=AuthorizationPolicies.User]
  └─ calls BinderRepository.ReadQuery [L458]
  └─ query Binder [L458]
    └─ reads_from Binders
  └─ uses_service IConnectionApiService (AddSingleton)
    └─ method GetApiMethods [L472]
      └─ implementation Workpapers.Next.ApplicationService.Features.Connections.ConnectionApiService.GetApiMethods [L20-L75]
  └─ uses_service IControlledRepository<Binder>
    └─ method ReadQuery [L458]
      └─ ... (no implementation details available)

[web] GET /api/sources/for-active-ledger  (Workpapers.Next.API.Controllers.Workpapers.SourcesController.GetSourceForActiveLedger)  [L486–L491] status=200 [auth=AuthorizationPolicies.User]
  └─ uses_service IConnectionApiService (AddSingleton)
    └─ method GetApiMethods [L489]
      └─ implementation Workpapers.Next.ApplicationService.Features.Connections.ConnectionApiService.GetApiMethods [L20-L75]

[web] GET /api/sources/types  (Workpapers.Next.API.Controllers.Workpapers.SourcesController.GetSourceTypes)  [L108–L112] status=200 [auth=AuthorizationPolicies.User]
  └─ sends_request GetSourceTypesQuery [L111]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Workpapers.SourceData.SourceTypes.GetSourceTypesQueryHandler.Handle [L33–L62]
      └─ maps_to SourceTypeLightDto [L58]
      └─ uses_service IControlledRepository<SourceType>
        └─ method ReadQuery [L46]
          └─ ... (no implementation details available)
      └─ uses_service IMapper
        └─ method ConfigurationProvider [L59]
          └─ ... (no implementation details available)

[web] GET /api/sources/{type}/taxonomy  (Workpapers.Next.API.Controllers.Workpapers.SourcesController.GetTaxonomy)  [L441–L447] status=200 [auth=AuthorizationPolicies.User]
  └─ sends_request GetBinderTaxonomyQuery [L444]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Binders.GetBinderTaxonomyQueryHandler.Handle [L32–L113]
      └─ uses_service IControlledRepository<Binder>
        └─ method ReadQuery [L58]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<SourceAccount>
        └─ method ReadQuery [L92]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L56]
          └─ implementation Workpapers.Next.Services.Features.Requests.RequestProcessor.ProcessAsync [L9-L32]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle
      └─ uses_service ConnectionApiService
        └─ method GetApiMethods [L86]
          └─ implementation Workpapers.Next.ApplicationService.Features.Connections.ConnectionApiService.GetApiMethods [L20-L75]

[web] GET /api/sources/transactions  (Workpapers.Next.API.Controllers.Workpapers.SourcesController.GetTransactions)  [L493–L529] status=200 [auth=AuthorizationPolicies.User]
  └─ calls BinderRepository.ReadQuery [L498]
  └─ query Binder [L498]
    └─ reads_from Binders
  └─ uses_service IControlledRepository<Binder>
    └─ method ReadQuery [L498]
      └─ ... (no implementation details available)
  └─ sends_request GetGeneralLedgerBySourceAccountQuery [L518]
    └─ handled_by Cirrus.ApplicationService.Accounting.Queries.GetGeneralLedgerBySourceAccountQueryHandler.Handle [L54–L242]
      └─ maps_to SourceAccountMappingDto [L201]
        └─ automapper.registration CirrusMappingProfile (SourceAccount->SourceAccountMappingDto) [L274]
        └─ automapper.registration WorkpapersMappingProfile (SourceAccount->SourceAccountMappingDto) [L613]
      └─ maps_to SourceLightDto [L181]
      └─ uses_service ApiService (SingleInstance)
        └─ method GetFeatures [L186]
          └─ implementation Cirrus.ApplicationService.Accounting.Services.ApiService.GetFeatures [L14-L75]
      └─ uses_service GetGeneralLedgerForDatesQuery
        └─ method Execute [L79]
          └─ ... (no implementation details available)
      └─ uses_service GetTrialBalanceForDatesQuery
        └─ method Execute [L149]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<Dataset>
        └─ method ReadQuery [L121]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<SourceAccount>
        └─ method ReadQuery [L136]
          └─ ... (no implementation details available)
      └─ uses_service IMapper
        └─ method ConfigurationProvider [L184]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L206]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)

[web] PUT /api/sources/{type}/trial-balance  (Workpapers.Next.API.Controllers.Workpapers.SourcesController.GetTrialBalance)  [L205–L223] status=200 [auth=AuthorizationPolicies.User]
  └─ calls BinderRepository.WriteQuery [L208]
  └─ write Binder [L208]
    └─ reads_from Binders
  └─ uses_service IControlledRepository<Binder>
    └─ method WriteQuery [L208]
      └─ ... (no implementation details available)
  └─ sends_request ImportFromApiCommand [L220]
    └─ handled_by Cirrus.ApplicationService.Accounting.Commands.ImportFromApiCommandHandler.Handle [L60–L188]
      └─ uses_service ApiService (SingleInstance)
        └─ method GetFeatures [L174]
          └─ implementation Cirrus.ApplicationService.Accounting.Services.ApiService.GetFeatures [L14-L75]
      └─ uses_service IControlledRepository<Dataset>
        └─ method WriteQuery [L125]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<Journal>
        └─ method Add [L154]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L104]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)
      └─ uses_service IUserService (InstancePerLifetimeScope)
        └─ method GetUserId [L168]
          └─ implementation IUserService.GetUserId [L18-L18]
          └─ ... (no implementation details available)
  └─ sends_request CanIAccessBinderQuery [L212]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Binders.CanIAccessBinderQueryHandler.Handle [L60–L126]
      └─ uses_service UserService
        └─ method GetUserId [L91]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
      └─ uses_service RequestInfoService
        └─ method IsValidServiceAccountRequest [L89]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
      └─ uses_service TenantService
        └─ method GetCurrentTenant [L92]
          └─ implementation Workpapers.Next.Services.Features.Tenants.TenantService.GetCurrentTenant [L5-L22]
            └─ uses_service TenantIdentificationService
              └─ method GetCurrentTenant [L20]
                └─ implementation Workpapers.Next.ApplicationService.Services.TenantIdentificationService.GetCurrentTenant [L15-L131]
      └─ uses_service IControlledRepository<Binder>
        └─ method ReadQuery [L101]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L117]
          └─ implementation Workpapers.Next.Services.Features.Requests.RequestProcessor.ProcessAsync [L9-L32]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L121]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L109]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L92]

[web] GET /api/sources/{type}/wages  (Workpapers.Next.API.Controllers.Workpapers.SourcesController.GetWages)  [L260–L281] status=200 [auth=AuthorizationPolicies.User]
  └─ uses_service IConnectionApiService (AddSingleton)
    └─ method GetApiMethods [L278]
      └─ implementation Workpapers.Next.ApplicationService.Features.Connections.ConnectionApiService.GetApiMethods [L20-L75]
  └─ sends_request CanIAccessBinderQuery [L265]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Binders.CanIAccessBinderQueryHandler.Handle [L60–L126]
      └─ uses_service UserService
        └─ method GetUserId [L91]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
      └─ uses_service RequestInfoService
        └─ method IsValidServiceAccountRequest [L89]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
      └─ uses_service TenantService
        └─ method GetCurrentTenant [L92]
          └─ implementation Workpapers.Next.Services.Features.Tenants.TenantService.GetCurrentTenant [L5-L22]
            └─ uses_service TenantIdentificationService
              └─ method GetCurrentTenant [L20]
                └─ implementation Workpapers.Next.ApplicationService.Services.TenantIdentificationService.GetCurrentTenant [L15-L131]
      └─ uses_service IControlledRepository<Binder>
        └─ method ReadQuery [L101]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L117]
          └─ implementation Workpapers.Next.Services.Features.Requests.RequestProcessor.ProcessAsync [L9-L32]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L121]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L109]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L92]

[web] POST /api/sources/{type}/test-connection  (Workpapers.Next.API.Controllers.Workpapers.SourcesController.TestConnection)  [L187–L195] status=201 [auth=AuthorizationPolicies.User]
  └─ uses_service IConnectionApiService (AddSingleton)
    └─ method GetApiMethods [L191]
      └─ implementation Workpapers.Next.ApplicationService.Features.Connections.ConnectionApiService.GetApiMethods [L20-L75]

[web] PUT /api/sources/{id:Guid}  (Workpapers.Next.API.Controllers.Workpapers.SourcesController.Update)  [L140–L158] status=200 [auth=AuthorizationPolicies.User]
  └─ calls SourceRepository.WriteQuery [L145]
  └─ write Source [L145]
  └─ query SourceType [L147]
  └─ uses_service IControlledRepository<Source>
    └─ method WriteQuery [L145]
      └─ ... (no implementation details available)
  └─ uses_service IControlledRepository<SourceType>
    └─ method ReadQuery [L147]
      └─ ... (no implementation details available)

[web] POST /api/standard-accounts  (Workpapers.Next.API.Controllers.Workpapers.StandardAccountsController.CreateStandardAccount)  [L115–L124] status=201 [auth=AuthorizationPolicies.Administrator]
  └─ sends_request CreateStandardAccountCommand [L121]
    └─ handled_by Workpapers.Next.ApplicationService.Commands.Workpapers.SourceData.StandardAccounts.CreateStandardAccountCommandHandler.Handle [L26–L71]
      └─ uses_service IControlledRepository<MasterAccount>
        └─ method WriteQuery [L57]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<StandardAccount>
        └─ method Add [L43]
          └─ ... (no implementation details available)

[web] POST /api/standard-accounts/create-from-template  (Workpapers.Next.API.Controllers.Workpapers.StandardAccountsController.CreateStandardAccountsFromTemplates)  [L132–L141] status=200 [auth=AuthorizationPolicies.Administrator]
  └─ sends_request BulkCreateStandardAccountsCommand [L138]
    └─ handled_by Workpapers.Next.ApplicationService.Commands.Workpapers.SourceData.StandardAccounts.BulkCreateStandardAccountsCommandHandler.Handle [L27–L105]
      └─ uses_service IControlledRepository<MasterAccount>
        └─ method WriteQuery [L53]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<StandardAccount>
        └─ method WriteQuery [L41]
          └─ ... (no implementation details available)

[web] DELETE /api/standard-accounts/{id:guid}  (Workpapers.Next.API.Controllers.Workpapers.StandardAccountsController.Delete)  [L207–L216] status=204 [auth=AuthorizationPolicies.Administrator]
  └─ sends_request DeleteStandardAccountCommand [L213]
    └─ handled_by Workpapers.Next.ApplicationService.Commands.Workpapers.SourceData.StandardAccounts.DeleteStandardAccountCommandHandler.Handle [L25–L51]
      └─ uses_service IControlledRepository<StandardAccount>
        └─ method WriteQuery [L41]
          └─ ... (no implementation details available)

[web] GET /api/standard-accounts/{id:guid}  (Workpapers.Next.API.Controllers.Workpapers.StandardAccountsController.Get)  [L52–L61] status=200 [auth=AuthorizationPolicies.User]
  └─ maps_to StandardAccountDto [L56]
    └─ automapper.registration CirrusMappingProfile (StandardAccount->StandardAccountDto) [L436]
    └─ automapper.registration WorkpapersMappingProfile (StandardAccount->StandardAccountDto) [L692]
  └─ calls StandardAccountRepository.ReadQuery [L56]
  └─ query StandardAccount [L56]
    └─ reads_from StandardAccounts
  └─ uses_service IControlledRepository<StandardAccount>
    └─ method ReadQuery [L56]
      └─ ... (no implementation details available)

[web] GET /api/standard-accounts  (Workpapers.Next.API.Controllers.Workpapers.StandardAccountsController.GetChildStandardAccounts)  [L218–L235] status=200
  └─ calls SourceAccountRepository.ReadQuery [L228]
  └─ query SourceAccount [L228]
    └─ reads_from SourceAccounts
  └─ uses_service IControlledRepository<SourceAccount>
    └─ method ReadQuery [L228]
      └─ ... (no implementation details available)
  └─ sends_request GetChildStandardAccountsAsLightDtoQuery [L222]

[web] GET /api/standard-accounts  (Workpapers.Next.API.Controllers.Workpapers.StandardAccountsController.GetStandardAccounts)  [L67–L77] status=200 [auth=AuthorizationPolicies.User]
  └─ maps_to StandardAccountLightDto [L71]
    └─ automapper.registration CirrusMappingProfile (StandardAccount->StandardAccountLightDto) [L445]
    └─ automapper.registration WorkpapersMappingProfile (StandardAccount->StandardAccountLightDto) [L690]
  └─ calls StandardAccountRepository.ReadQuery [L71]
  └─ query StandardAccount [L71]
    └─ reads_from StandardAccounts
  └─ uses_service IControlledRepository<StandardAccount>
    └─ method ReadQuery [L71]
      └─ ... (no implementation details available)

[web] PUT /api/standard-accounts/move  (Workpapers.Next.API.Controllers.Workpapers.StandardAccountsController.Move)  [L166–L180] status=200 [auth=AuthorizationPolicies.Administrator]
  └─ sends_request MoveStandardAccountsCommand [L177]
    └─ handled_by Cirrus.ApplicationService.Accounting.Commands.Ledger.MoveStandardAccountsCommandHandler.Handle [L46–L284]
      └─ uses_service IControlledRepository<MasterAccount>
        └─ method ReadQuery [L158]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<StandardAccount>
        └─ method ReadQuery [L75]
          └─ ... (no implementation details available)
      └─ uses_service ILeadScheduleService (AddScoped)
        └─ method HasParentLeadSchedule [L196]
          └─ implementation Cirrus.ApplicationService.Features.LeadSchedules.LeadScheduleService.HasParentLeadSchedule [L14-L50]
      └─ uses_service ILogger
        └─ method LogWarning [L250]
          └─ ... (no implementation details available)
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L126]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)
      └─ logs ILogger [Warning] [L250]

[web] PUT /api/standard-accounts/{id:int}/reorder  (Workpapers.Next.API.Controllers.Workpapers.StandardAccountsController.ReorderAccounts)  [L195–L200] status=200
  └─ sends_request ReorderStandardAccountsCommand [L198]
    └─ handled_by Cirrus.ApplicationService.Accounting.Commands.Ledger.ReorderStandardAccountsCommandHandler.Handle [L32–L55]
      └─ uses_service IRequestProcessor (InstancePerDependency)
        └─ method ProcessAsync [L48]
          └─ implementation IRequestProcessor.ProcessAsync [L9-L9]
          └─ ... (no implementation details available)

[web] PUT /api/standard-accounts/{id:guid}  (Workpapers.Next.API.Controllers.Workpapers.StandardAccountsController.UpdateStandardAccount)  [L150–L157] status=200 [auth=AuthorizationPolicies.Administrator]
  └─ sends_request UpdateStandardAccountCommand [L154]
    └─ handled_by Workpapers.Next.ApplicationService.Commands.Workpapers.SourceData.StandardAccounts.UpdateStandardAccountCommandHandler.Handle [L27–L49]
      └─ uses_service IControlledRepository<MasterAccount>
        └─ method ReadQuery [L43]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<StandardAccount>
        └─ method WriteQuery [L40]
          └─ ... (no implementation details available)

[web] GET /api/taxonomy/  (Workpapers.Next.API.Controllers.Workpapers.TaxonomyController.GetAll)  [L32–L39] status=200 [auth=AuthorizationPolicies.User]
  └─ maps_to TaxonomyLightDto [L35]
    └─ automapper.registration CirrusMappingProfile (Taxonomy->TaxonomyLightDto) [L522]
    └─ automapper.registration WorkpapersMappingProfile (Taxonomy->TaxonomyLightDto) [L880]
  └─ calls TaxonomyRepository.ReadQuery [L35]
  └─ query Taxonomy [L35]
    └─ reads_from Taxonomy
  └─ uses_service IControlledRepository<Taxonomy>
    └─ method ReadQuery [L35]
      └─ ... (no implementation details available)

[web] GET /api/template-standard-accounts/{id:guid}  (Workpapers.Next.API.Controllers.Workpapers.TemplateStandardAccountsController.GetTemplateStandardAccount)  [L45–L53] status=200 [auth=AuthorizationPolicies.User]
  └─ maps_to TemplateStandardAccountDto [L49]
    └─ automapper.registration WorkpapersMappingProfile (TemplateStandardAccount->TemplateStandardAccountDto) [L674]
  └─ calls TemplateStandardAccountRepository.ReadQuery [L49]
  └─ query TemplateStandardAccount [L49]
    └─ reads_from TemplateStandardAccounts
  └─ uses_service IControlledRepository<TemplateStandardAccount>
    └─ method ReadQuery [L49]
      └─ ... (no implementation details available)

[web] GET /api/template-standard-accounts/sets  (Workpapers.Next.API.Controllers.Workpapers.TemplateStandardAccountsController.GetTemplateStandardAccountSets)  [L76–L85] status=200 [auth=AuthorizationPolicies.User]
  └─ maps_to TemplateStandardAccountSetDto [L80]
    └─ automapper.registration WorkpapersMappingProfile (TemplateStandardAccountSet->TemplateStandardAccountSetDto) [L672]
  └─ calls TemplateStandardAccountSetRepository.ReadQuery [L80]
  └─ query TemplateStandardAccountSet [L80]
    └─ reads_from TemplateStandardAccountSets
  └─ uses_service IControlledRepository<TemplateStandardAccountSet>
    └─ method ReadQuery [L80]
      └─ ... (no implementation details available)

[web] GET /api/template-standard-accounts/for-set/{setId:guid}  (Workpapers.Next.API.Controllers.Workpapers.TemplateStandardAccountsController.GetTemplateStandardAccountsForSet)  [L60–L70] status=200 [auth=AuthorizationPolicies.User]
  └─ maps_to TemplateStandardAccountDto [L64]
    └─ automapper.registration WorkpapersMappingProfile (TemplateStandardAccount->TemplateStandardAccountDto) [L674]
  └─ calls TemplateStandardAccountRepository.ReadQuery [L64]
  └─ query TemplateStandardAccount [L64]
    └─ reads_from TemplateStandardAccounts
  └─ uses_service IControlledRepository<TemplateStandardAccount>
    └─ method ReadQuery [L64]
      └─ ... (no implementation details available)

[web] PUT /api/workpaper-records/bulk  (Workpapers.Next.API.Controllers.Workpapers.WorkpaperRecordsController.BulkUpdate)  [L273–L298] status=200 [auth=AuthorizationPolicies.User]
  └─ calls WorkpaperRecordRepository.WriteQuery [L276]
  └─ write WorkpaperRecord [L276]
    └─ reads_from WorkpaperRecords
  └─ uses_service IControlledRepository<WorkpaperRecord>
    └─ method WriteQuery [L276]
      └─ ... (no implementation details available)
  └─ sends_request CanIAccessBinderQuery [L284]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Binders.CanIAccessBinderQueryHandler.Handle [L60–L126]
      └─ uses_service UserService
        └─ method GetUserId [L91]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
      └─ uses_service RequestInfoService
        └─ method IsValidServiceAccountRequest [L89]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
      └─ uses_service TenantService
        └─ method GetCurrentTenant [L92]
          └─ implementation Workpapers.Next.Services.Features.Tenants.TenantService.GetCurrentTenant [L5-L22]
            └─ uses_service TenantIdentificationService
              └─ method GetCurrentTenant [L20]
                └─ implementation Workpapers.Next.ApplicationService.Services.TenantIdentificationService.GetCurrentTenant [L15-L131]
      └─ uses_service IControlledRepository<Binder>
        └─ method ReadQuery [L101]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L117]
          └─ implementation Workpapers.Next.Services.Features.Requests.RequestProcessor.ProcessAsync [L9-L32]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L121]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L109]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L92]
  └─ sends_request GetWorkpaperRecordParamsQuery [L295]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.WorkpaperRecords.GetWorkpaperRecordParamsQueryHandler.Handle [L76–L264]
      └─ uses_service UserService
        └─ method GetUserId [L115]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
      └─ uses_service IControlledRepository<Binder>
        └─ method ReadQuery [L153]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<RecordStatus> (AddScoped)
        └─ method WriteQuery [L169]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<SourceAccount>
        └─ method ReadQuery [L251]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<WorkpaperRecordTemplate>
        └─ method ReadQuery [L204]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<Worksheet>
        └─ method WriteQuery [L141]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L189]
          └─ implementation Workpapers.Next.Services.Features.Requests.RequestProcessor.ProcessAsync [L9-L32]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle

[web] POST /api/workpaper-records/  (Workpapers.Next.API.Controllers.Workpapers.WorkpaperRecordsController.Create)  [L167–L180] status=201 [auth=AuthorizationPolicies.User]
  └─ calls BinderRepository.ReadQuery [L170]
  └─ query Binder [L170]
    └─ reads_from Binders
  └─ uses_service IControlledRepository<Binder>
    └─ method ReadQuery [L170]
      └─ ... (no implementation details available)
  └─ sends_request CreateWorkpaperRecordCommand [L177]
    └─ handled_by Workpapers.Next.ApplicationService.Commands.Workpapers.WorkpaperRecords.CreateWorkpaperRecordCommandHandler.Handle [L36–L149]
      └─ uses_service IControlledRepository<Binder>
        └─ method ReadQuery [L99]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<LoanMatrix>
        └─ method WriteQuery [L104]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<WorkpaperRecord>
        └─ method WriteQuery [L60]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L70]
          └─ implementation Workpapers.Next.Services.Features.Requests.RequestProcessor.ProcessAsync [L9-L32]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle
  └─ sends_request CanIAccessBinderQuery [L175]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Binders.CanIAccessBinderQueryHandler.Handle [L60–L126]
      └─ uses_service UserService
        └─ method GetUserId [L91]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
      └─ uses_service RequestInfoService
        └─ method IsValidServiceAccountRequest [L89]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
      └─ uses_service TenantService
        └─ method GetCurrentTenant [L92]
          └─ implementation Workpapers.Next.Services.Features.Tenants.TenantService.GetCurrentTenant [L5-L22]
            └─ uses_service TenantIdentificationService
              └─ method GetCurrentTenant [L20]
                └─ implementation Workpapers.Next.ApplicationService.Services.TenantIdentificationService.GetCurrentTenant [L15-L131]
      └─ uses_service IControlledRepository<Binder>
        └─ method ReadQuery [L101]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L117]
          └─ implementation Workpapers.Next.Services.Features.Requests.RequestProcessor.ProcessAsync [L9-L32]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L121]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L109]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L92]

[web] POST /api/workpaper-records/from-proposal  (Workpapers.Next.API.Controllers.Workpapers.WorkpaperRecordsController.CreateFromProposal)  [L182–L197] status=201 [auth=AuthorizationPolicies.User]
  └─ calls BinderRepository.ReadQuery [L185]
  └─ query Binder [L185]
    └─ reads_from Binders
  └─ uses_service IControlledRepository<Binder>
    └─ method ReadQuery [L185]
      └─ ... (no implementation details available)
  └─ sends_request CreateWorkpaperRecordCommand [L194]
    └─ handled_by Workpapers.Next.ApplicationService.Commands.Workpapers.WorkpaperRecords.CreateWorkpaperRecordCommandHandler.Handle [L36–L149]
      └─ uses_service IControlledRepository<Binder>
        └─ method ReadQuery [L99]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<LoanMatrix>
        └─ method WriteQuery [L104]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<WorkpaperRecord>
        └─ method WriteQuery [L60]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L70]
          └─ implementation Workpapers.Next.Services.Features.Requests.RequestProcessor.ProcessAsync [L9-L32]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle
  └─ sends_request CreateWorkpaperRecordModelFromProposalCommand [L193]
    └─ handled_by Workpapers.Next.ApplicationService.Commands.Workpapers.WorkpaperRecords.CreateWorkpaperRecordModelFromProposalCommandHandler.Handle [L34–L335]
      └─ uses_service IControlledRepository<BinderRecordTemplate>
        └─ method ReadQuery [L85]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<RecordStatus> (AddScoped)
        └─ method WriteQuery [L70]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<RollOverRecord>
        └─ method ReadQuery [L270]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<SourceAccount>
        └─ method ReadQuery [L136]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<WorkpaperRecordTemplate>
        └─ method ReadQuery [L110]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<Worksheet>
        └─ method ReadQuery [L198]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L183]
          └─ implementation Workpapers.Next.Services.Features.Requests.RequestProcessor.ProcessAsync [L9-L32]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle
      └─ uses_service UnitOfWork
        └─ method LocalTable [L268]
          └─ ... (no implementation details available)
  └─ sends_request CanIAccessBinderQuery [L191]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Binders.CanIAccessBinderQueryHandler.Handle [L60–L126]
      └─ uses_service UserService
        └─ method GetUserId [L91]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
      └─ uses_service RequestInfoService
        └─ method IsValidServiceAccountRequest [L89]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
      └─ uses_service TenantService
        └─ method GetCurrentTenant [L92]
          └─ implementation Workpapers.Next.Services.Features.Tenants.TenantService.GetCurrentTenant [L5-L22]
            └─ uses_service TenantIdentificationService
              └─ method GetCurrentTenant [L20]
                └─ implementation Workpapers.Next.ApplicationService.Services.TenantIdentificationService.GetCurrentTenant [L15-L131]
      └─ uses_service IControlledRepository<Binder>
        └─ method ReadQuery [L101]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L117]
          └─ implementation Workpapers.Next.Services.Features.Requests.RequestProcessor.ProcessAsync [L9-L32]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L121]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L109]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L92]

[web] POST /api/workpaper-records/{id:guid}/hyperlinks  (Workpapers.Next.API.Controllers.Workpapers.WorkpaperRecordsController.CreateHyperlink)  [L425–L448] status=201 [auth=AuthorizationPolicies.User]
  └─ calls WorkpaperRecordRepository.WriteQuery [L428]
  └─ write WorkpaperRecord [L428]
    └─ reads_from WorkpaperRecords
  └─ uses_service IControlledRepository<WorkpaperRecord>
    └─ method WriteQuery [L428]
      └─ ... (no implementation details available)
  └─ sends_request CanIAccessBinderQuery [L443]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Binders.CanIAccessBinderQueryHandler.Handle [L60–L126]
      └─ uses_service UserService
        └─ method GetUserId [L91]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
      └─ uses_service RequestInfoService
        └─ method IsValidServiceAccountRequest [L89]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
      └─ uses_service TenantService
        └─ method GetCurrentTenant [L92]
          └─ implementation Workpapers.Next.Services.Features.Tenants.TenantService.GetCurrentTenant [L5-L22]
            └─ uses_service TenantIdentificationService
              └─ method GetCurrentTenant [L20]
                └─ implementation Workpapers.Next.ApplicationService.Services.TenantIdentificationService.GetCurrentTenant [L15-L131]
      └─ uses_service IControlledRepository<Binder>
        └─ method ReadQuery [L101]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L117]
          └─ implementation Workpapers.Next.Services.Features.Requests.RequestProcessor.ProcessAsync [L9-L32]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L121]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L109]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L92]

[web] POST /api/workpaper-records/{id:guid}/create-or-update-financial-report  (Workpapers.Next.API.Controllers.Workpapers.WorkpaperRecordsController.CreateOrUpdateFinancialReport)  [L450–L475] status=201 [auth=AuthorizationPolicies.User]
  └─ calls WorkpaperRecordRepository.WriteQuery [L453]
  └─ write WorkpaperRecord [L453]
    └─ reads_from WorkpaperRecords
  └─ uses_service IControlledRepository<WorkpaperRecord>
    └─ method WriteQuery [L453]
      └─ ... (no implementation details available)
  └─ sends_request CreateOrUpdateFinancialReportCommand [L471]
    └─ handled_by Workpapers.Next.ApplicationService.Commands.Workpapers.WorkpaperRecords.CreateOrUpdateFinancialReportCommandHandler.Handle [L42–L215]
      └─ uses_service UserService
        └─ method GetUser [L118]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUser [L20-L295]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUser [L20-L295]
      └─ uses_service DataverseService
        └─ method GetStandardQueryParams [L156]
          └─ implementation Workpapers.Next.Dataverse.Service.DataverseService.GetStandardQueryParams [L17-L127]
      └─ uses_service ICirrusQueryService (AddScoped)
        └─ method GetReportData [L82]
          └─ implementation Workpapers.Next.CirrusServices.CirrusQueryService.GetReportData [L18-L250]
      └─ uses_service IControlledRepository<Binder>
        └─ method ReadQuery [L106]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L94]
          └─ implementation Workpapers.Next.Services.Features.Requests.RequestProcessor.ProcessAsync [L9-L32]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle
  └─ sends_request CreateOrUpdateFinancialReportCommand [L466]
    └─ handled_by Workpapers.Next.ApplicationService.Commands.Workpapers.WorkpaperRecords.CreateOrUpdateFinancialReportCommandHandler.Handle [L42–L215]
      └─ uses_service UserService
        └─ method GetUser [L118]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUser [L20-L295]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUser [L20-L295]
      └─ uses_service DataverseService
        └─ method GetStandardQueryParams [L156]
          └─ implementation Workpapers.Next.Dataverse.Service.DataverseService.GetStandardQueryParams [L17-L127]
      └─ uses_service ICirrusQueryService (AddScoped)
        └─ method GetReportData [L82]
          └─ implementation Workpapers.Next.CirrusServices.CirrusQueryService.GetReportData [L18-L250]
      └─ uses_service IControlledRepository<Binder>
        └─ method ReadQuery [L106]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L94]
          └─ implementation Workpapers.Next.Services.Features.Requests.RequestProcessor.ProcessAsync [L9-L32]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle
  └─ sends_request CanIAccessBinderQuery [L457]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Binders.CanIAccessBinderQueryHandler.Handle [L60–L126]
      └─ uses_service UserService
        └─ method GetUserId [L91]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
      └─ uses_service RequestInfoService
        └─ method IsValidServiceAccountRequest [L89]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
      └─ uses_service TenantService
        └─ method GetCurrentTenant [L92]
          └─ implementation Workpapers.Next.Services.Features.Tenants.TenantService.GetCurrentTenant [L5-L22]
            └─ uses_service TenantIdentificationService
              └─ method GetCurrentTenant [L20]
                └─ implementation Workpapers.Next.ApplicationService.Services.TenantIdentificationService.GetCurrentTenant [L15-L131]
      └─ uses_service IControlledRepository<Binder>
        └─ method ReadQuery [L101]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L117]
          └─ implementation Workpapers.Next.Services.Features.Requests.RequestProcessor.ProcessAsync [L9-L32]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L121]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L109]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L92]

[web] DELETE /api/workpaper-records/{id:Guid}  (Workpapers.Next.API.Controllers.Workpapers.WorkpaperRecordsController.Delete)  [L314–L326] status=200 [auth=AuthorizationPolicies.User]
  └─ calls WorkpaperRecordRepository.WriteQuery [L317]
  └─ write WorkpaperRecord [L317]
    └─ reads_from WorkpaperRecords
  └─ uses_service IControlledRepository<WorkpaperRecord>
    └─ method WriteQuery [L317]
      └─ ... (no implementation details available)
  └─ sends_request CanIAccessBinderQuery [L321]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Binders.CanIAccessBinderQueryHandler.Handle [L60–L126]
      └─ uses_service UserService
        └─ method GetUserId [L91]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
      └─ uses_service RequestInfoService
        └─ method IsValidServiceAccountRequest [L89]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
      └─ uses_service TenantService
        └─ method GetCurrentTenant [L92]
          └─ implementation Workpapers.Next.Services.Features.Tenants.TenantService.GetCurrentTenant [L5-L22]
            └─ uses_service TenantIdentificationService
              └─ method GetCurrentTenant [L20]
                └─ implementation Workpapers.Next.ApplicationService.Services.TenantIdentificationService.GetCurrentTenant [L15-L131]
      └─ uses_service IControlledRepository<Binder>
        └─ method ReadQuery [L101]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L117]
          └─ implementation Workpapers.Next.Services.Features.Requests.RequestProcessor.ProcessAsync [L9-L32]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L121]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L109]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L92]

[web] DELETE /api/workpaper-records/{id:guid}/hyperlinks/{hyperlinkId:guid}  (Workpapers.Next.API.Controllers.Workpapers.WorkpaperRecordsController.DeleteHyperlink)  [L491–L503] status=200 [auth=AuthorizationPolicies.User]
  └─ calls WorkpaperRecordRepository.WriteQuery [L494]
  └─ write WorkpaperRecord [L494]
    └─ reads_from WorkpaperRecords
  └─ uses_service IControlledRepository<WorkpaperRecord>
    └─ method WriteQuery [L494]
      └─ ... (no implementation details available)
  └─ sends_request CanIAccessBinderQuery [L498]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Binders.CanIAccessBinderQueryHandler.Handle [L60–L126]
      └─ uses_service UserService
        └─ method GetUserId [L91]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
      └─ uses_service RequestInfoService
        └─ method IsValidServiceAccountRequest [L89]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
      └─ uses_service TenantService
        └─ method GetCurrentTenant [L92]
          └─ implementation Workpapers.Next.Services.Features.Tenants.TenantService.GetCurrentTenant [L5-L22]
            └─ uses_service TenantIdentificationService
              └─ method GetCurrentTenant [L20]
                └─ implementation Workpapers.Next.ApplicationService.Services.TenantIdentificationService.GetCurrentTenant [L15-L131]
      └─ uses_service IControlledRepository<Binder>
        └─ method ReadQuery [L101]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L117]
          └─ implementation Workpapers.Next.Services.Features.Requests.RequestProcessor.ProcessAsync [L9-L32]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L121]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L109]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L92]

[web] GET /api/workpaper-records/external-values/evaluate  (Workpapers.Next.API.Controllers.Workpapers.WorkpaperRecordsController.EvaluateExternalValue)  [L244–L248] status=200 [auth=AuthorizationPolicies.User]
  └─ sends_request EvaluateExternalValueQuery [L247]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.WorkpaperRecords.ExternalValues.EvaluateExternalValueQueryHandler.Handle [L54–L126]
      └─ uses_service ICirrusQueryService (AddScoped)
        └─ method GetDataset [L121]
          └─ implementation Workpapers.Next.CirrusServices.CirrusQueryService.GetDataset [L18-L250]
      └─ uses_service IControlledRepository<Binder>
        └─ method ReadQuery [L104]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<Worksheet>
        └─ method ReadQuery [L89]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L110]
          └─ implementation Workpapers.Next.Services.Features.Requests.RequestProcessor.ProcessAsync [L9-L32]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle

[web] GET /api/workpaper-records/  (Workpapers.Next.API.Controllers.Workpapers.WorkpaperRecordsController.Get)  [L102–L121] status=200 [auth=AuthorizationPolicies.User]
  └─ maps_to WorkpaperRecordIndexDto [L106]
    └─ automapper.registration WorkpapersMappingProfile (WorkpaperRecord->WorkpaperRecordIndexDto) [L523]
  └─ calls WorkpaperRecordRepository.ReadQuery [L106]
  └─ query WorkpaperRecord [L106]
    └─ reads_from WorkpaperRecords
  └─ uses_service IControlledRepository<WorkpaperRecord>
    └─ method ReadQuery [L106]
      └─ ... (no implementation details available)
  └─ sends_request CanIAccessBinderQuery [L116]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Binders.CanIAccessBinderQueryHandler.Handle [L60–L126]
      └─ uses_service UserService
        └─ method GetUserId [L91]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
      └─ uses_service RequestInfoService
        └─ method IsValidServiceAccountRequest [L89]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
      └─ uses_service TenantService
        └─ method GetCurrentTenant [L92]
          └─ implementation Workpapers.Next.Services.Features.Tenants.TenantService.GetCurrentTenant [L5-L22]
            └─ uses_service TenantIdentificationService
              └─ method GetCurrentTenant [L20]
                └─ implementation Workpapers.Next.ApplicationService.Services.TenantIdentificationService.GetCurrentTenant [L15-L131]
      └─ uses_service IControlledRepository<Binder>
        └─ method ReadQuery [L101]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L117]
          └─ implementation Workpapers.Next.Services.Features.Requests.RequestProcessor.ProcessAsync [L9-L32]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L121]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L109]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L92]

[web] GET /api/workpaper-records/{id:guid}/hyperlinks  (Workpapers.Next.API.Controllers.Workpapers.WorkpaperRecordsController.GetHyperlinks)  [L399–L423] status=200 [auth=AuthorizationPolicies.User]
  └─ maps_to HyperlinkDto [L411]
  └─ maps_to HyperlinkDto [L404]
  └─ calls WorkpaperRecordRepository.ReadQuery [L404]
  └─ query WorkpaperRecord [L404]
    └─ reads_from WorkpaperRecords
  └─ uses_service IControlledRepository<WorkpaperRecord>
    └─ method ReadQuery [L404]
      └─ ... (no implementation details available)
  └─ sends_request CanIAccessWorkpaperRecordQuery [L402]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.WorkpaperRecords.CanIAccessWorkpaperRecordQueryHandler.Handle [L35–L59]
      └─ uses_service RequestInfoService
        └─ method IsValidServiceAccountRequest [L53]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
      └─ uses_service IControlledRepository<WorkpaperRecord>
        └─ method ReadQuery [L55]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L57]
          └─ implementation Workpapers.Next.Services.Features.Requests.RequestProcessor.ProcessAsync [L9-L32]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle

[web] GET /api/workpaper-records  (Workpapers.Next.API.Controllers.Workpapers.WorkpaperRecordsController.GetLinkedSourceAccountIds)  [L519–L560] status=200 [auth=AuthorizationPolicies.User]
  └─ calls SourceAccountRepository.ReadQuery [L529]
  └─ calls BinderRepository.ReadQuery [L524]
  └─ query SourceAccount [L529]
    └─ reads_from SourceAccounts
  └─ query Binder [L524]
    └─ reads_from Binders
  └─ uses_service IControlledRepository<Binder>
    └─ method ReadQuery [L524]
      └─ ... (no implementation details available)
  └─ uses_service IControlledRepository<SourceAccount>
    └─ method ReadQuery [L529]
      └─ ... (no implementation details available)

[web] GET /api/workpaper-records/linking-records  (Workpapers.Next.API.Controllers.Workpapers.WorkpaperRecordsController.GetLinkingRecords)  [L123–L144] status=200 [auth=AuthorizationPolicies.User]
  └─ maps_to WorkpaperRecordDto [L133]
    └─ automapper.registration ExternalApiMappingProfile (WorkpaperRecord->WorkpaperRecordDto) [L169]
    └─ automapper.registration WorkpapersMappingProfile (WorkpaperRecord->WorkpaperRecordDto) [L562]
  └─ calls WorkpaperRecordRepository.ReadQuery [L128]
  └─ query WorkpaperRecord [L128]
    └─ reads_from WorkpaperRecords
  └─ uses_service IControlledRepository<WorkpaperRecord>
    └─ method ReadQuery [L128]
      └─ ... (no implementation details available)
  └─ sends_request CanIAccessBinderQuery [L126]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Binders.CanIAccessBinderQueryHandler.Handle [L60–L126]
      └─ uses_service UserService
        └─ method GetUserId [L91]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
      └─ uses_service RequestInfoService
        └─ method IsValidServiceAccountRequest [L89]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
      └─ uses_service TenantService
        └─ method GetCurrentTenant [L92]
          └─ implementation Workpapers.Next.Services.Features.Tenants.TenantService.GetCurrentTenant [L5-L22]
            └─ uses_service TenantIdentificationService
              └─ method GetCurrentTenant [L20]
                └─ implementation Workpapers.Next.ApplicationService.Services.TenantIdentificationService.GetCurrentTenant [L15-L131]
      └─ uses_service IControlledRepository<Binder>
        └─ method ReadQuery [L101]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L117]
          └─ implementation Workpapers.Next.Services.Features.Requests.RequestProcessor.ProcessAsync [L9-L32]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L121]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L109]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L92]

[web] GET /api/workpaper-records/for-report  (Workpapers.Next.API.Controllers.Workpapers.WorkpaperRecordsController.GetRecordInfoForReport)  [L146–L151] status=200 [auth=AuthorizationPolicies.User]
  └─ sends_request GetWorkpaperRecordInfoForReportQuery [L150]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.WorkpaperRecords.GetWorkpaperRecordInfoForReportQueryHandler.Handle [L32–L100]
      └─ maps_to WorkpaperRecordForReportDto [L55]
        └─ automapper.registration WorkpapersMappingProfile (WorkpaperRecord->WorkpaperRecordForReportDto) [L539]
      └─ uses_service IControlledRepository<WorkpaperRecord>
        └─ method ReadQuery [L55]
          └─ ... (no implementation details available)
      └─ uses_service IMapper
        └─ method ConfigurationProvider [L58]
          └─ ... (no implementation details available)
      └─ uses_service MatterCountQueryProcessor
        └─ method ProcessMatterCounts [L72]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L53]
          └─ implementation Workpapers.Next.Services.Features.Requests.RequestProcessor.ProcessAsync [L9-L32]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle

[web] GET /api/workpaper-records/for-worksheet  (Workpapers.Next.API.Controllers.Workpapers.WorkpaperRecordsController.GetRecordsForWorksheet)  [L153–L165] status=200 [auth=AuthorizationPolicies.User]
  └─ maps_to WorkpaperRecordLightDto [L159]
    └─ automapper.registration WorkpapersMappingProfile (WorkpaperRecord->WorkpaperRecordLightDto) [L515]
  └─ calls WorkpaperRecordRepository.ReadQuery [L159]
  └─ query WorkpaperRecord [L159]
    └─ reads_from WorkpaperRecords
  └─ uses_service IControlledRepository<WorkpaperRecord>
    └─ method ReadQuery [L159]
      └─ ... (no implementation details available)
  └─ sends_request CanIAccessBinderQuery [L157]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Binders.CanIAccessBinderQueryHandler.Handle [L60–L126]
      └─ uses_service UserService
        └─ method GetUserId [L91]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
      └─ uses_service RequestInfoService
        └─ method IsValidServiceAccountRequest [L89]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
      └─ uses_service TenantService
        └─ method GetCurrentTenant [L92]
          └─ implementation Workpapers.Next.Services.Features.Tenants.TenantService.GetCurrentTenant [L5-L22]
            └─ uses_service TenantIdentificationService
              └─ method GetCurrentTenant [L20]
                └─ implementation Workpapers.Next.ApplicationService.Services.TenantIdentificationService.GetCurrentTenant [L15-L131]
      └─ uses_service IControlledRepository<Binder>
        └─ method ReadQuery [L101]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L117]
          └─ implementation Workpapers.Next.Services.Features.Requests.RequestProcessor.ProcessAsync [L9-L32]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L121]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L109]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L92]

[web] PUT /api/workpaper-records/move  (Workpapers.Next.API.Controllers.Workpapers.WorkpaperRecordsController.Move)  [L357–L363] status=200 [auth=AuthorizationPolicies.User]
  └─ sends_request MoveWorkpaperRecordsCommand [L360]
    └─ handled_by Workpapers.Next.ApplicationService.Commands.Workpapers.WorkpaperRecords.MoveWorkpaperRecordsCommandHandler.Handle [L37–L208]
      └─ uses_service IControlledRepository<Binder>
        └─ method ReadQuery [L77]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<WorkpaperRecord>
        └─ method ReadQuery [L59]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L79]
          └─ implementation Workpapers.Next.Services.Features.Requests.RequestProcessor.ProcessAsync [L9-L32]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle

[web] PUT /api/workpaper-records/external-values/refresh/{binderId:guid}  (Workpapers.Next.API.Controllers.Workpapers.WorkpaperRecordsController.RefreshExternalValuesForBinder)  [L227–L242] status=200 [auth=AuthorizationPolicies.User]
  └─ calls BinderRepository.ReadQuery [L230]
  └─ query Binder [L230]
    └─ reads_from Binders
  └─ uses_service IControlledRepository<Binder>
    └─ method ReadQuery [L230]
      └─ ... (no implementation details available)
  └─ sends_request RefreshExternalValuesCommand [L239]
    └─ handled_by Workpapers.Next.ApplicationService.Commands.Workpapers.WorkpaperRecords.RefreshExternalValuesCommandHandler.Handle [L43–L282]
      └─ uses_service ICirrusQueryService (AddScoped)
        └─ method GetDataset [L225]
          └─ implementation Workpapers.Next.CirrusServices.CirrusQueryService.GetDataset [L18-L250]
      └─ uses_service IControlledRepository<Binder>
        └─ method ReadQuery [L125]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<WorkpaperRecord>
        └─ method WriteQuery [L70]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<Worksheet>
        └─ method ReadQuery [L116]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L68]
          └─ implementation Workpapers.Next.Services.Features.Requests.RequestProcessor.ProcessAsync [L9-L32]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle
  └─ sends_request CanIAccessBinderQuery [L238]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Binders.CanIAccessBinderQueryHandler.Handle [L60–L126]
      └─ uses_service UserService
        └─ method GetUserId [L91]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
      └─ uses_service RequestInfoService
        └─ method IsValidServiceAccountRequest [L89]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
      └─ uses_service TenantService
        └─ method GetCurrentTenant [L92]
          └─ implementation Workpapers.Next.Services.Features.Tenants.TenantService.GetCurrentTenant [L5-L22]
            └─ uses_service TenantIdentificationService
              └─ method GetCurrentTenant [L20]
                └─ implementation Workpapers.Next.ApplicationService.Services.TenantIdentificationService.GetCurrentTenant [L15-L131]
      └─ uses_service IControlledRepository<Binder>
        └─ method ReadQuery [L101]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L117]
          └─ implementation Workpapers.Next.Services.Features.Requests.RequestProcessor.ProcessAsync [L9-L32]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L121]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L109]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L92]

[web] PUT /api/workpaper-records/{id:guid}/external-value/refresh  (Workpapers.Next.API.Controllers.Workpapers.WorkpaperRecordsController.RefreshRecordExternalValue)  [L250–L271] status=200 [auth=AuthorizationPolicies.User]
  └─ calls BinderRepository.ReadQuery [L259]
  └─ calls WorkpaperRecordRepository.ReadQuery [L253]
  └─ query Binder [L259]
    └─ reads_from Binders
  └─ query WorkpaperRecord [L253]
    └─ reads_from WorkpaperRecords
  └─ uses_service IControlledRepository<Binder>
    └─ method ReadQuery [L259]
      └─ ... (no implementation details available)
  └─ uses_service IControlledRepository<WorkpaperRecord>
    └─ method ReadQuery [L253]
      └─ ... (no implementation details available)
  └─ sends_request RefreshExternalValuesCommand [L268]
    └─ handled_by Workpapers.Next.ApplicationService.Commands.Workpapers.WorkpaperRecords.RefreshExternalValuesCommandHandler.Handle [L43–L282]
      └─ uses_service ICirrusQueryService (AddScoped)
        └─ method GetDataset [L225]
          └─ implementation Workpapers.Next.CirrusServices.CirrusQueryService.GetDataset [L18-L250]
      └─ uses_service IControlledRepository<Binder>
        └─ method ReadQuery [L125]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<WorkpaperRecord>
        └─ method WriteQuery [L70]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<Worksheet>
        └─ method ReadQuery [L116]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L68]
          └─ implementation Workpapers.Next.Services.Features.Requests.RequestProcessor.ProcessAsync [L9-L32]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle
  └─ sends_request CanIAccessBinderQuery [L267]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Binders.CanIAccessBinderQueryHandler.Handle [L60–L126]
      └─ uses_service UserService
        └─ method GetUserId [L91]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
      └─ uses_service RequestInfoService
        └─ method IsValidServiceAccountRequest [L89]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
      └─ uses_service TenantService
        └─ method GetCurrentTenant [L92]
          └─ implementation Workpapers.Next.Services.Features.Tenants.TenantService.GetCurrentTenant [L5-L22]
            └─ uses_service TenantIdentificationService
              └─ method GetCurrentTenant [L20]
                └─ implementation Workpapers.Next.ApplicationService.Services.TenantIdentificationService.GetCurrentTenant [L15-L131]
      └─ uses_service IControlledRepository<Binder>
        └─ method ReadQuery [L101]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L117]
          └─ implementation Workpapers.Next.Services.Features.Requests.RequestProcessor.ProcessAsync [L9-L32]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L121]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L109]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L92]

[web] PUT /api/workpaper-records/{id:Guid}/remove-linking  (Workpapers.Next.API.Controllers.Workpapers.WorkpaperRecordsController.RemoveLinkedFlag)  [L300–L312] status=200 [auth=AuthorizationPolicies.User]
  └─ calls WorkpaperRecordRepository.WriteQuery [L303]
  └─ write WorkpaperRecord [L303]
    └─ reads_from WorkpaperRecords
  └─ uses_service IControlledRepository<WorkpaperRecord>
    └─ method WriteQuery [L303]
      └─ ... (no implementation details available)
  └─ sends_request CanIAccessWorkpaperRecordQuery [L307]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.WorkpaperRecords.CanIAccessWorkpaperRecordQueryHandler.Handle [L35–L59]
      └─ uses_service RequestInfoService
        └─ method IsValidServiceAccountRequest [L53]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
      └─ uses_service IControlledRepository<WorkpaperRecord>
        └─ method ReadQuery [L55]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L57]
          └─ implementation Workpapers.Next.Services.Features.Requests.RequestProcessor.ProcessAsync [L9-L32]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle

[web] PUT /api/workpaper-records/{id:Guid}/reorder  (Workpapers.Next.API.Controllers.Workpapers.WorkpaperRecordsController.Reorder)  [L335–L352] status=200 [auth=AuthorizationPolicies.User]
  └─ calls WorkpaperRecordRepository.WriteQuery [L340]
  └─ write WorkpaperRecord [L340]
    └─ reads_from WorkpaperRecords
  └─ uses_service IControlledRepository<WorkpaperRecord>
    └─ method WriteQuery [L340]
      └─ ... (no implementation details available)
  └─ sends_request CanIAccessBinderQuery [L338]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Binders.CanIAccessBinderQueryHandler.Handle [L60–L126]
      └─ uses_service UserService
        └─ method GetUserId [L91]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
      └─ uses_service RequestInfoService
        └─ method IsValidServiceAccountRequest [L89]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
      └─ uses_service TenantService
        └─ method GetCurrentTenant [L92]
          └─ implementation Workpapers.Next.Services.Features.Tenants.TenantService.GetCurrentTenant [L5-L22]
            └─ uses_service TenantIdentificationService
              └─ method GetCurrentTenant [L20]
                └─ implementation Workpapers.Next.ApplicationService.Services.TenantIdentificationService.GetCurrentTenant [L15-L131]
      └─ uses_service IControlledRepository<Binder>
        └─ method ReadQuery [L101]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L117]
          └─ implementation Workpapers.Next.Services.Features.Requests.RequestProcessor.ProcessAsync [L9-L32]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L121]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L109]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L92]

[web] PUT /api/workpaper-records/{id:guid}/hyperlinks/{hyperlinkId:guid}/reorder  (Workpapers.Next.API.Controllers.Workpapers.WorkpaperRecordsController.ReorderHyperlink)  [L505–L517] status=200 [auth=AuthorizationPolicies.User]
  └─ calls WorkpaperRecordRepository.WriteQuery [L508]
  └─ write WorkpaperRecord [L508]
    └─ reads_from WorkpaperRecords
  └─ uses_service IControlledRepository<WorkpaperRecord>
    └─ method WriteQuery [L508]
      └─ ... (no implementation details available)
  └─ sends_request CanIAccessBinderQuery [L512]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Binders.CanIAccessBinderQueryHandler.Handle [L60–L126]
      └─ uses_service UserService
        └─ method GetUserId [L91]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
      └─ uses_service RequestInfoService
        └─ method IsValidServiceAccountRequest [L89]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
      └─ uses_service TenantService
        └─ method GetCurrentTenant [L92]
          └─ implementation Workpapers.Next.Services.Features.Tenants.TenantService.GetCurrentTenant [L5-L22]
            └─ uses_service TenantIdentificationService
              └─ method GetCurrentTenant [L20]
                └─ implementation Workpapers.Next.ApplicationService.Services.TenantIdentificationService.GetCurrentTenant [L15-L131]
      └─ uses_service IControlledRepository<Binder>
        └─ method ReadQuery [L101]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L117]
          └─ implementation Workpapers.Next.Services.Features.Requests.RequestProcessor.ProcessAsync [L9-L32]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L121]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L109]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L92]

[web] GET /api/workpaper-records/search  (Workpapers.Next.API.Controllers.Workpapers.WorkpaperRecordsController.Search)  [L59–L88] status=200 [auth=AuthorizationPolicies.User]
  └─ maps_to WorkpaperRecordIndexDto [L79]
  └─ calls WorkpaperRecordRepository.ReadQuery [L64]
  └─ query WorkpaperRecord [L64]
    └─ reads_from WorkpaperRecords
  └─ uses_service IControlledRepository<WorkpaperRecord>
    └─ method ReadQuery [L64]
      └─ ... (no implementation details available)
  └─ sends_request CanIAccessBinderQuery [L62]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Binders.CanIAccessBinderQueryHandler.Handle [L60–L126]
      └─ uses_service UserService
        └─ method GetUserId [L91]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
      └─ uses_service RequestInfoService
        └─ method IsValidServiceAccountRequest [L89]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
      └─ uses_service TenantService
        └─ method GetCurrentTenant [L92]
          └─ implementation Workpapers.Next.Services.Features.Tenants.TenantService.GetCurrentTenant [L5-L22]
            └─ uses_service TenantIdentificationService
              └─ method GetCurrentTenant [L20]
                └─ implementation Workpapers.Next.ApplicationService.Services.TenantIdentificationService.GetCurrentTenant [L15-L131]
      └─ uses_service IControlledRepository<Binder>
        └─ method ReadQuery [L101]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L117]
          └─ implementation Workpapers.Next.Services.Features.Requests.RequestProcessor.ProcessAsync [L9-L32]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L121]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L109]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L92]

[web] PUT /api/workpaper-records/{id:Guid}  (Workpapers.Next.API.Controllers.Workpapers.WorkpaperRecordsController.Update)  [L199–L225] status=200 [auth=AuthorizationPolicies.User]
  └─ calls WorkpaperRecordRepository.WriteQuery [L202]
  └─ write WorkpaperRecord [L202]
    └─ reads_from WorkpaperRecords
  └─ uses_service IControlledRepository<WorkpaperRecord>
    └─ method WriteQuery [L202]
      └─ ... (no implementation details available)
  └─ sends_request CanIAccessWorkpaperRecordQuery [L210]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.WorkpaperRecords.CanIAccessWorkpaperRecordQueryHandler.Handle [L35–L59]
      └─ uses_service RequestInfoService
        └─ method IsValidServiceAccountRequest [L53]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
      └─ uses_service IControlledRepository<WorkpaperRecord>
        └─ method ReadQuery [L55]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L57]
          └─ implementation Workpapers.Next.Services.Features.Requests.RequestProcessor.ProcessAsync [L9-L32]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle
  └─ sends_request GetWorkpaperRecordParamsQuery [L221]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.WorkpaperRecords.GetWorkpaperRecordParamsQueryHandler.Handle [L76–L264]
      └─ uses_service UserService
        └─ method GetUserId [L115]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
      └─ uses_service IControlledRepository<Binder>
        └─ method ReadQuery [L153]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<RecordStatus> (AddScoped)
        └─ method WriteQuery [L169]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<SourceAccount>
        └─ method ReadQuery [L251]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<WorkpaperRecordTemplate>
        └─ method ReadQuery [L204]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<Worksheet>
        └─ method WriteQuery [L141]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L189]
          └─ implementation Workpapers.Next.Services.Features.Requests.RequestProcessor.ProcessAsync [L9-L32]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle

[web] PUT /api/workpaper-records/{id:guid}/hyperlinks/{hyperlinkId:guid}  (Workpapers.Next.API.Controllers.Workpapers.WorkpaperRecordsController.UpdateHyperlink)  [L477–L489] status=200 [auth=AuthorizationPolicies.User]
  └─ calls WorkpaperRecordRepository.WriteQuery [L480]
  └─ write WorkpaperRecord [L480]
    └─ reads_from WorkpaperRecords
  └─ uses_service IControlledRepository<WorkpaperRecord>
    └─ method WriteQuery [L480]
      └─ ... (no implementation details available)
  └─ sends_request CanIAccessBinderQuery [L484]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Binders.CanIAccessBinderQueryHandler.Handle [L60–L126]
      └─ uses_service UserService
        └─ method GetUserId [L91]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
      └─ uses_service RequestInfoService
        └─ method IsValidServiceAccountRequest [L89]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
      └─ uses_service TenantService
        └─ method GetCurrentTenant [L92]
          └─ implementation Workpapers.Next.Services.Features.Tenants.TenantService.GetCurrentTenant [L5-L22]
            └─ uses_service TenantIdentificationService
              └─ method GetCurrentTenant [L20]
                └─ implementation Workpapers.Next.ApplicationService.Services.TenantIdentificationService.GetCurrentTenant [L15-L131]
      └─ uses_service IControlledRepository<Binder>
        └─ method ReadQuery [L101]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L117]
          └─ implementation Workpapers.Next.Services.Features.Requests.RequestProcessor.ProcessAsync [L9-L32]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L121]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L109]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L92]

[web] GET /api/workpaper-records  (Workpapers.Next.API.Controllers.Workpapers.WorkpaperRecordsController.UpdateMatterCounts)  [L574–L585] status=200 [auth=AuthorizationPolicies.User]

[web] POST /api/binders/{binderId:Guid}/worksheets/{id:guid}/commands  (Workpapers.Next.API.Controllers.Workpapers.Worksheets.BinderWorksheetsController.AddWorksheetCommands)  [L377–L388] status=201 [auth=AuthorizationPolicies.User]
  └─ calls WorksheetRepository.WriteQuery [L381]
  └─ write Worksheet [L381]
    └─ reads_from Worksheets
  └─ uses_service IControlledRepository<Worksheet>
    └─ method WriteQuery [L381]
      └─ ... (no implementation details available)

[web] PUT /api/binders/{binderId:Guid}/worksheets/batch  (Workpapers.Next.API.Controllers.Workpapers.Worksheets.BinderWorksheetsController.BatchUpdate)  [L184–L209] status=200 [auth=AuthorizationPolicies.User]
  └─ calls WorksheetRepository.WriteQuery [L191]
  └─ write Worksheet [L191]
    └─ reads_from Worksheets
  └─ uses_service IControlledRepository<Worksheet>
    └─ method WriteQuery [L191]
      └─ ... (no implementation details available)
  └─ sends_request CanIAccessBinderQuery [L199]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Binders.CanIAccessBinderQueryHandler.Handle [L60–L126]
      └─ uses_service UserService
        └─ method GetUserId [L91]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
      └─ uses_service RequestInfoService
        └─ method IsValidServiceAccountRequest [L89]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
      └─ uses_service TenantService
        └─ method GetCurrentTenant [L92]
          └─ implementation Workpapers.Next.Services.Features.Tenants.TenantService.GetCurrentTenant [L5-L22]
            └─ uses_service TenantIdentificationService
              └─ method GetCurrentTenant [L20]
                └─ implementation Workpapers.Next.ApplicationService.Services.TenantIdentificationService.GetCurrentTenant [L15-L131]
      └─ uses_service IControlledRepository<Binder>
        └─ method ReadQuery [L101]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L117]
          └─ implementation Workpapers.Next.Services.Features.Requests.RequestProcessor.ProcessAsync [L9-L32]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L121]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L109]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L92]

[web] POST /api/binders/{binderId:Guid}/worksheets/  (Workpapers.Next.API.Controllers.Workpapers.Worksheets.BinderWorksheetsController.Create)  [L156–L166] status=201 [auth=AuthorizationPolicies.User]
  └─ calls WorksheetRepository.Add [L163]
  └─ insert Worksheet [L163]
    └─ reads_from Worksheets
  └─ uses_service IControlledRepository<Worksheet>
    └─ method Add [L163]
      └─ ... (no implementation details available)
  └─ sends_request CanIAccessBinderQuery [L160]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Binders.CanIAccessBinderQueryHandler.Handle [L60–L126]
      └─ uses_service UserService
        └─ method GetUserId [L91]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
      └─ uses_service RequestInfoService
        └─ method IsValidServiceAccountRequest [L89]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
      └─ uses_service TenantService
        └─ method GetCurrentTenant [L92]
          └─ implementation Workpapers.Next.Services.Features.Tenants.TenantService.GetCurrentTenant [L5-L22]
            └─ uses_service TenantIdentificationService
              └─ method GetCurrentTenant [L20]
                └─ implementation Workpapers.Next.ApplicationService.Services.TenantIdentificationService.GetCurrentTenant [L15-L131]
      └─ uses_service IControlledRepository<Binder>
        └─ method ReadQuery [L101]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L117]
          └─ implementation Workpapers.Next.Services.Features.Requests.RequestProcessor.ProcessAsync [L9-L32]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L121]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L109]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L92]

[web] POST /api/binders/{binderId:Guid}/worksheets/command-audits  (Workpapers.Next.API.Controllers.Workpapers.Worksheets.BinderWorksheetsController.CreateCommandAudits)  [L402–L427] status=201 [auth=AuthorizationPolicies.User]
  └─ calls WorksheetRepository.WriteQuery [L409]
  └─ write Worksheet [L409]
    └─ reads_from Worksheets
  └─ uses_service IControlledRepository<Worksheet>
    └─ method WriteQuery [L409]
      └─ ... (no implementation details available)
  └─ sends_request CanIAccessBinderQuery [L418]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Binders.CanIAccessBinderQueryHandler.Handle [L60–L126]
      └─ uses_service UserService
        └─ method GetUserId [L91]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
      └─ uses_service RequestInfoService
        └─ method IsValidServiceAccountRequest [L89]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
      └─ uses_service TenantService
        └─ method GetCurrentTenant [L92]
          └─ implementation Workpapers.Next.Services.Features.Tenants.TenantService.GetCurrentTenant [L5-L22]
            └─ uses_service TenantIdentificationService
              └─ method GetCurrentTenant [L20]
                └─ implementation Workpapers.Next.ApplicationService.Services.TenantIdentificationService.GetCurrentTenant [L15-L131]
      └─ uses_service IControlledRepository<Binder>
        └─ method ReadQuery [L101]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L117]
          └─ implementation Workpapers.Next.Services.Features.Requests.RequestProcessor.ProcessAsync [L9-L32]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L121]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L109]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L92]

[web] POST /api/binders/{binderId:Guid}/worksheets/{id:guid}/hyperlinks  (Workpapers.Next.API.Controllers.Workpapers.Worksheets.BinderWorksheetsController.CreateHyperlink)  [L307–L330] status=201 [auth=AuthorizationPolicies.User]
  └─ calls WorksheetRepository.WriteQuery [L310]
  └─ write Worksheet [L310]
    └─ reads_from Worksheets
  └─ uses_service IControlledRepository<Worksheet>
    └─ method WriteQuery [L310]
      └─ ... (no implementation details available)
  └─ sends_request CanIAccessBinderQuery [L325]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Binders.CanIAccessBinderQueryHandler.Handle [L60–L126]
      └─ uses_service UserService
        └─ method GetUserId [L91]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
      └─ uses_service RequestInfoService
        └─ method IsValidServiceAccountRequest [L89]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
      └─ uses_service TenantService
        └─ method GetCurrentTenant [L92]
          └─ implementation Workpapers.Next.Services.Features.Tenants.TenantService.GetCurrentTenant [L5-L22]
            └─ uses_service TenantIdentificationService
              └─ method GetCurrentTenant [L20]
                └─ implementation Workpapers.Next.ApplicationService.Services.TenantIdentificationService.GetCurrentTenant [L15-L131]
      └─ uses_service IControlledRepository<Binder>
        └─ method ReadQuery [L101]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L117]
          └─ implementation Workpapers.Next.Services.Features.Requests.RequestProcessor.ProcessAsync [L9-L32]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L121]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L109]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L92]

[web] DELETE /api/binders/{binderId:Guid}/worksheets/{id:Guid}  (Workpapers.Next.API.Controllers.Workpapers.Worksheets.BinderWorksheetsController.Delete)  [L247–L260] status=200 [auth=AuthorizationPolicies.User]
  └─ calls WorksheetRepository.WriteQuery [L250]
  └─ write Worksheet [L250]
    └─ reads_from Worksheets
  └─ uses_service IControlledRepository<Worksheet>
    └─ method WriteQuery [L250]
      └─ ... (no implementation details available)
  └─ sends_request CanIAccessBinderQuery [L255]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Binders.CanIAccessBinderQueryHandler.Handle [L60–L126]
      └─ uses_service UserService
        └─ method GetUserId [L91]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
      └─ uses_service RequestInfoService
        └─ method IsValidServiceAccountRequest [L89]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
      └─ uses_service TenantService
        └─ method GetCurrentTenant [L92]
          └─ implementation Workpapers.Next.Services.Features.Tenants.TenantService.GetCurrentTenant [L5-L22]
            └─ uses_service TenantIdentificationService
              └─ method GetCurrentTenant [L20]
                └─ implementation Workpapers.Next.ApplicationService.Services.TenantIdentificationService.GetCurrentTenant [L15-L131]
      └─ uses_service IControlledRepository<Binder>
        └─ method ReadQuery [L101]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L117]
          └─ implementation Workpapers.Next.Services.Features.Requests.RequestProcessor.ProcessAsync [L9-L32]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L121]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L109]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L92]

[web] DELETE /api/binders/{binderId:Guid}/worksheets/{id:guid}/hyperlinks/{hyperlinkId:guid}  (Workpapers.Next.API.Controllers.Workpapers.Worksheets.BinderWorksheetsController.DeleteHyperlink)  [L362–L375] status=200 [auth=AuthorizationPolicies.User]
  └─ calls WorksheetRepository.WriteQuery [L365]
  └─ write Worksheet [L365]
    └─ reads_from Worksheets
  └─ uses_service IControlledRepository<Worksheet>
    └─ method WriteQuery [L365]
      └─ ... (no implementation details available)
  └─ sends_request CanIAccessBinderQuery [L370]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Binders.CanIAccessBinderQueryHandler.Handle [L60–L126]
      └─ uses_service UserService
        └─ method GetUserId [L91]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
      └─ uses_service RequestInfoService
        └─ method IsValidServiceAccountRequest [L89]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
      └─ uses_service TenantService
        └─ method GetCurrentTenant [L92]
          └─ implementation Workpapers.Next.Services.Features.Tenants.TenantService.GetCurrentTenant [L5-L22]
            └─ uses_service TenantIdentificationService
              └─ method GetCurrentTenant [L20]
                └─ implementation Workpapers.Next.ApplicationService.Services.TenantIdentificationService.GetCurrentTenant [L15-L131]
      └─ uses_service IControlledRepository<Binder>
        └─ method ReadQuery [L101]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L117]
          └─ implementation Workpapers.Next.Services.Features.Requests.RequestProcessor.ProcessAsync [L9-L32]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L121]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L109]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L92]

[web] GET /api/binders/{binderId:Guid}/worksheets/{id:Guid}  (Workpapers.Next.API.Controllers.Workpapers.Worksheets.BinderWorksheetsController.Get)  [L93–L105] status=200 [auth=AuthorizationPolicies.User]
  └─ maps_to WorksheetDto [L96]
  └─ sends_request CanIAccessBinderQuery [L102]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Binders.CanIAccessBinderQueryHandler.Handle [L60–L126]
      └─ uses_service UserService
        └─ method GetUserId [L91]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
      └─ uses_service RequestInfoService
        └─ method IsValidServiceAccountRequest [L89]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
      └─ uses_service TenantService
        └─ method GetCurrentTenant [L92]
          └─ implementation Workpapers.Next.Services.Features.Tenants.TenantService.GetCurrentTenant [L5-L22]
            └─ uses_service TenantIdentificationService
              └─ method GetCurrentTenant [L20]
                └─ implementation Workpapers.Next.ApplicationService.Services.TenantIdentificationService.GetCurrentTenant [L15-L131]
      └─ uses_service IControlledRepository<Binder>
        └─ method ReadQuery [L101]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L117]
          └─ implementation Workpapers.Next.Services.Features.Requests.RequestProcessor.ProcessAsync [L9-L32]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L121]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L109]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L92]

[web] GET /api/binders/{binderId:Guid}/worksheets/for-binder  (Workpapers.Next.API.Controllers.Workpapers.Worksheets.BinderWorksheetsController.GetForBinder)  [L107–L114] status=200 [auth=AuthorizationPolicies.User]
  └─ sends_request CanIAccessBinderQuery [L110]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Binders.CanIAccessBinderQueryHandler.Handle [L60–L126]
      └─ uses_service UserService
        └─ method GetUserId [L91]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
      └─ uses_service RequestInfoService
        └─ method IsValidServiceAccountRequest [L89]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
      └─ uses_service TenantService
        └─ method GetCurrentTenant [L92]
          └─ implementation Workpapers.Next.Services.Features.Tenants.TenantService.GetCurrentTenant [L5-L22]
            └─ uses_service TenantIdentificationService
              └─ method GetCurrentTenant [L20]
                └─ implementation Workpapers.Next.ApplicationService.Services.TenantIdentificationService.GetCurrentTenant [L15-L131]
      └─ uses_service IControlledRepository<Binder>
        └─ method ReadQuery [L101]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L117]
          └─ implementation Workpapers.Next.Services.Features.Requests.RequestProcessor.ProcessAsync [L9-L32]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L121]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L109]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L92]
  └─ sends_request GetWorkSheetsForBinderQuery [L111]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Worksheets.GetWorkSheetsForBinderQueryHandler.Handle [L35–L98]
      └─ maps_to WorksheetDto [L65]
      └─ uses_service IControlledRepository<WorkpaperRecord>
        └─ method ReadQuery [L56]
          └─ ... (no implementation details available)
      └─ uses_service IMapper
        └─ method ConfigurationProvider [L68]
          └─ ... (no implementation details available)
      └─ uses_service MatterCountQueryProcessor
        └─ method ProcessMatterCounts [L90]
          └─ ... (no implementation details available)

[web] GET /api/binders/{binderId:Guid}/worksheets/{id:guid}/hyperlinks  (Workpapers.Next.API.Controllers.Workpapers.Worksheets.BinderWorksheetsController.GetHyperlinks)  [L285–L305] status=200 [auth=AuthorizationPolicies.User]
  └─ maps_to HyperlinkDto [L296]
  └─ maps_to HyperlinkDto [L290]
  └─ calls WorkpaperRecordRepository.ReadQuery [L296]
  └─ calls WorksheetRepository.ReadQuery [L290]
  └─ query WorkpaperRecord [L296]
    └─ reads_from WorkpaperRecords
  └─ query Worksheet [L290]
    └─ reads_from Worksheets
  └─ uses_service IControlledRepository<WorkpaperRecord>
    └─ method ReadQuery [L296]
      └─ ... (no implementation details available)
  └─ uses_service IControlledRepository<Worksheet>
    └─ method ReadQuery [L290]
      └─ ... (no implementation details available)
  └─ sends_request CanIAccessWorksheetQuery [L288]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Worksheets.CanIAccessWorksheetQueryHandler.Handle [L36–L60]
      └─ uses_service RequestInfoService
        └─ method IsValidServiceAccountRequest [L54]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L58]
          └─ implementation Workpapers.Next.Services.Features.Requests.RequestProcessor.ProcessAsync [L9-L32]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle

[web] GET /api/binders/{binderId:Guid}/worksheets/{id:Guid}/linked-records  (Workpapers.Next.API.Controllers.Workpapers.Worksheets.BinderWorksheetsController.GetLinkedRecords)  [L126–L138] status=200 [auth=AuthorizationPolicies.User]
  └─ maps_to LinkedWorkpaperRecordDto [L131]
    └─ automapper.registration WorkpapersMappingProfile (WorkpaperRecord->LinkedWorkpaperRecordDto) [L559]
  └─ calls WorkpaperRecordRepository.ReadQuery [L131]
  └─ query WorkpaperRecord [L131]
    └─ reads_from WorkpaperRecords
  └─ uses_service IControlledRepository<WorkpaperRecord>
    └─ method ReadQuery [L131]
      └─ ... (no implementation details available)
  └─ sends_request CanIAccessWorksheetQuery [L129]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Worksheets.CanIAccessWorksheetQueryHandler.Handle [L36–L60]
      └─ uses_service RequestInfoService
        └─ method IsValidServiceAccountRequest [L54]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L58]
          └─ implementation Workpapers.Next.Services.Features.Requests.RequestProcessor.ProcessAsync [L9-L32]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle

[web] GET /api/binders/{binderId:Guid}/worksheets/{id:Guid}/commands  (Workpapers.Next.API.Controllers.Workpapers.Worksheets.BinderWorksheetsController.GetRecordCommands)  [L140–L154] status=200 [auth=AuthorizationPolicies.User]
  └─ maps_to CommandDto [L145]
  └─ calls WorksheetRepository.ReadQuery [L145]
  └─ query Worksheet [L145]
    └─ reads_from Worksheets
  └─ uses_service IControlledRepository<Worksheet>
    └─ method ReadQuery [L145]
      └─ ... (no implementation details available)
  └─ sends_request CanIAccessWorksheetQuery [L143]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Worksheets.CanIAccessWorksheetQueryHandler.Handle [L36–L60]
      └─ uses_service RequestInfoService
        └─ method IsValidServiceAccountRequest [L54]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L58]
          └─ implementation Workpapers.Next.Services.Features.Requests.RequestProcessor.ProcessAsync [L9-L32]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle

[web] GET /api/binders/{binderId:Guid}/worksheets/for-binder/{id:Guid}  (Workpapers.Next.API.Controllers.Workpapers.Worksheets.BinderWorksheetsController.GetWorksheetForBinder)  [L116–L124] status=200 [auth=AuthorizationPolicies.User]
  └─ maps_to WorksheetUltraLightDto [L120]
    └─ automapper.registration WorkpapersMappingProfile (Worksheet->WorksheetUltraLightDto) [L478]
  └─ calls WorksheetRepository.ReadQuery [L120]
  └─ query Worksheet [L120]
    └─ reads_from Worksheets
  └─ uses_service IControlledRepository<Worksheet>
    └─ method ReadQuery [L120]
      └─ ... (no implementation details available)
  └─ sends_request CanIAccessBinderQuery [L119]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Binders.CanIAccessBinderQueryHandler.Handle [L60–L126]
      └─ uses_service UserService
        └─ method GetUserId [L91]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
      └─ uses_service RequestInfoService
        └─ method IsValidServiceAccountRequest [L89]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
      └─ uses_service TenantService
        └─ method GetCurrentTenant [L92]
          └─ implementation Workpapers.Next.Services.Features.Tenants.TenantService.GetCurrentTenant [L5-L22]
            └─ uses_service TenantIdentificationService
              └─ method GetCurrentTenant [L20]
                └─ implementation Workpapers.Next.ApplicationService.Services.TenantIdentificationService.GetCurrentTenant [L15-L131]
      └─ uses_service IControlledRepository<Binder>
        └─ method ReadQuery [L101]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L117]
          └─ implementation Workpapers.Next.Services.Features.Requests.RequestProcessor.ProcessAsync [L9-L32]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L121]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L109]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L92]

[web] GET /api/binders/{binderId:Guid}/worksheets  (Workpapers.Next.API.Controllers.Workpapers.Worksheets.BinderWorksheetsController.GetWorksheetParams)  [L437–L446] status=200 [auth=AuthorizationPolicies.User]
  └─ calls BinderRepository.ReadQuery [L439]
  └─ query Binder [L439]
    └─ reads_from Binders
  └─ uses_service IControlledRepository<Binder>
    └─ method ReadQuery [L439]
      └─ ... (no implementation details available)

[web] PUT /api/binders/{binderId:Guid}/worksheets/initialise  (Workpapers.Next.API.Controllers.Workpapers.Worksheets.BinderWorksheetsController.Initialise)  [L211–L229] status=200 [auth=AuthorizationPolicies.User]
  └─ calls WorksheetRepository.WriteQuery [L216]
  └─ write Worksheet [L216]
    └─ reads_from Worksheets
  └─ uses_service IControlledRepository<Worksheet>
    └─ method WriteQuery [L216]
      └─ ... (no implementation details available)
  └─ sends_request CanIAccessBinderQuery [L224]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Binders.CanIAccessBinderQueryHandler.Handle [L60–L126]
      └─ uses_service UserService
        └─ method GetUserId [L91]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
      └─ uses_service RequestInfoService
        └─ method IsValidServiceAccountRequest [L89]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
      └─ uses_service TenantService
        └─ method GetCurrentTenant [L92]
          └─ implementation Workpapers.Next.Services.Features.Tenants.TenantService.GetCurrentTenant [L5-L22]
            └─ uses_service TenantIdentificationService
              └─ method GetCurrentTenant [L20]
                └─ implementation Workpapers.Next.ApplicationService.Services.TenantIdentificationService.GetCurrentTenant [L15-L131]
      └─ uses_service IControlledRepository<Binder>
        └─ method ReadQuery [L101]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L117]
          └─ implementation Workpapers.Next.Services.Features.Requests.RequestProcessor.ProcessAsync [L9-L32]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L121]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L109]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L92]

[web] POST /api/binders/{binderId:Guid}/worksheets/log-insert-errors  (Workpapers.Next.API.Controllers.Workpapers.Worksheets.BinderWorksheetsController.LogInsertErrors)  [L429–L435] status=201 [auth=AuthorizationPolicies.User]

[web] GET /api/binders/{binderId:Guid}/worksheets/{id:Guid}/preview  (Workpapers.Next.API.Controllers.Workpapers.Worksheets.BinderWorksheetsController.Preview)  [L262–L270] status=200 [auth=AuthorizationPolicies.User]
  └─ sends_request CanIAccessBinderQuery [L265]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Binders.CanIAccessBinderQueryHandler.Handle [L60–L126]
      └─ uses_service UserService
        └─ method GetUserId [L91]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
      └─ uses_service RequestInfoService
        └─ method IsValidServiceAccountRequest [L89]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
      └─ uses_service TenantService
        └─ method GetCurrentTenant [L92]
          └─ implementation Workpapers.Next.Services.Features.Tenants.TenantService.GetCurrentTenant [L5-L22]
            └─ uses_service TenantIdentificationService
              └─ method GetCurrentTenant [L20]
                └─ implementation Workpapers.Next.ApplicationService.Services.TenantIdentificationService.GetCurrentTenant [L15-L131]
      └─ uses_service IControlledRepository<Binder>
        └─ method ReadQuery [L101]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L117]
          └─ implementation Workpapers.Next.Services.Features.Requests.RequestProcessor.ProcessAsync [L9-L32]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L121]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L109]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L92]
  └─ sends_request GetWorksheetPdfQuery [L267]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Worksheets.GetWorksheetPdfQueryHandler.Handle [L37–L76]
      └─ maps_to WorksheetUltraLightDto [L63]
        └─ automapper.registration WorkpapersMappingProfile (Worksheet->WorksheetUltraLightDto) [L478]
      └─ uses_service IControlledRepository<Worksheet>
        └─ method ReadQuery [L63]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L54]
          └─ implementation Workpapers.Next.Services.Features.Requests.RequestProcessor.ProcessAsync [L9-L32]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle

[web] PUT /api/binders/{binderId:Guid}/worksheets/{id:Guid}/reinstate  (Workpapers.Next.API.Controllers.Workpapers.Worksheets.BinderWorksheetsController.Reinstate)  [L231–L245] status=200 [auth=AuthorizationPolicies.User]
  └─ calls WorksheetRepository.WriteQuery [L234]
  └─ write Worksheet [L234]
    └─ reads_from Worksheets
  └─ uses_service IControlledRepository<Worksheet>
    └─ method WriteQuery [L234]
      └─ ... (no implementation details available)
  └─ sends_request CanIAccessBinderQuery [L239]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Binders.CanIAccessBinderQueryHandler.Handle [L60–L126]
      └─ uses_service UserService
        └─ method GetUserId [L91]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
      └─ uses_service RequestInfoService
        └─ method IsValidServiceAccountRequest [L89]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
      └─ uses_service TenantService
        └─ method GetCurrentTenant [L92]
          └─ implementation Workpapers.Next.Services.Features.Tenants.TenantService.GetCurrentTenant [L5-L22]
            └─ uses_service TenantIdentificationService
              └─ method GetCurrentTenant [L20]
                └─ implementation Workpapers.Next.ApplicationService.Services.TenantIdentificationService.GetCurrentTenant [L15-L131]
      └─ uses_service IControlledRepository<Binder>
        └─ method ReadQuery [L101]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L117]
          └─ implementation Workpapers.Next.Services.Features.Requests.RequestProcessor.ProcessAsync [L9-L32]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L121]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L109]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L92]

[web] DELETE /api/binders/{binderId:Guid}/worksheets/{id:guid}/commands/{commandId:guid}  (Workpapers.Next.API.Controllers.Workpapers.Worksheets.BinderWorksheetsController.RemoveWorksheetCommands)  [L390–L400] status=200 [auth=AuthorizationPolicies.User]
  └─ calls WorksheetRepository.WriteQuery [L393]
  └─ write Worksheet [L393]
    └─ reads_from Worksheets
  └─ uses_service IControlledRepository<Worksheet>
    └─ method WriteQuery [L393]
      └─ ... (no implementation details available)

[web] PUT /api/binders/{binderId:Guid}/worksheets/{id:guid}/hyperlinks/{hyperlinkId:guid}/reorder  (Workpapers.Next.API.Controllers.Workpapers.Worksheets.BinderWorksheetsController.ReorderHyperlink)  [L347–L360] status=200 [auth=AuthorizationPolicies.User]
  └─ calls WorksheetRepository.WriteQuery [L350]
  └─ write Worksheet [L350]
    └─ reads_from Worksheets
  └─ uses_service IControlledRepository<Worksheet>
    └─ method WriteQuery [L350]
      └─ ... (no implementation details available)
  └─ sends_request CanIAccessBinderQuery [L355]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Binders.CanIAccessBinderQueryHandler.Handle [L60–L126]
      └─ uses_service UserService
        └─ method GetUserId [L91]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
      └─ uses_service RequestInfoService
        └─ method IsValidServiceAccountRequest [L89]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
      └─ uses_service TenantService
        └─ method GetCurrentTenant [L92]
          └─ implementation Workpapers.Next.Services.Features.Tenants.TenantService.GetCurrentTenant [L5-L22]
            └─ uses_service TenantIdentificationService
              └─ method GetCurrentTenant [L20]
                └─ implementation Workpapers.Next.ApplicationService.Services.TenantIdentificationService.GetCurrentTenant [L15-L131]
      └─ uses_service IControlledRepository<Binder>
        └─ method ReadQuery [L101]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L117]
          └─ implementation Workpapers.Next.Services.Features.Requests.RequestProcessor.ProcessAsync [L9-L32]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L121]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L109]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L92]

[web] GET /api/binders/{binderId:Guid}/worksheets/  (Workpapers.Next.API.Controllers.Workpapers.Worksheets.BinderWorksheetsController.Search)  [L61–L91] status=200 [auth=AuthorizationPolicies.User]
  └─ sends_request CanIAccessBinderQuery [L72]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Binders.CanIAccessBinderQueryHandler.Handle [L60–L126]
      └─ uses_service UserService
        └─ method GetUserId [L91]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
      └─ uses_service RequestInfoService
        └─ method IsValidServiceAccountRequest [L89]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
      └─ uses_service TenantService
        └─ method GetCurrentTenant [L92]
          └─ implementation Workpapers.Next.Services.Features.Tenants.TenantService.GetCurrentTenant [L5-L22]
            └─ uses_service TenantIdentificationService
              └─ method GetCurrentTenant [L20]
                └─ implementation Workpapers.Next.ApplicationService.Services.TenantIdentificationService.GetCurrentTenant [L15-L131]
      └─ uses_service IControlledRepository<Binder>
        └─ method ReadQuery [L101]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L117]
          └─ implementation Workpapers.Next.Services.Features.Requests.RequestProcessor.ProcessAsync [L9-L32]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L121]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L109]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L92]

[web] PUT /api/binders/{binderId:Guid}/worksheets/{id:Guid}  (Workpapers.Next.API.Controllers.Workpapers.Worksheets.BinderWorksheetsController.Update)  [L168–L182] status=200 [auth=AuthorizationPolicies.User]
  └─ calls WorksheetRepository.WriteQuery [L171]
  └─ write Worksheet [L171]
    └─ reads_from Worksheets
  └─ uses_service IControlledRepository<Worksheet>
    └─ method WriteQuery [L171]
      └─ ... (no implementation details available)
  └─ sends_request CanIAccessBinderQuery [L176]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Binders.CanIAccessBinderQueryHandler.Handle [L60–L126]
      └─ uses_service UserService
        └─ method GetUserId [L91]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
      └─ uses_service RequestInfoService
        └─ method IsValidServiceAccountRequest [L89]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
      └─ uses_service TenantService
        └─ method GetCurrentTenant [L92]
          └─ implementation Workpapers.Next.Services.Features.Tenants.TenantService.GetCurrentTenant [L5-L22]
            └─ uses_service TenantIdentificationService
              └─ method GetCurrentTenant [L20]
                └─ implementation Workpapers.Next.ApplicationService.Services.TenantIdentificationService.GetCurrentTenant [L15-L131]
      └─ uses_service IControlledRepository<Binder>
        └─ method ReadQuery [L101]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L117]
          └─ implementation Workpapers.Next.Services.Features.Requests.RequestProcessor.ProcessAsync [L9-L32]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L121]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L109]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L92]

[web] PUT /api/binders/{binderId:Guid}/worksheets/{id:guid}/hyperlinks/{hyperlinkId:guid}  (Workpapers.Next.API.Controllers.Workpapers.Worksheets.BinderWorksheetsController.UpdateHyperlink)  [L332–L345] status=200 [auth=AuthorizationPolicies.User]
  └─ calls WorksheetRepository.WriteQuery [L335]
  └─ write Worksheet [L335]
    └─ reads_from Worksheets
  └─ uses_service IControlledRepository<Worksheet>
    └─ method WriteQuery [L335]
      └─ ... (no implementation details available)
  └─ sends_request CanIAccessBinderQuery [L340]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Binders.CanIAccessBinderQueryHandler.Handle [L60–L126]
      └─ uses_service UserService
        └─ method GetUserId [L91]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
          └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUserId [L20-L295]
      └─ uses_service RequestInfoService
        └─ method IsValidServiceAccountRequest [L89]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
      └─ uses_service TenantService
        └─ method GetCurrentTenant [L92]
          └─ implementation Workpapers.Next.Services.Features.Tenants.TenantService.GetCurrentTenant [L5-L22]
            └─ uses_service TenantIdentificationService
              └─ method GetCurrentTenant [L20]
                └─ implementation Workpapers.Next.ApplicationService.Services.TenantIdentificationService.GetCurrentTenant [L15-L131]
      └─ uses_service IControlledRepository<Binder>
        └─ method ReadQuery [L101]
          └─ ... (no implementation details available)
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L117]
          └─ implementation Workpapers.Next.Services.Features.Requests.RequestProcessor.ProcessAsync [L9-L32]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle
      └─ uses_cache IDistributedCache.SetRecordAsync [write] [L121]
      └─ uses_cache IDistributedCache.DoesRecordExistAsync [access] [L109]
      └─ uses_cache IDistributedCache.CreateAccessKey [write] [L92]

[web] GET /api/binders/{binderId:Guid}/worksheets  (Workpapers.Next.API.Controllers.Workpapers.Worksheets.BinderWorksheetsController.UpdateMatterCounts)  [L448–L455] status=200 [auth=AuthorizationPolicies.User]

[web] POST /api/binders/{binderId:Guid}/worksheets/{worksheetId:guid}/key-values  (Workpapers.Next.API.Controllers.Workpapers.Worksheets.WorksheetKeyValuesController.CreateWorksheetKeyValue)  [L68–L79] status=201 [auth=AuthorizationPolicies.User]
  └─ calls WorksheetRepository.WriteQuery [L71]
  └─ write Worksheet [L71]
    └─ reads_from Worksheets
  └─ uses_service IControlledRepository<Worksheet>
    └─ method WriteQuery [L71]
      └─ ... (no implementation details available)
  └─ sends_request CanIAccessWorksheetQuery [L74]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Worksheets.CanIAccessWorksheetQueryHandler.Handle [L36–L60]
      └─ uses_service RequestInfoService
        └─ method IsValidServiceAccountRequest [L54]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L58]
          └─ implementation Workpapers.Next.Services.Features.Requests.RequestProcessor.ProcessAsync [L9-L32]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle

[web] DELETE /api/binders/{binderId:Guid}/worksheets/{worksheetId:guid}/key-values/{id:guid}  (Workpapers.Next.API.Controllers.Workpapers.Worksheets.WorksheetKeyValuesController.DeleteWorksheetKeyValue)  [L94–L105] status=200 [auth=AuthorizationPolicies.User]
  └─ calls WorksheetRepository.WriteQuery [L97]
  └─ write Worksheet [L97]
    └─ reads_from Worksheets
  └─ uses_service IControlledRepository<Worksheet>
    └─ method WriteQuery [L97]
      └─ ... (no implementation details available)
  └─ sends_request CanIAccessWorksheetQuery [L100]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Worksheets.CanIAccessWorksheetQueryHandler.Handle [L36–L60]
      └─ uses_service RequestInfoService
        └─ method IsValidServiceAccountRequest [L54]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L58]
          └─ implementation Workpapers.Next.Services.Features.Requests.RequestProcessor.ProcessAsync [L9-L32]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle

[web] GET /api/binders/{binderId:Guid}/worksheets/{worksheetId:guid}/key-values/{id:guid}  (Workpapers.Next.API.Controllers.Workpapers.Worksheets.WorksheetKeyValuesController.GetWorksheetKeyValue)  [L39–L50] status=200 [auth=AuthorizationPolicies.User]
  └─ maps_to KeyValueDto [L44]
  └─ calls WorksheetRepository.ReadQuery [L44]
  └─ query Worksheet [L44]
    └─ reads_from Worksheets
  └─ uses_service IControlledRepository<Worksheet>
    └─ method ReadQuery [L44]
      └─ ... (no implementation details available)
  └─ sends_request CanIAccessWorksheetQuery [L42]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Worksheets.CanIAccessWorksheetQueryHandler.Handle [L36–L60]
      └─ uses_service RequestInfoService
        └─ method IsValidServiceAccountRequest [L54]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L58]
          └─ implementation Workpapers.Next.Services.Features.Requests.RequestProcessor.ProcessAsync [L9-L32]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle

[web] GET /api/binders/{binderId:Guid}/worksheets/{worksheetId:guid}/key-values  (Workpapers.Next.API.Controllers.Workpapers.Worksheets.WorksheetKeyValuesController.GetWorksheetKeyValues)  [L52–L66] status=200 [auth=AuthorizationPolicies.User]
  └─ maps_to KeyValueDto [L57]
  └─ calls WorksheetRepository.ReadQuery [L57]
  └─ query Worksheet [L57]
    └─ reads_from Worksheets
  └─ uses_service IControlledRepository<Worksheet>
    └─ method ReadQuery [L57]
      └─ ... (no implementation details available)
  └─ sends_request CanIAccessWorksheetQuery [L55]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Worksheets.CanIAccessWorksheetQueryHandler.Handle [L36–L60]
      └─ uses_service RequestInfoService
        └─ method IsValidServiceAccountRequest [L54]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L58]
          └─ implementation Workpapers.Next.Services.Features.Requests.RequestProcessor.ProcessAsync [L9-L32]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle

[web] PUT /api/binders/{binderId:Guid}/worksheets/{worksheetId:guid}/key-values/{id:guid}  (Workpapers.Next.API.Controllers.Workpapers.Worksheets.WorksheetKeyValuesController.UpdateWorksheetKeyValue)  [L81–L92] status=200 [auth=AuthorizationPolicies.User]
  └─ calls WorksheetRepository.WriteQuery [L84]
  └─ write Worksheet [L84]
    └─ reads_from Worksheets
  └─ uses_service IControlledRepository<Worksheet>
    └─ method WriteQuery [L84]
      └─ ... (no implementation details available)
  └─ sends_request CanIAccessWorksheetQuery [L87]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Worksheets.CanIAccessWorksheetQueryHandler.Handle [L36–L60]
      └─ uses_service RequestInfoService
        └─ method IsValidServiceAccountRequest [L54]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
          └─ implementation Workpapers.Next.Services.Features.RequestInfoService.IsValidServiceAccountRequest [L11-L84]
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L58]
          └─ implementation Workpapers.Next.Services.Features.Requests.RequestProcessor.ProcessAsync [L9-L32]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle

[web] DELETE /api/workpapers/{id:Guid}  (Workpapers.Next.API.Controllers.WorkpapersController.Delete)  [L91–L105] status=200
  └─ uses_service UnitOfWork
    └─ method Table [L94]
      └─ ... (no implementation details available)
  └─ uses_service UserService
    └─ method GetFirmId [L99]
      └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetFirmId [L20-L295]

[web] GET /api/workpapers/{id:Guid}  (Workpapers.Next.API.Controllers.WorkpapersController.Get)  [L45–L49] status=200
  └─ sends_request GetWorkpaperQuery [L48]
    └─ handled_by Workpapers.Next.Data.Queries.Workpapers.GetWorkpaperQueryHandler.Handle [L30–L69]
      └─ maps_to WorkpaperDto [L43]
      └─ uses_service UnitOfWork
        └─ method Table [L43]
          └─ ... (no implementation details available)

[web] GET /api/workpapers/byfirm  (Workpapers.Next.API.Controllers.WorkpapersController.GetForFirm)  [L57–L61] status=200

[web] GET /api/workpapers/byoffice  (Workpapers.Next.API.Controllers.WorkpapersController.GetForOffice)  [L63–L67] status=200

[web] GET /api/workpapers/byteam  (Workpapers.Next.API.Controllers.WorkpapersController.GetForTeam)  [L69–L73] status=200

[web] GET /api/workpapers/byuser  (Workpapers.Next.API.Controllers.WorkpapersController.GetForUser)  [L51–L55] status=200

[web] POST /api/workpapers/  (Workpapers.Next.API.Controllers.WorkpapersController.Post)  [L75–L81] status=201
  └─ uses_service UserService
    └─ method GetFirmId [L78]
      └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetFirmId [L20-L295]
  └─ sends_request CreateUpdateWorkpaperCommand [L78]
    └─ handled_by Workpapers.Next.Data.Commands.Workpapers.CreateUpdateWorkpaperCommandHandler.Handle [L14–L65]
      └─ uses_service UnitOfWork
        └─ method Table [L29]
          └─ ... (no implementation details available)

[web] PUT /api/workpapers/  (Workpapers.Next.API.Controllers.WorkpapersController.Put)  [L83–L89] status=200
  └─ uses_service UserService
    └─ method GetFirmId [L86]
      └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetFirmId [L20-L295]
  └─ sends_request CreateUpdateWorkpaperCommand [L86]
    └─ handled_by Workpapers.Next.Data.Commands.Workpapers.CreateUpdateWorkpaperCommandHandler.Handle [L14–L65]
      └─ uses_service UnitOfWork
        └─ method Table [L29]
          └─ ... (no implementation details available)

[web] PUT /api/workpapers/{id:Guid}/status  (Workpapers.Next.API.Controllers.WorkpapersController.UpdateStatus)  [L107–L121] status=200
  └─ uses_service UnitOfWork
    └─ method Table [L110]
      └─ ... (no implementation details available)
  └─ uses_service UserService
    └─ method GetFirmId [L115]
      └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetFirmId [L20-L295]

[web] GET /api/worksheets/download  (Workpapers.Next.API.Controllers.WorksheetsController.Download)  [L83–L99] status=200
  └─ uses_service StorageService
    └─ method CreateDownloadUrl [L95]
      └─ implementation Workpapers.Next.Data.Storage.StorageService.CreateDownloadUrl [L17-L282]
  └─ uses_service UserService
    └─ method GetUser [L86]
      └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUser [L20-L295]
  └─ uses_storage StorageService.CreateDownloadUrl [L95]
  └─ sends_request GetTemplateForDateTimeQuery [L86]
    └─ handled_by Workpapers.Next.Data.Queries.Templates.GetTemplateForDateTimeQueryHandler.Handle [L12–L57]
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L23]
          └─ implementation Workpapers.Next.Services.Features.Requests.RequestProcessor.ProcessAsync [L9-L32]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle

[web] GET /api/worksheets/archive-maps  (Workpapers.Next.API.Controllers.WorksheetsController.GetArchivedWorkpaperRecordTemplateMappings)  [L71–L78] status=200
  └─ maps_to ArchivedWorkpaperRecordTemplateMappingLightDto [L74]
    └─ automapper.registration WorkpapersMappingProfile (ArchivedWorkpaperRecordTemplateMapping->ArchivedWorkpaperRecordTemplateMappingLightDto) [L364]
  └─ calls ArchivedWorkpaperRecordTemplateMappingRepository.ReadQuery [L74]
  └─ query ArchivedWorkpaperRecordTemplateMapping [L74]
    └─ reads_from ArchivedWorkpaperRecordTemplateMappings
  └─ uses_service IControlledRepository<ArchivedWorkpaperRecordTemplateMapping>
    └─ method ReadQuery [L74]
      └─ ... (no implementation details available)

[web] GET /api/worksheets  (Workpapers.Next.API.Controllers.WorksheetsController.GetForProduct)  [L61–L69] status=200
  └─ uses_service UserService
    └─ method GetFirmId [L64]
      └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetFirmId [L20-L295]
  └─ sends_request GetProductQuery [L64]
    └─ handled_by Workpapers.Next.ApplicationService.Queries.Licensing.Products.GetProductQueryHandler.Handle [L57–L101]
      └─ uses_service UnitOfWork
        └─ method Table [L71]
          └─ ... (no implementation details available)
  └─ sends_request AllWorkpaperRecordTemplatesForProductV2Query [L66]
    └─ handled_by Workpapers.Next.Data.Queries.Templates.AllWorkpaperRecordTemplatesForProductQueryHandler.Handle [L18–L141]
      └─ maps_to SectionWithWorkpaperRecordTemplateIdsDto [L54]
      └─ maps_to WorkpaperRecordTemplateV2Dto [L88]
        └─ converts_to LegacyDocumentDto [L343]
        └─ converts_to WorkpaperRecordTemplateV2Dto [L290]
      └─ maps_to WorkpaperRecordTemplateV2Dto [L106]
        └─ converts_to LegacyDocumentDto [L343]
        └─ converts_to WorkpaperRecordTemplateV2Dto [L290]
      └─ uses_service IControlledRepository<ExcludedWorkpaperRecordTemplate>
        └─ method ReadQuery [L65]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<Product>
        └─ method ReadQuery [L54]
          └─ ... (no implementation details available)
      └─ uses_service IControlledRepository<WorkpaperRecordTemplate>
        └─ method ReadQuery [L69]
          └─ ... (no implementation details available)
      └─ uses_service IMapper
        └─ method ConfigurationProvider [L57]
          └─ ... (no implementation details available)

[web] POST /api/worksheets/legacyworksheetsmapper  (Workpapers.Next.API.Controllers.WorksheetsController.LegacyWorksheetsMapper)  [L124–L162] status=201
  └─ sends_request GetWorkpaperRecordTemplateIdFromLegacyDocumentIdQuery [L147]
    └─ handled_by Workpapers.Next.Data.Queries.Workpapers.Legacy.GetWorkpaperRecordTemplateIdFromLegacyDocumentIdQueryHandler.Handle [L13–L34]
      └─ uses_service UnitOfWork
        └─ method SqlQuery [L24]
          └─ ... (no implementation details available)

[web] GET /api/worksheets/templatewithdownload  (Workpapers.Next.API.Controllers.WorksheetsController.TemplateWithDownload)  [L104–L122] status=200
  └─ maps_to WorkpaperRecordTemplateV2Dto [L118]
    └─ converts_to LegacyDocumentDto [L343]
    └─ converts_to WorkpaperRecordTemplateV2Dto [L290]
  └─ uses_service StorageService
    └─ method CreateDownloadUrl [L119]
      └─ implementation Workpapers.Next.Data.Storage.StorageService.CreateDownloadUrl [L17-L282]
  └─ uses_service UnitOfWork
    └─ method Table [L118]
      └─ ... (no implementation details available)
  └─ uses_service UserService
    └─ method GetUser [L107]
      └─ implementation Workpapers.Next.ApplicationService.Services.UserService.GetUser [L20-L295]
  └─ uses_storage StorageService.CreateDownloadUrl [L119]
  └─ sends_request GetTemplateForDateTimeQuery [L107]
    └─ handled_by Workpapers.Next.Data.Queries.Templates.GetTemplateForDateTimeQueryHandler.Handle [L12–L57]
      └─ uses_service RequestProcessor
        └─ method ProcessAsync [L23]
          └─ implementation Workpapers.Next.Services.Features.Requests.RequestProcessor.ProcessAsync [L9-L32]
            └─ constructs RequestProcessorWrapper<TRequest,TResult>
            └─ resolves IPipelineBehavior<TRequest,TResult> chain
            └─ invokes IAsyncRequestHandler<TRequest,TResult>.Handle

[web] GET /workpapers/v1/binders/{binderId:Guid}  (Workpapers.Next.API.External.Controllers.v1.Workpapers.BindersController.Get)  [L49–L54] status=200
  └─ maps_to BinderDto [L52]
    └─ automapper.registration ExternalApiMappingProfile (Binder->BinderDto) [L58]
    └─ automapper.registration WorkpapersMappingProfile (Binder->BinderDto) [L450]
  └─ calls BinderRepository.ReadQuery [L52]
  └─ query Binder [L52]
    └─ reads_from Binders
  └─ uses_service IControlledRepository<Binder>
    └─ method ReadQuery [L52]
      └─ ... (no implementation details available)

[web] GET /workpapers/v1/binders/detailed  (Workpapers.Next.API.External.Controllers.v1.Workpapers.BindersController.GetBinderDetailedQuery)  [L81–L88] status=200
  └─ calls BinderRepository.ReadQuery [L84]
  └─ query Binder [L84]
    └─ reads_from Binders
  └─ uses_service IControlledRepository<Binder>
    └─ method ReadQuery [L84]
      └─ ... (no implementation details available)

[web] GET /workpapers/v1/binders/  (Workpapers.Next.API.External.Controllers.v1.Workpapers.BindersController.GetBinderMinimalQuery)  [L62–L69] status=200
  └─ calls BinderRepository.ReadQuery [L65]
  └─ query Binder [L65]
    └─ reads_from Binders
  └─ uses_service IControlledRepository<Binder>
    └─ method ReadQuery [L65]
      └─ ... (no implementation details available)

[web] GET /workpapers/v1/binders/{binderId:Guid}/tax-info  (Workpapers.Next.API.External.Controllers.v1.Workpapers.BindersController.GetBinderTaxInfo)  [L96–L100] status=200
  └─ uses_service IWorkpapersProxyService (AddScoped)
    └─ method Get [L99]
      └─ implementation Workpapers.Next.API.External.Features.WorkpapersProxy.WorkpapersProxyService.Get [L13-L83]
        └─ uses_client WorkpapersClient [L31]
        └─ uses_service WorkpapersClient
          └─ method Get [L31]
            └─ ... (no implementation details available)

[web] GET /workpapers/v1/binders/{binderId:Guid}/trial-balance  (Workpapers.Next.API.External.Controllers.v1.Workpapers.BindersController.GetIndexAccountBalanceInfo)  [L108–L114] status=200
  └─ uses_service IWorkpapersProxyService (AddScoped)
    └─ method Get [L111]
      └─ implementation Workpapers.Next.API.External.Features.WorkpapersProxy.WorkpapersProxyService.Get [L13-L83]
        └─ uses_client WorkpapersClient [L31]
        └─ uses_service WorkpapersClient
          └─ method Get [L31]
            └─ ... (no implementation details available)

[web] GET /workpapers/v1/binder-types/{binderTypeId:Guid}  (Workpapers.Next.API.External.Controllers.v1.Workpapers.BinderTypesController.Get)  [L42–L48] status=200
  └─ maps_to BinderTypeDto [L45]
    └─ automapper.registration WorkpapersMappingProfile (BinderType->BinderTypeDto) [L761]
    └─ automapper.registration ExternalApiMappingProfile (BinderType->BinderTypeDto) [L79]
  └─ calls BinderTypeRepository.ReadQuery [L45]
  └─ query BinderType [L45]
    └─ reads_from BinderTypes
  └─ uses_service IControlledRepository<BinderType>
    └─ method ReadQuery [L45]
      └─ ... (no implementation details available)

[web] GET /workpapers/v1/binder-types/  (Workpapers.Next.API.External.Controllers.v1.Workpapers.BinderTypesController.GetBinderTypesQuery)  [L55–L61] status=200
  └─ maps_to BinderTypeDto [L58]
    └─ automapper.registration WorkpapersMappingProfile (BinderType->BinderTypeDto) [L761]
    └─ automapper.registration ExternalApiMappingProfile (BinderType->BinderTypeDto) [L79]
  └─ calls BinderTypeRepository.ReadQuery [L58]
  └─ query BinderType [L58]
    └─ reads_from BinderTypes
  └─ uses_service IControlledRepository<BinderType>
    └─ method ReadQuery [L58]
      └─ ... (no implementation details available)

[web] GET /workpapers/v1/custom-statuses/{statusId:Guid}  (Workpapers.Next.API.External.Controllers.v1.Workpapers.CustomStatusesController.Get)  [L42–L48] status=200
  └─ maps_to CustomStatusDto [L45]
    └─ automapper.registration ExternalApiMappingProfile (CustomStatus->CustomStatusDto) [L146]
    └─ automapper.registration WorkpapersMappingProfile (CustomStatus->CustomStatusDto) [L399]
  └─ calls CustomStatusRepository.ReadQuery [L45]
  └─ query CustomStatus [L45]
    └─ reads_from CustomStatuses
  └─ uses_service IControlledRepository<CustomStatus> (AddScoped)
    └─ method ReadQuery [L45]
      └─ ... (no implementation details available)

[web] GET /workpapers/v1/custom-statuses/  (Workpapers.Next.API.External.Controllers.v1.Workpapers.CustomStatusesController.GetStatusesQuery)  [L55–L61] status=200
  └─ maps_to CustomStatusDto [L58]
    └─ automapper.registration ExternalApiMappingProfile (CustomStatus->CustomStatusDto) [L146]
    └─ automapper.registration WorkpapersMappingProfile (CustomStatus->CustomStatusDto) [L399]
  └─ calls CustomStatusRepository.ReadQuery [L58]
  └─ query CustomStatus [L58]
    └─ reads_from CustomStatuses
  └─ uses_service IControlledRepository<CustomStatus> (AddScoped)
    └─ method ReadQuery [L58]
      └─ ... (no implementation details available)

[web] GET /workpapers/v1/matters/{matterId:Guid}  (Workpapers.Next.API.External.Controllers.v1.Workpapers.MattersController.Get)  [L43–L49] status=200
  └─ maps_to MatterDto [L46]
    └─ automapper.registration ExternalApiMappingProfile (Matter->MatterDto) [L206]
    └─ automapper.registration WorkpapersMappingProfile (Matter->MatterDto) [L781]
  └─ calls MatterRepository.ReadQuery [L46]
  └─ query Matter [L46]
    └─ reads_from Matters
  └─ uses_service IControlledRepository<Matter>
    └─ method ReadQuery [L46]
      └─ ... (no implementation details available)

[web] GET /workpapers/v1/matters/detailed  (Workpapers.Next.API.External.Controllers.v1.Workpapers.MattersController.GetMattersDetailedQuery)  [L90–L97] status=200
  └─ calls MatterRepository.ReadQuery [L93]
  └─ query Matter [L93]
    └─ reads_from Matters
  └─ uses_service IControlledRepository<Matter>
    └─ method ReadQuery [L93]
      └─ ... (no implementation details available)

[web] GET /workpapers/v1/matters/  (Workpapers.Next.API.External.Controllers.v1.Workpapers.MattersController.GetMattersMinimalQuery)  [L71–L78] status=200
  └─ calls MatterRepository.ReadQuery [L74]
  └─ query Matter [L74]
    └─ reads_from Matters
  └─ uses_service IControlledRepository<Matter>
    └─ method ReadQuery [L74]
      └─ ... (no implementation details available)

[web] GET /workpapers/v1/matters/{matterId:Guid}/messages  (Workpapers.Next.API.External.Controllers.v1.Workpapers.MattersController.GetMatterWithMessages)  [L57–L63] status=200
  └─ maps_to MatterWithMessagesDto [L60]
    └─ automapper.registration ExternalApiMappingProfile (Matter->MatterWithMessagesDto) [L210]
    └─ automapper.registration WorkpapersMappingProfile (Matter->MatterWithMessagesDto) [L784]
  └─ calls MatterRepository.ReadQuery [L60]
  └─ query Matter [L60]
    └─ reads_from Matters
  └─ uses_service IControlledRepository<Matter>
    └─ method ReadQuery [L60]
      └─ ... (no implementation details available)

[web] GET /workpapers/v1/workpaper-records/{recordId:Guid}  (Workpapers.Next.API.External.Controllers.v1.Workpapers.RecordsController.Get)  [L44–L50] status=200
  └─ maps_to WorkpaperRecordDto [L47]
    └─ automapper.registration ExternalApiMappingProfile (WorkpaperRecord->WorkpaperRecordDto) [L169]
    └─ automapper.registration WorkpapersMappingProfile (WorkpaperRecord->WorkpaperRecordDto) [L562]
  └─ calls WorkpaperRecordRepository.ReadQuery [L47]
  └─ query WorkpaperRecord [L47]
    └─ reads_from WorkpaperRecords
  └─ uses_service IControlledRepository<WorkpaperRecord>
    └─ method ReadQuery [L47]
      └─ ... (no implementation details available)

[web] GET /workpapers/v1/workpaper-records/detailed  (Workpapers.Next.API.External.Controllers.v1.Workpapers.RecordsController.GetRecordsDetailedQuery)  [L76–L82] status=200
  └─ calls WorkpaperRecordRepository.ReadQuery [L79]
  └─ query WorkpaperRecord [L79]
    └─ reads_from WorkpaperRecords
  └─ uses_service IControlledRepository<WorkpaperRecord>
    └─ method ReadQuery [L79]
      └─ ... (no implementation details available)

[web] GET /workpapers/v1/workpaper-records/  (Workpapers.Next.API.External.Controllers.v1.Workpapers.RecordsController.GetRecordsMinimalQuery)  [L58–L64] status=200
  └─ calls WorkpaperRecordRepository.ReadQuery [L61]
  └─ query WorkpaperRecord [L61]
    └─ reads_from WorkpaperRecords
  └─ uses_service IControlledRepository<WorkpaperRecord>
    └─ method ReadQuery [L61]
      └─ ... (no implementation details available)

[web] GET /workpapers/v1/source-accounts/{sourceAccountId:Guid}  (Workpapers.Next.API.External.Controllers.v1.Workpapers.SourceAccountsController.Get)  [L43–L49] status=200
  └─ maps_to SourceAccountDto [L46]
    └─ automapper.registration WorkpapersMappingProfile (SourceAccount->SourceAccountDto) [L625]
    └─ automapper.registration CirrusMappingProfile (SourceAccount->SourceAccountDto) [L256]
    └─ automapper.registration ExternalApiMappingProfile (SourceAccount->SourceAccountDto) [L105]
  └─ calls SourceAccountRepository.ReadQuery [L46]
  └─ query SourceAccount [L46]
    └─ reads_from SourceAccounts
  └─ uses_service IControlledRepository<SourceAccount>
    └─ method ReadQuery [L46]
      └─ ... (no implementation details available)

[web] GET /workpapers/v1/source-accounts/detailed  (Workpapers.Next.API.External.Controllers.v1.Workpapers.SourceAccountsController.GetSourceAccountsDetailedQuery)  [L75–L81] status=200
  └─ calls SourceAccountRepository.ReadQuery [L78]
  └─ query SourceAccount [L78]
    └─ reads_from SourceAccounts
  └─ uses_service IControlledRepository<SourceAccount>
    └─ method ReadQuery [L78]
      └─ ... (no implementation details available)

[web] GET /workpapers/v1/source-accounts/  (Workpapers.Next.API.External.Controllers.v1.Workpapers.SourceAccountsController.GetSourceAccountsMinimalQuery)  [L57–L63] status=200
  └─ calls SourceAccountRepository.ReadQuery [L60]
  └─ query SourceAccount [L60]
    └─ reads_from SourceAccounts
  └─ uses_service IControlledRepository<SourceAccount>
    └─ method ReadQuery [L60]
      └─ ... (no implementation details available)

[web] GET /workpapers/v1/sources/{sourceId:Guid}  (Workpapers.Next.API.External.Controllers.v1.Workpapers.SourcesController.Get)  [L43–L49] status=200
  └─ maps_to SourceDto [L46]
    └─ automapper.registration ExternalApiMappingProfile (Source->SourceDto) [L95]
    └─ automapper.registration CirrusMappingProfile (Source->SourceDto) [L216]
    └─ automapper.registration WorkpapersMappingProfile (Source->SourceDto) [L598]
  └─ calls SourceRepository.ReadQuery [L46]
  └─ query Source [L46]
  └─ uses_service IControlledRepository<Source>
    └─ method ReadQuery [L46]
      └─ ... (no implementation details available)

[web] GET /workpapers/v1/sources/detailed  (Workpapers.Next.API.External.Controllers.v1.Workpapers.SourcesController.GetSourcesDetailedQuery)  [L75–L81] status=200
  └─ calls SourceRepository.ReadQuery [L78]
  └─ query Source [L78]
  └─ uses_service IControlledRepository<Source>
    └─ method ReadQuery [L78]
      └─ ... (no implementation details available)

[web] GET /workpapers/v1/sources/  (Workpapers.Next.API.External.Controllers.v1.Workpapers.SourcesController.GetSourcesMinimalQuery)  [L57–L63] status=200
  └─ calls SourceRepository.ReadQuery [L60]
  └─ query Source [L60]
  └─ uses_service IControlledRepository<Source>
    └─ method ReadQuery [L60]
      └─ ... (no implementation details available)

[web] GET /workpapers/v1/worksheets/{worksheetId:Guid}  (Workpapers.Next.API.External.Controllers.v1.Workpapers.WorksheetsController.Get)  [L45–L51] status=200
  └─ maps_to WorksheetDto [L48]
    └─ automapper.registration ExternalApiMappingProfile (Worksheet->WorksheetDto) [L134]
    └─ automapper.registration WorkpapersMappingProfile (Worksheet->WorksheetDto) [L507]
  └─ calls WorksheetRepository.ReadQuery [L48]
  └─ query Worksheet [L48]
    └─ reads_from Worksheets
  └─ uses_service IControlledRepository<Worksheet>
    └─ method ReadQuery [L48]
      └─ ... (no implementation details available)

[web] GET /workpapers/v1/worksheets/detailed  (Workpapers.Next.API.External.Controllers.v1.Workpapers.WorksheetsController.GetWorksheetsDetailedQuery)  [L77–L83] status=200
  └─ calls WorksheetRepository.ReadQuery [L80]
  └─ query Worksheet [L80]
    └─ reads_from Worksheets
  └─ uses_service IControlledRepository<Worksheet>
    └─ method ReadQuery [L80]
      └─ ... (no implementation details available)

[web] GET /workpapers/v1/worksheets/  (Workpapers.Next.API.External.Controllers.v1.Workpapers.WorksheetsController.GetWorksheetsMinimalQuery)  [L59–L65] status=200
  └─ calls WorksheetRepository.ReadQuery [L62]
  └─ query Worksheet [L62]
    └─ reads_from Worksheets
  └─ uses_service IControlledRepository<Worksheet>
    └─ method ReadQuery [L62]
      └─ ... (no implementation details available)

